<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>IDEå®‰è£…wakatimeæ’ä»¶åŠä»‹ç»</title>
      <link href="/2025/09/03/zhong-jian-jian/ide-an-zhuang-wakatime-cha-jian-ji-jie-shao/"/>
      <url>/2025/09/03/zhong-jian-jian/ide-an-zhuang-wakatime-cha-jian-ji-jie-shao/</url>
      
        <content type="html"><![CDATA[<blockquote><ol><li>Wakapiç§æœåœ°å€ï¼š<a href="https://xxx.your-domain.com/">https://xxx.your-domain.com</a></li><li>Wakapiç§æœapiåœ°å€ï¼š<a href="https://xxx.your-domain.com/api">https://xxx.your-domain.com/api</a></li><li>æ³¨å†Œå¥½åï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒ-&gt;Show API Keyè·å¾—API Keyå€¼</li></ol></blockquote><h1 id="è·å¾—æ’ä»¶"><a href="#è·å¾—æ’ä»¶" class="headerlink" title="è·å¾—æ’ä»¶"></a>è·å¾—æ’ä»¶</h1><ol><li>è®¿é—®ï¼š<a href="https://wakatime.com/plugins">https://wakatime.com/plugins</a></li><li>è¾“å…¥æ‚¨ä½¿ç”¨çš„IDEåç§°ï¼Œå›è½¦ï¼Œç‚¹å‡»å›¾æ ‡è¿›å…¥è¯¦æƒ…é¡µé¢</li></ol><span id="more"></span><h2 id="ã€ç¤ºä¾‹ã€‘IntelliJ-IDEA"><a href="#ã€ç¤ºä¾‹ã€‘IntelliJ-IDEA" class="headerlink" title="ã€ç¤ºä¾‹ã€‘IntelliJ IDEA"></a>ã€ç¤ºä¾‹ã€‘IntelliJ IDEA</h2><ol><li>åœ¨ IntelliJ IDEA ä¸­ï¼Œæ‰“å¼€æ’ä»¶è®¾ç½®èœå•ã€‚<ol><li>Macï¼šPreferences â†’ Plugins</li><li>Winï¼šFile â†’ Settingsâ€¦ â†’ Plugins</li></ol></li><li>æœç´¢ wakatimeã€‚</li><li>ç‚¹å‡»ç»¿è‰²çš„ Install æŒ‰é’®ã€‚</li><li>é‡æ–°å¯åŠ¨ IntelliJ IDEAã€‚</li><li>è¾“å…¥æ‚¨çš„ API Keyï¼Œç„¶åç‚¹å‡» Saveã€‚å¦‚æœæœªæç¤ºè¾“å…¥ API Keyï¼Œè¯·è¿›å…¥ IntelliJ IDEA å†…çš„ Tools â†’ WakaTime Settings èœå•è¿›è¡Œè®¾ç½®ã€‚</li><li>åƒå¹³å¸¸ä¸€æ ·ä½¿ç”¨ IntelliJ IDEAï¼Œæ‚¨çš„ç¼–ç æ´»åŠ¨å°†ä¼šæ˜¾ç¤ºåœ¨ WakaTime ä»ªè¡¨æ¿ä¸Šã€‚</li></ol><h2 id="ã€ç¤ºä¾‹ã€‘VS-Code-Trae"><a href="#ã€ç¤ºä¾‹ã€‘VS-Code-Trae" class="headerlink" title="ã€ç¤ºä¾‹ã€‘VS Code&#x2F;Trae"></a>ã€ç¤ºä¾‹ã€‘VS Code&#x2F;Trae</h2><ol><li><p>æŒ‰ F1 æˆ– CMD + Shift + Pï¼Œç„¶åè¾“å…¥ installã€‚é€‰æ‹©æ‰©å±•ï¼šå®‰è£…æ‰©å±•ã€‚</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/92d8cc194c9a.png"></p></li><li><p>è¾“å…¥ wakatime ç„¶åæŒ‰å›è½¦ã€‚</p></li></ol><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/4b881572c35f.png"></p><ol start="3"><li>è¾“å…¥ä½ çš„APIå¯†é’¥ï¼Œç„¶åæŒ‰å›è½¦ã€‚ï¼ˆå¦‚æœæ²¡æœ‰æç¤ºï¼Œè¯·æŒ‰F1æˆ–CMD + Shift + Pï¼Œç„¶åè¾“å…¥ WakaTime API Keyã€‚ï¼‰</li></ol><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/66f656c288af.png"></p><ol start="4"><li>åƒå¹³å¸¸ä¸€æ ·ä½¿ç”¨ VS Code&#x2F;Traeï¼Œä½ çš„ç¼–ç æ´»åŠ¨å°†ä¼šæ˜¾ç¤ºåœ¨ä½ çš„ WakaTime ä»ªè¡¨æ¿ä¸Šã€‚</li></ol><h1 id="é…ç½®æ’ä»¶"><a href="#é…ç½®æ’ä»¶" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h1><p>æ­£å¸¸æ¥è®²ï¼Œç¬¬ä¸€æ¬¡é…ç½®æ—¶ï¼Œå„ä¸ªIDEéƒ½æ²¡æœ‰æç¤ºé…ç½®<code>API_URL</code>ï¼Œå¯åœ¨é…ç½®<code>API_KEY</code>ä¹‹åï¼Œåœ¨ç”¨æˆ·ç›®å½•ä¸‹æ‰¾åˆ°<code>.wakatime.cfg</code>æ–‡ä»¶è¿›è¡Œæ‰‹åŠ¨ç¼–è¾‘</p><ol><li>æ‰¾åˆ°<code>.wakatime.cfg</code>æ–‡ä»¶<ol><li>Windowsï¼š<code>C:\Users\&#123;Your UserName&#125;\.wakatime.cfg</code></li><li>Mac: <code>~/.wakatime.cfg</code></li></ol></li><li>åœ¨<code>settings</code>å—ä¸‹ï¼ŒåŠ å…¥<code>api_url</code>ï¼Œå¦‚ä¸‹ï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">settings</span>]</span><br><span class="line"><span class="string">api_url</span> <span class="string">=</span> <span class="string">https://api.wakatime.com/api</span></span><br><span class="line"><span class="string">api_key</span> <span class="string">=</span> <span class="string">Your</span> <span class="string">API</span> <span class="string">Key</span> <span class="string">In</span> <span class="string">Wakaapi</span></span><br><span class="line"><span class="string">debug</span> <span class="string">=</span> <span class="literal">false</span></span><br><span class="line"><span class="string">status_bar_enabled</span> <span class="string">=</span> <span class="literal">true</span></span><br><span class="line"><span class="string">proxy</span> <span class="string">=</span> </span><br></pre></td></tr></table></figure><ol start="3"><li>é‡å¯å„ä¸ªIDE</li></ol><h1 id="Wakapiç§æœä»‹ç»"><a href="#Wakapiç§æœä»‹ç»" class="headerlink" title="Wakapiç§æœä»‹ç»"></a>Wakapiç§æœä»‹ç»</h1><h2 id="Dashboardï¼ˆä»ªè¡¨ç›˜ï¼‰"><a href="#Dashboardï¼ˆä»ªè¡¨ç›˜ï¼‰" class="headerlink" title="Dashboardï¼ˆä»ªè¡¨ç›˜ï¼‰"></a>Dashboardï¼ˆä»ªè¡¨ç›˜ï¼‰</h2><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/ed273189cda0.png"></p><h2 id="Leaderboardï¼ˆæ’è¡Œæ¦œï¼‰"><a href="#Leaderboardï¼ˆæ’è¡Œæ¦œï¼‰" class="headerlink" title="Leaderboardï¼ˆæ’è¡Œæ¦œï¼‰"></a>Leaderboardï¼ˆæ’è¡Œæ¦œï¼‰</h2><ol><li><p>Wakapi çš„æ’è¡Œæ¦œæ˜¾ç¤ºäº†æ­¤æœåŠ¡å™¨ä¸Šæœ€æ´»è·ƒçš„ç”¨æˆ·æ’åï¼Œå‰ææ˜¯è¿™äº›ç”¨æˆ·<strong>é€‰æ‹©åŠ å…¥</strong>å…¬å¼€æ’è¡Œæ¦œã€‚ç»Ÿè®¡æ•°æ®è‡³å°‘æ¯ 12 å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼ŒåŸºäºç”¨æˆ·åœ¨é¢„è®¾æ—¶é—´æ®µå†…çš„æ€»ç¼–ç æ—¶é—´ã€‚è¦å‚ä¸æ’è¡Œæ¦œï¼Œè¯·ç™»å½•åå‰å¾€**<code>Settings ğŸ ’ Permissions</code><strong>ï¼Œå¹¶</strong>å¯ç”¨**æ’è¡Œæ¦œåŠŸèƒ½ã€‚</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/f4d78aed4686.png"></p></li><li><p>ç”Ÿæˆæ•°æ®æ—¶é—´ï¼š<strong>æ¯å¤©ä¸‹åˆ6ç‚¹åŠ</strong>ï¼Œç»Ÿè®¡å…¨é‡æ•°æ®</p></li><li><p>æ€»æ—¶é•¿æ’åº</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/a6510c27bb2f.png"></p></li><li><p>æŒ‰è¯­è¨€æ’åº</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/03/1d0c6add0079.png"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wakatime </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ä¼˜é›…çš„è®¾è®¡RESTful API</title>
      <link href="/2025/08/28/hou-duan/ru-he-you-ya-de-she-ji-restful-api/"/>
      <url>/2025/08/28/hou-duan/ru-he-you-ya-de-she-ji-restful-api/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼ŒRESTful API å·²ç»æˆä¸ºå‰åç«¯äº¤äº’çš„æ ‡å‡†æ–¹å¼ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ API ä¸ä»…èƒ½æé«˜å¼€å‘æ•ˆç‡ï¼Œè¿˜èƒ½é™ä½ç»´æŠ¤æˆæœ¬ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•ä¼˜é›…åœ°è®¾è®¡ RESTful APIã€‚</p></blockquote><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">æ€è€ƒå‡ ä¸ªé—®é¢˜â€‹</span><br><span class="line"><span class="bullet">1.</span> ä¸ºä»€ä¹ˆè¦æœ‰è§„èŒƒï¼Ÿâ€‹</span><br><span class="line"><span class="bullet">2.</span> å¦‚ä½•è®©å‰åç«¯å¿«é€Ÿå¼€å‘ã€è”è°ƒï¼Ÿ</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><h3 id="ä¸ºä»€ä¹ˆè¦æœ‰è§„èŒƒï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰è§„èŒƒï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰è§„èŒƒï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æœ‰è§„èŒƒï¼Ÿ</h3><ul><li><strong>æé«˜å¼€å‘æ•ˆç‡</strong>ï¼šç»Ÿä¸€çš„è§„èŒƒè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿç†è§£å’Œä½¿ç”¨ API</li><li><strong>é™ä½æ²Ÿé€šæˆæœ¬</strong>ï¼šå‡å°‘å‰åç«¯è”è°ƒæ—¶çš„è¯¯è§£å’Œè¿”å·¥</li><li><strong>ä¾¿äºç»´æŠ¤å’Œæ‰©å±•</strong>ï¼šè‰¯å¥½çš„è®¾è®¡ä½¿ç³»ç»Ÿæ›´å®¹æ˜“ç»´æŠ¤å’Œå‡çº§</li><li><strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼šä¸€è‡´çš„æ¥å£è®¾è®¡è®©å®¢æˆ·ç«¯å¼€å‘æ›´åŠ é¡ºç•…</li></ul><h3 id="å¦‚ä½•è®©å‰åç«¯å¿«é€Ÿå¼€å‘ã€è”è°ƒï¼Ÿ"><a href="#å¦‚ä½•è®©å‰åç«¯å¿«é€Ÿå¼€å‘ã€è”è°ƒï¼Ÿ" class="headerlink" title="å¦‚ä½•è®©å‰åç«¯å¿«é€Ÿå¼€å‘ã€è”è°ƒï¼Ÿ"></a>å¦‚ä½•è®©å‰åç«¯å¿«é€Ÿå¼€å‘ã€è”è°ƒï¼Ÿ</h3><ul><li>åˆ¶å®šæ¸…æ™°çš„ API è§„èŒƒæ–‡æ¡£</li><li>ä½¿ç”¨æ ‡å‡†åŒ–çš„çŠ¶æ€ç å’Œé”™è¯¯å¤„ç†</li><li>æä¾›å®Œæ•´çš„ç¤ºä¾‹å’Œæµ‹è¯•ç¯å¢ƒ</li><li>å»ºç«‹é«˜æ•ˆçš„æ²Ÿé€šæœºåˆ¶</li></ul><h2 id="ä¸€äº›æ¦‚å¿µâ€‹"><a href="#ä¸€äº›æ¦‚å¿µâ€‹" class="headerlink" title="ä¸€äº›æ¦‚å¿µâ€‹"></a>ä¸€äº›æ¦‚å¿µâ€‹</h2><h3 id="URIå’ŒURLçš„åŒºåˆ«â€‹"><a href="#URIå’ŒURLçš„åŒºåˆ«â€‹" class="headerlink" title="URIå’ŒURLçš„åŒºåˆ«â€‹"></a>URIå’ŒURLçš„åŒºåˆ«â€‹</h3><ul><li>**URI (Uniform Resource Identifier)**ï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æº</li><li>**URL (Uniform Resource Locator)**ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œæ˜¯ URI çš„å­é›†ï¼Œä¸ä»…æ ‡è¯†èµ„æºï¼Œè¿˜èƒ½å®šä½èµ„æº<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">URI: /users/123</span><br><span class="line">URL: https://api.example.com/users/123</span><br></pre></td></tr></table></figure></li></ul><h3 id="httpçŠ¶æ€ç çš„å«ä¹‰â€‹"><a href="#httpçŠ¶æ€ç çš„å«ä¹‰â€‹" class="headerlink" title="httpçŠ¶æ€ç çš„å«ä¹‰â€‹"></a>httpçŠ¶æ€ç çš„å«ä¹‰â€‹</h3><table><thead><tr><th>çŠ¶æ€ç </th><th>ç±»åˆ«</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>2xx</td><td>æˆåŠŸ</td><td>è¯·æ±‚æˆåŠŸå¤„ç†</td></tr><tr><td>3xx</td><td>é‡å®šå‘</td><td>éœ€è¦åç»­æ“ä½œ</td></tr><tr><td>4xx</td><td>å®¢æˆ·ç«¯é”™è¯¯</td><td>è¯·æ±‚æœ‰è¯¯</td></tr><tr><td>5xx</td><td>æœåŠ¡å™¨é”™è¯¯</td><td>æœåŠ¡å™¨å¤„ç†å‡ºé”™</td></tr></tbody></table><ul><li><code>200 OK</code>ï¼šè¯·æ±‚æˆåŠŸ</li><li><code>201 Created</code>ï¼šèµ„æºåˆ›å»ºæˆåŠŸ</li><li><code>400 Bad Request</code>ï¼šè¯·æ±‚å‚æ•°é”™è¯¯</li><li><code>401 Unauthorized</code>ï¼šæœªæˆæƒ</li><li><code>403 Forbidden</code>ï¼šç¦æ­¢è®¿é—®</li><li><code>404 Not Found</code>ï¼šèµ„æºä¸å­˜åœ¨</li><li><code>500 Internal Server Error</code>ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li></ul><h3 id="Http-methodçš„å«ä¹‰â€‹"><a href="#Http-methodçš„å«ä¹‰â€‹" class="headerlink" title="Http methodçš„å«ä¹‰â€‹"></a>Http methodçš„å«ä¹‰â€‹</h3><table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>å¹‚ç­‰æ€§</th><th>å®‰å…¨æ€§</th></tr></thead><tbody><tr><td>GET</td><td>è·å–èµ„æº</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>POST</td><td>åˆ›å»ºèµ„æº</td><td>å¦</td><td>å¦</td></tr><tr><td>PUT</td><td>æ›´æ–°èµ„æº</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>PATCH</td><td>éƒ¨åˆ†æ›´æ–°</td><td>å¦</td><td>å¦</td></tr><tr><td>DELETE</td><td>åˆ é™¤èµ„æº</td><td>æ˜¯</td><td>å¦</td></tr></tbody></table><h2 id="ä»€ä¹ˆæ˜¯RESTfulâ€‹"><a href="#ä»€ä¹ˆæ˜¯RESTfulâ€‹" class="headerlink" title="ä»€ä¹ˆæ˜¯RESTfulâ€‹"></a>ä»€ä¹ˆæ˜¯RESTfulâ€‹</h2><h3 id="å®šä¹‰â€‹"><a href="#å®šä¹‰â€‹" class="headerlink" title="å®šä¹‰â€‹"></a>å®šä¹‰â€‹</h3><p>REST (Representational State Transfer) æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼ŒRESTful API éµå¾ªä»¥ä¸‹çº¦æŸï¼š</p><ol><li><strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„</strong>ï¼šåˆ†ç¦»å…³æ³¨ç‚¹</li><li><strong>æ— çŠ¶æ€</strong>ï¼šæ¯ä¸ªè¯·æ±‚åŒ…å«å®Œæ•´ä¿¡æ¯</li><li><strong>å¯ç¼“å­˜</strong>ï¼šå“åº”å¯ä»¥è¢«ç¼“å­˜</li><li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šä¸€è‡´çš„æ¥å£è®¾è®¡</li><li><strong>åˆ†å±‚ç³»ç»Ÿ</strong>ï¼šç³»ç»Ÿå¯ä»¥åˆ†å±‚éƒ¨ç½²</li><li><strong>æŒ‰éœ€ä»£ç </strong>ï¼ˆå¯é€‰ï¼‰ï¼šæ”¯æŒæ‰©å±•åŠŸèƒ½</li></ol><h3 id="è®¾è®¡åŸåˆ™â€‹"><a href="#è®¾è®¡åŸåˆ™â€‹" class="headerlink" title="è®¾è®¡åŸåˆ™â€‹"></a>è®¾è®¡åŸåˆ™â€‹</h3><h4 id="URIè®¾è®¡â€‹"><a href="#URIè®¾è®¡â€‹" class="headerlink" title="URIè®¾è®¡â€‹"></a>URIè®¾è®¡â€‹</h4><p><strong>åŸºæœ¬åŸåˆ™ï¼š</strong></p><ul><li>ä½¿ç”¨åè¯è€ŒéåŠ¨è¯</li><li>ä½¿ç”¨å¤æ•°å½¢å¼</li><li>ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦</li><li>å±‚çº§ç»“æ„æ¸…æ™°</li></ul><p><strong>ä¼˜ç§€ç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">âœ… å¥½çš„è®¾è®¡</span><br><span class="line">GET /api/v1/users</span><br><span class="line">GET /api/v1/users/123</span><br><span class="line">POST /api/v1/users</span><br><span class="line">PUT /api/v1/users/123</span><br><span class="line">DELETE /api/v1/users/123</span><br><span class="line"></span><br><span class="line">âŒ ä¸å¥½çš„è®¾è®¡</span><br><span class="line">GET /api/v1/getUsers</span><br><span class="line">GET /api/v1/UserManagement/getUser?<span class="built_in">id</span>=123</span><br><span class="line">POST /api/v1/createUser</span><br></pre></td></tr></table></figure><p><strong>ç‰ˆæœ¬æ§åˆ¶ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/api/v1/users        <span class="comment"># ç‰ˆæœ¬1</span></span><br><span class="line">/api/v2/users        <span class="comment"># ç‰ˆæœ¬2</span></span><br></pre></td></tr></table></figure><p><strong>æŸ¥è¯¢å‚æ•°ï¼š</strong></p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="built_in">GET</span> /api/v1/users?<span class="attribute">page</span>=1&amp;size=10&amp;sort=name</span><br><span class="line"><span class="built_in">GET</span> /api/v1/users?<span class="attribute">status</span>=active&amp;role=admin</span><br></pre></td></tr></table></figure><h4 id="çŠ¶æ€ç çš„ä½¿ç”¨â€‹"><a href="#çŠ¶æ€ç çš„ä½¿ç”¨â€‹" class="headerlink" title="çŠ¶æ€ç çš„ä½¿ç”¨â€‹"></a>çŠ¶æ€ç çš„ä½¿ç”¨â€‹</h4><p><strong>æˆåŠŸçŠ¶æ€ç ï¼š</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"></span><br><span class="line"><span class="language-json"><span class="punctuation">&#123;</span></span></span><br><span class="line"><span class="language-json">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span></span><br><span class="line"><span class="language-json">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span></span><br><span class="line"><span class="language-json">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span></span></span><br><span class="line"><span class="language-json">  <span class="punctuation">&#125;</span></span></span><br><span class="line"><span class="language-json"><span class="punctuation">&#125;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">201</span> Created</span><br><span class="line"><span class="attribute">Location</span><span class="punctuation">: </span>/api/v1/users/123</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"></span><br><span class="line"><span class="language-json"><span class="punctuation">&#123;</span></span></span><br><span class="line"><span class="language-json">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span></span><br><span class="line"><span class="language-json">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span></span><br><span class="line"><span class="language-json">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span></span></span><br><span class="line"><span class="language-json">  <span class="punctuation">&#125;</span></span></span><br><span class="line"><span class="language-json"><span class="punctuation">&#125;</span></span></span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯çŠ¶æ€ç ï¼š</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">400</span> Bad Request</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">  &quot;error&quot;: &#123;</span></span><br><span class="line"><span class="language-css">    &quot;<span class="selector-tag">code</span>&quot;: <span class="string">&quot;INVALID_PARAMETER&quot;</span>,</span></span><br><span class="line"><span class="language-css">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;å‚æ•°éªŒè¯å¤±è´¥&quot;</span>,</span></span><br><span class="line"><span class="language-css">    <span class="string">&quot;details&quot;</span>: [</span></span><br><span class="line"><span class="language-css">      &#123;</span></span><br><span class="line"><span class="language-css">        &quot;field&quot;: <span class="string">&quot;email&quot;</span>,</span></span><br><span class="line"><span class="language-css">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    ]</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="è¯·æ±‚å’Œå“åº”ä½“çš„è®¾è®¡â€‹"><a href="#è¯·æ±‚å’Œå“åº”ä½“çš„è®¾è®¡â€‹" class="headerlink" title="è¯·æ±‚å’Œå“åº”ä½“çš„è®¾è®¡â€‹"></a>è¯·æ±‚å’Œå“åº”ä½“çš„è®¾è®¡â€‹</h4><p><strong>ç»Ÿä¸€å“åº”æ ¼å¼ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;success&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;users&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zhangsan@example.com&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pagination&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">100</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯å“åº”æ ¼å¼ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å‚æ•°éªŒè¯å¤±è´¥&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VALIDATION_ERROR&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;email&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="å¼‚å¸¸å¤„ç†â€‹"><a href="#å¼‚å¸¸å¤„ç†â€‹" class="headerlink" title="å¼‚å¸¸å¤„ç†â€‹"></a>å¼‚å¸¸å¤„ç†â€‹</h4><p><strong>å…¨å±€å¼‚å¸¸å¤„ç†ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ExceptionHandler(ValidationException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleValidationException</span><span class="params">(ValidationException e)</span> &#123;</span><br><span class="line">        <span class="type">ErrorResponse</span> <span class="variable">error</span> <span class="operator">=</span> ErrorResponse.builder()</span><br><span class="line">            .code(<span class="number">400</span>)</span><br><span class="line">            .message(<span class="string">&quot;å‚æ•°éªŒè¯å¤±è´¥&quot;</span>)</span><br><span class="line">            .error(ErrorDetails.builder()</span><br><span class="line">                .type(<span class="string">&quot;VALIDATION_ERROR&quot;</span>)</span><br><span class="line">                .details(e.getDetails())</span><br><span class="line">                .build())</span><br><span class="line">            .build();</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.badRequest().body(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®‰å…¨æ€§çš„è€ƒè™‘â€‹"><a href="#å®‰å…¨æ€§çš„è€ƒè™‘â€‹" class="headerlink" title="å®‰å…¨æ€§çš„è€ƒè™‘â€‹"></a>å®‰å…¨æ€§çš„è€ƒè™‘â€‹</h4><p><strong>è®¤è¯å’Œæˆæƒï¼š</strong></p><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">Authorization:</span> Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</span><br></pre></td></tr></table></figure><p><strong>è¾“å…¥éªŒè¯ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> CreateUserRequest request)</span> &#123;</span><br><span class="line">    <span class="comment">// å‚æ•°è‡ªåŠ¨éªŒè¯</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.create(request);</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.created(URI.create(<span class="string">&quot;/users/&quot;</span> + user.getId())).body(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é˜²æ­¢æ³¨å…¥æ”»å‡»ï¼š</strong></p><ul><li>ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</li><li>è¾“å…¥è¿‡æ»¤å’Œè½¬ä¹‰</li><li>é™åˆ¶è¯·æ±‚é¢‘ç‡</li></ul><h4 id="æ–‡æ¡£â€‹"><a href="#æ–‡æ¡£â€‹" class="headerlink" title="æ–‡æ¡£â€‹"></a>æ–‡æ¡£â€‹</h4><p><strong>API æ–‡æ¡£åº”è¯¥åŒ…å«ï¼š</strong></p><ul><li>æ¥å£åœ°å€å’Œæ–¹æ³•</li><li>è¯·æ±‚å‚æ•°è¯´æ˜</li><li>å“åº”æ ¼å¼ç¤ºä¾‹</li><li>é”™è¯¯ç è¯´æ˜</li><li>è°ƒç”¨ç¤ºä¾‹</li></ul><p><strong>æ¨èå·¥å…·ï¼š</strong></p><ul><li>Swagger&#x2F;OpenAPI</li><li>Postman</li><li>Apiary</li></ul><h4 id="è¶…åª’ä½“é©±åŠ¨çš„-APIï¼ˆHATEOASï¼‰â€‹"><a href="#è¶…åª’ä½“é©±åŠ¨çš„-APIï¼ˆHATEOASï¼‰â€‹" class="headerlink" title="è¶…åª’ä½“é©±åŠ¨çš„ APIï¼ˆHATEOASï¼‰â€‹"></a>è¶…åª’ä½“é©±åŠ¨çš„ APIï¼ˆHATEOASï¼‰â€‹</h4><p><strong>å“åº”ä¸­åŒ…å«ç›¸å…³é“¾æ¥ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;self&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/users/123&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;update&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/users/123&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;delete&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/users/123&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;orders&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/users/123/orders&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="åœºæ™¯ä¸¾ä¾‹â€‹"><a href="#åœºæ™¯ä¸¾ä¾‹â€‹" class="headerlink" title="åœºæ™¯ä¸¾ä¾‹â€‹"></a>åœºæ™¯ä¸¾ä¾‹â€‹</h2><h3 id="æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼ˆå¸¦æ¡ä»¶ï¼‰â€‹"><a href="#æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼ˆå¸¦æ¡ä»¶ï¼‰â€‹" class="headerlink" title="æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼ˆå¸¦æ¡ä»¶ï¼‰â€‹"></a>æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼ˆå¸¦æ¡ä»¶ï¼‰â€‹</h3><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">GET /api/v1/users?status=active&amp;role=admin&amp;page=1&amp;size=20&amp;sort=created_at,desc</span><br></pre></td></tr></table></figure><p><strong>å“åº”ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;success&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;users&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zhangsan@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;active&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;admin&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-01T10:00:00Z&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pagination&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">150</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;total_pages&quot;</span><span class="punctuation">:</span> <span class="number">8</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è·å–ç”¨æˆ·â€‹"><a href="#è·å–ç”¨æˆ·â€‹" class="headerlink" title="è·å–ç”¨æˆ·â€‹"></a>è·å–ç”¨æˆ·â€‹</h3><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">GET /api/v1/users/123</span><br></pre></td></tr></table></figure><p><strong>å“åº”ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;success&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zhangsan@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;profile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://cdn.example.com/avatar/123.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;bio&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è½¯ä»¶å·¥ç¨‹å¸ˆ&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;self&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/users/123&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;orders&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/users/123/orders&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤ç”¨æˆ·â€‹"><a href="#åˆ é™¤ç”¨æˆ·â€‹" class="headerlink" title="åˆ é™¤ç”¨æˆ·â€‹"></a>åˆ é™¤ç”¨æˆ·â€‹</h3><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">DELETE /api/v1/users/123</span><br></pre></td></tr></table></figure><p><strong>å“åº”ï¼š</strong></p><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">204</span> No Content</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ç”¨æˆ·çŠ¶æ€â€‹"><a href="#ä¿®æ”¹ç”¨æˆ·çŠ¶æ€â€‹" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·çŠ¶æ€â€‹"></a>ä¿®æ”¹ç”¨æˆ·çŠ¶æ€â€‹</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PATCH /api/v1/users/123/status</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;status&quot;: &quot;inactive&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å“åº”ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç”¨æˆ·çŠ¶æ€æ›´æ–°æˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;inactive&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ‰¹é‡ä¿®æ”¹æŸä¸€ä¸ªç”¨æˆ·çš„å±æ€§â€‹"><a href="#æ‰¹é‡ä¿®æ”¹æŸä¸€ä¸ªç”¨æˆ·çš„å±æ€§â€‹" class="headerlink" title="æ‰¹é‡ä¿®æ”¹æŸä¸€ä¸ªç”¨æˆ·çš„å±æ€§â€‹"></a>æ‰¹é‡ä¿®æ”¹æŸä¸€ä¸ªç”¨æˆ·çš„å±æ€§â€‹</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PATCH /api/v1/users/123</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;æå››&quot;,</span><br><span class="line">  &quot;email&quot;: &quot;lisi@example.com&quot;,</span><br><span class="line">  &quot;profile&quot;: &#123;</span><br><span class="line">    &quot;bio&quot;: &quot;é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆ&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å“åº”ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æå››&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lisi@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;profile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;bio&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆ&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢ç”¨æˆ·å…³è”çš„æœºå™¨ç‹—â€‹"><a href="#æŸ¥è¯¢ç”¨æˆ·å…³è”çš„æœºå™¨ç‹—â€‹" class="headerlink" title="æŸ¥è¯¢ç”¨æˆ·å…³è”çš„æœºå™¨ç‹—â€‹"></a>æŸ¥è¯¢ç”¨æˆ·å…³è”çš„æœºå™¨ç‹—â€‹</h3><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">GET /api/v1/users/123/robots?page=1&amp;size=10</span><br></pre></td></tr></table></figure><p><strong>å“åº”ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;success&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;robots&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœºå™¨ç‹—ä¸€å·&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Model-X&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;active&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pagination&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="é™„å½•â€‹"><a href="#é™„å½•â€‹" class="headerlink" title="é™„å½•â€‹"></a>é™„å½•â€‹</h2><h3 id="ä¼˜ç§€æ¡ˆä¾‹â€‹"><a href="#ä¼˜ç§€æ¡ˆä¾‹â€‹" class="headerlink" title="ä¼˜ç§€æ¡ˆä¾‹â€‹"></a>ä¼˜ç§€æ¡ˆä¾‹â€‹</h3><h4 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h4><ul><li>æ–‡æ¡£åœ°å€ï¼š<a href="https://docs.github.com/zh/rest">https://docs.github.com/zh/rest</a></li><li>API åœ°å€ï¼š<a href="https://api.github.com/">https://api.github.com/</a></li></ul><p>GitHub çš„ API è®¾è®¡éå¸¸è§„èŒƒï¼Œæ˜¯å­¦ä¹  RESTful API è®¾è®¡çš„ä¼˜ç§€èŒƒä¾‹ã€‚</p><h4 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h4><p>Swagger æä¾›äº†å®Œæ•´çš„ API è®¾è®¡å’Œæ–‡æ¡£è§£å†³æ–¹æ¡ˆï¼Œå¹¿æ³›åº”ç”¨äºç°ä»£ Web å¼€å‘ã€‚</p><h3 id="å·¥å…·â€‹"><a href="#å·¥å…·â€‹" class="headerlink" title="å·¥å…·â€‹"></a>å·¥å…·â€‹</h3><ol><li>Spring HATEOAS æ˜¯ Spring ç”Ÿæ€ä¸­å®ç° HATEOAS è§„èŒƒçš„æ¡†æ¶ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è½»æ¾æ„å»ºè¶…åª’ä½“é©±åŠ¨çš„ RESTful APIã€‚</li><li>Spring HATEOASï¼š<a href="https://spring.io/projects/spring-hateoas">ç‚¹æˆ‘</a></li></ol><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/v1/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;PagedResponse&lt;User&gt;&gt; <span class="title function_">getUsers</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> page,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> <span class="type">int</span> size,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> String status)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        Page&lt;User&gt; users = userService.findUsers(page, size, status);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(PagedResponse.of(users));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;UserResponse&gt; <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.findById(id);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(UserResponse.of(user));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;UserResponse&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> CreateUserRequest request)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.create(request);</span><br><span class="line">        <span class="type">URI</span> <span class="variable">location</span> <span class="operator">=</span> URI.create(<span class="string">&quot;/api/v1/users/&quot;</span> + user.getId());</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.created(location).body(UserResponse.of(user));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;UserResponse&gt; <span class="title function_">updateUser</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable</span> Long id, </span></span><br><span class="line"><span class="params">            <span class="meta">@Valid</span> <span class="meta">@RequestBody</span> UpdateUserRequest request)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.update(id, request);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(UserResponse.of(user));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Void&gt; <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        userService.delete(id);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.noContent().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡éµå¾ªè¿™äº›è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºä¼˜é›…ã€æ˜“ç”¨ã€å¯ç»´æŠ¤çš„ RESTful APIï¼Œä¸ºå‰åç«¯åä½œæä¾›è‰¯å¥½çš„åŸºç¡€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> RESTful API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨mkcertè‡ªç­¾è¯ä¹¦</title>
      <link href="/2025/06/11/yun-wei/shi-yong-mkcert-zi-qian-zheng-shu/"/>
      <url>/2025/06/11/yun-wei/shi-yong-mkcert-zi-qian-zheng-shu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‡è®¾éœ€è¦ä¸ºåŸŸåï¼ˆ<a href="http://www.baidu.com)æˆ–è€…/">www.baidu.comï¼‰æˆ–è€…</a> IP ï¼ˆ192.168.1.100ï¼‰ç”Ÿæˆè‡ªç­¾è¯ä¹¦ã€‚</p></blockquote><span id="more"></span><h1 id="å‡†å¤‡å·¥ä½œï¼ˆå®‰è£…mkcertï¼‰"><a href="#å‡†å¤‡å·¥ä½œï¼ˆå®‰è£…mkcertï¼‰" class="headerlink" title="å‡†å¤‡å·¥ä½œï¼ˆå®‰è£…mkcertï¼‰"></a>å‡†å¤‡å·¥ä½œï¼ˆå®‰è£…mkcertï¼‰</h1><h2 id="æœåŠ¡å™¨å¯è”ç½‘"><a href="#æœåŠ¡å™¨å¯è”ç½‘" class="headerlink" title="æœåŠ¡å™¨å¯è”ç½‘"></a>æœåŠ¡å™¨å¯è”ç½‘</h2><ol><li><p>Windows</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Chocolatey</span></span><br><span class="line">choco install mkcert</span><br><span class="line"><span class="comment"># Scoop</span></span><br><span class="line">scoop bucket add extras</span><br><span class="line">scoop install mkcert</span><br></pre></td></tr></table></figure></li><li><p>Linuxï¼ˆCentOS&#x2F;Ubuntuç­‰ï¼‰</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># yum</span></span><br><span class="line"><span class="built_in">sudo</span> yum install nss-tools</span><br><span class="line"><span class="comment"># apt</span></span><br><span class="line"><span class="built_in">sudo</span> apt install libnss3-tools</span><br></pre></td></tr></table></figure></li><li><p>MacOS</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># homebrew</span></span><br><span class="line"><span class="built_in">sudo</span> brew install mkcert</span><br><span class="line"><span class="built_in">sudo</span> brew install nss</span><br><span class="line"><span class="comment"># macports</span></span><br><span class="line"><span class="built_in">sudo</span> port selfupdate</span><br><span class="line"><span class="built_in">sudo</span> port install mkcert</span><br><span class="line"><span class="built_in">sudo</span> port install nss</span><br></pre></td></tr></table></figure></li></ol><h2 id="æœåŠ¡å™¨ä¸å¯è”ç½‘"><a href="#æœåŠ¡å™¨ä¸å¯è”ç½‘" class="headerlink" title="æœåŠ¡å™¨ä¸å¯è”ç½‘"></a>æœåŠ¡å™¨ä¸å¯è”ç½‘</h2><blockquote><p>å¦‚æœæœåŠ¡å™¨ä¸å¯ä»¥è”ç½‘ï¼Œå…ˆåœ¨å¯è”ç½‘ç”µè„‘ä¸‹è½½ç›¸å…³ç¨‹åºï¼Œå¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ã€‚</p></blockquote><ol><li><p>Windows</p><ol><li><a href="https://dl.filippo.io/mkcert/v1.4.4?for=windows/arm64">https://dl.filippo.io/mkcert/v1.4.4?for=windows/arm64</a></li><li><a href="https://dl.filippo.io/mkcert/v1.4.4?for=windows/amd64">https://dl.filippo.io/mkcert/v1.4.4?for=windows/amd64</a></li></ol></li><li><p>Linuxï¼ˆCentOS&#x2F;Ubuntuç­‰ï¼‰</p><ol><li><a href="https://dl.filippo.io/mkcert/v1.4.4?for=linux/arm64">https://dl.filippo.io/mkcert/v1.4.4?for=linux/arm64</a></li><li><a href="https://dl.filippo.io/mkcert/v1.4.4?for=linux/amd64">https://dl.filippo.io/mkcert/v1.4.4?for=linux/amd64</a></li></ol></li><li><p>MacOS</p><ol><li><a href="https://dl.filippo.io/mkcert/v1.4.4?for=darwin/arm64">https://dl.filippo.io/mkcert/v1.4.4?for=darwin/arm64</a></li><li><a href="https://dl.filippo.io/mkcert/v1.4.4?for=darwin/amd64">https://dl.filippo.io/mkcert/v1.4.4?for=darwin/amd64</a></li></ol></li><li><p>å®‰è£…</p><ol><li>Windowsï¼šå°†ä¸‹è½½æ–‡ä»¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡PATHä¸­å³å¯</li><li>MacOS&#x2F;Linuxï¼š <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+x mkcert-v*-linux-amd64</span><br><span class="line"><span class="built_in">cp</span> mkcert-v*-linux-amd64 /usr/local/bin/mkcert</span><br></pre></td></tr></table></figure></li></ol></li></ol><h1 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h1><blockquote><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤å¯æ­£å¸¸å®‰è£…mkcertï¼Œæ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨mkcertç”Ÿæˆè¯ä¹¦</p></blockquote><ol><li><p>åˆå§‹åŒ–é…ç½®</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkcert -install</span><br></pre></td></tr></table></figure></li><li><p>ä¸ºåŸŸåç”Ÿæˆè¯ä¹¦</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤šä¸ªåŸŸå</span></span><br><span class="line">mkcert www.baidu.com www1.baidu.com </span><br><span class="line">mkcert *.baidu.com</span><br><span class="line"><span class="comment"># å¤šä¸ªIP</span></span><br><span class="line">mkcert 192.168.1.100 192.168.1.101</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œç¬¬äºŒæ­¥æ“ä½œåï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-bash-4.2# ll</span><br><span class="line">-rw------- 1 root root 1704 Jun  9 13:45 www.baidu.com-key.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 www.baidu.com.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 www1.baidu.com-key.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 www1.baidu.com.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 *.baidu.com-key.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 *.baidu.com.pem</span><br><span class="line">-rw------- 1 root root 1704 Jun  9 13:45 192.168.1.100-key.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 192.168.1.100.pem</span><br><span class="line">-rw------- 1 root root 1704 Jun  9 13:45 192.168.1.101-key.pem</span><br><span class="line">-rw-r--r-- 1 root root 1493 Jun  9 13:45 192.168.1.101.pem</span><br></pre></td></tr></table></figure></li><li><p>ä»¥ä¸Šæ–‡ä»¶å°†åœ¨nginxä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> www.baidu.com;</span><br><span class="line">    <span class="attribute">ssl_certificate</span> /root/ssl/www.baidu.com.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /root/ssl/www.baidu.com-key.pem;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹è‡ªç­¾è¯ä¹¦çš„æ ¹è¯ä¹¦ï¼Œå°†åœ¨ã€éªŒè¯ã€‘ç¯èŠ‚ä½¿ç”¨</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-bash-4.2# mkcert -CAROOT</span><br><span class="line">/root/.local/share/mkcert</span><br><span class="line">-bash-4.2# <span class="built_in">cd</span> /root/.local/share/mkcert</span><br><span class="line">-bash-4.2# ll</span><br><span class="line">total 8</span><br><span class="line">-r-------- 1 root root 2484 Jun  9 13:37 rootCA-key.pem</span><br><span class="line">-rw-r--r-- 1 root root 1651 Jun  9 13:37 rootCA.pem</span><br><span class="line">-bash-4.2#</span><br></pre></td></tr></table></figure><p> å…¶ä¸­rootCA.pemå³ä¸ºæ ¹è¯ä¹¦ï¼Œç•™ä½œåç”¨</p></li></ol><h1 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h1><ol><li>é…ç½® <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> www.baidu.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /path/to/your/ssl/www.baidu.com.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /path/to/your/ssl/www.baidu.com-key.pem;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¶ä»–é…ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>éªŒè¯ã€é‡å¯ <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éªŒè¯</span></span><br><span class="line">nginx -t</span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure></li></ol><h1 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h1><ol><li><p>æµè§ˆå™¨ç›´æ¥è®¿é—®è¯¥åŸŸåï¼Œä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/05/48126498f3e5.png" alt="image-20250905111652117"></p><p>å¹¶ä¸”åœ¨åœ°å€æ ä¼šæç¤ºåŸŸåè¯ä¹¦é”™è¯¯ï¼š</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/05/0d185534e6a1.png" alt="image-20250905111713759"></p></li><li><p>ç‚¹å‡»åœ°å€æ çº¢è‰²çš„ä¸å®‰å…¨ï¼Œæ£€æŸ¥è¯ä¹¦æ˜¯å¦è¢«æ›¿æ¢æˆä¸Šé¢çš„è‡ªç­¾è¯ä¹¦</p><p> <img src="https://imgs.lodsve.com:9000/images/2025/09/05/74db92dc8615.png" alt="image-20250905111739571"></p></li><li><p>ä¸¤ç§å¤„ç†è¯ä¹¦é”™è¯¯çš„æ–¹æ¡ˆï¼š</p><ul><li><p>å®‰è£…æ ¹è¯ä¹¦ï¼ˆä½†æ˜¯éœ€è¦åœ¨<strong>æ¯ä¸€å°</strong>è®¿é—®çš„<strong>å®¢æˆ·ç«¯</strong>éƒ½éœ€è¦è¿›è¡Œæ“ä½œï¼‰</p><ul><li><p>å°†å‰é¢åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ<code>mkcert -CAROOT</code>å¾—åˆ°çš„æ ¹è¯ä¹¦<code>rootCA.pem</code>åˆ†å‘ç»™æ¯ä¸€ä¸ªç”¨æˆ·</p></li><li><p>Windowsä¸Šï¼Œéœ€è¦å°†è¯¥è¯ä¹¦é‡å‘½åä¸º<code>rootCA.crt</code>ï¼Œç„¶ååŒå‡»æˆ–è€…å³é”®é€‰æ‹©å®‰è£…è¯ä¹¦</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/05/50594506ccac.png" alt="image-20250905111837315"></p></li><li><p>Macä¸Šå‚è€ƒ<a href="https://blog.csdn.net/qq_43004620/article/details/137969884%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE">https://blog.csdn.net/qq_43004620/article/details/137969884è¿›è¡Œé…ç½®</a></p></li></ul></li><li><p>ä»…å¿½ç•¥å¼‚å¸¸</p><p>  <img src="https://imgs.lodsve.com:9000/images/2025/09/05/d7453e318f92.png" alt="image-20250905111901107"></p></li></ul></li><li><p>ä¸¤ç§æ–¹æ¡ˆçš„å¼Šç«¯</p><ol><li>è¯ä¹¦æœ‰è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤æ˜¯1å¹´ï¼Œä¹Ÿå¯è®¾ç½®æˆåˆ«çš„æ—¶é—´ï¼Œè¿‡æœŸåï¼Œéœ€è¦é‡æ–°å®‰è£…ï¼Œä¸”æ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½éœ€è¦è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯æµè§ˆå™¨åœ°å€æ ä¸ä¼šå†æ˜¾ç¤º<strong>ä¸å®‰å…¨</strong>çš„æç¤º</li><li>åªéœ€è¦å®¢æˆ·ç«¯åœ¨é¡µé¢è­¦å‘Šæ—¶ï¼Œç‚¹å‡»ç»§ç»­å‰å¾€å³å¯ï¼Œä¸å­˜åœ¨è¯ä¹¦è¿‡æœŸå†é‡æ–°å®‰è£…çš„é—®é¢˜ï¼Œä½†æ˜¯æµè§ˆå™¨åœ°å€æ ä¼šä¸€ç›´æ˜¾ç¤º<strong>ä¸å®‰å…¨</strong>çš„æç¤ºã€‚</li></ol></li><li><p>å¦‚æœç‚¹å‡»é¡µé¢çš„é«˜çº§åæ— ç»§ç»­å‰å¾€â€¦æŒ‰é’®ï¼Œåˆ™éœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/05/d7453e318f92.png" alt="image-20250905111901107"></p><p>æµè§ˆå™¨åœ°å€æ è¾“å…¥ä»¥ä¸‹åœ°å€ï¼Œè®¿é—®</p><p><img src="https://imgs.lodsve.com:9000/images/2025/09/05/052864d8afbc.png" alt="image-20250905112027474"></p><p>è¾“å…¥è‡ªç­¾è¯ä¹¦çš„åŸŸåï¼Œç„¶åç‚¹å‡»DeleteæŒ‰é’®ï¼Œå³å¯çœ‹åˆ°**ç»§ç»­å‰å¾€â€¦**æŒ‰é’®</p></li></ol><h1 id="å¦‚ä½•è®©Javaç¨‹åºä¿¡ä»»è¯¥è‡ªç­¾è¯ä¹¦"><a href="#å¦‚ä½•è®©Javaç¨‹åºä¿¡ä»»è¯¥è‡ªç­¾è¯ä¹¦" class="headerlink" title="å¦‚ä½•è®©Javaç¨‹åºä¿¡ä»»è¯¥è‡ªç­¾è¯ä¹¦"></a>å¦‚ä½•è®©Javaç¨‹åºä¿¡ä»»è¯¥è‡ªç­¾è¯ä¹¦</h1><p>è§£å†³è‡ªç­¾è¯ä¹¦ï¼Œåœ¨Javaç¨‹åºä¸­ä¸è¢«ä¿¡ä»»çš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>ä»¥rootç”¨æˆ·è¿›å…¥å®¹å™¨ï¼š <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -u root -it container_name bash</span><br></pre></td></tr></table></figure></li><li>å¯¼å‡ºæœåŠ¡ç«¯è¯ä¹¦ <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># xxx.xxx.xxx.xxx:8080ï¼šä½¿ç”¨è‡ªç­¾è¯ä¹¦çš„åŸŸååŠç«¯å£</span></span><br><span class="line"><span class="built_in">echo</span> | openssl s_client -connect xxx.xxx.xxx.xxx:8080 2&gt;/dev/null | openssl x509 &gt; server.crt</span><br></pre></td></tr></table></figure></li><li>å¯¼å…¥JVMä¿¡ä»»åº“ï¼ˆé»˜è®¤å¯†ç ï¼šchangeitï¼‰ <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">keytool -import -<span class="built_in">alias</span> server-cert -file server.crt -keystore <span class="variable">$JAVA_HOME</span>/lib/security/cacerts</span><br></pre></td></tr></table></figure></li><li>é‡å¯å®¹å™¨ï¼ˆæ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ä½¿ç”¨docker-compose up -då‘½ä»¤ï¼Œè¿™ä¼šåˆ é™¤å®¹å™¨ï¼Œé‡æ–°åˆ›å»ºå®¹å™¨ï¼‰ <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker restart container_name</span><br></pre></td></tr></table></figure></li><li>æ¯æ¬¡æ›´æ–°å®Œæˆåï¼ˆrecreateå®¹å™¨åï¼‰ï¼Œéƒ½éœ€è¦æ‰§è¡Œä¸Šè¿°æ“ä½œ</li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOPS </tag>
            
            <tag> è¯ä¹¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘è“æ´¾ç³»ç»Ÿå®‰è£…ã€åˆå§‹åŒ–æ­¥éª¤</title>
      <link href="/2025/03/10/yun-wei/shu-mei-pai-xi-tong-an-zhuang-chu-shi-hua-bu-zou/"/>
      <url>/2025/03/10/yun-wei/shu-mei-pai-xi-tong-an-zhuang-chu-shi-hua-bu-zou/</url>
      
        <content type="html"><![CDATA[<h1 id="ç³»ç»Ÿå®‰è£…"><a href="#ç³»ç»Ÿå®‰è£…" class="headerlink" title="ç³»ç»Ÿå®‰è£…"></a>ç³»ç»Ÿå®‰è£…</h1><ol><li><p>ä¸‹è½½çƒ§å½•å·¥å…·</p><ol><li><a href="https://downloads.raspberrypi.org/imager/imager_latest.exe">Windows ç‰ˆ</a>ã€<a href="https://downloads.raspberrypi.org/imager/imager_latest.dmg">macOS ç‰ˆ</a>ã€<a href="https://downloads.raspberrypi.org/imager/imager_latest_amd64.deb">Ubuntu X86 ç‰ˆ</a></li><li>å…·ä½“çƒ§å½•æ­¥éª¤å‚è€ƒï¼š<a href="https://shumeipai.nxez.com/2024/04/23/install-the-operating-system-for-the-raspberry-pi.html">çƒ§å½•æ­¥éª¤</a></li></ol></li><li><p>æ’å…¥å­˜å‚¨å¡ã€é€šç”µ</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ¬¡å®‰è£…éœ€è¦æ³¨æ„ï¼š</span><br><span class="line">1. æ¸…é™¤é…ç½®åçƒ§å½•ç³»ç»Ÿ</span><br><span class="line">2. é€šç”µå¼€æœºåï¼Œéœ€è¦è¿æ¥æ˜¾ç¤ºå™¨ï¼Œè¿›è¡Œé…ç½®ï¼ˆæ¶‰åŠåˆ°ç”¨æˆ·åˆå§‹åŒ–ã€ç½‘ç»œè®¾ç½®ã€è¯­è¨€é€‰æ‹©ã€æ—¶åŒºé€‰æ‹©ç­‰ï¼‰</span><br></pre></td></tr></table></figure></li></ol><span id="more"></span><h1 id="ç³»ç»Ÿåˆå§‹åŒ–"><a href="#ç³»ç»Ÿåˆå§‹åŒ–" class="headerlink" title="ç³»ç»Ÿåˆå§‹åŒ–"></a>ç³»ç»Ÿåˆå§‹åŒ–</h1><h2 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">é€šè¿‡shellè¿œç¨‹ç™»å½•æ ‘è“æ´¾</span><br><span class="line">ssh <span class="symbol">sunhao@</span><span class="number">192.168</span><span class="number">.1</span><span class="number">.107</span></span><br><span class="line">å…¶ä¸­ï¼šsunhaoä¸ºå¼€æœºåè®¾ç½®çš„ç”¨æˆ·å</span><br></pre></td></tr></table></figure><h2 id="æ›´æ¢å›½å†…æº"><a href="#æ›´æ¢å›½å†…æº" class="headerlink" title="æ›´æ¢å›½å†…æº"></a>æ›´æ¢å›½å†…æº</h2><ol><li><p>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sunhao@raspberrypi:/etc/apt $ cat /etc/os-release</span><br><span class="line">PRETTY_NAME=&quot;Debian GNU/Linux 12 (bookworm)&quot;</span><br><span class="line">NAME=&quot;Debian GNU/Linux&quot;</span><br><span class="line">VERSION_ID=&quot;12&quot;</span><br><span class="line">VERSION=&quot;12 (bookworm)&quot;</span><br><span class="line">VERSION_CODENAME=bookworm</span><br><span class="line">ID=debian</span><br><span class="line">HOME_URL=&quot;https://www.debian.org/&quot;</span><br><span class="line">SUPPORT_URL=&quot;https://www.debian.org/support&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.debian.org/&quot;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚ä¸Šï¼Œæ ¹æ® <code>PRETTY_NAME</code> æˆ– <code>VERSION</code> å­—æ®µï¼Œä½ å¯ä»¥ç¡®å®šæ ‘è“æ´¾çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€‚</p></li><li><p>æ ¹æ®ä»¥ä¸Šï¼Œå¯çŸ¥ç³»ç»Ÿç‰ˆæœ¬ä¸º<code>bookworm</code></p><ol><li><p>å¤‡ä»½åŸå§‹æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">sudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¾‘è½¯ä»¶æºé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. ç¼–è¾‘ /etc/apt/sources.list æ–‡ä»¶ï¼ˆè½¯ä»¶æºï¼‰,åˆ é™¤åŸæ¥çš„é…ç½®ï¼Œç”¨ä»¥ä¸‹é…ç½®æ›¿æ¢</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian bookworm main contrib non-free-firmware</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bookworm-security main contrib non-free-firmware</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian bookworm-updates main contrib non-free-firmware</span><br><span class="line"></span><br><span class="line">2. ç¼–è¾‘ /etc/apt/sources.list.d/raspi.list æ–‡ä»¶ï¼ˆç³»ç»Ÿæ›´æ–°æºï¼‰,åˆ é™¤åŸæ¥çš„é…ç½®ï¼Œç”¨ä»¥ä¸‹é…ç½®æ›¿æ¢</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/raspberrypi bookworm main</span><br></pre></td></tr></table></figure></li></ol></li><li><p>æ›´æ–°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ›´æ–°è½¯ä»¶æºåˆ—è¡¨</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ›´æ–°è½¯ä»¶ç‰ˆæœ¬</span></span><br><span class="line">sudo apt-get upgrade</span><br><span class="line">sudo apt-get dist-upgrade</span><br></pre></td></tr></table></figure></li><li><p>å¯¹äºå…¶ä»–ç³»ç»Ÿç‰ˆæœ¬ï¼Œè¯·é˜…è¯»<a href="https://shumeipai.nxez.com/2024/11/11/raspberry-pi-os-chinese-software-source.html">è¿™ç¯‡æ–‡ç« </a></p></li></ol><h2 id="å®‰è£…vim"><a href="#å®‰è£…vim" class="headerlink" title="å®‰è£…vim"></a>å®‰è£…vim</h2><ol><li><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install -y vim</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®</p><ol><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…Vundle</span></span><br><span class="line">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure></li><li><p><code>vim .vimrc</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot;æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">nu</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;å¯åŠ¨æ—¶éšå»æ´åŠ©æç¤º</span></span><br><span class="line"><span class="keyword">set</span> shortmess=atI</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;è¯­æ³•é«˜äº®</span></span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;ä½¿ç”¨vimçš„é”®ç›˜æ¨¡å¼</span></span><br><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;ä¸éœ€è¦å¤‡ä»½</span></span><br><span class="line"><span class="keyword">set</span> nobackup</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æ²¡æœ‰ä¿å­˜æˆ–æ–‡ä»¶åªè¯»æ—¶å¼¹å‡ºç¡®è®¤</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">confirm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;é¼ æ ‡å¯ç”¨</span></span><br><span class="line"><span class="comment">&quot;set mouse=a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;tabç¼©è¿›</span></span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> expandtab</span><br><span class="line"><span class="keyword">set</span> smarttab</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æ–‡ä»¶è‡ªåŠ¨æ£€æµ‹å¤–éƒ¨æ›´æ”¹</span></span><br><span class="line"><span class="keyword">set</span> autoread</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;cæ–‡ä»¶è‡ªåŠ¨ç¼©è¿›</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">cindent</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;è‡ªåŠ¨å¯¹é½</span></span><br><span class="line"><span class="keyword">set</span> autoindent</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æ™ºèƒ½ç¼©è¿›</span></span><br><span class="line"><span class="keyword">set</span> smartindent</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;é«˜äº®æŸ¥æ‰¾åŒ¹é…</span></span><br><span class="line"><span class="keyword">set</span> hlsearch</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æ˜¾ç¤ºåŒ¹é…</span></span><br><span class="line"><span class="keyword">set</span> showmatch</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æ˜¾ç¤ºæ ‡å°ºï¼Œå°±æ˜¯åœ¨å³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®</span></span><br><span class="line"><span class="keyword">set</span> ruler</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;å»é™¤viçš„ä¸€è‡´æ€§</span></span><br><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;è®¾ç½®é”®ç›˜æ˜ å°„ï¼Œé€šè¿‡ç©ºæ ¼è®¾ç½®æŠ˜å </span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;space&gt;</span> @=((<span class="built_in">foldclosed</span>(<span class="built_in">line</span>(<span class="string">&#x27;.&#x27;</span>)&lt;<span class="number">0</span>)?<span class="string">&#x27;zc&#x27;</span>:<span class="string">&#x27;zo&#x27;</span>))<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">&quot;ä¸è¦é—ªçƒ</span></span><br><span class="line"><span class="keyword">set</span> novisualbell</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;å¯åŠ¨æ˜¾ç¤ºçŠ¶æ€è¡Œ</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æµ…è‰²æ˜¾ç¤ºå½“å‰è¡Œ</span></span><br><span class="line"><span class="keyword">autocmd</span> InsertLeave * <span class="keyword">se</span> nocul</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;ç”¨æµ…è‰²é«˜äº®å½“å‰è¡Œ</span></span><br><span class="line"><span class="keyword">autocmd</span> InsertEnter * <span class="keyword">se</span> cul</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;æ˜¾ç¤ºè¾“å…¥çš„å‘½ä»¤</span></span><br><span class="line"><span class="keyword">set</span> showcmd</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;è¢«åˆ†å‰²çª—å£ä¹‹é—´æ˜¾ç¤ºç©ºç™½</span></span><br><span class="line"><span class="keyword">set</span> fillchars=<span class="keyword">vert</span>:/</span><br><span class="line"><span class="keyword">set</span> fillchars=stl:/</span><br><span class="line"><span class="keyword">set</span> fillchars=stlnc:/</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; vundle ç¯å¢ƒè®¾ç½®</span></span><br><span class="line"><span class="keyword">filetype</span> off</span><br><span class="line"><span class="keyword">set</span> rtp+=~/.<span class="keyword">vim</span>/bundle/Vundle.<span class="keyword">vim</span></span><br><span class="line"><span class="comment">&quot; vundle ç®¡ç†çš„æ’ä»¶åˆ—è¡¨å¿…é¡»ä½äº vundle#begin() å’Œ vundle#end() ä¹‹é—´</span></span><br><span class="line"><span class="keyword">call</span> vundle#begin()</span><br><span class="line">Plugin <span class="string">&#x27;VundleVim/Vundle.vim&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;tomasr/molokai&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;powerline/powerline&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;Raimondi/delimitMate&#x27;</span></span><br><span class="line"><span class="comment">&quot; æ’ä»¶åˆ—è¡¨ç»“æŸ</span></span><br><span class="line"><span class="keyword">call</span> vundle#end()</span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; é…è‰²æ–¹æ¡ˆ</span></span><br><span class="line"><span class="keyword">set</span> background=dark</span><br><span class="line"><span class="keyword">colorscheme</span> molokai</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ç¦æ­¢æ˜¾ç¤ºèœå•å’Œå·¥å…·æ¡</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=<span class="keyword">m</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=T</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€æ </span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ç¦æ­¢æŠ˜è¡Œ</span></span><br><span class="line"><span class="keyword">set</span> nowrap</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; è®¾ç½®çŠ¶æ€æ ä¸»é¢˜é£æ ¼</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Powerline_colorscheme</span>=<span class="string">&#x27;solarized256&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">syntax</span> keyword cppSTLtype initializer_list</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; åŸºäºç¼©è¿›æˆ–è¯­æ³•è¿›è¡Œä»£ç æŠ˜å </span></span><br><span class="line"><span class="comment">&quot;set foldmethod=indent</span></span><br><span class="line"><span class="keyword">set</span> foldmethod=<span class="keyword">syntax</span></span><br><span class="line"><span class="comment">&quot; å¯åŠ¨ vim æ—¶å…³é—­æŠ˜å ä»£ç </span></span><br><span class="line"><span class="keyword">set</span> nofoldenable</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;å…è®¸ç”¨é€€æ ¼é”®åˆ é™¤å­—ç¬¦</span></span><br><span class="line"><span class="keyword">set</span> backspace=<span class="built_in">indent</span>,eol,start</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;ç¼–ç è®¾ç½®</span></span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;å…±äº«å‰ªåˆ‡æ¿</span></span><br><span class="line"><span class="keyword">set</span> clipboard=unnamed</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; powerline é…ç½®</span></span><br><span class="line"><span class="keyword">set</span> rtp+=/usr/local/lib/python2.<span class="number">7</span>/site-packages/powerline/bindings/<span class="keyword">vim</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; These lines setup the environment to show graphics and colors correctly.</span></span><br><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line"><span class="keyword">set</span> t_Co=<span class="number">256</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; vim å¤´éƒ¨è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line"><span class="comment">&quot; åˆ›å»ºshæ–‡ä»¶æ—¶ï¼Œç”Ÿæˆä»¥ä¸‹æ³¨é‡Šæ¨¡æ¿</span></span><br><span class="line"><span class="keyword">autocmd</span> BufNewFile *.<span class="keyword">sh</span> exec <span class="string">&quot;:call AddTitle()&quot;</span></span><br><span class="line"><span class="comment">&quot; æ³¨é‡Šæ¨¡æ¿</span></span><br><span class="line"><span class="keyword">function</span> <span class="title">AddTitle</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">call</span> <span class="built_in">setline</span>(<span class="number">1</span>, <span class="string">&quot;#!/bin/bash&quot;</span>)</span><br><span class="line">    <span class="keyword">call</span> <span class="keyword">append</span>(<span class="number">1</span>, <span class="string">&quot;# @Author: å­™æ˜Š(Crazy Coder)&quot;</span>)</span><br><span class="line">    <span class="keyword">call</span> <span class="keyword">append</span>(<span class="number">2</span>, <span class="string">&quot;# @Email: sunhao.java@gmail.com&quot;</span>)</span><br><span class="line">    <span class="keyword">call</span> <span class="keyword">append</span>(<span class="number">3</span>, <span class="string">&quot;# @Date: &quot;</span> . <span class="built_in">strftime</span>(<span class="string">&quot;%Y-%m-%d %H:%M&quot;</span>))</span><br><span class="line">    <span class="keyword">call</span> <span class="keyword">append</span>(<span class="number">4</span>, <span class="string">&quot;# @Desc: .&quot;</span>)</span><br><span class="line">    <span class="keyword">call</span> <span class="keyword">append</span>(<span class="number">5</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">endf</span></span><br><span class="line"><span class="comment">&quot; å…‰æ ‡è·³è½¬åˆ°æœ€åä¸€è¡Œï¼Œå¹¶ä¸”æŒ‰ä¸‹é”®ç›˜çš„oé”®ï¼Œè¿›å…¥ä¸‹ä¸€è¡Œå¹¶ä¸”æ˜¯ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line"><span class="keyword">autocmd</span> BufNewFile *.<span class="keyword">sh</span> <span class="keyword">normal</span> G</span><br><span class="line"><span class="keyword">autocmd</span> BufNewFile *.<span class="keyword">sh</span> <span class="keyword">normal</span> <span class="keyword">o</span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim</span><br><span class="line"><span class="built_in">shift</span>+:</span><br><span class="line">PluginInstall</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="å®‰è£…oh-my-zsh"><a href="#å®‰è£…oh-my-zsh" class="headerlink" title="å®‰è£…oh-my-zsh"></a>å®‰è£…oh-my-zsh</h2><ol><li><p>å®‰è£…zsh</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install -y zsh</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…oh-my-zsh</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh -c &quot;$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions</span><br><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting $ZSH_CUSTOM/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure></li><li><p>åˆ‡æ¢ä¸»é¢˜ã€è®¾ç½®alias</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line">1. ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼ˆå…¶ä»–ä¸åŠ¨ï¼‰ï¼š</span><br><span class="line">ZSH_THEME=&quot;ys&quot;</span><br><span class="line">plugins=(</span><br><span class="line">  z</span><br><span class="line">  git</span><br><span class="line">  zsh-autosuggestions</span><br><span class="line">  zsh-syntax-highlighting</span><br><span class="line">  docker</span><br><span class="line">  docker-compose</span><br><span class="line">)</span><br><span class="line">2. æ–‡ä»¶æœ€åï¼Œæ–°å¢</span><br><span class="line">alias ll=&#x27;ls -a -l -G --block-size=m&#x27;</span><br><span class="line">alias ld=&#x27;ls -d -l */&#x27;</span><br><span class="line">3. å®Œæˆåï¼šsource ~/.zshrc</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç¦ç”¨å¯†ç ç™»é™†ï¼Œä½¿ç”¨sshç™»å½•"><a href="#ç¦ç”¨å¯†ç ç™»é™†ï¼Œä½¿ç”¨sshç™»å½•" class="headerlink" title="ç¦ç”¨å¯†ç ç™»é™†ï¼Œä½¿ç”¨sshç™»å½•"></a>ç¦ç”¨å¯†ç ç™»é™†ï¼Œä½¿ç”¨sshç™»å½•</h2><ol><li><p>ä¿®æ”¹sshç«¯å£</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1. sudo vim /etc/ssh/sshd_config</span><br><span class="line">2. #Port 22 -&gt; Port xxx</span><br><span class="line">3. sudo service ssh restart</span><br></pre></td></tr></table></figure></li><li><p>é˜²ç«å¢™æ”¾è¡Œç«¯å£</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ufw allow xxx/tcp</span><br><span class="line">sudo ufw enable</span><br><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ssh pub key</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/.ssh</span><br><span class="line">sudo touch authorized_keys</span><br><span class="line">sudo chmod 600 authorized_keys</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add pub key to authorized_keys</span></span><br><span class="line">sudo vim authorized_keys</span><br></pre></td></tr></table></figure></li><li><p>ç¦ç”¨å¯†ç ç™»å½•   </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/ssh/sshd_config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ PasswordAuthentication <span class="built_in">yes</span> ä¸ºå¦‚ä¸‹</span></span><br><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘è“æ´¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘å¯¹Function Callingè®¤çŸ¥</title>
      <link href="/2024/08/22/ai/function-calling/"/>
      <url>/2024/08/22/ai/function-calling/</url>
      
        <content type="html"><![CDATA[<ol><li>ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹</li><li>å¤§æ¨¡å‹å¯ä»¥ç”¨æ¥åšä»€ä¹ˆ<span id="more"></span></li><li>å¤§æ¨¡å‹çš„ç¼ºç‚¹</li><li>å¤§æ¨¡å‹çš„çŸ¥è¯†åº“æˆªæ­¢åˆ°2021å¹´9æœˆä»½ï¼Œåœ¨æ­¤ä¹‹åçš„ä¿¡æ¯æ— æ³•æ„ŸçŸ¥</li><li>å±€é™æ€§ï¼Œæ¯”å¦‚ï¼šè¯¢é—®å½“å‰æŸåœ°çš„å¤©æ°”æƒ…å†µã€‚</li><li>å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</li><li>å¦‚æœèµ‹äºˆå¤§æ¨¡å‹è”ç½‘çš„èƒ½åŠ›ï¼ˆè°ƒç”¨å¤–éƒ¨APIï¼‰</li><li>äºæ˜¯åœ¨2023å¹´4æœˆï¼ŒAutoGPTé’ˆå¯¹è¿™ç§æƒ…å†µæå‡ºï¼šè¦èµ‹äºˆå¤§è¯­è¨€æ¨¡å‹è°ƒç”¨å¤–éƒ¨APIçš„èƒ½åŠ›ã€‚æ¯”å¦‚ï¼Œå¦‚æœèƒ½å¤Ÿè®©GPTæ¨¡å‹è°ƒç”¨è°·æ­Œé‚®ç®±APIï¼ˆGmail APIï¼‰ï¼Œåˆ™å¯ä»¥è‡ªåŠ¨è®©GPTæ¨¡å‹è¯»å–é‚®ä»¶ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œå›å¤ç­‰ç­‰ã€‚åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹ï¼ŒOpenAIåœ¨0613çš„æ›´æ–°ä¸­ä¸ºç›®å‰æœ€å…ˆè¿›çš„Chat Completions æ¨¡å‹å¢åŠ äº†Function callingåŠŸèƒ½</li><li>ä»€ä¹ˆæ˜¯function calling</li><li>ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹å¤šè½®å¯¹è¯</li><li>è¿ç»­å¯¹è¯</li><li>å¤§æ¨¡å‹å¦‚ä½•ç†è§£ä¸Šä¸‹æ–‡</li><li>Function calling + å¤šè½®å¯¹è¯å®ç°çš„èŠå¤©Demo</li></ol><p><img src="/imgs/ai/1.jpg" alt="Function Calling"></p>]]></content>
      
      
      <categories>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘è“ç»¿å‘å¸ƒã€æ»šåŠ¨å‘å¸ƒã€ç°åº¦å‘å¸ƒ/é‡‘ä¸é›€å‘å¸ƒã€AB Test å¯¹æ¯”</title>
      <link href="/2022/04/18/yun-wei/zhuan-zai-lan-lu-fa-bu-gun-dong-fa-bu-hui-du-fa-bu-jin-si-que-fa-bu-ab-test-dui-bi/"/>
      <url>/2022/04/18/yun-wei/zhuan-zai-lan-lu-fa-bu-gun-dong-fa-bu-hui-du-fa-bu-jin-si-que-fa-bu-ab-test-dui-bi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è½¬è½½è‡ªçŸ¥ä¹ï¼šè“ç»¿å‘å¸ƒã€æ»šåŠ¨å‘å¸ƒã€ç°åº¦å‘å¸ƒ&#x2F;é‡‘ä¸é›€å‘å¸ƒã€AB Test å¯¹æ¯”ã€<a href="https://zhuanlan.zhihu.com/p/147567222%E3%80%91">https://zhuanlan.zhihu.com/p/147567222ã€‘</a></p></blockquote><span id="more"></span><p><img src="https://imgs.lodsve.com:9000/images/2022/04/18/v2-5557108bfe0fc61396e069149d1a1292_720w.jpg" alt="v2-5557108bfe0fc61396e069149d1a1292_720w"></p><h1 id="å‘å¸ƒç±»å‹"><a href="#å‘å¸ƒç±»å‹" class="headerlink" title="å‘å¸ƒç±»å‹"></a>å‘å¸ƒç±»å‹</h1><ol><li>è“ç»¿å‘å¸ƒ</li><li>æ»šåŠ¨å‘å¸ƒ</li><li>ç°åº¦å‘å¸ƒ&#x2F;é‡‘ä¸é›€å‘å¸ƒ</li><li>AB Test</li></ol><h1 id="è“ç»¿å‘å¸ƒ"><a href="#è“ç»¿å‘å¸ƒ" class="headerlink" title="è“ç»¿å‘å¸ƒ"></a>è“ç»¿å‘å¸ƒ</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>è“ç»¿éƒ¨ç½²æ˜¯ä¸åœè€ç‰ˆæœ¬ï¼Œéƒ¨ç½²æ–°ç‰ˆæœ¬ç„¶åè¿›è¡Œæµ‹è¯•ï¼Œç¡®è®¤OKï¼Œå°†æµé‡åˆ‡åˆ°æ–°ç‰ˆæœ¬ï¼Œç„¶åè€ç‰ˆæœ¬åŒæ—¶ä¹Ÿå‡çº§åˆ°æ–°ç‰ˆæœ¬</p><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>è“ç»¿éƒ¨ç½²æ— éœ€åœæœºï¼Œå¹¶ä¸”é£é™©è¾ƒå°ã€‚</p><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol><li>éƒ¨ç½²ç‰ˆæœ¬1çš„åº”ç”¨ï¼ˆä¸€å¼€å§‹çš„çŠ¶æ€ï¼‰ï¼Œæ‰€æœ‰å¤–éƒ¨è¯·æ±‚çš„æµé‡éƒ½æ‰“åˆ°è¿™ä¸ªç‰ˆæœ¬ä¸Šã€‚</li><li>éƒ¨ç½²ç‰ˆæœ¬2çš„åº”ç”¨ï¼Œç‰ˆæœ¬2çš„ä»£ç ä¸ç‰ˆæœ¬1ä¸åŒ(æ–°åŠŸèƒ½ã€Bugä¿®å¤ç­‰)ã€‚</li><li>å°†æµé‡ä»ç‰ˆæœ¬1åˆ‡æ¢åˆ°ç‰ˆæœ¬2ã€‚</li><li>å¦‚ç‰ˆæœ¬2æµ‹è¯•æ­£å¸¸ï¼Œå°±åˆ é™¤ç‰ˆæœ¬1æ­£åœ¨ä½¿ç”¨çš„èµ„æºï¼ˆä¾‹å¦‚å®ä¾‹ï¼‰ï¼Œä»æ­¤æ­£å¼ç”¨ç‰ˆæœ¬2ã€‚</li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>éœ€è¦æå‰è€ƒè™‘æ•°æ®åº“ä¸åº”ç”¨éƒ¨ç½²åŒæ­¥è¿ç§» &#x2F;å›æ»šçš„é—®é¢˜ã€‚</li><li>è“ç»¿éƒ¨ç½²éœ€è¦æœ‰åŸºç¡€è®¾æ–½æ”¯æŒã€‚</li><li>åœ¨ééš”ç¦»åŸºç¡€æ¶æ„ï¼ˆ VM ã€ Docker ç­‰ï¼‰ä¸Šæ‰§è¡Œè“ç»¿éƒ¨ç½²ï¼Œè“è‰²ç¯å¢ƒå’Œç»¿è‰²ç¯å¢ƒæœ‰è¢«æ‘§æ¯çš„é£é™©ã€‚</li></ol><h1 id="æ»šåŠ¨å‘å¸ƒ"><a href="#æ»šåŠ¨å‘å¸ƒ" class="headerlink" title="æ»šåŠ¨å‘å¸ƒ"></a>æ»šåŠ¨å‘å¸ƒ</h1><ol><li>æ»šåŠ¨å‘å¸ƒèƒ½å¤Ÿè§£å†³æ‰è“ç»¿éƒ¨ç½²æ—¶å¯¹ç¡¬ä»¶è¦æ±‚å¢å€çš„é—®é¢˜ã€‚</li><li>æ‰€è°“æ»šåŠ¨å‡çº§ï¼Œå°±æ˜¯åœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸ä¸€ä¸‹å­å¯åŠ¨æ‰€æœ‰æ–°ç‰ˆæœ¬ï¼Œæ˜¯å…ˆå¯åŠ¨ä¸€å°æ–°ç‰ˆæœ¬ï¼Œå†åœæ­¢ä¸€å°è€ç‰ˆæœ¬ï¼Œç„¶åå†å¯åŠ¨ä¸€å°æ–°ç‰ˆæœ¬ï¼Œå†åœæ­¢ä¸€å°è€ç‰ˆæœ¬ï¼Œç›´åˆ°å‡çº§å®Œæˆï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœæ—¥å¸¸éœ€è¦10å°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå‡çº§è¿‡ç¨‹ä¸­ä¹Ÿå°±åªéœ€è¦11å°å°±è¡Œäº†ã€‚</li><li>ä½†æ˜¯æ»šåŠ¨å‡çº§æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨å¼€å§‹æ»šåŠ¨å‡çº§åï¼Œæµé‡ä¼šç›´æ¥æµå‘å·²ç»å¯åŠ¨èµ·æ¥çš„æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ï¼Œæ–°ç‰ˆæœ¬æ˜¯ä¸ä¸€å®šå¯ç”¨çš„ï¼Œæ¯”å¦‚éœ€è¦è¿›ä¸€æ­¥çš„æµ‹è¯•æ‰èƒ½ç¡®è®¤ã€‚é‚£ä¹ˆåœ¨æ»šåŠ¨å‡çº§æœŸé—´ï¼Œæ•´ä¸ªç³»ç»Ÿå°±å¤„äºéå¸¸ä¸ç¨³å®šçš„çŠ¶æ€ï¼Œå¦‚æœå‘ç°äº†é—®é¢˜ï¼Œä¹Ÿæ¯”è¾ƒéš¾ä»¥ç¡®å®šæ˜¯æ–°ç‰ˆæœ¬è¿˜æ˜¯è€ç‰ˆæœ¬é€ æˆçš„é—®é¢˜ã€‚</li></ol><h1 id="ç°åº¦å‘å¸ƒ-é‡‘ä¸é›€å‘å¸ƒ"><a href="#ç°åº¦å‘å¸ƒ-é‡‘ä¸é›€å‘å¸ƒ" class="headerlink" title="ç°åº¦å‘å¸ƒ&#x2F;é‡‘ä¸é›€å‘å¸ƒ"></a>ç°åº¦å‘å¸ƒ&#x2F;é‡‘ä¸é›€å‘å¸ƒ</h1><h2 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ç°åº¦å‘å¸ƒä¹Ÿå«é‡‘ä¸é›€å‘å¸ƒï¼Œèµ·æºæ˜¯ï¼ŒçŸ¿äº•å·¥äººå‘ç°ï¼Œé‡‘ä¸é›€å¯¹ç“¦æ–¯æ°”ä½“å¾ˆæ•æ„Ÿï¼ŒçŸ¿å·¥ä¼šåœ¨ä¸‹äº•ä¹‹å‰ï¼Œå…ˆæ”¾ä¸€åªé‡‘ä¸é›€åˆ°äº•ä¸­ï¼Œå¦‚æœé‡‘ä¸é›€ä¸å«äº†ï¼Œå°±ä»£è¡¨ç“¦æ–¯æµ“åº¦é«˜ã€‚</p><h2 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol><li>åœ¨ç°åº¦å‘å¸ƒå¼€å§‹åï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œä½†æ˜¯å¹¶ä¸ç›´æ¥å°†æµé‡åˆ‡è¿‡æ¥ï¼Œè€Œæ˜¯æµ‹è¯•äººå‘˜å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œçº¿ä¸Šæµ‹è¯•ï¼Œå¯åŠ¨çš„è¿™ä¸ªæ–°ç‰ˆæœ¬åº”ç”¨ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é‡‘ä¸é›€ã€‚å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å°†å°‘é‡çš„ç”¨æˆ·æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œç„¶åå†å¯¹æ–°ç‰ˆæœ¬åšè¿è¡ŒçŠ¶æ€è§‚å¯Ÿï¼Œæ”¶é›†å„ç§è¿è¡Œæ—¶æ•°æ®ã€‚</li><li>å½“ç¡®è®¤æ–°ç‰ˆæœ¬è¿è¡Œè‰¯å¥½åï¼Œå†é€æ­¥å°†æ›´å¤šçš„æµé‡å¯¼å…¥åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œåœ¨æ­¤æœŸé—´ï¼Œè¿˜å¯ä»¥ä¸æ–­åœ°è°ƒæ•´æ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬çš„è¿è¡Œçš„æœåŠ¡å™¨å‰¯æœ¬æ•°é‡ï¼Œä»¥ä½¿å¾—æ–°ç‰ˆæœ¬èƒ½å¤Ÿæ‰¿å—è¶Šæ¥è¶Šå¤§çš„æµé‡å‹åŠ›ã€‚ç›´åˆ°å°†100%çš„æµé‡éƒ½åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œæœ€åå…³é—­å‰©ä¸‹çš„è€ç‰ˆæœ¬æœåŠ¡ï¼Œå®Œæˆç°åº¦å‘å¸ƒã€‚</li><li>å¦‚æœåœ¨ç°åº¦å‘å¸ƒè¿‡ç¨‹ä¸­ï¼ˆç°åº¦æœŸï¼‰å‘ç°äº†æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå°±åº”è¯¥ç«‹å³å°†æµé‡åˆ‡å›è€ç‰ˆæœ¬ä¸Šï¼Œè¿™æ ·ï¼Œå°±ä¼šå°†è´Ÿé¢å½±å“æ§åˆ¶åœ¨æœ€å°èŒƒå›´å†…ã€‚</li></ol><h1 id="AB-Test"><a href="#AB-Test" class="headerlink" title="AB Test"></a>AB Test</h1><ol><li>æˆ‘ä»¬ä¼šé‡åˆ°å¾ˆå¤šæƒ…å†µéœ€è¦æˆ‘ä»¬è¯„ä¼°å„ç§ä¸åŒçš„æ–¹æ¡ˆï¼Œä»¥åŠåº”è¯¥é‡‡ç”¨å“ªäº›ç­–ç•¥æ¥æµ‹è¯•æˆ‘ä»¬çš„äº§å“æˆ–å¹¿å‘Šã€‚A&#x2F;B testingå°±æ˜¯ä¸€ä¸ªå¸®æˆ‘ä»¬é€‰å‡ºæ›´å¥½çš„æ–¹æ¡ˆçš„åŠæ³•ã€‚</li><li>å½“è¿›è¡ŒA&#x2F;Bæµ‹è¯•æ—¶ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç»„ï¼šAç»„å’ŒBç»„ã€‚Aç»„æ˜¯å¯¹ç…§ç»„ï¼ŒBç»„æ˜¯å®éªŒç»„ï¼ŒBç»„åœ¨æŸäº›å› ç´ ä¸Šä¸Aç»„ä¸åŒã€‚</li><li>æŠŠç”¨æˆ·éšæœºåœ°åˆ†åˆ°è¿™ä¸¤ç»„ï¼Œæ¯”è¾ƒè¿™ä¸¤ç»„çš„ç”¨æˆ·è¡Œä¸ºæ˜¯å¦æœ‰æ˜¾è‘—çš„å·®å¼‚ã€‚å¦‚æœæœ‰ï¼Œé‚£æˆ‘ä»¬å°±ä¼šè®¤ä¸ºï¼Œå¯¼è‡´è¿™ä¸ªè¡Œä¸ºå·®å¼‚çš„åŸå› ï¼Œæ˜¯Bç»„é‡Œçš„é‚£äº›ä¸Aç»„ä¸åŒçš„å› ç´ ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOPS </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…FFmpeg</title>
      <link href="/2020/09/05/gong-ju/centos-an-zhuang-ffmpeg/"/>
      <url>/2020/09/05/gong-ju/centos-an-zhuang-ffmpeg/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export FFMPEG_PACKAGE=/home/tools/packages</span><br><span class="line">export FFMPEG_INSTALL=/home/tools/ffmpeg_install</span><br><span class="line"></span><br><span class="line">export PATH=$PATH:$HOME/bin:$FFMPEG_INSTALL/bin</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y autoconf automake bzip2 bzip2-devel cmake freetype-devel gcc gcc-c++ git libtool make mercurial pkgconfig zlib-devel</span><br></pre></td></tr></table></figure><h2 id="libx264"><a href="#libx264" class="headerlink" title="libx264"></a>libx264</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd $FFMPEG_PACKAGE</span><br><span class="line">git clone https://code.videolan.org/videolan/x264.git</span><br><span class="line">cd x264</span><br><span class="line">PKG_CONFIG_PATH=&quot;$FFMPEG_INSTALL/ffmpeg_build/lib/pkgconfig&quot; ./configure --prefix=&quot;$FFMPEG_INSTALL/ffmpeg_build&quot; --bindir=&quot;$FFMPEG_INSTALL/bin&quot; --enable-static --disable-asm</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h2 id="FFmpeg"><a href="#FFmpeg" class="headerlink" title="FFmpeg"></a>FFmpeg</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cd $FFMPEG_PACKAGE</span><br><span class="line">curl -O -L http://ffmpeg.org/releases/ffmpeg-4.3.1.tar.gz</span><br><span class="line">tar -zxvf ffmpeg-4.3.1.tar.gz</span><br><span class="line">cd ffmpeg-4.3.1</span><br><span class="line">PATH=&quot;$HOME/bin:$PATH&quot; PKG_CONFIG_PATH=&quot;$FFMPEG_INSTALL/ffmpeg_build/lib/pkgconfig&quot; ./configure \</span><br><span class="line">  --prefix=&quot;$FFMPEG_INSTALL/ffmpeg_build&quot; \</span><br><span class="line">  --pkg-config-flags=&quot;--static&quot; \</span><br><span class="line">  --extra-cflags=&quot;-I$FFMPEG_INSTALL/ffmpeg_build/include&quot; \</span><br><span class="line">  --extra-ldflags=&quot;-L$FFMPEG_INSTALL/ffmpeg_build/lib&quot; \</span><br><span class="line">  --extra-libs=-lpthread \</span><br><span class="line">  --extra-libs=-lm \</span><br><span class="line">  --bindir=&quot;$FFMPEG_INSTALL/bin&quot; \</span><br><span class="line">  --enable-gpl \</span><br><span class="line">  --enable-libfreetype \</span><br><span class="line">  --enable-libx264 \</span><br><span class="line">  --enable-nonfree \</span><br><span class="line">  --disable-x86asm</span><br><span class="line">  </span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">hash -d ffmpeg  </span><br></pre></td></tr></table></figure><h2 id="å‡†å¤‡å­—ä½“æ–‡ä»¶"><a href="#å‡†å¤‡å­—ä½“æ–‡ä»¶" class="headerlink" title="å‡†å¤‡å­—ä½“æ–‡ä»¶"></a>å‡†å¤‡å­—ä½“æ–‡ä»¶</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¾®è½¯é›…é»‘</span></span><br><span class="line">cp msyh.ttc /home/tools/</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ"></a>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•ï¼š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  1. è·å–è§†é¢‘æ–‡ä»¶ä¿¡æ¯</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2. æ·»åŠ æ–‡å­—ã€å›¾ç‰‡æ°´å°</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  3. å‹ç¼©å‰é¢åŠ äº†æ°´å°çš„è§†é¢‘æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•æ–‡ä»¶æ”¾åœ¨/homt/toolsä¸‹ï¼Œå‘½åä¸º1.mp4</span></span><br></pre></td></tr></table></figure><ol><li><p>è·å–è§†é¢‘æ–‡ä»¶ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@acr-2 tools]# ffprobe /home/tools/1.mp4</span><br><span class="line">ffprobe version 4.3.1 Copyright (c) 2007-2020 the FFmpeg developers</span><br><span class="line">  built with gcc 4.8.5 (GCC) 20150623 (Red Hat 4.8.5-39)</span><br><span class="line">  configuration: --prefix=/home/tools/ffmpeg_install/ffmpeg_build --pkg-config-flags=--static --extra-cflags=-I/home/tools/ffmpeg_install/ffmpeg_build/include --extra-ldflags=-L/home/tools/ffmpeg_install/ffmpeg_build/lib --extra-libs=-lpthread --extra-libs=-lm --bindir=/home/tools/ffmpeg_install/bin --enable-gpl --enable-libfreetype --enable-libx264 --enable-nonfree --disable-x86asm</span><br><span class="line">  libavutil      56. 51.100 / 56. 51.100</span><br><span class="line">  libavcodec     58. 91.100 / 58. 91.100</span><br><span class="line">  libavformat    58. 45.100 / 58. 45.100</span><br><span class="line">  libavdevice    58. 10.100 / 58. 10.100</span><br><span class="line">  libavfilter     7. 85.100 /  7. 85.100</span><br><span class="line">  libswscale      5.  7.100 /  5.  7.100</span><br><span class="line">  libswresample   3.  7.100 /  3.  7.100</span><br><span class="line">  libpostproc    55.  7.100 / 55.  7.100</span><br><span class="line">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#x27;/home/tools/1.mp4&#x27;:</span><br><span class="line">  Metadata:</span><br><span class="line">    major_brand     : mp42</span><br><span class="line">    minor_version   : 1</span><br><span class="line">    compatible_brands: mp41mp42isom</span><br><span class="line">    creation_time   : 2017-09-28T02:49:03.000000Z</span><br><span class="line">  Duration: 00:00:10.07, start: 0.000000, bitrate: 1185 kb/s</span><br><span class="line">    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 540x960, 1124 kb/s, 29.80 fps, 30 tbr, 15360 tbn, 60 tbc (default)</span><br><span class="line">    Metadata:</span><br><span class="line">      creation_time   : 2017-09-28T02:49:03.000000Z</span><br><span class="line">      handler_name    : Core Media Video</span><br><span class="line">    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 48 kb/s (default)</span><br><span class="line">    Metadata:</span><br><span class="line">      creation_time   : 2017-09-28T02:49:03.000000Z</span><br><span class="line">      handler_name    : Core Media Audio</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ æ–‡å­—ã€å›¾ç‰‡æ°´å°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@acr-2 tools]# ffmpeg -i /home/tools/1.mp4 -vcodec h264 -vf &quot;[in]drawtext=x=(w-text_w)/2:y=(h-line_h)/2+14:text=&#x27;ID\: 1234567890&#x27;:fontfile=/home/tools/msyh.ttc:fontsize=15:fontcolor=white[text];movie=/home/tools/watermark.png[wm];[text][wm]overlay=(W-w)/2:(H-h)/2[out]&quot; /home/tools/2.mp4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line">[libx264 @ 0x24e6940] consecutive B-frames: 17.5% 56.3%  8.9% 17.2%</span><br><span class="line">[libx264 @ 0x24e6940] mb I  I16..4: 13.8% 62.2% 24.0%</span><br><span class="line">[libx264 @ 0x24e6940] mb P  I16..4:  3.0%  7.4%  1.2%  P16..4: 55.5% 10.0%  4.0%  0.0%  0.0%    skip:18.9%</span><br><span class="line">[libx264 @ 0x24e6940] mb B  I16..4:  0.3%  0.5%  0.0%  B16..8: 34.7%  2.7%  0.5%  direct: 1.8%  skip:59.4%  L0:35.4% L1:55.3% BI: 9.3%</span><br><span class="line">[libx264 @ 0x24e6940] 8x8 transform intra:63.1% inter:55.8%</span><br><span class="line">[libx264 @ 0x24e6940] coded y,uvDC,uvAC intra: 45.5% 32.8% 3.8% inter: 15.5% 5.7% 0.2%</span><br><span class="line">[libx264 @ 0x24e6940] i16 v,h,dc,p: 19% 41% 15% 25%</span><br><span class="line">[libx264 @ 0x24e6940] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 17% 24% 33%  3%  4%  4%  4%  4%  6%</span><br><span class="line">[libx264 @ 0x24e6940] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 26% 26%  5%  5%  5%  5%  5%  6%</span><br><span class="line">[libx264 @ 0x24e6940] i8c dc,h,v,p: 67% 18% 12%  2%</span><br><span class="line">[libx264 @ 0x24e6940] Weighted P-Frames: Y:10.1% UV:1.9%</span><br><span class="line">[libx264 @ 0x24e6940] ref P L0: 68.8% 19.3% 10.5%  1.3%  0.1%</span><br><span class="line">[libx264 @ 0x24e6940] ref B L0: 92.0%  7.7%  0.3%</span><br><span class="line">[libx264 @ 0x24e6940] ref B L1: 99.9%  0.1%</span><br><span class="line">[libx264 @ 0x24e6940] kb/s:1703.29</span><br><span class="line">[aac @ 0x24e5e00] Qavg: 1049.078</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡ºç°ä»¥ä¸Šä¿¡æ¯å¹¶ä¸”åœ¨/home/toolsç›®å½•ä¸‹ç”Ÿæˆ2.mp4æ–‡ä»¶å°±è¡¨ç¤ºæˆåŠŸ</span></span><br></pre></td></tr></table></figure></li><li><p>å‹ç¼©å‰é¢åŠ äº†æ°´å°çš„è§†é¢‘æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@acr-2 tools]# ffmpeg -i /home/tools/2.mp4 -vcodec h264 -vf &quot;scale=iw*0.5:-1&quot; -r 15  -ac 2 -ar 22050 -f mp4 -b:v 400k -y /home/tools/3.mp4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line">[libx264 @ 0x320a880] mb P  I16..4:  2.4%  7.0%  2.7%  P16..4: 32.1% 31.2% 19.1%  0.0%  0.0%    skip: 5.4%</span><br><span class="line">[libx264 @ 0x320a880] mb B  I16..4:  0.3%  0.4%  0.1%  B16..8: 43.4% 17.2%  4.8%  direct: 3.4%  skip:30.5%  L0:37.0% L1:46.9% BI:16.1%</span><br><span class="line">[libx264 @ 0x320a880] final ratefactor: 26.39</span><br><span class="line">[libx264 @ 0x320a880] 8x8 transform intra:53.9% inter:54.9%</span><br><span class="line">[libx264 @ 0x320a880] coded y,uvDC,uvAC intra: 58.2% 42.6% 8.4% inter: 32.0% 13.0% 0.8%</span><br><span class="line">[libx264 @ 0x320a880] i16 v,h,dc,p: 24% 33% 13% 29%</span><br><span class="line">[libx264 @ 0x320a880] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 17% 39%  4%  6%  5%  5%  5%  7%</span><br><span class="line">[libx264 @ 0x320a880] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 14% 22% 25%  7%  6%  6%  6%  7%  7%</span><br><span class="line">[libx264 @ 0x320a880] i8c dc,h,v,p: 72% 15% 12%  2%</span><br><span class="line">[libx264 @ 0x320a880] Weighted P-Frames: Y:35.0% UV:8.8%</span><br><span class="line">[libx264 @ 0x320a880] ref P L0: 64.8% 26.5%  6.9%  1.5%  0.3%</span><br><span class="line">[libx264 @ 0x320a880] ref B L0: 96.8%  2.7%  0.5%</span><br><span class="line">[libx264 @ 0x320a880] ref B L1: 98.5%  1.5%</span><br><span class="line">[libx264 @ 0x320a880] kb/s:433.09</span><br><span class="line">[aac @ 0x31eb340] Qavg: 6954.015</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡ºç°ä»¥ä¸Šä¿¡æ¯å¹¶ä¸”åœ¨/home/toolsç›®å½•ä¸‹ç”Ÿæˆ3.mp4æ–‡ä»¶å°±è¡¨ç¤ºæˆåŠŸ</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>å®˜ç½‘ï¼š<a href="https://trac.ffmpeg.org/wiki/CompilationGuide/Centos">https://trac.ffmpeg.org/wiki/CompilationGuide/Centos</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> FFmpeg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè¯­æ³•ç³–ä»‹ç»</title>
      <link href="/2020/08/13/hou-duan/java-yu-fa-tang-jie-shao/"/>
      <url>/2020/08/13/hou-duan/java-yu-fa-tang-jie-shao/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><ol><li><p>ä»€ä¹ˆæ˜¯è¯­æ³•ç³–</p><blockquote><p>è¯­æ³•ç³–ï¼ˆSyntactic sugarï¼‰ï¼Œä¹Ÿè¯‘ä¸ºç³–è¡£è¯­æ³•ï¼Œæ˜¯ç”±è‹±å›½è®¡ç®—æœºç§‘å­¦å®¶å½¼å¾—Â·å…°ä¸å‘æ˜çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚</p></blockquote></li><li><p>èƒ½å¤Ÿå¸¦æ¥çš„å¥½å¤„</p><blockquote><p>è¯­æ³•ç³–è®©ç¨‹åºæ›´åŠ ç®€æ´ï¼Œæœ‰æ›´é«˜çš„å¯è¯»æ€§</p></blockquote></li><li><p>æœ‰å“ªäº›è¯­æ³•ç³–</p><ol><li>è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±</li><li>æ³›å‹æ“¦é™¤</li><li>ä¸å®šé•¿å‚æ•°</li><li>è¿­ä»£å™¨</li><li>æšä¸¾</li><li>switchæ”¯æŒæšä¸¾å’Œå­—ç¬¦ä¸²</li><li>å†…éƒ¨ç±»</li><li>try-with-resources</li><li>lambda</li></ol></li></ol><span id="more"></span><h1 id="è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±"><a href="#è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±" class="headerlink" title="è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±"></a>è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±</h1><ol><li>Javaæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸‡ç‰©çš†å¯¹è±¡ï¼‰</li><li>å¯¹è±¡å³éœ€è¦newå‡ºæ¥çš„ï¼Œä½†æ˜¯æƒ³æƒ³åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆint&#x2F;double&#x2F;booleanâ€¦ï¼‰,å¹¶ä¸éœ€è¦å»new</li><li>why?</li><li>ä¸ºäº†æ–¹ä¾¿å»ä½¿ç”¨ï¼ŒJavaå¯¹è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†è£…ç®±ç±»å‹</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è‡ªåŠ¨è£…ç®±</span></span><br><span class="line">        <span class="comment">// ç›¸å½“äºä»£ç ï¼šInteger i = Integer.valueOf(1);</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è‡ªåŠ¨æ‹†ç®±</span></span><br><span class="line">        <span class="comment">// ç›¸å½“äºä»£ç ï¼šint j = i.intValue();</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i;</span><br><span class="line"></span><br><span class="line">        System.out.println(i + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// # ç¼–è¯‘</span></span><br><span class="line"><span class="comment">// javac Demo.java</span></span><br><span class="line"><span class="comment">// # æŸ¥çœ‹å­—èŠ‚ç </span></span><br><span class="line"><span class="comment">// javap -c Demo</span></span><br><span class="line"></span><br><span class="line">Compiled from <span class="string">&quot;Demo.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_">java</span>.lang.Object&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Demo</span><span class="params">()</span>;</span><br><span class="line">  Code:</span><br><span class="line">   <span class="number">0</span>:   aload_0</span><br><span class="line">   <span class="number">1</span>:   invokespecial   #<span class="number">1</span>; <span class="comment">//Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="number">4</span>:   <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">  Code:</span><br><span class="line">   <span class="number">0</span>:   iconst_1</span><br><span class="line">   <span class="number">1</span>:   invokestatic    #<span class="number">2</span>; <span class="comment">//Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;</span></span><br><span class="line">   <span class="number">4</span>:   astore_1</span><br><span class="line">   <span class="number">5</span>:   aload_1</span><br><span class="line">   <span class="number">6</span>:   invokevirtual   #<span class="number">3</span>; <span class="comment">//Method java/lang/Integer.intValue:()I</span></span><br><span class="line">   <span class="number">9</span>:   istore_2</span><br><span class="line">   <span class="number">10</span>:  getstatic       #<span class="number">4</span>; <span class="comment">//Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   <span class="number">13</span>:  aload_1</span><br><span class="line">   <span class="number">14</span>:  invokevirtual   #<span class="number">3</span>; <span class="comment">//Method java/lang/Integer.intValue:()I</span></span><br><span class="line">   <span class="number">17</span>:  iload_2</span><br><span class="line">   <span class="number">18</span>:  iadd</span><br><span class="line">   <span class="number">19</span>:  inv<span class="comment">// okevirtual   #5; //Method java/io/PrintStream.println:(I)V</span></span><br><span class="line">   <span class="number">22</span>:  <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>æ€è€ƒ<ol><li>Integerçš„è£…ç®±ç±»å‹èƒ½å¦ç”¨&#x3D;&#x3D;æ¯”è¾ƒï¼Ÿ<ol><li>Integerç±»å‹çš„valueofæ–¹æ³•ï¼Œ-128~127åŒºé—´é‡‡ç”¨ç¼“å­˜ï¼Œè¿™éƒ¨åˆ†å€¼æ˜¯å¯ä»¥ç”¨&#x3D;&#x3D;æ¯”è¾ƒçš„ï¼ŒåŒºé—´å¤–çš„æ˜¯é‡æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œç”¨&#x3D;&#x3D;æ¯”è¾ƒçš„åªæ˜¯å¼•ç”¨</li></ol></li><li>&#x3D;&#x3D;ã€equalsçš„åŒºåˆ«ï¼Ÿ</li><li>ä¸ºä½•é˜¿é‡Œè§„èŒƒä¸­å¿ƒPOJOä»¥åŠRPCçš„å…¥å‚ã€è¿”å›å€¼çš„ç±»å±æ€§å®šä¹‰éƒ½è¦ç”¨ç”¨åŒ…è£…æ•°æ®ï¼Ÿ<ol><li>æœ‰æ—¶å€™ï¼Œæ¥æ”¶åˆ°çš„å€¼å¯èƒ½äº‹nullç±»å‹ï¼Œå¦‚æœç”¨çš„æ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ä¼šåœ¨æ‹†ç®±çš„è¿‡ç¨‹ä¸­å‘ç”ŸNPE</li></ol></li></ol></li></ol><h1 id="æ³›å‹æ“¦é™¤"><a href="#æ³›å‹æ“¦é™¤" class="headerlink" title="æ³›å‹æ“¦é™¤"></a>æ³›å‹æ“¦é™¤</h1><ol><li>Javaçš„æ³›å‹ï¼Œå…¶å®æ˜¯ <code>ä¼ªæ³›å‹</code>Â ï¼Œæ³›å‹ä»…ä»…å­˜åœ¨äºç¼–ç æœŸé—´ï¼Œä¾›ç¼–è¯‘å™¨è¿›è¡Œç±»å‹æ£€æµ‹ï¼Œç¼–è¯‘åï¼Œä¼šè¢«æ“¦é™¤ã€‚</li><li>è¿è¡Œæ—¶ï¼Œé€šè¿‡ç±»å‹å¼ºåˆ¶è½¬æ¢æ¥å®ç°çš„ã€‚</li><li>æ³›å‹æ˜¯JDK1.5ä¹‹åå¼•å…¥</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// // 1. æºç </span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; a = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="comment">// å¹¶ä¸èƒ½ç¼–è¯‘é€šè¿‡</span></span><br><span class="line">        <span class="comment">// a.add(111);</span></span><br><span class="line">        a.add(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">temp</span> <span class="operator">=</span> a.get(<span class="number">0</span>);</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> é€šè¿‡jd-guiåç¼–è¯‘åå¾—åˆ°</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] paramArrayOfString)</span> &#123;</span><br><span class="line">    <span class="type">ArrayList</span> <span class="variable">arrayList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line"></span><br><span class="line">    arrayList.add(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    <span class="comment">// é€šè¿‡ç±»å‹å¼ºåˆ¶è½¬æ¢æ¥è·å–Listä¸­çš„å¯¹è±¡ï¼Œè¿™é‡Œå·²ç»ç”±ç¼–ç æœŸçš„æ³›å‹æ¥ä¿è¯äº†ç±»å‹å®‰å…¨</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String)arrayList.get(<span class="number">0</span>);</span><br><span class="line">    System.out.println(str);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. å¦‚ä½•è¯æ˜æ³›å‹åœ¨ç¼–è¯‘æ—¶è¢«æ“¦é™¤ï¼Œè¿è¡Œæ—¶å¹¶ä¸éœ€è¦è¿™ä¸ª</span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; a = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        List&lt;String&gt; b = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¹¶ä¸èƒ½ç¼–è¯‘é€šè¿‡</span></span><br><span class="line">        <span class="comment">// a.addAll(b);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> a.getClass();  </span><br><span class="line">        <span class="type">Class</span> <span class="variable">c2</span> <span class="operator">=</span> b.getClass();   </span><br><span class="line">        <span class="comment">// æ‰“å°:</span></span><br><span class="line">        <span class="comment">// class java.util.ArrayList</span></span><br><span class="line">        <span class="comment">// true</span></span><br><span class="line">        <span class="comment">// è¿è¡Œæ—¶è·å–aå’Œbçš„ç±»å‹</span></span><br><span class="line">        System.out.println(c1);  </span><br><span class="line">        System.out.println(c1 == c2);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h1><ol><li>æšä¸¾å…¶å®å°±æ˜¯ä¸€ä¸ªJavaç±»ï¼Œç»§æ‰¿äº† <code>java.lang.Enum</code>Â ï¼Œå¹¶ä¸”å…¶æœ¬èº«æ˜¯ä¸å…è®¸è¢«ç»§æ‰¿çš„</li><li>ç”¨ <code>enum</code>Â ä¿®é¥°çš„</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æšä¸¾æºç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    ENUM_A,</span><br><span class="line">    ENUM_B</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ç¼–è¯‘åï¼Œç”¨javapæŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// javac Demo.java</span></span><br><span class="line"><span class="comment">// javap -c Demo</span></span><br><span class="line">Compiled from <span class="string">&quot;Demo.java&quot;</span></span><br><span class="line"><span class="comment">// æ­¤å¤„å¯ä»¥çœ‹å‡ºæ¥æšä¸¾ç±»ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ™®æ™®é€šé€šçš„Javaç±»</span></span><br><span class="line"><span class="comment">// é¦–å…ˆï¼Œå®ƒæ˜¯è¢«finalä¿®é¥°çš„ï¼Œæ‰€æœ‰ä¸èƒ½è¢«ç»§æ‰¿</span></span><br><span class="line"><span class="comment">// å…¶æ¬¡ï¼Œé»˜è®¤ç»§æ‰¿äº†java.lang.Enumï¼Œå¹¶åŒ…å«æ³›å‹ï¼Œæ³›å‹ç±»å‹ä¸ºå…¶æœ¬èº«</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_">java</span>.lang.Enum&lt;Demo&gt; &#123;</span><br><span class="line">  <span class="comment">// æœ‰ä¸¤ä¸ªé™æ€å®šä¹‰çš„æšä¸¾å€¼</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Demo ENUM_A;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Demo ENUM_B;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Demo[] values();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: getstatic     #<span class="number">1</span>                  <span class="comment">// Field $VALUES:[LDemo;</span></span><br><span class="line">       <span class="number">3</span>: invokevirtual #<span class="number">2</span>                  <span class="comment">// Method &quot;[LDemo;&quot;.clone:()Ljava/lang/Object;</span></span><br><span class="line">       <span class="number">6</span>: checkcast     #<span class="number">3</span>                  <span class="comment">// class &quot;[LDemo;&quot;</span></span><br><span class="line">       <span class="number">9</span>: areturn</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Demo <span class="title function_">valueOf</span><span class="params">(java.lang.String)</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: ldc           #<span class="number">4</span>                  <span class="comment">// class Demo</span></span><br><span class="line">       <span class="number">2</span>: aload_0</span><br><span class="line">       <span class="number">3</span>: invokestatic  #<span class="number">5</span>                  <span class="comment">// Method java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;</span></span><br><span class="line"></span><br><span class="line">       <span class="number">6</span>: checkcast     #<span class="number">4</span>                  <span class="comment">// class Demo</span></span><br><span class="line">       <span class="number">9</span>: areturn</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;&#125;;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="comment">// newä¸€ä¸ªå¯¹è±¡ï¼Œç±»å‹äº‹Demo</span></span><br><span class="line">       <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">4</span>                  <span class="comment">// class Demo</span></span><br><span class="line">       <span class="number">3</span>: dup</span><br><span class="line">       <span class="comment">// å°†å¸¸é‡å‹å…¥æ ˆ</span></span><br><span class="line">       <span class="number">4</span>: ldc           #<span class="number">7</span>                  <span class="comment">// String ENUM_A</span></span><br><span class="line">       <span class="comment">// å®šä¹‰å˜é‡0</span></span><br><span class="line">       <span class="number">6</span>: iconst_0</span><br><span class="line">       <span class="comment">// è°ƒç”¨æ„é€ å™¨ï¼Œæ³¨æ„å…¥å‚æ˜¯ä¸¤ä¸ª(ä¸Šé¢å…¥æ ˆçš„ä¸¤ä¸ª)</span></span><br><span class="line">       <span class="number">7</span>: invokespecial #<span class="number">8</span>                  <span class="comment">// Method &quot;&lt;init&gt;&quot;:(Ljava/lang/String;I)V</span></span><br><span class="line">      <span class="comment">// èµ‹å€¼</span></span><br><span class="line">      <span class="number">10</span>: putstatic     #<span class="number">9</span>                  <span class="comment">// Field ENUM_A:LDemo;</span></span><br><span class="line">      <span class="number">13</span>: <span class="keyword">new</span>           #<span class="number">4</span>                  <span class="comment">// class Demo</span></span><br><span class="line">      <span class="number">16</span>: dup</span><br><span class="line">      <span class="number">17</span>: ldc           #<span class="number">10</span>                 <span class="comment">// String ENUM_B</span></span><br><span class="line">      <span class="number">19</span>: iconst_1</span><br><span class="line">      <span class="number">20</span>: invokespecial #<span class="number">8</span>                  <span class="comment">// Method &quot;&lt;init&gt;&quot;:(Ljava/lang/String;I)V</span></span><br><span class="line">      <span class="number">23</span>: putstatic     #<span class="number">11</span>                 <span class="comment">// Field ENUM_B:LDemo;</span></span><br><span class="line">      <span class="number">26</span>: iconst_2</span><br><span class="line">      <span class="comment">// åˆ›å»ºæ•°ç»„ï¼Œç±»å‹æ˜¯o</span></span><br><span class="line">      <span class="number">27</span>: anewarray     #<span class="number">4</span>                  <span class="comment">// class Demo</span></span><br><span class="line">      <span class="comment">// å‹æ ˆ</span></span><br><span class="line">      <span class="number">30</span>: dup</span><br><span class="line">      <span class="comment">// ç¬¬0ä½</span></span><br><span class="line">      <span class="number">31</span>: iconst_0</span><br><span class="line">      <span class="comment">// å–å€¼</span></span><br><span class="line">      <span class="number">32</span>: getstatic     #<span class="number">9</span>                  <span class="comment">// Field ENUM_A:LDemo;</span></span><br><span class="line">      <span class="comment">// å­˜å…¥å¯¹åº”çš„æ•°ç»„å…ƒç´ ä¸­</span></span><br><span class="line">      <span class="number">35</span>: aastore</span><br><span class="line">      <span class="number">36</span>: dup</span><br><span class="line">      <span class="number">37</span>: iconst_1</span><br><span class="line">      <span class="number">38</span>: getstatic     #<span class="number">11</span>                 <span class="comment">// Field ENUM_B:LDemo;</span></span><br><span class="line">      <span class="number">41</span>: aastore</span><br><span class="line">      <span class="number">42</span>: putstatic     #<span class="number">1</span>                  <span class="comment">// Field $VALUES:[LDemo;</span></span><br><span class="line">      <span class="number">45</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="try-with-resources"><a href="#try-with-resources" class="headerlink" title="try-with-resources"></a>try-with-resources</h1><ol><li>ä»¥å‰åœ¨å†™è®¿é—®æ•°æ®åº“ã€æµç¼–ç¨‹ï¼Œé€šå¸¸éœ€è¦å°†èµ„æºå…³é—­</li><li>ä»¥å‰ä½¿ç”¨try-catch-finallyçš„å†™æ³•ï¼Œåœ¨finallyä¸­å°†èµ„æºå…³é—­</li><li>è¿™æ—¶å€™å°±è¦æ³¨æ„å¾ˆå¤šç»†èŠ‚ä¸Šçš„é—®é¢˜<ol><li>èµ„æºæ˜¯å¦æ‰“å¼€ï¼Œæ˜¯å¦å­˜åœ¨</li><li>å…³é—­çš„è¿‡ç¨‹ä¸­å¦‚ä½•å¤„ç†å¼‚å¸¸</li><li>finallyä¸­ä¸èƒ½å†™return</li></ol></li><li>è‡ªä»JDK7ä¹‹åï¼Œæ”¯æŒ <code>try-with-resources</code>Â çš„å†™æ³•ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ä¸¤ç§å†™æ³•çš„åŒºåˆ«ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. try-catch-finallyå†™æ³•ï¼š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String src)</span> &#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(in);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (in != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                in.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. try-with-resourceså†™æ³•ï¼š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String src)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src)) &#123;</span><br><span class="line">        System.out.println(in);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>å¾ˆæ˜æ˜¾ï¼Œç¬¬äºŒç§å†™æ³•è¾ƒç¬¬ä¸€ç§ï¼Œæ¸…æ™°ã€æ˜äº†ã€‚</li><li>ä¸‹é¢è¿›è¡Œæºç åˆ†æï¼š</li><li>æŸ¥çœ‹JDK7ç‰ˆæœ¬ä¸­çš„ <code>FileInputStream</code>Â æºç </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. FileInputStreamæºç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStream</span> <span class="keyword">extends</span> <span class="title class_">InputStream</span> &#123; </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (closeLock) &#123;</span><br><span class="line">            <span class="keyword">if</span> (closed) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            closed = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (channel != <span class="literal">null</span>) &#123;</span><br><span class="line">            channel.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fd.closeAll(<span class="keyword">new</span> <span class="title class_">Closeable</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                close0();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br><span class="line"><span class="comment">// 2. FileInputStreamçˆ¶ç±»InputStreamæºç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">InputStream</span> <span class="keyword">implements</span> <span class="title class_">Closeable</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3. InputStreamå®ç°çš„æ¥å£Closeableçš„æºç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Closeable</span> <span class="keyword">extends</span> <span class="title class_">AutoCloseable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 4. AutoCloseableçš„æºç </span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ...</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.7</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AutoCloseable</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="8"><li>å¯è§æœ€ç»ˆæ˜¯å®ç°äº†ä¸€ä¸ªJDK7æ‰æä¾›çš„æ¥å£ <code>AutoCloseable</code>Â </li><li>æˆ‘ä»¬å†å»æŸ¥çœ‹ä¸€ä¸‹<code>try-with-resources</code> å†™æ³•çš„å­—èŠ‚ç æ–‡ä»¶</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// javap -c Demo</span></span><br><span class="line">Compiled from <span class="string">&quot;Demo.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Demo</span><span class="params">()</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(java.lang.String)</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">2</span>                  <span class="comment">// class java/io/FileInputStream</span></span><br><span class="line">       <span class="number">3</span>: dup</span><br><span class="line">       <span class="number">4</span>: aload_0</span><br><span class="line">       <span class="number">5</span>: invokespecial #<span class="number">3</span>                  <span class="comment">// Method java/io/FileInputStream.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V</span></span><br><span class="line">       <span class="number">8</span>: astore_1</span><br><span class="line">       <span class="number">9</span>: aconst_null</span><br><span class="line">      <span class="number">10</span>: astore_2</span><br><span class="line">      <span class="number">11</span>: getstatic     #<span class="number">4</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">14</span>: aload_1</span><br><span class="line">      <span class="number">15</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/Object;)V</span></span><br><span class="line">      <span class="number">18</span>: aload_1</span><br><span class="line">      <span class="number">19</span>: ifnull        <span class="number">89</span></span><br><span class="line">      <span class="number">22</span>: aload_2</span><br><span class="line">      <span class="number">23</span>: ifnull        <span class="number">42</span></span><br><span class="line">      <span class="number">26</span>: aload_1</span><br><span class="line">      <span class="number">27</span>: invokevirtual #<span class="number">6</span>                  <span class="comment">// Method java/io/InputStream.close:()V</span></span><br><span class="line">      <span class="number">30</span>: <span class="keyword">goto</span>          <span class="number">89</span></span><br><span class="line">      <span class="number">33</span>: astore_3</span><br><span class="line">      <span class="number">34</span>: aload_2</span><br><span class="line">      <span class="number">35</span>: aload_3</span><br><span class="line">      <span class="number">36</span>: invokevirtual #<span class="number">8</span>                  <span class="comment">// Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V</span></span><br><span class="line">      <span class="number">39</span>: <span class="keyword">goto</span>          <span class="number">89</span></span><br><span class="line">      <span class="number">42</span>: aload_1</span><br><span class="line">      <span class="number">43</span>: invokevirtual #<span class="number">6</span>                  <span class="comment">// Method java/io/InputStream.close:()V</span></span><br><span class="line">      <span class="number">46</span>: <span class="keyword">goto</span>          <span class="number">89</span></span><br><span class="line">      <span class="number">49</span>: astore_3</span><br><span class="line">      <span class="number">50</span>: aload_3</span><br><span class="line">      <span class="number">51</span>: astore_2</span><br><span class="line">      <span class="number">52</span>: aload_3</span><br><span class="line">      <span class="number">53</span>: athrow</span><br><span class="line">      <span class="number">54</span>: astore        <span class="number">4</span></span><br><span class="line">      <span class="number">56</span>: aload_1</span><br><span class="line">      <span class="number">57</span>: ifnull        <span class="number">86</span></span><br><span class="line">      <span class="number">60</span>: aload_2</span><br><span class="line">      <span class="number">61</span>: ifnull        <span class="number">82</span></span><br><span class="line">      <span class="number">64</span>: aload_1</span><br><span class="line">      <span class="number">65</span>: invokevirtual #<span class="number">6</span>                  <span class="comment">// Method java/io/InputStream.close:()V</span></span><br><span class="line">      <span class="number">68</span>: <span class="keyword">goto</span>          <span class="number">86</span></span><br><span class="line">      <span class="number">71</span>: astore        <span class="number">5</span></span><br><span class="line">      <span class="number">73</span>: aload_2</span><br><span class="line">      <span class="number">74</span>: aload         <span class="number">5</span></span><br><span class="line">      <span class="number">76</span>: invokevirtual #<span class="number">8</span>                  <span class="comment">// Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V</span></span><br><span class="line">      <span class="number">79</span>: <span class="keyword">goto</span>          <span class="number">86</span></span><br><span class="line">      <span class="number">82</span>: aload_1</span><br><span class="line">      <span class="number">83</span>: invokevirtual #<span class="number">6</span>                  <span class="comment">// Method java/io/InputStream.close:()V</span></span><br><span class="line">      <span class="number">86</span>: aload         <span class="number">4</span></span><br><span class="line">      <span class="number">88</span>: athrow</span><br><span class="line">      <span class="number">89</span>: <span class="keyword">goto</span>          <span class="number">97</span></span><br><span class="line">      <span class="number">92</span>: astore_1</span><br><span class="line">      <span class="number">93</span>: aload_1</span><br><span class="line">      <span class="number">94</span>: invokevirtual #<span class="number">10</span>                 <span class="comment">// Method java/io/IOException.printStackTrace:()V</span></span><br><span class="line">      <span class="number">97</span>: <span class="keyword">return</span></span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">          <span class="number">26</span>    <span class="number">30</span>    <span class="number">33</span>   Class java/lang/Throwable</span><br><span class="line">          <span class="number">11</span>    <span class="number">18</span>    <span class="number">49</span>   Class java/lang/Throwable</span><br><span class="line">          <span class="number">11</span>    <span class="number">18</span>    <span class="number">54</span>   any</span><br><span class="line">          <span class="number">64</span>    <span class="number">68</span>    <span class="number">71</span>   Class java/lang/Throwable</span><br><span class="line">          <span class="number">49</span>    <span class="number">56</span>    <span class="number">54</span>   any</span><br><span class="line">           <span class="number">0</span>    <span class="number">89</span>    <span class="number">92</span>   Class java/io/IOException</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="10"><li><p>æ€è€ƒ</p></li><li><p>é—®é¢˜ä¸€</p><ol><li>åœ¨ç¬¬ä¸€ç§æ–¹æ¡ˆä¸­ï¼Œå¦‚æœtryå—ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸æ—¶å¯ä»¥è¢«æ­£å¸¸æŠ›å‡ºè®°å½•çš„</li><li>å¦‚æœåœ¨finallyä¸­äº§ç”Ÿå¼‚å¸¸ï¼Œç„¶åæŠ›å‡ºï¼Œé‚£è¯¥å¼‚å¸¸ä¹Ÿå¯ä»¥è¢«æ­£å¸¸è®°å½•</li><li>å¦‚æœtryä¸­å…ˆå‡ºç°å¼‚å¸¸ï¼Œfinallyä¸­ä¹Ÿä¼šè¢«æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœfinallyä¸­ä¹Ÿå‡ºç°äº†å¼‚å¸¸å¹¶æŠ›å‡ºï¼Œtryä¸­çš„å¼‚å¸¸è¿˜èƒ½è¢«æ•è·ä¹ˆï¼Ÿ</li></ol></li><li><p>å…³äºå¼‚å¸¸</p><ol><li>jdk7ä¹‹å‰ï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œtryä¸­çš„å¼‚å¸¸å°±ä¼šè¢«å¿½ç•¥æ‰ï¼Œæ— æ³•æ•è·</li><li>jdk7ä¹‹åï¼Œå¼•å…¥äº†â€œå¯è¢«æŠ‘åˆ¶â€çš„å¼‚å¸¸ï¼Œfinallyä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œå¯ä»¥è·å–åˆ°tryä¸­çš„å¼‚å¸¸</li><li>jdk7ä¹‹å‰ï¼Œéœ€è¦å®ç°è‡ªå·±çš„å¼‚å¸¸ç±»</li><li>jdk7ä¹‹åï¼Œå·²ç»å¯¹Throwableç±»è¿›è¡Œäº†ä¿®æ”¹ä»¥æ”¯æŒè¿™ç§æƒ…å†µã€‚åœ¨java7ä¸­ä¸ºThrowableç±»å¢åŠ addSuppressedæ–¹æ³•ã€‚å½“ä¸€ä¸ªå¼‚å¸¸è¢«æŠ›å‡ºçš„æ—¶å€™ï¼Œå¯èƒ½æœ‰å…¶ä»–å¼‚å¸¸å› ä¸ºè¯¥å¼‚å¸¸è€Œè¢«æŠ‘åˆ¶ä½ï¼Œä»è€Œæ— æ³•æ­£å¸¸æŠ›å‡ºã€‚è¿™æ—¶å¯ä»¥é€šè¿‡addSuppressedæ–¹æ³•æŠŠè¿™äº›è¢«æŠ‘åˆ¶çš„æ–¹æ³•è®°å½•ä¸‹æ¥ã€‚è¢«æŠ‘åˆ¶çš„å¼‚å¸¸ä¼šå‡ºç°åœ¨æŠ›å‡ºçš„å¼‚å¸¸çš„å †æ ˆä¿¡æ¯ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡getSuppressedæ–¹æ³•æ¥è·å–è¿™äº›å¼‚å¸¸ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸ä¼šä¸¢å¤±ä»»ä½•å¼‚å¸¸ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜è¿›è¡Œè°ƒè¯•ã€‚</li><li>å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä¸Šé¢ä¾‹å­åç¼–è¯‘åçš„æºç ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Demo</span><span class="params">()</span> &#123;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String s)</span> &#123;</span><br><span class="line">     FileInputStream fileinputstream;</span><br><span class="line">     Throwable throwable;</span><br><span class="line">     fileinputstream = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(s);</span><br><span class="line">     throwable = <span class="literal">null</span>;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">       System.out.println(fileinputstream);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">catch</span>(Throwable throwable2) &#123;</span><br><span class="line">       throwable = throwable2;</span><br><span class="line">       <span class="keyword">throw</span> throwable2;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(fileinputstream != <span class="literal">null</span>)</span><br><span class="line">       <span class="keyword">if</span>(throwable != <span class="literal">null</span>)</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">           fileinputstream.close();</span><br><span class="line">         &#125; <span class="keyword">catch</span>(Throwable throwable1) &#123;</span><br><span class="line">           <span class="comment">// è¿™é‡Œå°±æ˜¯å°†catchä¸­çš„å¼‚å¸¸ï¼Œæ”¾åœ¨å¯èƒ½é˜»æ–­å¼‚å¸¸æŠ›å‡ºçš„å¼‚å¸¸ä¸­ï¼Œç„¶åç»Ÿä¸€åœ¨åé¢æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ ·throwable1å°±åœ¨throwableçš„å¼‚å¸¸æ ˆä¸­äº†</span></span><br><span class="line">           throwable.addSuppressed(throwable1);</span><br><span class="line">         &#125;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">         fileinputstream.close();</span><br><span class="line">     <span class="comment">// è¿™ä¸€å—ï¼Œæºç æ˜¯finallyå—ï¼Œç”±äºåç¼–è¯‘å·¥å…·çš„é—®é¢˜ï¼Œå¯¼è‡´çœ‹åˆ°breakè¯­å¥</span></span><br><span class="line">     <span class="comment">// å…¶å®Javaä¸­çš„breakä¹Ÿæ˜¯æ”¯æŒè·³å‡ºçš„æŒ‡å®šlabelçš„</span></span><br><span class="line">     <span class="keyword">break</span> MISSING_BLOCK_LABEL_97;</span><br><span class="line">     Exception exception;</span><br><span class="line">     exception;</span><br><span class="line">     <span class="keyword">if</span>(fileinputstream != <span class="literal">null</span>)</span><br><span class="line">       <span class="keyword">if</span>(throwable != <span class="literal">null</span>)</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">           fileinputstream.close();</span><br><span class="line">         &#125; <span class="keyword">catch</span>(Throwable throwable3) &#123;</span><br><span class="line">           throwable.addSuppressed(throwable3);</span><br><span class="line">         &#125;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">         fileinputstream.close();</span><br><span class="line">     <span class="keyword">throw</span> exception;</span><br><span class="line">     IOException ioexception;</span><br><span class="line">     ioexception;</span><br><span class="line">     ioexception.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è¯­æ³•ç³– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitåŒæ—¶pushåˆ°å¤šä¸ªè¿œç«¯ä»“åº“</title>
      <link href="/2020/07/23/gong-ju/git-tong-shi-push-dao-duo-ge-yuan-duan-cang-ku/"/>
      <url>/2020/07/23/gong-ju/git-tong-shi-push-dao-duo-ge-yuan-duan-cang-ku/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“ä½ çš„é¡¹ç›®åŒæ—¶æ”¾åœ¨ä¸¤ä¸ªè¿œç¨‹ä»“åº“(ä¾‹å¦‚ï¼šä¸€ä¸ªå¼€æºä¸­å›½ï¼Œä¸€ä¸ªgithub)ä¸Šæ—¶ï¼Œéœ€è¦åˆ†åˆ«pushä¸¤æ¬¡ï¼Œè¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼Œå³å¯ä¸€æ¬¡pushï¼Œæ¨é€åˆ°ä¸¤ä¸ªè¿œç¨‹åº“ï¼</p></blockquote><span id="more"></span><h2 id="æ·»åŠ ç¬¬äºŒä¸ªè¿œç«¯åœ°å€"><a href="#æ·»åŠ ç¬¬äºŒä¸ªè¿œç«¯åœ°å€" class="headerlink" title="æ·»åŠ ç¬¬äºŒä¸ªè¿œç«¯åœ°å€"></a>æ·»åŠ ç¬¬äºŒä¸ªè¿œç«¯åœ°å€</h2><figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line"><span class="string">git</span> <span class="string">remote</span> <span class="built_in">set-url</span> <span class="built_in">--add</span> <span class="string">origin</span> <span class="string">git</span>@<span class="string">gitee</span>.<span class="string">com:xxx/</span><span class="string">xxx</span>.<span class="string">git</span></span><br></pre></td></tr></table></figure><h2 id="æœ‰åŠ ï¼Œå°±æœ‰åˆ "><a href="#æœ‰åŠ ï¼Œå°±æœ‰åˆ " class="headerlink" title="æœ‰åŠ ï¼Œå°±æœ‰åˆ "></a>æœ‰åŠ ï¼Œå°±æœ‰åˆ </h2><figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line"><span class="string">git</span> <span class="string">remote</span> <span class="built_in">set-url</span> <span class="built_in">--delete</span> <span class="string">origin</span> <span class="string">git</span>@<span class="string">gitee</span>.<span class="string">com:xxx/</span><span class="string">xxx</span>.<span class="string">git</span></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹è¿œç«¯åˆ†æ”¯"><a href="#æŸ¥çœ‹è¿œç«¯åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹è¿œç«¯åˆ†æ”¯"></a>æŸ¥çœ‹è¿œç«¯åˆ†æ”¯</h2><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">origin  git<span class="keyword">@github</span>.<span class="attribute">com</span>:xxx/xxx.git (fetch)</span><br><span class="line">origin  git<span class="keyword">@github</span>.<span class="attribute">com</span>:xxx/xxx.git (push)</span><br><span class="line">origin  git<span class="keyword">@gitee</span>.<span class="attribute">com</span>:xxx/xxx.git (push)</span><br></pre></td></tr></table></figure><h2 id="æ¨é€"><a href="#æ¨é€" class="headerlink" title="æ¨é€"></a>æ¨é€</h2><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">add</span> .</span><br><span class="line">git commit -m <span class="string">&quot;commit message&quot;</span></span><br><span class="line">git <span class="keyword">push</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flumeæ¶ˆè´¹Kafkaä¸­çš„æ¶ˆæ¯å­˜å‚¨åˆ°Hbaseä¸­</title>
      <link href="/2020/05/13/da-shu-ju/flume-xiao-fei-kafka-zhong-de-xiao-xi-cun-chu-dao-hbase-zhong/"/>
      <url>/2020/05/13/da-shu-ju/flume-xiao-fei-kafka-zhong-de-xiao-xi-cun-chu-dao-hbase-zhong/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><ol><li>å…ˆå®‰è£…ã€ŠOpenRestyè®°å½•æ—¥å¿—è¾“å‡ºåˆ°kafka.mdã€‹å’Œã€Šå®‰è£…HBase.mdã€‹å®é™…æ“ä½œå®‰è£…å¥½ä»¥ä¸‹ä¸­é—´ä»¶<ul><li>openResty[1.15.8.3]</li><li>kafka[2.5.0]</li><li>zookeeper[3.6.0]</li><li>hbase[0.94.27]</li></ul></li><li>ç‰¹åˆ«æ³¨æ„Flumeå’ŒHbaseçš„ç‰ˆæœ¬å·å¯èƒ½ä¼šæœ‰å…¼å®¹é—®é¢˜</li></ol><span id="more"></span><h2 id="é…ç½®Hbase"><a href="#é…ç½®Hbase" class="headerlink" title="é…ç½®Hbase"></a>é…ç½®Hbase</h2><ol><li>é…ç½®hbaseçš„ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥æ·»åŠ åˆ°.bash_profileä¸­ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export HBASE_HOME=/home/tools/hbase-0.94.27</span><br><span class="line">export PATH=$HBASE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure></li><li>è¿›å…¥hbase shellç¯å¢ƒ <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span>-server tools]<span class="comment"># hbase shell</span></span><br><span class="line"><span class="title class_">HBase</span> <span class="title class_">Shell</span>; enter <span class="string">&#x27;help&lt;RETURN&gt;&#x27;</span> <span class="keyword">for</span> list of supported commands.</span><br><span class="line"><span class="title class_">Type</span> <span class="string">&quot;exit&lt;RETURN&gt;&quot;</span> to leave the <span class="title class_">HBase</span> <span class="title class_">Shell</span></span><br><span class="line"><span class="title class_">Version</span> <span class="number">0.94</span>.<span class="number">27</span>, rfb434617716493eac82b55180b0bbd653beb90bf, <span class="title class_">Thu</span> <span class="title class_">Mar</span> <span class="number">19</span> <span class="number">06</span><span class="symbol">:</span><span class="number">17</span><span class="symbol">:</span><span class="number">55</span> <span class="variable constant_">UTC</span> <span class="number">2015</span></span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">hbase(main):001:0&gt;</span> create <span class="string">&#x27;dcc&#x27;</span>, <span class="string">&#x27;dcc-column&#x27;</span></span><br><span class="line"><span class="number">0</span> row(s) <span class="keyword">in</span> <span class="number">1.5810</span> seconds</span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">hbase(main):002:0&gt;</span> </span><br></pre></td></tr></table></figure> åˆ›å»º<code>dcc</code>è¿™å¼ è¡¨ï¼Œå…¶ä¸­åˆ—æ—ä¸º<code>dcc-column</code></li></ol><h2 id="å®‰è£…ã€é…ç½®Flume"><a href="#å®‰è£…ã€é…ç½®Flume" class="headerlink" title="å®‰è£…ã€é…ç½®Flume"></a>å®‰è£…ã€é…ç½®Flume</h2><h3 id="ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„Flume"><a href="#ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„Flume" class="headerlink" title="ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„Flume"></a>ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„Flume</h3><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œä½¿ç”¨1.7.0ç‰ˆæœ¬ï¼Œæ¯”è¾ƒç¨³å®šï¼Œä¹Ÿä½¿ç”¨çš„æ¯”è¾ƒå¤š</span></span><br><span class="line"><span class="attribute">wget</span> http://archive.apache.org/dist/flume/<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>/apache-flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>-bin.tar.gz</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…flume"><a href="#å®‰è£…flume" class="headerlink" title="å®‰è£…flume"></a>å®‰è£…flume</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -zxvf apache-flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>-bin.tar.gz -C /home/tools/</span><br><span class="line"><span class="attribute">mv</span> /home/tools/apache-flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>-bin /home/tools/flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">cd</span> /home/tools/flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="attribute">vim</span> ~/.bash_profile</span><br><span class="line"><span class="comment">## add env</span></span><br><span class="line"><span class="attribute">export</span> FLUME_CLASSPATH=/home/tools/flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>/lib</span><br></pre></td></tr></table></figure><h3 id="é…ç½®flume"><a href="#é…ç½®flume" class="headerlink" title="é…ç½®flume"></a>é…ç½®flume</h3><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="attribute">vim</span> /home/tools/flume-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>/conf/flume-kafka-hbase.conf</span><br><span class="line"><span class="comment"># å†…å®¹å¦‚ä¸‹</span></span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flume-kafka-hbase.conf</span></span><br><span class="line"><span class="comment"># å„ç»„ä»¶å‘½å  </span></span><br><span class="line"><span class="attr">a1.sources</span> = r1</span><br><span class="line"><span class="attr">a1.sinks</span> = k1</span><br><span class="line"><span class="attr">a1.channels</span> = c1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ•°æ®æº  </span></span><br><span class="line"><span class="attr">a1.sources.r1.type</span> = org.apache.flume.source.kafka.KafkaSource</span><br><span class="line"><span class="comment"># kafkaåœ°å€  </span></span><br><span class="line"><span class="attr">a1.sources.r1.kafka.bootstrap.servers</span> = <span class="number">192.168</span>.<span class="number">137.100</span>:<span class="number">9092</span></span><br><span class="line"><span class="comment"># ç»„ID  </span></span><br><span class="line"><span class="attr">a1.sources.r1.kafka.consumer.group.id</span> = flume-dcc-group</span><br><span class="line"><span class="comment"># topicå¤šä¸ªé€—å·éš”å¼€  </span></span><br><span class="line"><span class="attr">a1.sources.r1.kafka.topics</span> = dcc-topic</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šhbaseä¸ºæ•°æ®å­˜å‚¨  </span></span><br><span class="line"><span class="attr">a1.sinks.k1.type</span> = asynchbase</span><br><span class="line"><span class="comment"># è¡¨å  </span></span><br><span class="line"><span class="attr">a1.sinks.k1.table</span> = dcc</span><br><span class="line"><span class="comment"># åˆ—æ—å  </span></span><br><span class="line"><span class="attr">a1.sinks.k1.columnFamily</span> = dcc-column</span><br><span class="line"><span class="attr">a1.sinks.k1.serializer</span> = org.apache.flume.sink.hbase.SimpleAsyncHbaseEventSerializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># channelç±»å‹  </span></span><br><span class="line"><span class="attr">a1.channels.c1.type</span> = memory</span><br><span class="line"><span class="comment"># channelå­˜å‚¨çš„äº‹ä»¶å®¹é‡  </span></span><br><span class="line"><span class="attr">a1.channels.c1.capacity</span> = <span class="number">1500000</span></span><br><span class="line"><span class="comment"># äº‹åŠ¡å®¹é‡  </span></span><br><span class="line"><span class="attr">a1.channels.c1.transactionCapacity</span> = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»‘å®šsourceå’Œsinkåˆ°channel  </span></span><br><span class="line"><span class="attr">a1.sources.r1.channels</span> = c1</span><br><span class="line"><span class="attr">a1.sinks.k1.channel</span> = c1</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œflume"><a href="#è¿è¡Œflume" class="headerlink" title="è¿è¡Œflume"></a>è¿è¡Œflume</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/home/</span>tools<span class="regexp">/flume-1.7.0/</span>bin<span class="regexp">/flume-ng agent --conf /</span>home<span class="regexp">/tools/</span>flume-<span class="number">1.7</span>.<span class="number">0</span><span class="regexp">/conf/</span> -f <span class="regexp">/home/</span>tools<span class="regexp">/flume-1.7.0/</span>conf/flume-kafka-hbase.conf -n a1 -Dflume.root.logger=INFO,console</span><br></pre></td></tr></table></figure><h3 id="F-Q"><a href="#F-Q" class="headerlink" title="F&amp;Q"></a>F&amp;Q</h3><p>å¦‚æœå‡ºç°ClassNotFoundExceptionï¼Œè¯·æ£€æŸ¥æ˜¯å¦é…ç½®äº†Flumeçš„ç¯å¢ƒå˜é‡ï¼Œæˆ–è€…å„ç»„ä»¶çš„ç‰ˆæœ¬æ˜¯å¦å…¼å®¹</p><h2 id="æŸ¥çœ‹æ•ˆæœ"><a href="#æŸ¥çœ‹æ•ˆæœ" class="headerlink" title="æŸ¥çœ‹æ•ˆæœ"></a>æŸ¥çœ‹æ•ˆæœ</h2><ol><li>åˆ·æ–°åœ¨æ–‡ç« ã€ŠOpenRestyè®°å½•æ—¥å¿—è¾“å‡ºåˆ°kafka.mdã€‹ä¸­åˆ›å»ºçš„htmlé¡µé¢</li><li>åŸ‹ç‚¹çš„æ—¥å¿—å°†ä¼šè¢«Nginxä¸­çš„luaæ¨é€åˆ°kafkaä¸­</li><li>è€ŒFlumeè®¢é˜…äº†kafkaä¸­çš„<code>dcc-topic</code>ï¼Œå…¶å°†ä¼šæŠŠæ¶ˆè´¹åˆ°çš„æ¶ˆæ¯åŸå°ä¸åŠ¨çš„æ¨é€åˆ°Hbaseä¸­å­˜å‚¨</li><li>è¿›å…¥Hbaseçš„shellç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®ç¡®å®å­˜å‚¨ä¸‹æ¥äº†ï¼š <figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@docker</span>-server conf]<span class="comment"># hbase shell</span></span><br><span class="line">HBase Shell; enter <span class="string">&#x27;help&lt;RETURN&gt;&#x27;</span> <span class="keyword">for</span> list of supported commands.</span><br><span class="line">Type <span class="string">&quot;exit&lt;RETURN&gt;&quot;</span> to leave the HBase Shell</span><br><span class="line">Version <span class="number">0.94</span><span class="number">.27</span>, rfb434617716493eac82b55180b0bbd653beb90bf, Thu Mar <span class="number">19</span> <span class="number">06</span>:<span class="number">17</span>:<span class="number">55</span> UTC <span class="number">2015</span></span><br><span class="line"></span><br><span class="line">hbase(main):<span class="number">001</span>:<span class="number">0</span>&gt; scan <span class="string">&#x27;dcc&#x27;</span></span><br><span class="line">ROW                                                                                COLUMN+CELL                                                                                                                                                                                                                                      </span><br><span class="line">defaultc37a20c9-5a08-41b7-<span class="number">9999</span>-6b25eb7daa92                                       column=dcc-column:pCol, timestamp=<span class="number">1589355681397</span>, value=&#123;<span class="string">&quot;host&quot;</span>:<span class="string">&quot;dcc.yeahzee.com&quot;</span>,<span class="string">&quot;time_local&quot;</span>:<span class="string">&quot;13\x5C/May\x5C/2020:15:41:19 +0800&quot;</span>,<span class="string">&quot;http_referer&quot;</span>:<span class="string">&quot;http:\x5C/\x5C/www.yeahzee.com\x5C/&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;304&quot;</span>,<span class="string">&quot;remote_addr&quot;</span>:<span class="string">&quot;192.168.137.1&quot;</span>,<span class="string">&quot;request_tim</span></span><br><span class="line"><span class="string">                                                                                e&quot;</span>:<span class="string">&quot;0.000&quot;</span>,<span class="string">&quot;uri&quot;</span>:<span class="string">&quot;\x5C/dcc.gif&quot;</span>,<span class="string">&quot;args&quot;</span>:<span class="string">&quot;domain=www.yeahzee.com&amp;url=http%3A%2F<span class="variable">%2Fwww</span>.yeahzee.com<span class="variable">%2F</span>&amp;title=Welcome<span class="variable">%2</span>0to<span class="variable">%20OpenResty</span>!&amp;referrer=&amp;sh=1080&amp;sw=1920&amp;cd=24&amp;lang=zh-CN&amp;_setAccount=<span class="variable">%E</span>7%BC<span class="variable">%8</span>3<span class="variable">%E</span>6<span class="variable">%8</span>8<span class="variable">%A</span>0<span class="variable">%E</span>7%8F%AF<span class="variable">%E</span>9%8F%8D<span class="variable">%E</span>5%9B%AA<span class="variable">%E</span>7<span class="variable">%9</span>8<span class="variable">%91</span>&quot;</span></span><br><span class="line">                                                                                ,<span class="string">&quot;http_user_agent&quot;</span>:<span class="string">&quot;Mozilla\x5C/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\x5C/537.36 (KHTML, like Gecko) Chrome\x5C/81.0.4044.138 Safari\x5C/537.36&quot;</span>,<span class="string">&quot;body_bytes_sent&quot;</span>:<span class="string">&quot;0&quot;</span>&#125;                                                                  </span><br><span class="line">incRow                                                                            column=dcc-column:iCol, timestamp=<span class="number">1589355681398</span>, value=\x00\x00\x00\x00\x00\x00\x00\x03                                                                                                                                                          </span><br><span class="line"><span class="number">2</span> row(s) in <span class="number">0.4480</span> seconds</span><br><span class="line"></span><br><span class="line">hbase(main):<span class="number">002</span>:<span class="number">0</span>&gt;     </span><br></pre></td></tr></table></figure></li></ol><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><ol><li>æŸ¥çœ‹Hbaseä¸­çš„æ•°æ®å¯ä»¥ä¸‹è½½<a href="https://github.com/bit-ware/HBaseXplorer" title="å·¥å…·">å·¥å…·</a></li><li>ä¸‹è½½å®ŒæˆåæŒ‰ç…§æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”çš„å¯åŠ¨è„šæœ¬åŒå‡»ï¼Œåœ¨æ‰“å¼€çš„çª—å£å¡«å…¥Hbaseè¿æ¥çš„zookeeperåœ°å€ï¼Œç‚¹å‡»ç¡®å®šå³å¯</li><li>æ•ˆæœ<br><img src="/imgs/big_data/1.png" alt="æ•ˆæœå›¾"></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flume </tag>
            
            <tag> kafka </tag>
            
            <tag> hbase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafkaå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2020/05/13/da-shu-ju/kafka-chang-yong-ming-ling/"/>
      <url>/2020/05/13/da-shu-ju/kafka-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<ol><li><p>æŸ¥çœ‹kafka topicåˆ—è¡¨ï¼Œä½¿ç”¨â€“listå‚æ•°</p> <figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="string">./kafka-topics.sh</span> <span class="params">--zookeeper</span> 192.168.137.100<span class="function">:2181</span> <span class="params">--list</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹kafkaç‰¹å®štopicçš„è¯¦æƒ…ï¼Œä½¿ç”¨â€“topicä¸â€“describeå‚æ•°</p> <figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="string">./kafka-topics.sh</span> <span class="params">--zookeeper</span> 192.168.137.100<span class="function">:2181</span> <span class="params">--topic</span> dcc-topic <span class="params">--describe</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹consumer groupåˆ—è¡¨ï¼Œä½¿ç”¨â€“listå‚æ•°</p> <figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="string">./kafka-consumer-groups.sh</span> <span class="params">--bootstrap-server</span> 192.168.137.100<span class="function">:9292</span> <span class="params">--list</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹ç‰¹å®šconsumer group è¯¦æƒ…ï¼Œä½¿ç”¨â€“groupä¸â€“describeå‚æ•°</p> <figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="string">./kafka-consumer-groups.sh</span> <span class="params">--bootstrap-server</span> 192.168.137.100<span class="function">:9092</span> <span class="params">--group</span> flume_test <span class="params">--describe</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…HBase</title>
      <link href="/2020/05/13/da-shu-ju/an-zhuang-hbase/"/>
      <url>/2020/05/13/da-shu-ju/an-zhuang-hbase/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><ol><li>åœ°å€ï¼š<a href="https://mirror-hk.koddos.net/apache/hbase/$%7Bhbase_version%7D/hbase-$%7Bhbase_version%7D-bin.tar.gz">https://mirror-hk.koddos.net/apache/hbase/${hbase_version}&#x2F;hbase-${hbase_version}-bin.tar.gz</a></li><li>${hbase_version}æ›¿æ¢æˆå…·ä½“çš„ç‰ˆæœ¬</li><li>tar -zxvf hbase-${hbase_version}-bin.tar.gz</li><li>cd hbase-${hbase_version}-bin&#x2F;bin</li><li>.&#x2F;start-hbase.sh</li></ol><span id="more"></span><h2 id="HBaseå’ŒJavaçš„ç‰ˆæœ¬å…¼å®¹æ€§"><a href="#HBaseå’ŒJavaçš„ç‰ˆæœ¬å…¼å®¹æ€§" class="headerlink" title="HBaseå’ŒJavaçš„ç‰ˆæœ¬å…¼å®¹æ€§"></a>HBaseå’ŒJavaçš„ç‰ˆæœ¬å…¼å®¹æ€§</h2><table><thead><tr><th>Hbaseç‰ˆæœ¬</th><th>JDK6</th><th>JDK7</th><th>JDK8</th></tr></thead><tbody><tr><td>1.2</td><td>Not Supported</td><td>yes</td><td>yes</td></tr><tr><td>1.1</td><td>Not Supported</td><td>yes</td><td>Not Supported</td></tr><tr><td>1</td><td>Not Supported</td><td>yes</td><td>Not Supported</td></tr><tr><td>0.98</td><td>yes</td><td>yes</td><td>Not Supported</td></tr><tr><td>0.94</td><td>yes</td><td>yes</td><td>N&#x2F;A</td></tr></tbody></table><h2 id="å•æœºéƒ¨ç½²"><a href="#å•æœºéƒ¨ç½²" class="headerlink" title="å•æœºéƒ¨ç½²"></a>å•æœºéƒ¨ç½²</h2><h3 id="HBaseé…ç½®"><a href="#HBaseé…ç½®" class="headerlink" title="HBaseé…ç½®"></a>HBaseé…ç½®</h3><ol><li><p>ä¿®æ”¹<code>conf/hbase-env.sh</code>æ–‡ä»¶</p> <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®JDKè·¯å¾„</span></span><br><span class="line"><span class="built_in">export</span> <span class="attribute">JAVA_HOME</span>=/opt/jdk1.8.0_191</span><br><span class="line"><span class="comment"># true: ä½¿ç”¨è‡ªå¸¦çš„zkæ¥ç»´æŠ¤hbaseé›†ç¾¤</span></span><br><span class="line"><span class="comment"># false: ä½¿ç”¨å¤–éƒ¨zkæ¥ç»´æŠ¤hbaseé›†ç¾¤</span></span><br><span class="line"><span class="built_in">export</span> <span class="attribute">HBASE_MANAGES_ZK</span>=<span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®<code>config/hbase-site.xml</code>æ–‡ä»¶</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- hbaseå­˜æ”¾æ•°æ®ç›®å½• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/tools/hbase-2.2.4/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ZooKeeperé…ç½®å¼€å§‹ï¼šä»¥ä¸‹äºŒé€‰ä¸€ --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ–¹å¼1. å†…éƒ¨zkçš„æ–¹å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.dataDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- zkå­˜å‚¨è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/soft/hbase-2.2.1/zookeeper<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ–¹å¼2. å¤–éƒ¨zkçš„æ–¹å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- zkæœåŠ¡ip:port --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>192.168.137.100:2181<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ZooKeeperé…ç½®ç»“æŸ --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- é›†ç¾¤æ¨¡å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.unsafe.stream.capability.enforce<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">      Controls whether HBase will check for stream capabilities (hflush/hsync).</span><br><span class="line"></span><br><span class="line">      Disable this if you intend to run on LocalFileSystem, denoted by a rootdir</span><br><span class="line">      with the &#x27;file://&#x27; scheme, but be mindful of the NOTE below.</span><br><span class="line"></span><br><span class="line">      WARNING: Setting this to false blinds you to potential data loss and</span><br><span class="line">      inconsistent system state in the event of process and/or node failures. If</span><br><span class="line">      HBase is complaining of an inability to use hsync or hflush it&#x27;s most</span><br><span class="line">      likely not a false positive.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="é›†ç¾¤éƒ¨ç½²ã€å¾…å¤„ç†ã€‘"><a href="#é›†ç¾¤éƒ¨ç½²ã€å¾…å¤„ç†ã€‘" class="headerlink" title="é›†ç¾¤éƒ¨ç½²ã€å¾…å¤„ç†ã€‘"></a>é›†ç¾¤éƒ¨ç½²ã€å¾…å¤„ç†ã€‘</h2><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><pre><code>cd $HBASE_HOME/bin</code></pre><ol><li><p>å¯åŠ¨</p><pre><code> ./start-hbase.sh</code></pre></li><li><p>æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨</p><pre><code> [root@docker-server conf]# jps 126934 HMaster 127768 Jps 127007 HRegionServer</code></pre></li><li><p>åœæ­¢<br> .&#x2F;stop-hbase.sh</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenRestyè®°å½•æ—¥å¿—è¾“å‡ºåˆ°kafka</title>
      <link href="/2020/05/11/da-shu-ju/openresty-ji-lu-ri-zhi-shu-chu-dao-kafka/"/>
      <url>/2020/05/11/da-shu-ju/openresty-ji-lu-ri-zhi-shu-chu-dao-kafka/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…zookeeperï¼ˆåŸºäºdockerå®‰è£…ï¼‰"><a href="#å®‰è£…zookeeperï¼ˆåŸºäºdockerå®‰è£…ï¼‰" class="headerlink" title="å®‰è£…zookeeperï¼ˆåŸºäºdockerå®‰è£…ï¼‰"></a>å®‰è£…zookeeperï¼ˆåŸºäºdockerå®‰è£…ï¼‰</h2><ol><li>docker-compose.yml</li></ol><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">version</span><span class="punctuation">:</span> <span class="string">&#x27;3.1&#x27;</span></span><br><span class="line"><span class="attribute">services</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">zookeeper</span><span class="punctuation">:</span></span><br><span class="line">    <span class="attribute">image</span><span class="punctuation">:</span> <span class="string">zookeeper</span></span><br><span class="line">    <span class="attribute">container_name</span><span class="punctuation">:</span> <span class="string">zookeeper</span></span><br><span class="line">    <span class="attribute">restart</span><span class="punctuation">:</span> <span class="string">always</span></span><br><span class="line">    <span class="attribute">network_mode</span><span class="punctuation">:</span> <span class="string">&quot;bridge&quot;</span></span><br><span class="line">    <span class="attribute">ports</span><span class="punctuation">:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2181:2181&quot;</span></span><br><span class="line">    <span class="attribute">volumes</span><span class="punctuation">:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/home/docker_volume/zookeeper/zoo.cfg:/conf/zoo.cfg</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/home/docker_volume/zookeeper/data/:/data/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/home/docker_volume/zookeeper/logs/:/datalog/</span></span><br></pre></td></tr></table></figure><ol start="2"><li><code>docker-compose up -d</code><span id="more"></span></li></ol><h2 id="å®‰è£…kafka-åŸºäºdockerå®‰è£…"><a href="#å®‰è£…kafka-åŸºäºdockerå®‰è£…" class="headerlink" title="å®‰è£…kafka(åŸºäºdockerå®‰è£…)"></a>å®‰è£…kafka(åŸºäºdockerå®‰è£…)</h2><ol><li>docker-compose.yml</li></ol><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">version:</span> &#x27;<span class="number">3.1</span>&#x27;</span><br><span class="line"><span class="params">services:</span></span><br><span class="line">  <span class="params">kafka:</span></span><br><span class="line">    <span class="params">image:</span> wurstmeister<span class="symbol">/kafka</span></span><br><span class="line">    <span class="params">container_name:</span> kafka</span><br><span class="line">    <span class="params">restart:</span> always</span><br><span class="line">    <span class="params">network_mode:</span> <span class="string">&quot;bridge&quot;</span></span><br><span class="line">    <span class="params">ports:</span></span><br><span class="line">      <span class="operator">-</span> <span class="string">&quot;9092:9092&quot;</span></span><br><span class="line">    <span class="params">environment:</span></span><br><span class="line">      <span class="params">KAFKA_BROKER_ID:</span> <span class="number">0</span></span><br><span class="line">      <span class="comment"># å®¿ä¸»æœºip</span></span><br><span class="line">      <span class="params">KAFKA_ZOOKEEPER_CONNECT:</span> <span class="number">192.168</span>.<span class="number">137.100</span>:<span class="number">2181</span></span><br><span class="line">      <span class="comment"># å®¿ä¸»æœºip</span></span><br><span class="line">      <span class="params">KAFKA_ADVERTISED_LISTENERS:</span> PLAINTEXT:<span class="operator">//</span><span class="number">192.168</span>.<span class="number">137.100</span>:<span class="number">9092</span></span><br><span class="line">      <span class="params">KAFKA_LISTENERS:</span> PLAINTEXT:<span class="operator">//</span><span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9092</span></span><br></pre></td></tr></table></figure><ol start="2"><li><code>docker-compose up -d</code></li></ol><h2 id="å®‰è£…OpenResty"><a href="#å®‰è£…OpenResty" class="headerlink" title="å®‰è£…OpenResty"></a>å®‰è£…OpenResty</h2><ol><li>è§<code>å®‰è£…OpenResty.md</code></li></ol><h2 id="å®‰è£…lua-resty-kafka"><a href="#å®‰è£…lua-resty-kafka" class="headerlink" title="å®‰è£…lua-resty-kafka"></a>å®‰è£…<code>lua-resty-kafka</code></h2><ol><li>ä¸‹è½½<code>lua-resty-kafka</code></li></ol><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">wget https:<span class="regexp">//gi</span>thub.com<span class="regexp">/doujiang24/</span>lua-resty-kafka<span class="regexp">/archive/m</span>aster.zip</span><br><span class="line">unzip lua-resty-kafka-master.zip -d <span class="regexp">/home/</span>software/</span><br></pre></td></tr></table></figure><ol start="2"><li>æ‹·è´<code>lua-resty-kafka</code>åˆ°<code>openresty</code></li></ol><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">mkdir <span class="regexp">/home/</span>tools<span class="regexp">/openresty/</span>lualib/kafka</span><br><span class="line">cp -rf <span class="regexp">/home/</span>software<span class="regexp">/lua-resty-kafka-master/</span>lib<span class="regexp">/resty /</span>home<span class="regexp">/tools/</span>openresty<span class="regexp">/lualib/</span>kafka/</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ol><li>nginx.conf</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line">    <span class="comment"># é…ç½®luaä¾èµ–åº“åœ°å€</span></span><br><span class="line">    <span class="attribute">lua_package_path</span> <span class="string">&quot;/home/tools/openresty/lualib/kafka/?.lua;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="section">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><code>dcc.conf</code></li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  dcc.lodsve.com;</span><br><span class="line"></span><br><span class="line">    location /dcc.gif &#123;</span><br><span class="line">        #ä¼ªè£…æˆgifæ–‡ä»¶</span><br><span class="line">        default_type <span class="built_in">image</span>/gif;</span><br><span class="line">        #æœ¬èº«å…³é—­access_logï¼Œé€šè¿‡subrequestè®°å½•<span class="built_in">log</span></span><br><span class="line">        access_log off;</span><br><span class="line"></span><br><span class="line">        log_by_lua &#x27;</span><br><span class="line">            -- å¼•å…¥luaæ‰€æœ‰api</span><br><span class="line">            <span class="built_in">local</span> cjson = require <span class="string">&quot;cjson&quot;</span></span><br><span class="line">            <span class="built_in">local</span> producer = require <span class="string">&quot;resty.kafka.producer&quot;</span></span><br><span class="line">            -- å®šä¹‰kafka brokeråœ°å€ï¼Œipéœ€è¦å’Œkafkaçš„host.nameé…ç½®ä¸€è‡´</span><br><span class="line">            <span class="built_in">local</span> broker_list = &#123;</span><br><span class="line">                &#123; host = <span class="string">&quot;192.168.137.100&quot;</span>, port = <span class="number">9092</span> &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">            -- å®šä¹‰jsonä¾¿äºæ—¥å¿—æ•°æ®æ•´ç†æ”¶é›†</span><br><span class="line">            <span class="built_in">local</span> log_json = &#123;&#125;</span><br><span class="line">            log_json[<span class="string">&quot;uri&quot;</span>]=ngx.<span class="built_in">var</span>.uri</span><br><span class="line">            log_json[<span class="string">&quot;args&quot;</span>]=ngx.<span class="built_in">var</span>.<span class="built_in">args</span></span><br><span class="line">            log_json[<span class="string">&quot;host&quot;</span>]=ngx.<span class="built_in">var</span>.host</span><br><span class="line">            log_json[<span class="string">&quot;request_body&quot;</span>]=ngx.<span class="built_in">var</span>.request_body</span><br><span class="line">            log_json[<span class="string">&quot;remote_addr&quot;</span>] = ngx.<span class="built_in">var</span>.remote_addr</span><br><span class="line">            log_json[<span class="string">&quot;remote_user&quot;</span>] = ngx.<span class="built_in">var</span>.remote_user</span><br><span class="line">            log_json[<span class="string">&quot;time_local&quot;</span>] = ngx.<span class="built_in">var</span>.time_local</span><br><span class="line">            log_json[<span class="string">&quot;status&quot;</span>] = ngx.<span class="built_in">var</span>.<span class="built_in">status</span></span><br><span class="line">            log_json[<span class="string">&quot;body_bytes_sent&quot;</span>] = ngx.<span class="built_in">var</span>.body_bytes_sent</span><br><span class="line">            log_json[<span class="string">&quot;http_referer&quot;</span>] = ngx.<span class="built_in">var</span>.http_referer</span><br><span class="line">            log_json[<span class="string">&quot;http_user_agent&quot;</span>] = ngx.<span class="built_in">var</span>.http_user_agent</span><br><span class="line">            log_json[<span class="string">&quot;http_x_forwarded_for&quot;</span>] = ngx.<span class="built_in">var</span>.http_x_forwarded_for</span><br><span class="line">            log_json[<span class="string">&quot;upstream_response_time&quot;</span>] = ngx.<span class="built_in">var</span>.upstream_response_time</span><br><span class="line">            log_json[<span class="string">&quot;request_time&quot;</span>] = ngx.<span class="built_in">var</span>.request_time</span><br><span class="line">            -- è½¬æ¢jsonä¸ºå­—ç¬¦ä¸²</span><br><span class="line">            <span class="built_in">local</span> message = cjson.encode(log_json);</span><br><span class="line">            -- å®šä¹‰kafkaå¼‚æ­¥ç”Ÿäº§è€…</span><br><span class="line">            <span class="built_in">local</span> bp = producer:<span class="built_in">new</span>(broker_list, &#123; producer_type = <span class="string">&quot;async&quot;</span> &#125;)</span><br><span class="line">            -- å‘é€æ—¥å¿—æ¶ˆæ¯,sendç¬¬äºŒä¸ªå‚æ•°<span class="built_in">key</span>,ç”¨äºkafkaè·¯ç”±æ§åˆ¶:</span><br><span class="line">            -- <span class="built_in">key</span>ä¸ºnill(ç©º)æ—¶ï¼Œä¸€æ®µæ—¶é—´å‘åŒä¸€<span class="built_in">partition</span>å†™å…¥æ•°æ®</span><br><span class="line">            -- æŒ‡å®š<span class="built_in">key</span>ï¼ŒæŒ‰ç…§<span class="built_in">key</span>çš„hashå†™å…¥åˆ°å¯¹åº”çš„<span class="built_in">partition</span></span><br><span class="line">            <span class="built_in">local</span> ok, err = bp:send(<span class="string">&quot;dcc-topic&quot;</span>, nil, message)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> ok <span class="keyword">then</span></span><br><span class="line">                ngx.<span class="built_in">log</span>(ngx.ERR, <span class="string">&quot;kafka send err:&quot;</span>, err)</span><br><span class="line">                <span class="built_in">return</span></span><br><span class="line">            end</span><br><span class="line">        &#x27;;</span><br><span class="line"></span><br><span class="line">        #æ­¤è¯·æ±‚ä¸ç¼“å­˜</span><br><span class="line">        add_header Expires <span class="string">&quot;Fri, 01 Jan 1980 00:00:00 GMT&quot;</span>;</span><br><span class="line">        add_header Pragma <span class="string">&quot;no-cache&quot;</span>;</span><br><span class="line">        add_header Cache-Control <span class="string">&quot;no-cache, max-age=0, must-revalidate&quot;</span>;</span><br><span class="line"></span><br><span class="line">        #è¿”å›ä¸€ä¸ª<span class="number">1</span>Ã—<span class="number">1</span>çš„ç©ºgifå›¾ç‰‡</span><br><span class="line">        empty_gif;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  www.lodsve.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /home/tools/openresty/nginx/html/www;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li><p>ä½¿ç”¨<code>docker-compose</code>ä¾æ¬¡å¯åŠ¨<code>zookeeper</code>ã€<code>kafka</code></p></li><li><p>åˆ›å»º<code>/home/tools/openresty/nginx/html/www/dcc.js</code>æ–‡ä»¶ï¼Œæ¨¡æ‹ŸåŸ‹ç‚¹é‡‡é›†ä¸­å¿ƒæä¾›å‡ºå»çš„å‰ç«¯SDKåŒ…</p> <figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">function</span> () &#123;</span><br><span class="line">    var params = &#123;&#125;<span class="comment">;</span></span><br><span class="line">    //Documentå¯¹è±¡æ•°æ®</span><br><span class="line">    if(<span class="name">document</span>) &#123;</span><br><span class="line">        params.domain = document.domain || &#x27;&#x27;<span class="comment">;</span></span><br><span class="line">        params.url = document.URL || &#x27;&#x27;<span class="comment">;</span></span><br><span class="line">        params.title = document.title || &#x27;&#x27;<span class="comment">;</span></span><br><span class="line">        params.referrer = document.referrer || &#x27;&#x27;<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    //Windowå¯¹è±¡æ•°æ®</span><br><span class="line">    if(<span class="name">window</span> &amp;&amp; window.screen) &#123;</span><br><span class="line">        params.sh = window.screen.height || <span class="number">0</span><span class="comment">;</span></span><br><span class="line">        params.sw = window.screen.width || <span class="number">0</span><span class="comment">;</span></span><br><span class="line">        params.cd = window.screen.colorDepth || <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    //navigatorå¯¹è±¡æ•°æ®</span><br><span class="line">    if(<span class="name">navigator</span>) &#123;</span><br><span class="line">        params.lang = navigator.language || &#x27;&#x27;<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //è§£æ_maqé…ç½®</span><br><span class="line">    if(<span class="name">_data</span>) &#123;</span><br><span class="line">        for(<span class="name">var</span> i in _data) &#123;</span><br><span class="line">            params[<span class="name">_data</span>[<span class="name">i</span>][<span class="name">0</span>]] = _data[<span class="name">i</span>][<span class="name">1</span>]<span class="comment">;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æ‹¼æ¥å‚æ•°ä¸²</span><br><span class="line">    var args = &#x27;&#x27;<span class="comment">;</span></span><br><span class="line">    for(<span class="name">var</span> i in params) &#123;</span><br><span class="line">        if(<span class="name">args</span> != &#x27;&#x27;) &#123;</span><br><span class="line">            args += <span class="symbol">&#x27;&amp;</span>&#x27;<span class="comment">;</span></span><br><span class="line">        &#125;</span><br><span class="line">        args += i + <span class="symbol">&#x27;=</span>&#x27; + encodeURIComponent(<span class="name">params</span>[<span class="name">i</span>])<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //é€šè¿‡Imageå¯¹è±¡è¯·æ±‚åç«¯è„šæœ¬</span><br><span class="line">    var img = new Image(<span class="name">1</span>, <span class="number">1</span>)<span class="comment">;</span></span><br><span class="line">    img.src = <span class="symbol">&#x27;http://dcc.lodsve.com/dcc.gif?</span>&#x27; + args<span class="comment">;</span></span><br><span class="line">&#125;)()<span class="comment">;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»º<code>/home/tools/openresty/nginx/html/www/index.html</code>æ–‡ä»¶ï¼Œæ¨¡æ‹Ÿä¸šåŠ¡ç³»ç»Ÿ</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to OpenResty!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">35em</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-family</span>: Tahoma, Verdana, Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to OpenResty!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>If you see this page, the OpenResty web platform is successfully installed and</span><br><span class="line">working. Further configuration is required.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>For online documentation and support please refer to</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://openresty.org/&quot;</span>&gt;</span>openresty.org<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">Commercial support is available at</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://openresty.com/&quot;</span>&gt;</span>openresty.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>Thank you for flying OpenResty.<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> _data = _data || [];</span></span><br><span class="line"><span class="language-javascript">    _data.<span class="title function_">push</span>([<span class="string">&#x27;_setAccount&#x27;</span>, <span class="string">&#x27;ç½‘ç«™æ ‡è¯†&#x27;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> dcc = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>); </span></span><br><span class="line"><span class="language-javascript">        dcc.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        dcc.<span class="property">async</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        dcc.<span class="property">src</span> = <span class="string">&#x27;http://www.lodsve.com/dcc.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;script&#x27;</span>)[<span class="number">0</span>]; </span></span><br><span class="line"><span class="language-javascript">        s.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(dcc, s);</span></span><br><span class="line"><span class="language-javascript">    &#125;)();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨<code>nginx</code>: <code>/home/tools/openresty/nginx/sbin/nginx</code>    </p></li><li><p>è¿›å…¥kafkaå®¹å™¨ï¼Œæ‰“å¼€kafkaï¼Œåˆ›å»ºtopiï¼Œå¹¶ä¸”ç›‘å¬è¿™ä¸ªtopic</p> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. è¿›å…¥å®¹å™¨</span><br><span class="line">    docker exec -it kafka bash</span><br><span class="line"><span class="number">2</span>. åˆ›å»ºtopic</span><br><span class="line">    cd /opt/kafka/bin</span><br><span class="line">    sh kafka-topics<span class="selector-class">.sh</span> <span class="attr">--zookeeper</span> localhost:<span class="number">2181</span> <span class="attr">--create</span> <span class="attr">--topic</span> dcc-topic <span class="attr">--partitions</span> <span class="number">1</span> <span class="attr">--replication-factor</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span>. æ–°æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œè¿›å…¥kafkaå®¹å™¨åŒæ ·çš„ç›®å½•ï¼Œç›‘å¬è¿™ä¸ªtopic</span><br><span class="line">    sh kafka-console-consumer<span class="selector-class">.sh</span> <span class="attr">--bootstrap-server</span> localhost:<span class="number">9092</span> <span class="attr">--topic</span> dcc-topic <span class="attr">--from-beginning</span></span><br><span class="line"><span class="number">4</span>. åœ¨ä¹‹å‰çš„çª—å£ï¼Œkafkaå®¹å™¨ä¸­æµ‹è¯•å‘é€ç›‘å¬æ¶ˆæ¯</span><br><span class="line">    sh kafka-console-producer<span class="selector-class">.sh</span> <span class="attr">--broker-list</span> localhost:<span class="number">9092</span> <span class="attr">--topic</span> dcc-topic</span><br><span class="line"><span class="number">5</span>. ç„¶åè¾“å…¥å†…å®¹å›è½¦ï¼Œå³å¯åœ¨å¦ä¸€ä¸ªç›‘å¬çª—å£çœ‹åˆ°</span><br><span class="line"><span class="number">6</span>. ä¸è¦å…³é—­è¯¥çª—å£</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·æœºä¸Šé…ç½®host</p> <figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line"><span class="number">192.168.137.100</span>   dcc.lodsve.com</span><br><span class="line"><span class="number">192.168.137.100</span>   www.lodsve.com</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®<code>http://www.lodsve.com</code>ï¼Œå³å¯åœ¨kafkaçš„topicç›‘å¬çª—å£çœ‹åˆ°å¦‚ä¸‹æ•ˆæœäº†ï¼š</p> <figure class="highlight perl"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;host&quot;</span>:<span class="string">&quot;dcc.lodsve.com&quot;</span>,<span class="string">&quot;time_local&quot;</span>:<span class="string">&quot;11\/May\/2020:10:28:57 +0800&quot;</span>,<span class="string">&quot;http_referer&quot;</span>:<span class="string">&quot;http:\/\/www.lodsve.com\/&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;200&quot;</span>,<span class="string">&quot;remote_addr&quot;</span>:<span class="string">&quot;192.168.137.1&quot;</span>,<span class="string">&quot;request_time&quot;</span>:<span class="string">&quot;0.000&quot;</span>,<span class="string">&quot;uri&quot;</span>:<span class="string">&quot;\/dcc.gif&quot;</span>,<span class="string">&quot;args&quot;</span>:<span class="string">&quot;domain=www.lodsve.com&amp;url=http%3A%2F<span class="variable">%2Fwww</span>.lodsve.com<span class="variable">%2F</span>&amp;title=Welcome<span class="variable">%2</span>0to<span class="variable">%20OpenResty</span>!&amp;referrer=&amp;sh=1080&amp;sw=1920&amp;cd=24&amp;lang=zh-CN&amp;_setAccount=<span class="variable">%E</span>7%BD<span class="variable">%9</span>1<span class="variable">%E</span>7%AB<span class="variable">%9</span>9<span class="variable">%E</span>6<span class="variable">%A</span>0<span class="variable">%8</span>7<span class="variable">%E</span>8%AF<span class="variable">%86</span>&quot;</span>,<span class="string">&quot;http_user_agent&quot;</span>:<span class="string">&quot;Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/81.0.4044.138 Safari\/537.36&quot;</span>,<span class="string">&quot;body_bytes_sent&quot;</span>:<span class="string">&quot;43&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;host&quot;</span>:<span class="string">&quot;dcc.lodsve.com&quot;</span>,<span class="string">&quot;time_local&quot;</span>:<span class="string">&quot;11\/May\/2020:11:00:38 +0800&quot;</span>,<span class="string">&quot;http_referer&quot;</span>:<span class="string">&quot;http:\/\/www.lodsve.com\/&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;304&quot;</span>,<span class="string">&quot;remote_addr&quot;</span>:<span class="string">&quot;192.168.137.1&quot;</span>,<span class="string">&quot;request_time&quot;</span>:<span class="string">&quot;0.000&quot;</span>,<span class="string">&quot;uri&quot;</span>:<span class="string">&quot;\/dcc.gif&quot;</span>,<span class="string">&quot;args&quot;</span>:<span class="string">&quot;domain=www.lodsve.com&amp;url=http%3A%2F<span class="variable">%2Fwww</span>.lodsve.com<span class="variable">%2F</span>&amp;title=Welcome<span class="variable">%2</span>0to<span class="variable">%20OpenResty</span>!&amp;referrer=&amp;sh=1080&amp;sw=1920&amp;cd=24&amp;lang=zh-CN&amp;_setAccount=<span class="variable">%E</span>7%BD<span class="variable">%9</span>1<span class="variable">%E</span>7%AB<span class="variable">%9</span>9<span class="variable">%E</span>6<span class="variable">%A</span>0<span class="variable">%8</span>7<span class="variable">%E</span>8%AF<span class="variable">%86</span>&quot;</span>,<span class="string">&quot;http_user_agent&quot;</span>:<span class="string">&quot;Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/81.0.4044.138 Safari\/537.36&quot;</span>,<span class="string">&quot;body_bytes_sent&quot;</span>:<span class="string">&quot;0&quot;</span>&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
            <tag> OpenResty </tag>
            
            <tag> åŸ‹ç‚¹é‡‡é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…OpenResty</title>
      <link href="/2020/05/11/da-shu-ju/an-zhuang-openresty/"/>
      <url>/2020/05/11/da-shu-ju/an-zhuang-openresty/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><ol><li>æ‰“å¼€urlï¼š<a href="https://openresty.org/cn/download.html">https://openresty.org/cn/download.html</a></li><li>æ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬æˆ–è€…åˆé€‚çš„ç‰ˆæœ¬<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">curl https:<span class="string">//openresty.org/download/openresty-</span>$&#123;<span class="keyword">version</span>&#125;<span class="string">.tar.gz</span></span><br><span class="line">tar -zxvf openresty-$&#123;<span class="keyword">version</span>&#125;<span class="string">.tar.gz</span></span><br><span class="line"><span class="keyword">cd</span> openresty-$&#123;<span class="keyword">version</span>&#125;</span><br></pre></td></tr></table></figure><span id="more"></span></li></ol><h2 id="ç¼–è¯‘ã€å®‰è£…"><a href="#ç¼–è¯‘ã€å®‰è£…" class="headerlink" title="ç¼–è¯‘ã€å®‰è£…"></a>ç¼–è¯‘ã€å®‰è£…</h2><ol><li>å®‰è£…å‰çš„å‡†å¤‡ï¼šå®‰è£…åŸºç¡€åº“<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y pcre-devel openssl-devel gcc curl</span><br></pre></td></tr></table></figure></li><li><code>./configure</code><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># prefix: æŒ‡å®šå®‰è£…è·¯å¾„</span></span><br><span class="line">./configure --prefix=/opt/openresty <span class="string">\</span></span><br><span class="line">    <span class="comment"># luaç¯å¢ƒ</span></span><br><span class="line">    --<span class="keyword">with</span>-luajit <span class="string">\</span></span><br><span class="line">    --<span class="keyword">with</span>-http_iconv_module <span class="string">\</span></span><br><span class="line">    --<span class="keyword">with</span>-http_postgres_module</span><br></pre></td></tr></table></figure></li><li>å®‰è£…<figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line"><span class="built_in">make</span> &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure></li></ol><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li>å¯åŠ¨nginx<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> openresty-<span class="variable">$&#123;version&#125;</span>/nginx/sbin</span><br><span class="line">./nginx</span><br></pre></td></tr></table></figure></li><li>é‡æ–°åŠ è½½nginxé…ç½®<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="string">./nginx</span> -s <span class="keyword">reload</span></span><br></pre></td></tr></table></figure></li><li>åœæ­¢nginx<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">./nginx -s stop</span><br></pre></td></tr></table></figure></li><li>é‡å¯nginx<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx -s restart</span><br></pre></td></tr></table></figure></li></ol><h2 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol><li>æ‰§è¡Œ<code>./configure</code>æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯<ul><li>é”™è¯¯: <code>./configure: error: ngx_postgres addon was unable to detect version of the libpq library.</code></li><li>è§£å†³: <code>yum install -y postgresql-devel</code></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenResty </tag>
            
            <tag> åŸ‹ç‚¹é‡‡é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿæˆ‘ä¸€èµ·ç³»åˆ—ä¹‹è¯»Springæ³¨è§£æºç </title>
      <link href="/2020/03/25/hou-duan/gen-wo-yi-qi-xi-lie-zhi-du-spring-zhu-jie-yuan-ma/"/>
      <url>/2020/03/25/hou-duan/gen-wo-yi-qi-xi-lie-zhi-du-spring-zhu-jie-yuan-ma/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¯»æºç ç³»åˆ—ä¹‹Springæ³¨è§£</p></blockquote><span id="more"></span><h1 id="æ³¨è§£çš„å‰ä¸–ä»Šç”Ÿ"><a href="#æ³¨è§£çš„å‰ä¸–ä»Šç”Ÿ" class="headerlink" title="æ³¨è§£çš„å‰ä¸–ä»Šç”Ÿ"></a>æ³¨è§£çš„å‰ä¸–ä»Šç”Ÿ</h1><ol><li><p>æ³¨è§£åœ¨JDK1.5æ‰è¢«å‘æ˜</p></li><li><p>ä»€ä¹ˆæ˜¯æ³¨è§£</p><pre><code> ç”¨ä¸€ä¸ªè¯å°±å¯ä»¥æè¿°æ³¨è§£ï¼Œé‚£å°±æ˜¯å…ƒæ•°æ®ï¼Œå³ä¸€ç§æè¿°æ•°æ®çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è¯´æ³¨è§£å°±æ˜¯æºä»£ç çš„å…ƒæ•°æ®ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ®µä»£ç ï¼š // è¿™é‡Œæ³¨è§£å°±æ˜¯æ ‡æ³¨æ­¤æ–¹æ³•æ˜¯ä¸€ä¸ªé‡å†™æ–¹æ³• // å¦‚æœçˆ¶ç±»ä¸å­˜åœ¨ï¼Œæˆ–è€…å­ç±»æ–¹æ³•åå†™é”™äº†ã€å…¥å‚å†™é”™äº†ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ // å¦åˆ™ï¼Œå°±ç®—æ²¡æœ‰è¿™ä¸ªæ³¨è§£ï¼Œç¼–è¯‘ã€è¿è¡Œéƒ½æ˜¯æ­£å¸¸çš„ @Override publicÂ String toString() &#123;     return &quot;This is String Representation of current object.&quot;; &#125;</code></pre></li><li><p>ä¸ºä½•ä¼šå­˜åœ¨<code>java.io.Serializable</code>è¿™ä¸ªç©ºæ¥å£ï¼Ÿâ€”Javaä¸­çš„è¯­æ³•ç³–</p></li><li><p>å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¥å£</p><ul><li>ä¿®é¥°è¯ï¼š<code>@interface</code></li><li>@Retention(ç”Ÿå‘½å‘¨æœŸ)<ul><li><code>SOURCE</code>ï¼šåªä¿ç•™åœ¨æºç ä¸­ï¼Œç¼–è¯‘æ—¶ä¼šè¢«æ“¦é™¤ï¼ˆOverrideï¼‰</li><li><code>CLASS</code>ï¼šæ³¨è§£å°†ä¼šä¿ç•™åˆ°classæ–‡ä»¶é˜¶æ®µï¼Œä½†æ˜¯åœ¨åŠ è½½åˆ°JVMæ—¶ä¼šè¢«æŠ›å¼ƒ</li><li><code>RUNTIME</code>ï¼šæ³¨è§£ä¸€ç›´ä¼šè¢«ä¿å­˜åˆ°è¿è¡Œæ—¶</li></ul></li><li>@Target(ä½œç”¨åŸŸ): TYPE&#x2F;FIELD&#x2F;METHOD â€¦</li><li>@Inherited: æ³¨è§£æ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ï¼ˆä¸‹é¢ä»‹ç»ï¼‰</li></ul></li></ol><h1 id="Javaä¸­çš„è¯­æ³•ç³–"><a href="#Javaä¸­çš„è¯­æ³•ç³–" class="headerlink" title="Javaä¸­çš„è¯­æ³•ç³–"></a>Javaä¸­çš„è¯­æ³•ç³–</h1><ul><li>å­—ç¬¦ä¸²æ‹¼æ¥</li><li>æ¡ä»¶ç¼–è¯‘</li><li>æ–­è¨€</li><li>æšä¸¾ä¸Switchè¯­å¥</li><li>å­—ç¬¦ä¸²ä¸Switchè¯­å¥</li><li>å¯å˜å‚æ•°</li><li>è‡ªåŠ¨è£…ç®±&#x2F;æ‹†ç®±</li><li>æšä¸¾</li><li>å†…éƒ¨ç±»</li><li>æ³›å‹æ“¦é™¤</li><li>å¢å¼ºforå¾ªç¯</li><li>lambdaè¡¨è¾¾å¼</li><li>try-with-resourcesè¯­å¥</li><li>JDK10çš„å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</li></ul><h1 id="Spring-Bootä¸­çš„æ³¨è§£"><a href="#Spring-Bootä¸­çš„æ³¨è§£" class="headerlink" title="Spring-Bootä¸­çš„æ³¨è§£"></a>Spring-Bootä¸­çš„æ³¨è§£</h1><h2 id="EnableXXXçš„å®ç°åŸç†"><a href="#EnableXXXçš„å®ç°åŸç†" class="headerlink" title="EnableXXXçš„å®ç°åŸç†"></a>EnableXXXçš„å®ç°åŸç†</h2><p>é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨<code>@EnableSwagger2</code>ä¸¾ä¾‹ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨swaggerçš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨å¯åŠ¨ç±»æˆ–è€…ä¸€äº›JavaConfigçš„é…ç½®æ–‡ä»¶ä¸ŠåŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œå°±å¯ä»¥ä½¿ç”¨swaggeräº†ã€‚æ€è€ƒä¸€ä¸‹ï¼Œè¿™æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><ol><li>çœ‹<code>@EnableSwagger2</code>çš„æºç <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(value = java.lang.annotation.RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(value = &#123; java.lang.annotation.ElementType.TYPE &#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(&#123;Swagger2DocumentationConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableSwagger2 &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>æœ‰æ²¡æœ‰å‘ç°ä¸å¤ªä¸€æ ·çš„åœ°æ–¹ï¼Ÿ</li><li>åœ¨è¿™ä¸ªæ³¨è§£ä¸Šé¢è¿˜æœ‰ä¸€ä¸ªæ³¨è§£ï¼Œå«<code>@Import</code>ï¼Œè¿™ä¸ªæ³¨è§£æ—¶springåœ¨JavaConfigæ–¹å¼é…ç½®æ—¶ï¼Œæä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œå¯ä»¥å¼•å…¥å¤–éƒ¨é…ç½®<br> çœ‹ä»£ç <code>org.springframework.context.annotation.ConfigurationClassParser#doProcessConfigurationClass#Line303</code></li><li>é€šè¿‡ä¸Šé¢çš„å¤„ç†ï¼Œspringå®¹å™¨å°±å¯ä»¥æ‹¿åˆ°swaggerçš„é…ç½®<code>Swagger2DocumentationConfiguration</code>ï¼ŒåŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­</li><li>æ­¤æ—¶å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†</li><li>ç»¼ä¸Šï¼Œ<code>EnableXXX</code>åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸‹é€»è¾‘ï¼š<ul><li>æå‰å°†ä½ éœ€è¦çš„ç»„ä»¶çš„é…ç½®ä»¥JavaConfigçš„æ–¹å¼å®šä¹‰å¥½</li><li>è‡ªå®šä¹‰å¥½ä¸€ä¸ªEnableæ³¨è§£</li><li>åœ¨Enableæ³¨è§£ä¸Šï¼ŒåŠ ä¸Š@Importæ³¨è§£ï¼Œå‚æ•°æ˜¯å®šä¹‰å¥½çš„JavaConfigç±»</li><li>ç„¶åå°†è¯¥æ³¨è§£åŠ åœ¨éœ€è¦ä½¿ç”¨ç»„ä»¶çš„å·¥ç¨‹çš„å¯åŠ¨ç±»ä¸Š</li></ul></li></ol><h2 id="ConditionalOnXXXçš„å®ç°åŸç†"><a href="#ConditionalOnXXXçš„å®ç°åŸç†" class="headerlink" title="ConditionalOnXXXçš„å®ç°åŸç†"></a>ConditionalOnXXXçš„å®ç°åŸç†</h2><p>æœ‰æ²¡æœ‰å¬è¿‡springæä¾›çš„æ³¨è§£<code>@org.springframework.context.annotation.Conditional</code>ã€‚@Conditionalæ³¨è§£å¯ä»¥æ ¹æ®æ˜¯å¦æ»¡è¶³æŸä¸€ä¸ªç‰¹å®šæ¡ä»¶æ¥å†³å®šè¦ä¸è¦åˆ›å»ºæŸä¸ªç‰¹å®šçš„Beanã€‚æ¯”å¦‚ï¼Œå½“æŸä¸€ä¸ªjaråŒ…åœ¨ä¸€ä¸ªç±»è·¯å¾„ä¸‹çš„æ—¶è‡ªåŠ¨é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªBeanï¼›æˆ–è€…åªæœ‰æŸä¸ªBeanè¢«åˆ›å»ºæ‰ä¼šåˆ›å»ºå¦å¤–ä¸€ä¸ªBeanã€‚è¯¥æ³¨è§£ç”±Spring4å¼€å§‹æä¾›ã€‚</p><ol><li><code>@Conditional</code>æ³¨è§£ä¸­æœ‰ä¸€ä¸ªå‚æ•°valueï¼Œéœ€è¦æä¾›ä¸€ä¸ªå®ç°æ¥å£<code>org.springframework.context.annotation.Condition</code>çš„ç±»</li><li>å…ˆçœ‹<code>org.springframework.context.annotation.Condition</code>ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•<code>boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata);</code></li><li>è¯¥æ–¹æ³•æ˜¯è¿”å›å¸ƒå°”å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½“è¯¥è¿”å›å€¼æ˜¯trueçš„æ—¶å€™ï¼Œæ‰ä¼šå°†è¿™ä¸ªç±»ï¼ˆæœ‰Conditionalçš„ç±»ï¼‰åŠ è½½åˆ°springä¸Šä¸‹æ–‡ä¸­ã€‚</li><li>åœ¨springçš„ä»£ç ä¸­ï¼Œç”±ä»¥ä¸‹æ­¥éª¤è°ƒç”¨ï¼š<ul><li>ConfigurationClassParser#doProcessConfigurationClass</li><li>ConditionEvaluator#shouldSkip</li><li>è·å–åˆ°ç±»ã€beanã€æ–¹æ³•ç­‰ä¸Šé¢æ·»åŠ çš„æ³¨è§£ï¼Œç„¶åå¾ªç¯å»æ‰§è¡Œæ³¨è§£ä¸­çš„<code>Condition#match</code>æ–¹æ³•ï¼Œè·å–åˆ°è¿”å›å€¼ï¼Œå–å¹¶é›†</li><li>trueçš„è¯ï¼Œå°±ä¼šåŠ è½½ã€‚falseçš„è¯ï¼Œå°±ä¸ä¼šåŠ è½½ã€‚</li></ul></li></ol><h2 id="Profileçš„å®ç°åŸç†"><a href="#Profileçš„å®ç°åŸç†" class="headerlink" title="Profileçš„å®ç°åŸç†"></a>Profileçš„å®ç°åŸç†</h2><p>ç›´æ¥çœ‹<code>@Profile</code>çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Conditional(ProfileCondition.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Profile &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The set of profiles for which the annotated component should be registered.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  String[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>è¯´ç™½äº†ä¹Ÿæ˜¯åŸºäº<code>@Conditional</code>æ¥å®ç°çš„</li><li>ã€çœ‹æºç ã€‘</li><li>å¯ä»¥å‘ç°ï¼Œspringåœ¨ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ï¼Œæ£€æŸ¥è¿™ä¸ªprofileå‚æ•°</li><li>ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°å€¼æ¥æºäºå¯åŠ¨æ—¶ï¼Œè®¾ç½®çš„å¯åŠ¨å‚æ•°<code>spring.profiles.active</code>ä¼ å…¥çš„<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Set&lt;String&gt; <span class="title function_">doGetActiveProfiles</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="built_in">this</span>.activeProfiles) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.activeProfiles.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„ACTIVE_PROFILES_PROPERTY_NAME=spring.profiles.active</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">profiles</span> <span class="operator">=</span> getProperty(ACTIVE_PROFILES_PROPERTY_NAME);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(profiles)) &#123;</span><br><span class="line">          setActiveProfiles(StringUtils.commaDelimitedListToStringArray(</span><br><span class="line">              StringUtils.trimAllWhitespace(profiles)));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.activeProfiles;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="AutoConfigureAfterã€AutoConfigureBeforeçš„å®ç°åŸç†"><a href="#AutoConfigureAfterã€AutoConfigureBeforeçš„å®ç°åŸç†" class="headerlink" title="AutoConfigureAfterã€AutoConfigureBeforeçš„å®ç°åŸç†"></a>AutoConfigureAfterã€AutoConfigureBeforeçš„å®ç°åŸç†</h2><p>ç®€ä»‹ï¼š</p><ol><li>AutoConfigureAfter å£°æ˜ å½“å‰é…ç½®åº”è¯¥åœ¨ æŒ‡å®šé…ç½®ä¹‹ååˆå§‹åŒ–</li><li>AutoConfigureBefore å£°æ˜ å½“å‰é…ç½®åº”è¯¥åœ¨ æŒ‡å®šé…ç½®ä¹‹å‰åˆå§‹åŒ–</li></ol><p>æºç ï¼š</p><ol><li><code>org.springframework.boot.autoconfigure.AutoConfigurationSorter#getInPriorityOrder</code>è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ’åº</li><li>ç”±äºè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ç”±spring-bootå®šä¹‰çš„ï¼Œè€Œé…ç½®çš„åŠ è½½æ˜¯ç”±spring-frameworkæ¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½å½±å“åˆ°springåŠ è½½é…ç½®çš„é¡ºåº</li><li>é‚£è¿™ä¸¤ä¸ªç±»çš„ä½œç”¨åŸŸæ˜¯å“ªé‡Œå‘¢ï¼Ÿçœ‹æºç ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä»<code>SpringFactoriesLoader.loadFactoryNames</code>è¿™ä¸ªæ–¹æ³•å–åˆ°çš„é…ç½®ï¼Œè¿›è¡ŒåŠ è½½çš„ã€‚ã€åé¢æœ‰åˆ†æã€‘</li><li>è€Œè¿™äº›ç±»éƒ½æ˜¯ç”±springçš„spiæä¾›çš„</li><li>æ‰€ä»¥è¿™ä¸¤ä¸ªæ³¨è§£åªèƒ½ç”¨äºspring-bootå®šä¹‰çš„é…ç½®ã€å®šä¹‰åœ¨spring.factoriesä¸­çš„ï¼Œåé¢åˆ†æã€‘</li></ol><h2 id="Javaçš„SPIå’ŒSpringçš„SpringFactoriesLoaderåˆæ¢"><a href="#Javaçš„SPIå’ŒSpringçš„SpringFactoriesLoaderåˆæ¢" class="headerlink" title="Javaçš„SPIå’ŒSpringçš„SpringFactoriesLoaderåˆæ¢"></a>Javaçš„SPIå’ŒSpringçš„SpringFactoriesLoaderåˆæ¢</h2><p>é¦–å…ˆæŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ•°æ®æºçš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠå¯¹åº”æ•°æ®åº“çš„é©±åŠ¨ä¾èµ–è¿›æ¥ï¼Œåœ¨Javaçš„ä»£ç ä¸­å°±å¯ä»¥è·å–åˆ°ç›¸åº”çš„æ•°æ®æºå®ç°ï¼ŒJDKä¸­ï¼Œæ€ä¹ˆæå‰çŸ¥é“ä½ è¿™ä¸ªæ•°æ®æºå…·ä½“çš„å®ç°ç±»å‘¢ï¼Ÿï¼Ÿï¼Ÿ<br>å•¥ä¹Ÿä¸è¯´ï¼Œç›´æ¥çœ‹ä»£ç ã€ä¸¾ä¾‹MySQLçš„é©±åŠ¨åŒ…ã€‘ï¼š</p><ol><li>æ‰“å¼€æºç ï¼Œæ‰¾åˆ°æ•°æ®æºé©±åŠ¨çš„å…·ä½“å®ç°ï¼š<code>com.mysql.jdbc.Driver</code></li><li>æœç„¶æ˜¯å®ç°<code>java.sql.Driver</code>çš„</li><li>é‚£JVMæ˜¯æ€ä¹ˆçŸ¥é“è¿™ä¸ªç±»çš„å‘¢ï¼Ÿ</li><li>çœ‹MySQLé©±åŠ¨åŒ…ä¸‹<code>META-INF/services/java.sql.Driver</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­æœ‰ä¸¤è¡Œä»£ç ï¼ˆç¬¬äºŒè¡Œå¿½ç•¥ï¼‰ <figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">com<span class="selector-class">.mysql</span><span class="selector-class">.jdbc</span><span class="selector-class">.Driver</span></span><br><span class="line">com<span class="selector-class">.mysql</span><span class="selector-class">.fabric</span><span class="selector-class">.jdbc</span>.FabricMySQLDriver</span><br></pre></td></tr></table></figure></li><li>è¿™é‡Œæœç„¶æœ‰é©±åŠ¨çš„å®ç°ç±»ï¼Œé‚£å°±æœ‰ç†ç”±æ€€ç–‘è¿™ä¸ªæ–‡ä»¶åœ¨å½±å“åˆ°JVMçš„åŠ è½½</li></ol><h3 id="Javaçš„-SPI"><a href="#Javaçš„-SPI" class="headerlink" title="Javaçš„ SPI"></a>Javaçš„ <code>SPI</code></h3><ol><li>é¦–å…ˆï¼ŒSPIçš„å…¨ç§°æ˜¯ï¼šService Provider Interfaceï¼ˆJavaæä¾›çš„ä¸€å¥—ç”¨æ¥è¢«ç¬¬ä¸‰æ–¹å®ç°æˆ–è€…æ‰©å±•çš„APIï¼Œå®ƒå¯ä»¥ç”¨æ¥å¯ç”¨æ¡†æ¶æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶ã€‚ï¼‰</li><li>å¯ä»¥å…ˆçœ‹çœ‹Javaä¸­æ€ä¹ˆé€šè¿‡SPIè·å–åˆ°å…·ä½“æ•°æ®æºçš„é©±åŠ¨çš„ï¼š <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">java.sql.DriverManager<span class="comment">#586</span></span><br><span class="line"><span class="comment">// è¿™é‡Œå»classpath*:META-INF/services/ä¸‹å¯»æ‰¾ä¼ å…¥çš„ç±»åçš„æ–‡ä»¶ï¼Œç„¶åå–åˆ°è¯¥æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œ</span></span><br><span class="line">ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.<span class="title function_ invoke__">load</span>(Driver.<span class="keyword">class</span>);</span><br><span class="line"><span class="built_in">Iterator</span>&lt;Driver&gt; driversIterator = loadedDrivers.<span class="title function_ invoke__">iterator</span>();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">       <span class="keyword">while</span>(driversIterator.<span class="title function_ invoke__">hasNext</span>()) &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„è¿­ä»£å™¨ï¼Œä¼šåœ¨nextæ–¹æ³•ä¸­å¯¹æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œè°ƒç”¨Class.forNameè¿›è¡Œåå°„åŠ è½½åˆ°JVMä¸­</span></span><br><span class="line">           driversIterator.<span class="title function_ invoke__">next</span>();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125; <span class="keyword">catch</span>(<span class="built_in">Throwable</span> t) &#123;</span><br><span class="line">   <span class="comment">// Do nothing</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></li><li>æ‰€ä»¥åˆ©ç”¨Javaçš„SPIå¯ä»¥è¿™æ ·åšï¼š<ul><li>å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥æ‰©å±•ç»„ä»¶ä¸­çš„ä¸€äº›åŠŸèƒ½</li><li>åœ¨ç»„å»ºä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>ServiceLoader#load</code>æ¥åŠ è½½ä½¿ç”¨è€…æ‰©å±•çš„åŠŸèƒ½</li><li>ä½¿ç”¨æ–¹åœ¨æ‰©å±•è¯¥ç»„ä»¶æ—¶ï¼Œåœ¨<code>classpath*:META-INF/services/</code>ä¸‹ä»¥ç»„ä»¶æ¥å£å…¨è·¯å¾„åˆ›å»ºæ–‡ä»¶</li><li>ç„¶åå°†è‡ªå·±æ‰©å±•çš„å®ç°è¯¥æ¥å£çš„ç±»å…¨è·¯å¾„å†™å…¥ä¸Šé¢çš„æ–‡ä»¶ä¸­ï¼Œå¤šä¸ªçš„è¯ï¼Œä¸€è¡Œä¸€ä¸ª</li><li>åº”ç”¨å¯åŠ¨åï¼Œå°±å¯ä»¥å°†ä½¿ç”¨æ–¹æ‰©å±•çš„åŠŸèƒ½é€šè¿‡SPIçš„æ–¹å¼åŠ è½½åˆ°JVMä¸­äº†</li></ul></li><li>å·²ç»è¢«å¼ƒç”¨çš„<code>xny-mybatis</code>ä¸­å°±ä½¿ç”¨äº†Javaçš„SPIæ¥æ‰©å±•æ–°çš„æ¥å£ï¼Œå¯å‚è€ƒ</li></ol><h3 id="Springçš„SpringFactoriesLoader"><a href="#Springçš„SpringFactoriesLoader" class="headerlink" title="Springçš„SpringFactoriesLoader"></a>Springçš„<code>SpringFactoriesLoader</code></h3><p>è¿™ä¸ªä¸»è¦è¿˜æ˜¯ç”¨åœ¨<code>spring-boot-starter</code>çš„å¼€å‘ä¸­ï¼Œåªéœ€è¦å¼•å…¥å¯¹åº”çš„starterï¼Œå°±å¯ä»¥ç›´æ¥å¼€å‘äº†ï¼Œçœå»é…ç½®çš„è¿‡ç¨‹ï¼ˆç‰¹æŒ‡JavaConfigçš„é…ç½®ï¼‰ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>å·¥ç¨‹å¯åŠ¨ç±»ä¸Šçš„æ³¨è§£<code>@SpringBootApplication</code></li><li>è¯¥æ³¨è§£ä¸Šçš„æ³¨è§£<code>@EnableAutoConfiguration</code></li><li>è¿™ä¸ªæ³¨è§£ä¸Šçš„æ³¨è§£<code>@Import(AutoConfigurationImportSelector.class)</code></li><li>ç›´æ¥è°ƒç”¨è¿™é‡Œçš„ç±»çš„<code>selectImports</code>æ–¹æ³•</li><li>ä¸Šé¢çš„æ–¹æ³•ä¸­ä¼šè°ƒç”¨<code>org.springframework.boot.autoconfigure.AutoConfigurationImportSelector#getCandidateConfigurations</code></li><li>è¿™æ—¶å€™ä¼šæœ‰å¦‚ä¸‹ä¸€æ®µä»£ç ï¼š <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata,</span></span><br><span class="line"><span class="params">    AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡SpringFactoriesLoaderå»è·å–å¤–éƒ¨å®šä¹‰çš„é…ç½®ç±»</span></span><br><span class="line">  List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(</span><br><span class="line">      getSpringFactoriesLoaderFactoryClass(), getBeanClassLoader());</span><br><span class="line">  Assert.notEmpty(configurations,</span><br><span class="line">      <span class="string">&quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span></span><br><span class="line">          + <span class="string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; getSpringFactoriesLoaderFactoryClass() &#123;</span><br><span class="line">  <span class="keyword">return</span> EnableAutoConfiguration.class;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>SpringFactoriesLoader</code>ä¸Javaçš„<code>SPI</code>åŒºåˆ«åœ¨äº<ul><li>springçš„å¤–éƒ¨å®šä¹‰æ–‡ä»¶åæ˜¯<code>spring.factories</code>ï¼Œè€ŒJavaçš„æ˜¯æ¥å£å…¨è·¯å¾„</li><li>springçš„æ–‡ä»¶å…¶å®æ˜¯ä¸€ä¸ªpropertiesæ–‡ä»¶ï¼Œè€ŒJavaçš„æ˜¯æ–‡æœ¬æ–‡ä»¶</li><li>springçš„è¯ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªåŠŸèƒ½çš„æ‰©å±•ï¼Œè€ŒJavaå°±éœ€è¦Nä¸ªæ–‡ä»¶äº†</li></ul></li></ol><h2 id="ä»spring-bootçš„è‡ªåŠ¨é…ç½®è¡ç”Ÿå‡ºå¹³å°SDKçš„æ¶æ„"><a href="#ä»spring-bootçš„è‡ªåŠ¨é…ç½®è¡ç”Ÿå‡ºå¹³å°SDKçš„æ¶æ„" class="headerlink" title="ä»spring-bootçš„è‡ªåŠ¨é…ç½®è¡ç”Ÿå‡ºå¹³å°SDKçš„æ¶æ„"></a>ä»spring-bootçš„è‡ªåŠ¨é…ç½®è¡ç”Ÿå‡ºå¹³å°SDKçš„æ¶æ„</h2><ol><li>é¦–å…ˆæœ‰å„ä¸ªä¸­å¿ƒçš„SDKã€åé¢ä»¥ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒ<code>platform-tsc-sdk</code>ä¸¾ä¾‹ã€‘</li><li>å¦å¤–æœ‰ä¸€ä¸ª<code>platform-sdk-starter</code>ï¼Œåœ¨è¿™ä¸ªç»„ä»¶ä¸­ä¾èµ–äº†å„ä¸ªä¸­å¿ƒçš„SDKï¼Œåªä¸è¿‡éƒ½æ˜¯optionalçš„ <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sdk</span></span><br><span class="line"><span class="comment">// æ¶ˆæ¯ä¸­å¿ƒsdk</span></span><br><span class="line">compileOnly(<span class="string">&quot;com.yezi.platform:platform-mc-sdk:$&#123;platform_mc_sdk_version&#125;&quot;</span>)</span><br><span class="line"><span class="comment">// æµç¨‹ä¸­å¿ƒ</span></span><br><span class="line">compileOnly(<span class="string">&quot;com.yezi.platform:platform-pc-sdk:$&#123;platform_pc_sdk_version&#125;&quot;</span>)</span><br><span class="line"><span class="comment">// ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒ</span></span><br><span class="line">compileOnly(<span class="string">&quot;com.yezi.platform:platform-tsc-sdk:$&#123;platform_tsc_sdk_version&#125;&quot;</span>)</span><br></pre></td></tr></table></figure></li><li>ç„¶åå®šä¹‰å„ä¸ªä¸­å¿ƒçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¦‚<code>TaskSchedulingCenterAutoConfiguration</code> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import(ThreadPoolConfiguration.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(JobExecuteClient.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskSchedulingCenterAutoConfiguration</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ³¨æ„ä¸Šé¢çš„<code>@ConditionalOnClass(JobExecuteClient.class)</code>ï¼Œé€šè¿‡å¯¹ä¸Šé¢spring-bootä¸­çš„@ConditionalOnXXXçš„äº†è§£ï¼Œå¯ä»¥åˆ¤æ–­å‡ºè¿™å¥çš„æ„æ€æ˜¯ï¼šåªæœ‰å½“JVMä¸­å­˜åœ¨JobExecuteClientè¿™ä¸ªç±»çš„æƒ…å†µä¸‹ï¼Œæ”¹é…ç½®æ‰ä¼šè¢«åŠ è½½åˆ°springä¸Šä¸‹æ–‡ä¸­</li><li>è€Œè¿™ä¸ªç±»æ˜¯ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒSDKä¸­ç‰¹æœ‰çš„ä¸€ä¸ªç±»</li><li>åˆå› ä¸ºè¿™ä¸ªSDKåœ¨<code>build.gradle</code>æ˜¯<code>compileOnly</code>çš„</li><li>æ‰€ä»¥åªæœ‰å½“åº”ç”¨æ–¹åœ¨ä»–çš„<code>build.gradle</code>ä¸­æ˜¾å¼çš„ä¾èµ–äº†<code>com.yezi.platform:platform-tsc-sdk</code>ï¼Œä»»åŠ¡è°ƒåº¦ä¸­å¿ƒçš„åŠŸèƒ½æ‰ä¼šè¢«å¯ç”¨ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XXL-JOBå‡ ä¸ªå…³é”®çº¿ç¨‹ã€é˜Ÿåˆ—çš„åˆ†æ</title>
      <link href="/2020/02/28/hou-duan/xxl-job-ji-ge-guan-jian-xian-cheng-dui-lie-de-fen-xi/"/>
      <url>/2020/02/28/hou-duan/xxl-job-ji-ge-guan-jian-xian-cheng-dui-lie-de-fen-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="XXL-JOBå‡ ä¸ªå…³é”®çº¿ç¨‹ã€é˜Ÿåˆ—çš„åˆ†æ"><a href="#XXL-JOBå‡ ä¸ªå…³é”®çº¿ç¨‹ã€é˜Ÿåˆ—çš„åˆ†æ" class="headerlink" title="XXL-JOBå‡ ä¸ªå…³é”®çº¿ç¨‹ã€é˜Ÿåˆ—çš„åˆ†æ"></a>XXL-JOBå‡ ä¸ªå…³é”®çº¿ç¨‹ã€é˜Ÿåˆ—çš„åˆ†æ</h1><blockquote><p>XXL-JOBåœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šæ‰§è¡Œä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¯åŠ¨äº†ä¸€ç³»åˆ—çš„çº¿ç¨‹ï¼Œè¿˜åˆ›å»ºäº†ä¸€äº›é˜Ÿåˆ—ï¼Œè¿™äº›çº¿ç¨‹ã€é˜Ÿåˆ—å¯¹äºæ•´ä¸ªä»»åŠ¡è°ƒåº¦æ¥è¯´éƒ½æ˜¯è‡³å…³é‡è¦çš„ï¼Œç°åœ¨å°±æ¥åˆ†æä¸€ä¸‹è¿™äº›çº¿ç¨‹ã€é˜Ÿåˆ—ã€‚</p></blockquote><span id="more"></span><h2 id="è°ƒåº¦ä¸­å¿ƒçš„åˆå§‹åŒ–"><a href="#è°ƒåº¦ä¸­å¿ƒçš„åˆå§‹åŒ–" class="headerlink" title="è°ƒåº¦ä¸­å¿ƒçš„åˆå§‹åŒ–"></a>è°ƒåº¦ä¸­å¿ƒçš„åˆå§‹åŒ–</h2><ol><li><p>è°ƒåº¦ä¸­å¿ƒå¯åŠ¨æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œ <code>com.xxl.job.admin.core.conf.XxlJobAdminConfig#afterPropertiesSet</code>Â è¿™ä¸ªæ–¹æ³•ï¼ˆå› ä¸ºè¿™ä¸ªç±»æ˜¯å®ç° <code>org.springframework.beans.factory.InitializingBean</code>Â æ¥å£çš„ï¼‰</p></li><li><p>è¿™ä¸ªæ–¹æ³•çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    adminConfig = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">    xxlJobScheduler = <span class="keyword">new</span> <span class="title class_">XxlJobScheduler</span>();</span><br><span class="line">    xxlJobScheduler.init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å…³é”®åœ¨äºæ‰§è¡Œäº†ï¼Œ <code>xxlJobScheduler.init()</code>Â ã€‚å†æ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„å†…å®¹ï¼ˆé€šè¿‡æ·»åŠ ä¸€äº›æ³¨é‡Šï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–i18nä¿¡æ¯</span></span><br><span class="line">    initI18n();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒåº¦ä¸­å¿ƒç›‘å¬æ‰§è¡Œå™¨çš„æ³¨å†Œ</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œä¸»è¦æ˜¯ç›‘å¬è‡ªåŠ¨æ³¨å†Œçš„æ‰§è¡Œå™¨ï¼Œå¹¶ä¸”å®æ—¶æ›´æ–°å…¶çŠ¶æ€</span></span><br><span class="line">    <span class="comment">// çº¿ç¨‹åˆ†æè§4</span></span><br><span class="line">    JobRegistryMonitorHelper.getInstance().start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒåº¦ä¸­å¿ƒç›‘æ§å¤±è´¥çš„è°ƒåº¦</span></span><br><span class="line">    <span class="comment">// é¦–å…ˆè¿›è¡Œé‡è¯•ï¼Œé‡è¯•çš„æ¬¡æ•°ä¸ºé¡µé¢é…ç½®ï¼Œæ¯æ¬¡å‡1</span></span><br><span class="line">    <span class="comment">// å‘é€å¤±è´¥å‘Šè­¦é‚®ä»¶</span></span><br><span class="line">    JobFailMonitorHelper.getInstance().start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒåº¦ä¸­å¿ƒè°ƒåº¦ç›‘æ§</span></span><br><span class="line">    <span class="comment">// æºç åˆ†æè§5</span></span><br><span class="line">    JobTriggerPoolHelper.toStart();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒåº¦ä¸­å¿ƒçš„æ—¥å¿—æ•´ç†</span></span><br><span class="line">    JobLogReportHelper.getInstance().start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒåº¦çº¿ç¨‹</span></span><br><span class="line">    <span class="comment">// ç”¨äºæ‰«æå³å°†è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆå½“å‰æ—¶é—´+5000æ¯«ç§’ï¼‰</span></span><br><span class="line">    <span class="comment">// æºç åˆ†æå¯è§https://www.cnblogs.com/jiangyang/p/11576931.html</span></span><br><span class="line">    JobScheduleHelper.getInstance().start();</span><br><span class="line"></span><br><span class="line">    logger.info(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; init xxl-job admin success.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒåº¦ä¸­å¿ƒç›‘å¬æ‰§è¡Œå™¨çš„æ³¨å†Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹ç”¨æ¥ç›‘å¬åº“ä¸­æ–°å¢çš„è‡ªåŠ¨æ³¨å†Œçš„æ‰§è¡Œå™¨</span></span><br><span class="line">    registryThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">// è¯¥çº¿ç¨‹ä¸­è¿è¡Œç€ä¸€ä¸ªwhileæ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">// å½“ä¸”ä»…å½“è°ƒç”¨stopæ–¹æ³•ï¼Œå°†toStopè®¾ç½®ä¸ºtrueï¼Œæ­»å¾ªç¯ç»“æŸï¼Œä¹Ÿå°±æ˜¯ç›‘å¬ç»“æŸ</span></span><br><span class="line">            <span class="comment">// åŸºæœ¬ä¸Šæ¯ä¸ªç›‘å¬çº¿ç¨‹éƒ½æ˜¯åœ¨è¿™ä¹ˆåšçš„</span></span><br><span class="line">            <span class="keyword">while</span> (!toStop) &#123;</span><br><span class="line">                <span class="comment">// ...........</span></span><br><span class="line">                <span class="comment">// è¿™é‡Œè®¾ç½®çº¿ç¨‹ä¼‘çœ 30sï¼Œæ„å‘³ç€30sæ£€æµ‹ä¸€æ¬¡æ‰§è¡Œå™¨çš„çŠ¶æ€</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(RegistryConfig.BEAT_TIMEOUT);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!toStop) &#123;</span><br><span class="line">                        logger.error(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job, job registry monitor thread error:&#123;&#125;&quot;</span>, e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            logger.info(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job, job registry monitor thread stop&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// è®¾ç½®çº¿ç¨‹ç›¸å…³å‚æ•°</span></span><br><span class="line">    registryThread.setDaemon(<span class="literal">true</span>);</span><br><span class="line">    registryThread.setName(<span class="string">&quot;xxl-job, admin JobRegistryMonitorHelper&quot;</span>);</span><br><span class="line">    registryThread.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒåº¦ä¸­å¿ƒè°ƒåº¦ç›‘æ§<br>è¿™é‡Œå¯åŠ¨äº†ä¸¤ä¸ªçº¿ç¨‹æ± ï¼š <code>fastTriggerPool</code>Â å’Œ <code>slowTriggerPool</code>Â ï¼Œå½“ä¸€ä¸ªjobçš„æ‰§è¡Œæ—¶é—´è¶…è¿‡500æ¯«ç§’æ—¶ï¼Œå°†ä¼šè¢«æ”¾å…¥ <code>slowTriggerPool</code>Â çº¿ç¨‹æ± æ¥è¿è¡Œ</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> xxl-job </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XXL-JOBæ—¥å¿—è·å–åˆ†æ</title>
      <link href="/2020/02/28/hou-duan/xxl-job-ri-zhi-huo-qu-fen-xi/"/>
      <url>/2020/02/28/hou-duan/xxl-job-ri-zhi-huo-qu-fen-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="XXL-JOBæ—¥å¿—è·å–åˆ†æ"><a href="#XXL-JOBæ—¥å¿—è·å–åˆ†æ" class="headerlink" title="XXL-JOBæ—¥å¿—è·å–åˆ†æ"></a>XXL-JOBæ—¥å¿—è·å–åˆ†æ</h1><h2 id="ç°çŠ¶"><a href="#ç°çŠ¶" class="headerlink" title="ç°çŠ¶"></a>ç°çŠ¶</h2><p>xxl-jobåœ¨ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—ï¼Œå¹¶ä¸”æ˜¯å®æ—¶ã€ä¸€è¡Œä¸€è¡Œçš„å±•ç¤ºå‡ºæ¥ã€‚èµ·åˆæˆ‘è®¤ä¸ºæ˜¯æ‰§è¡Œå™¨åœ¨æ‰§è¡Œæ—¶ï¼Œåœ¨æ¯ä¸€ä¸ªå…³é”®æ­¥éª¤å‘è°ƒåº¦ä¸­å¿ƒè¾“å‡ºæ—¥å¿—ï¼Œè€Œè°ƒåº¦ä¸­å¿ƒå±•ç¤ºçš„æ—¥å¿—ä¹Ÿæ˜¯å®æ—¶æ¥æ”¶åˆ°æ‰§è¡Œå™¨è¿”å›çš„ï¼Œåæ¥åœ¨è·Ÿä»£ç æ—¶ï¼Œå‘ç°æˆ‘çš„è®¤çŸ¥æ˜¯é”™è¯¯çš„ï¼å…¶å®æ˜¯é—´éš”ä¸€æ®µæ—¶é—´(3s)å°±å»æ‰§è¡Œå™¨è¯»å–æ‰§è¡Œå™¨æœåŠ¡å™¨æœ¬åœ°çš„æ—¥å¿—æ–‡ä»¶ï¼</p><span id="more"></span><h2 id="è·å–æ‰§è¡Œå™¨æ—¥å¿—çš„æ—¶åºå›¾"><a href="#è·å–æ‰§è¡Œå™¨æ—¥å¿—çš„æ—¶åºå›¾" class="headerlink" title="è·å–æ‰§è¡Œå™¨æ—¥å¿—çš„æ—¶åºå›¾"></a>è·å–æ‰§è¡Œå™¨æ—¥å¿—çš„æ—¶åºå›¾</h2><p><img src="/imgs/xxl-job/2.png" alt="xxl-jobå®æ—¶è·å–æ‰§è¡Œå™¨æ—¥å¿—çš„æ—¶åºå›¾.png"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> xxl-job </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ‹Ÿä»»åŠ¡é˜»å¡å¤„ç†ç­–ç•¥</title>
      <link href="/2020/02/28/hou-duan/mo-ni-ren-wu-zu-sai-chu-li-ce-lue/"/>
      <url>/2020/02/28/hou-duan/mo-ni-ren-wu-zu-sai-chu-li-ce-lue/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¨¡æ‹Ÿä»»åŠ¡é˜»å¡å¤„ç†ç­–ç•¥"><a href="#æ¨¡æ‹Ÿä»»åŠ¡é˜»å¡å¤„ç†ç­–ç•¥" class="headerlink" title="æ¨¡æ‹Ÿä»»åŠ¡é˜»å¡å¤„ç†ç­–ç•¥"></a>æ¨¡æ‹Ÿä»»åŠ¡é˜»å¡å¤„ç†ç­–ç•¥</h1><h2 id="å®˜æ–¹æè¿°"><a href="#å®˜æ–¹æè¿°" class="headerlink" title="å®˜æ–¹æè¿°"></a>å®˜æ–¹æè¿°</h2><blockquote><p>é˜»å¡å¤„ç†ç­–ç•¥ï¼šè°ƒåº¦è¿‡äºå¯†é›†æ‰§è¡Œå™¨æ¥ä¸åŠå¤„ç†æ—¶çš„å¤„ç†ç­–ç•¥ï¼›</p></blockquote><ol><li>å•æœºä¸²è¡Œï¼ˆé»˜è®¤ï¼‰ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œè°ƒåº¦è¯·æ±‚è¿›å…¥FIFOé˜Ÿåˆ—å¹¶ä»¥ä¸²è¡Œæ–¹å¼è¿è¡Œï¼›</li><li>ä¸¢å¼ƒåç»­è°ƒåº¦ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œå‘ç°æ‰§è¡Œå™¨å­˜åœ¨è¿è¡Œçš„è°ƒåº¦ä»»åŠ¡ï¼Œæœ¬æ¬¡è¯·æ±‚å°†ä¼šè¢«ä¸¢å¼ƒå¹¶æ ‡è®°ä¸ºå¤±è´¥ï¼›</li><li>è¦†ç›–ä¹‹å‰è°ƒåº¦ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œå‘ç°æ‰§è¡Œå™¨å­˜åœ¨è¿è¡Œçš„è°ƒåº¦ä»»åŠ¡ï¼Œå°†ä¼šç»ˆæ­¢è¿è¡Œä¸­çš„è°ƒåº¦ä»»åŠ¡å¹¶æ¸…ç©ºé˜Ÿåˆ—ï¼Œç„¶åè¿è¡Œæœ¬åœ°è°ƒåº¦ä»»åŠ¡ï¼›</li></ol><p>ä¸ºäº†éªŒè¯å¹¶ä¸”æ›´åŠ ç†Ÿæ‚‰XXL-JOBè¿™ä¸€å—çš„åŠŸèƒ½ï¼Œé‚åšäº†å¦‚ä¸‹çš„å®éªŒï¼š</p><span id="more"></span><h2 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h2><h3 id="ç¼–å†™3ä¸ªä»»åŠ¡æ‰§è¡Œæ–¹æ³•"><a href="#ç¼–å†™3ä¸ªä»»åŠ¡æ‰§è¡Œæ–¹æ³•" class="headerlink" title="ç¼–å†™3ä¸ªä»»åŠ¡æ‰§è¡Œæ–¹æ³•"></a>ç¼–å†™3ä¸ªä»»åŠ¡æ‰§è¡Œæ–¹æ³•</h3><ol><li><p>æ¨¡æ‹Ÿã€é˜»å¡å¤„ç†ç­–ç•¥ã€‘ä¸º <code>å•æœºä¸²è¡Œ</code>Â </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@XxlJob(&quot;serialExecutionJobHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ReturnT&lt;String&gt; <span class="title function_">serialExecutionJobHandler</span><span class="params">(String param)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    XxlJobLogger.log(<span class="string">&quot;XXL-JOB, serialExecutionJobHandler.&quot;</span>);</span><br><span class="line">  <span class="comment">// ä¼‘çœ 1åˆ†é’Ÿï¼Œæ¨¡æ‹Ÿæ‰§è¡Œæ—¶é—´ç‰¹åˆ«é•¿</span></span><br><span class="line">  TimeUnit.SECONDS.sleep(<span class="number">60</span>);</span><br><span class="line">  <span class="keyword">return</span> ReturnT.SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ¨¡æ‹Ÿã€é˜»å¡å¤„ç†ç­–ç•¥ã€‘ä¸º <code>ä¸¢å¼ƒåç»­è°ƒåº¦</code>Â </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@XxlJob(&quot;discardLaterJobHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ReturnT&lt;String&gt; <span class="title function_">discardLaterJobHandler</span><span class="params">(String param)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    XxlJobLogger.log(<span class="string">&quot;XXL-JOB, discardLaterJobHandler.&quot;</span>);</span><br><span class="line">    <span class="comment">// ä¼‘çœ 1åˆ†é’Ÿï¼Œæ¨¡æ‹Ÿæ‰§è¡Œæ—¶é—´ç‰¹åˆ«é•¿</span></span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">60</span>);</span><br><span class="line">    <span class="keyword">return</span> ReturnT.SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ¨¡æ‹Ÿã€é˜»å¡å¤„ç†ç­–ç•¥ã€‘ä¸º <code>è¦†ç›–ä¹‹å‰è°ƒåº¦</code>Â </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@XxlJob(&quot;coverEarlyJobHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ReturnT&lt;String&gt; <span class="title function_">coverEarlyJobHandler</span><span class="params">(String param)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    XxlJobLogger.log(<span class="string">&quot;XXL-JOB, coverEarlyJobHandler.&quot;</span>);</span><br><span class="line">    <span class="comment">// ä¼‘çœ 1åˆ†é’Ÿï¼Œæ¨¡æ‹Ÿæ‰§è¡Œæ—¶é—´ç‰¹åˆ«é•¿</span></span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">60</span>);</span><br><span class="line">    <span class="keyword">return</span> ReturnT.SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="åœ¨è°ƒåº¦ä¸­å¿ƒé¡µé¢åˆ›å»º3ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«å¯¹åº”3ç§é˜»å¡å¤„ç†ç­–ç•¥"><a href="#åœ¨è°ƒåº¦ä¸­å¿ƒé¡µé¢åˆ›å»º3ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«å¯¹åº”3ç§é˜»å¡å¤„ç†ç­–ç•¥" class="headerlink" title="åœ¨è°ƒåº¦ä¸­å¿ƒé¡µé¢åˆ›å»º3ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«å¯¹åº”3ç§é˜»å¡å¤„ç†ç­–ç•¥"></a>åœ¨è°ƒåº¦ä¸­å¿ƒé¡µé¢åˆ›å»º3ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«å¯¹åº”3ç§é˜»å¡å¤„ç†ç­–ç•¥</h3><ol><li><p>ä»»åŠ¡é…ç½®</p><p> <img src="/imgs/xxl-job/3.png" alt="image.png"></p></li><li><p>å¯¹æ¯ä¸ªä»»åŠ¡ï¼Œä½¿ç”¨è°ƒåº¦ä¸­å¿ƒé¡µé¢ä¸Šçš„ <code>æ‰§è¡Œä¸€æ¬¡</code>Â æŒ‰é’® Â è§¦å‘ Â ï¼ˆç¬¬ä¸€æ¬¡è§¦å‘æ˜¯ä¸ºäº†ç¬¬äºŒæ¬¡ä»»åŠ¡è¿›è¡Œæ—¶å­˜åœ¨é˜»å¡çš„ä»»åŠ¡ï¼‰</p></li><li><p>è§‚å¯Ÿæ¯ä¸ªä»»åŠ¡çš„æ—¥å¿—ï¼š</p><ul><li><p>å•æœºä¸²è¡Œã€ä»»åŠ¡idä¸º3ã€‘</p><p>  <img src="/imgs/xxl-job/4.png" alt="image.png"><br /><img src="/imgs/xxl-job/5.png" alt="image.png"><br />å¯è§ä¸¤æ¬¡è°ƒåº¦éƒ½æ˜¯æˆåŠŸçš„ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªä»»åŠ¡ä¸€ç›´åœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰ä¼šè¢«æ‰§è¡Œã€‚</p></li><li><p>ä¸¢å¼ƒåç»­è°ƒåº¦ä»»åŠ¡ã€ä»»åŠ¡idä¸º4ã€‘</p><p>  <img src="/imgs/xxl-job/6.png" alt="image.png"><br />å¯è§å› ä¸ºè¿™ä¸ªä»»åŠ¡æœ‰ä¸€æ¬¡è°ƒåº¦æ­£åœ¨è¢«æ‰§è¡Œä¸­ï¼Œå¹¶ä¸”é˜»å¡å¤„ç†ç­–ç•¥ä¸ºã€ä¸¢å¼ƒåç»­è°ƒåº¦ä»»åŠ¡ã€‘ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡è°ƒåº¦ç»“æœç›´æ¥ä¸ºå¤±è´¥ï¼</p></li><li><p>è¦†ç›–ä¹‹å‰è°ƒåº¦ä»»åŠ¡ã€ä»»åŠ¡idä¸º5ã€‘</p><p>  <img src="/imgs/xxl-job/7.png" alt="image.png"><br />å¯è§è¯¥ä»»åŠ¡ç¬¬äºŒæ¬¡è¢«è°ƒåº¦æ—¶ï¼Œå‘ç°å·²ç»æœ‰è°ƒåº¦æ­£åœ¨è¢«æ‰§è¡Œï¼ˆç¬¬ä¸€æ¬¡è°ƒåº¦ç»“æœä¸ºæˆåŠŸï¼‰ï¼Œç”±äºé˜»å¡ç­–ç•¥è®¾ç½®ä¸ºã€è¦†ç›–ä¹‹å‰è°ƒåº¦ä»»åŠ¡ã€‘ï¼Œæ‰€ä»¥æ‰§è¡Œå™¨ä¼šå°†ç¬¬ä¸€æ¬¡è°ƒåº¦killæ‰ï¼Œç„¶åå¼€å§‹æ‰§è¡Œç¬¬äºŒæ¬¡è°ƒåº¦ã€‚</p></li></ul></li></ol><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><ol><li>æ‰§è¡Œé˜»å¡ç­–ç•¥æ˜¯åœ¨æ‰§è¡Œå™¨ä¸­åˆ¤æ–­ã€æ‰§è¡Œçš„</li><li>è°ƒåº¦ä¸­å¿ƒåœ¨è°ƒåº¦ä»»åŠ¡æ—¶ï¼Œä¼šå°†ä»»åŠ¡é…ç½®çš„é˜»å¡ç­–ç•¥é€šè¿‡RPCä¼ ç»™æ‰§è¡Œå™¨</li><li>æ‰§è¡Œå™¨åœ¨æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨çš„æ˜¯ <code>com.xxl.job.core.biz.impl.ExecutorBizImpl#run</code>Â æ–¹æ³•</li><li>è¯¥æ–¹æ³•æœ€åä¸€æ®µå°±æ˜¯åœ¨æ ¹æ®é˜»å¡ç­–ç•¥è¿›è¡Œä¸€äº›åˆ¤æ–­ï¼Œå¦‚ä¸‹<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜»å¡ç­–ç•¥åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span> (jobThread != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿›å…¥è¿™ä¸ªåˆ¤æ–­ï¼Œåˆ™è¡¨ç¤ºå½“å‰æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ä¸­æœ‰æ­£åœ¨è¿è¡Œçš„</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥éœ€è¦æ ¹æ®é˜»å¡ç­–ç•¥å†³å®šæ˜¯å¦æ‰§è¡Œæœ¬æ¬¡è°ƒåº¦</span></span><br><span class="line">    <span class="type">ExecutorBlockStrategyEnum</span> <span class="variable">blockStrategy</span> <span class="operator">=</span> ExecutorBlockStrategyEnum.match(triggerParam.getExecutorBlockStrategy(), <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span> (ExecutorBlockStrategyEnum.DISCARD_LATER == blockStrategy) &#123;</span><br><span class="line">        <span class="comment">// å› ä¸ºä¸Šä¸€æ¬¡çš„è°ƒåº¦æ­£åœ¨çº¿ç¨‹æ± ä¸­è·‘ï¼Œéœ€è¦å†æ¬¡åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (jobThread.isRunningOrHasQueue()) &#123;</span><br><span class="line">            <span class="comment">// ä¸¢å¼ƒåç»­è°ƒåº¦</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ReturnT</span>&lt;String&gt;(ReturnT.FAIL_CODE, <span class="string">&quot;block strategy effectï¼š&quot;</span>+ExecutorBlockStrategyEnum.DISCARD_LATER.getTitle());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ExecutorBlockStrategyEnum.COVER_EARLY == blockStrategy) &#123;</span><br><span class="line">        <span class="comment">// kill running jobThread</span></span><br><span class="line">        <span class="comment">// è¦†ç›–ä¹‹å‰è°ƒåº¦</span></span><br><span class="line">        <span class="keyword">if</span> (jobThread.isRunningOrHasQueue()) &#123;</span><br><span class="line">            removeOldReason = <span class="string">&quot;block strategy effectï¼š&quot;</span> + ExecutorBlockStrategyEnum.COVER_EARLY.getTitle();</span><br><span class="line">            jobThread = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// just queue trigger</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…¶å®è¿™é‡Œæ‰æ˜¯ è¦†ç›–ä¹‹å‰è°ƒåº¦ æ­£åœ¨åœ¨æ‰§è¡Œæœ¬æ¬¡è°ƒåº¦</span></span><br><span class="line"><span class="comment">// replace thread (new or exists invalid)</span></span><br><span class="line"><span class="keyword">if</span> (jobThread == <span class="literal">null</span>) &#123;</span><br><span class="line">    jobThread = XxlJobExecutor.registJobThread(triggerParam.getJobId(), jobHandler, removeOldReason);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> xxl-job </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XXL-JOBè°ƒç ”</title>
      <link href="/2020/02/24/hou-duan/xxl-job-diao-yan/"/>
      <url>/2020/02/24/hou-duan/xxl-job-diao-yan/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h1><p><img src="/imgs/xxl-job/1.png"></p><span id="more"></span><h1 id="xxl-jobçš„jaråŒ…"><a href="#xxl-jobçš„jaråŒ…" class="headerlink" title="xxl-jobçš„jaråŒ…"></a>xxl-jobçš„jaråŒ…</h1><ol><li>xxl-job-admin: è°ƒåº¦ä¸­å¿ƒï¼ˆåŒ…å«äº†å‰ç«¯htmlï¼‰</li><li>xxl-job-coreï¼šå…¬å…±ç»„ä»¶åŒ…ï¼ˆè°ƒç”¨ä¸­å¿ƒã€æ‰§è¡Œå™¨éƒ½ä¼šä¾èµ–è¿™ä¸ªåŒ…ï¼‰</li></ol><h1 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h1><h2 id="è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ³¨æ„çš„ç‚¹"><a href="#è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ³¨æ„çš„ç‚¹" class="headerlink" title="è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ³¨æ„çš„ç‚¹"></a>è°ƒåº¦ä¸­å¿ƒéƒ¨ç½²æ³¨æ„çš„ç‚¹</h2><ol><li>DBé…ç½®è¦ä¿æŒä¸€è‡´</li><li>é›†ç¾¤æœºå™¨æ—¶é’Ÿè¦ä¸€è‡´ï¼ˆéœ€è¦åšæ—¶é—´åŒæ­¥ï¼‰</li><li>ä½¿ç”¨nginxåšè´Ÿè½½å‡è¡¡</li><li>å¦‚ä½•æ˜¯ç”¨dockeråœ¨k8sä¸­éƒ¨ç½²çš„è¯ï¼Œåªéœ€è¦éƒ¨ç½²ä¸€ä¸ªdeploymentï¼Œç„¶åæ‰©å®¹æˆå¤šä»½å³å¯</li></ol><h2 id="æ‰§è¡Œå™¨éƒ¨ç½²"><a href="#æ‰§è¡Œå™¨éƒ¨ç½²" class="headerlink" title="æ‰§è¡Œå™¨éƒ¨ç½²"></a>æ‰§è¡Œå™¨éƒ¨ç½²</h2><ol><li>æ‰§è¡Œå™¨æˆ‘çš„ç†è§£ï¼Œåº”è¯¥æ˜¯æ¯ä¸ªé¡¹ç›®ç»„æœ‰ä¸€ä¸ªæ‰§è¡Œå™¨è¿™ä¸ªå¾®æœåŠ¡å·¥ç¨‹ï¼Œç„¶ååœ¨è¿™ä¸ªå·¥ç¨‹é‡Œå»å†™å„ç§çš„å®šæ—¶ä»»åŠ¡çš„handlerï¼Œè¿™äº›handlerå†é€šè¿‡feignè°ƒç”¨æ”¹é¡¹ç›®ç»„å…¶ä»–å¾®æœåŠ¡</li><li>æ‰§è¡Œå™¨å·¥ç¨‹éœ€è¦ä¾èµ–<code>xxl-job-core</code></li><li>é…ç½®è°ƒåº¦ä¸­å¿ƒçš„åœ°å€</li><li>é…ç½®appName(xxl-jobä¸­ï¼Œå¦‚æœä¸é…ç½®æ­¤nameï¼Œåˆ™æ‰§è¡Œå™¨ä¸ä¼šè‡ªåŠ¨æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒ)</li><li>é…ç½®æ‰§è¡Œå™¨çš„ipï¼ˆä¸€èˆ¬ä¼šåœ¨å¤šç½‘å¡çš„æƒ…å†µä¸‹é…ç½®ï¼‰</li><li>é…ç½®æ‰§è¡Œå™¨çš„portï¼ˆè¿™ä¸¤ä¸ªé…ç½®æ˜¯ç»™è°ƒåº¦ä¸­å¿ƒé€šçŸ¥æ‰§è¡Œå™¨å»æ‰§è¡Œçš„ï¼‰</li><li>é…ç½®tokenï¼ˆå¯é€‰ï¼‰</li><li>é…ç½®æ—¥å¿—è·¯å¾„ï¼ˆæ‰§è¡Œå™¨çš„æ—¥å¿—è·¯å¾„ï¼Œåé¢å¯ä»¥è€ƒè™‘æ¢æˆæˆ‘ä»¬çš„ELKï¼‰</li><li>é…ç½®æ—¥å¿—ä¿å­˜çš„å¤©æ•°ï¼ˆå¦‚æœæ¢æˆELKçš„è¯ï¼Œå¯ä»¥ä¸ç”¨è¿™ä¸ªé…ç½®äº†ï¼‰</li></ol><h1 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h1><h2 id="æ‰§è¡Œå™¨"><a href="#æ‰§è¡Œå™¨" class="headerlink" title="æ‰§è¡Œå™¨"></a>æ‰§è¡Œå™¨</h2><ol><li>æ‰§è¡Œå™¨åº”è¯¥æ˜¯ä»¥é¡¹ç›®ä¸ºç»´åº¦åˆ’åˆ†çš„ï¼Œä¸€ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªæ‰§è¡Œå™¨</li><li>ä¸€ä¸ªæ‰§è¡Œå™¨æœ‰å¤šä¸ªä»»åŠ¡</li></ol><h2 id="ä»»åŠ¡"><a href="#ä»»åŠ¡" class="headerlink" title="ä»»åŠ¡"></a>ä»»åŠ¡</h2><ol><li>ä»»åŠ¡å…³è”åœ¨æ‰§è¡Œå™¨ä¸Š</li></ol><h2 id="ä»»åŠ¡è·¯ç”±ç­–ç•¥"><a href="#ä»»åŠ¡è·¯ç”±ç­–ç•¥" class="headerlink" title="ä»»åŠ¡è·¯ç”±ç­–ç•¥"></a>ä»»åŠ¡è·¯ç”±ç­–ç•¥</h2><ol><li>FIRSTï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼šå›ºå®šé€‰æ‹©ç¬¬ä¸€ä¸ªæœºå™¨ï¼›</li><li>LASTï¼ˆæœ€åä¸€ä¸ªï¼‰ï¼šå›ºå®šé€‰æ‹©æœ€åä¸€ä¸ªæœºå™¨ï¼›</li><li>ROUNDï¼ˆè½®è¯¢ï¼‰ï¼šï¼›</li><li>RANDOMï¼ˆéšæœºï¼‰ï¼šéšæœºé€‰æ‹©åœ¨çº¿çš„æœºå™¨ï¼›</li><li>CONSISTENT_HASHï¼ˆä¸€è‡´æ€§HASHï¼‰ï¼šæ¯ä¸ªä»»åŠ¡æŒ‰ç…§Hashç®—æ³•å›ºå®šé€‰æ‹©æŸä¸€å°æœºå™¨ï¼Œä¸”æ‰€æœ‰ä»»åŠ¡å‡åŒ€æ•£åˆ—åœ¨ä¸åŒæœºå™¨ä¸Šã€‚</li><li>LEAST_FREQUENTLY_USEDï¼ˆæœ€ä¸ç»å¸¸ä½¿ç”¨ï¼‰ï¼šä½¿ç”¨é¢‘ç‡æœ€ä½çš„æœºå™¨ä¼˜å…ˆè¢«é€‰ä¸¾ï¼›</li><li>LEAST_RECENTLY_USEDï¼ˆæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ï¼‰ï¼šæœ€ä¹…ä¸ºä½¿ç”¨çš„æœºå™¨ä¼˜å…ˆè¢«é€‰ä¸¾ï¼›</li><li>FAILOVERï¼ˆæ•…éšœè½¬ç§»ï¼‰ï¼šæŒ‰ç…§é¡ºåºä¾æ¬¡è¿›è¡Œå¿ƒè·³æ£€æµ‹ï¼Œç¬¬ä¸€ä¸ªå¿ƒè·³æ£€æµ‹æˆåŠŸçš„æœºå™¨é€‰å®šä¸ºç›®æ ‡æ‰§è¡Œå™¨å¹¶å‘èµ·è°ƒåº¦ï¼›</li><li>BUSYOVERï¼ˆå¿™ç¢Œè½¬ç§»ï¼‰ï¼šæŒ‰ç…§é¡ºåºä¾æ¬¡è¿›è¡Œç©ºé—²æ£€æµ‹ï¼Œç¬¬ä¸€ä¸ªç©ºé—²æ£€æµ‹æˆåŠŸçš„æœºå™¨é€‰å®šä¸ºç›®æ ‡æ‰§è¡Œå™¨å¹¶å‘èµ·è°ƒåº¦ï¼›</li><li>SHARDING_BROADCAST(åˆ†ç‰‡å¹¿æ’­)ï¼šå¹¿æ’­è§¦å‘å¯¹åº”é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼ŒåŒæ—¶ç³»ç»Ÿè‡ªåŠ¨ä¼ é€’åˆ†ç‰‡å‚æ•°ï¼›å¯æ ¹æ®åˆ†ç‰‡å‚æ•°å¼€å‘åˆ†ç‰‡ä»»åŠ¡ï¼›</li></ol><h2 id="ä»»åŠ¡çš„è¿è¡Œæ¨¡å¼"><a href="#ä»»åŠ¡çš„è¿è¡Œæ¨¡å¼" class="headerlink" title="ä»»åŠ¡çš„è¿è¡Œæ¨¡å¼"></a>ä»»åŠ¡çš„è¿è¡Œæ¨¡å¼</h2><ol><li>BEANæ¨¡å¼ï¼šä»»åŠ¡ä»¥JobHandleræ–¹å¼ç»´æŠ¤åœ¨æ‰§è¡Œå™¨ç«¯ï¼›éœ€è¦ç»“åˆ â€œJobHandlerâ€ å±æ€§åŒ¹é…æ‰§è¡Œå™¨ä¸­ä»»åŠ¡ï¼›</li><li>GLUEæ¨¡å¼(Java)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µç»§æ‰¿è‡ªIJobHandlerçš„Javaç±»ä»£ç å¹¶ â€œgroovyâ€ æºç æ–¹å¼ç»´æŠ¤ï¼Œå®ƒåœ¨æ‰§è¡Œå™¨é¡¹ç›®ä¸­è¿è¡Œï¼Œå¯ä½¿ç”¨@Resource&#x2F;@Autowireæ³¨å…¥æ‰§è¡Œå™¨é‡Œä¸­çš„å…¶ä»–æœåŠ¡ï¼›</li><li>GLUEæ¨¡å¼(Shell)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ â€œshellâ€ è„šæœ¬ï¼›</li><li>GLUEæ¨¡å¼(Python)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ â€œpythonâ€ è„šæœ¬ï¼›</li><li>GLUEæ¨¡å¼(PHP)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ â€œphpâ€ è„šæœ¬ï¼›</li><li>GLUEæ¨¡å¼(NodeJS)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ â€œnodejsâ€ è„šæœ¬ï¼›</li><li>GLUEæ¨¡å¼(PowerShell)ï¼šä»»åŠ¡ä»¥æºç æ–¹å¼ç»´æŠ¤åœ¨è°ƒåº¦ä¸­å¿ƒï¼›è¯¥æ¨¡å¼çš„ä»»åŠ¡å®é™…ä¸Šæ˜¯ä¸€æ®µ â€œPowerShellâ€ è„šæœ¬ï¼›</li></ol><h2 id="é˜»å¡å¤„ç†ç­–ç•¥"><a href="#é˜»å¡å¤„ç†ç­–ç•¥" class="headerlink" title="é˜»å¡å¤„ç†ç­–ç•¥"></a>é˜»å¡å¤„ç†ç­–ç•¥</h2><ol><li>å•æœºä¸²è¡Œï¼ˆé»˜è®¤ï¼‰ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œè°ƒåº¦è¯·æ±‚è¿›å…¥FIFOé˜Ÿåˆ—å¹¶ä»¥ä¸²è¡Œæ–¹å¼è¿è¡Œï¼›</li><li>ä¸¢å¼ƒåç»­è°ƒåº¦ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œå‘ç°æ‰§è¡Œå™¨å­˜åœ¨è¿è¡Œçš„è°ƒåº¦ä»»åŠ¡ï¼Œæœ¬æ¬¡è¯·æ±‚å°†ä¼šè¢«ä¸¢å¼ƒå¹¶æ ‡è®°ä¸ºå¤±è´¥ï¼›</li><li>è¦†ç›–ä¹‹å‰è°ƒåº¦ï¼šè°ƒåº¦è¯·æ±‚è¿›å…¥å•æœºæ‰§è¡Œå™¨åï¼Œå‘ç°æ‰§è¡Œå™¨å­˜åœ¨è¿è¡Œçš„è°ƒåº¦ä»»åŠ¡ï¼Œå°†ä¼šç»ˆæ­¢è¿è¡Œä¸­çš„è°ƒåº¦ä»»åŠ¡å¹¶æ¸…ç©ºé˜Ÿåˆ—ï¼Œç„¶åè¿è¡Œæœ¬åœ°è°ƒåº¦ä»»åŠ¡ï¼›</li></ol><h1 id="äºŒæ¬¡å¼€å‘"><a href="#äºŒæ¬¡å¼€å‘" class="headerlink" title="äºŒæ¬¡å¼€å‘"></a>äºŒæ¬¡å¼€å‘</h1><h2 id="é€‰æ‹©åœ¨xxl-jobçš„V2-1-2ç‰ˆæœ¬ä¸Šè¿›è¡Œå¼€å‘"><a href="#é€‰æ‹©åœ¨xxl-jobçš„V2-1-2ç‰ˆæœ¬ä¸Šè¿›è¡Œå¼€å‘" class="headerlink" title="é€‰æ‹©åœ¨xxl-jobçš„V2.1.2ç‰ˆæœ¬ä¸Šè¿›è¡Œå¼€å‘"></a>é€‰æ‹©åœ¨xxl-jobçš„V2.1.2ç‰ˆæœ¬ä¸Šè¿›è¡Œå¼€å‘</h2><p>è¯¥ç‰ˆæœ¬çš„jobHandlerå†™æ³•æ¯”è¾ƒæ–¹ä¾¿<br />ç”±åŸæ¥åŸºäºJobHandlerç±»ä»»åŠ¡å¼€å‘æ–¹å¼ï¼Œä¼˜åŒ–ä¸ºæ”¯æŒåŸºäºæ–¹æ³•çš„ä»»åŠ¡å¼€å‘æ–¹å¼</p><h2 id="uiçš„ä¿®æ”¹"><a href="#uiçš„ä¿®æ”¹" class="headerlink" title="uiçš„ä¿®æ”¹"></a>uiçš„ä¿®æ”¹</h2><ol><li>ç›®å‰xxl-jobçš„è°ƒåº¦ä¸­å¿ƒçš„ç•Œé¢éœ€è¦é‡å†™</li></ol><h2 id="SDK"><a href="#SDK" class="headerlink" title="SDK"></a>SDK</h2><ol><li>ç°é˜¶æ®µï¼ŒSDKä¸­åº”è¯¥åªéœ€è¦æä¾›è‡ªåŠ¨æ³¨å†Œã€é€šçŸ¥æ‰§è¡Œå™¨ç­‰åŠŸèƒ½</li><li>åæœŸå¯ä»¥æä¾›æ–¹æ³•ï¼šè®©ä¸šåŠ¡æ–¹èƒ½æŸ¥è¯¢åˆ°æŸä¸ªä»»åŠ¡åœ¨æŸä¸€æ¬¡çš„æ‰§è¡ŒçŠ¶æ€ç­‰ç­‰æ–¹æ³•</li></ol><h2 id="ç—›ç‚¹"><a href="#ç—›ç‚¹" class="headerlink" title="ç—›ç‚¹"></a>ç—›ç‚¹</h2><ol><li>xxl-jobçš„ä»£ç è§„èŒƒæœ‰ç‚¹ä¹±</li><li>xxl-job-coreçš„èŒè´£ä¸æ¸…æ™°ï¼Œè°ƒåº¦ä¸­å¿ƒã€æ‰§è¡Œå™¨éƒ½ä¼šä¾èµ–è¿™ä¸ªjaråŒ…ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ‹†åˆ†</li><li>éœ€è¦é‡å†™xxl-jobçš„å‰ç«¯</li><li>æ—¥å¿—çš„æŸ¥çœ‹</li><li>sdkåŒ…çš„èŒè´£å®šä¹‰</li><li>é…ç½®å¦‚ä½•ä¸nacosè¿›è¡Œé›†æˆ</li><li>æ”¹é€ åçš„ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒå¦‚æœå¯¹xxl-jobè¿›è¡Œå‡çº§</li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> xxl-job </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡MySQLå¯åŠ¨å¤±è´¥åŸå› çš„åˆ†æ</title>
      <link href="/2020/02/12/yun-wei/failed-to-start-mysql/"/>
      <url>/2020/02/12/yun-wei/failed-to-start-mysql/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©åœ¨æˆ‘çš„Windowsç”µè„‘ä¸Šå‡†å¤‡å¯åŠ¨MySQLæœåŠ¡ï¼Œæµ‹è¯•ä¸€ç‚¹ä¸œè¥¿ï¼Œä½†æ˜¯å‘ç°æ¯æ¬¡éƒ½å¯åŠ¨ä¸æˆåŠŸï¼Œæ‰€ä»¥å°±å¼•å‡ºæœ¬æ¬¡çš„åˆ†æ</p></blockquote><span id="more"></span><h2 id="æ’æŸ¥å¯åŠ¨å¤±è´¥çš„åŸå› "><a href="#æ’æŸ¥å¯åŠ¨å¤±è´¥çš„åŸå› " class="headerlink" title="æ’æŸ¥å¯åŠ¨å¤±è´¥çš„åŸå› "></a>æ’æŸ¥å¯åŠ¨å¤±è´¥çš„åŸå› </h2><ol><li><p>é¦–å…ˆï¼Œæˆ‘çš„MySQLæœåŠ¡å·²ç»æ³¨å†Œåˆ°windowsçš„æœåŠ¡ä¸­äº†ï¼Œæ‰€ä»¥éœ€è¦æŸ¥çœ‹windowsæœåŠ¡çš„å¯åŠ¨æ—¥å¿—</p></li><li><p>æ‰“å¼€windowsçš„<code>äº‹ä»¶æŸ¥çœ‹å™¨</code>(windowså¼€å§‹å›¾æ ‡ä¸Šå³é”®-äº‹ä»¶æŸ¥çœ‹å™¨)</p></li><li><p>å·¦è¾¹èœå•æ ‘ä¸Šé€‰æ‹©<code>Windows æ—¥å¿— - åº”ç”¨ç¨‹åº</code><br><img src="/imgs/mysql/1.png"></p></li><li><p>å³è¾¹æ“ä½œæ é€‰æ‹©<code>ç­›é€‰å½“å‰æ—¥å¿—...</code>ï¼Œè®¾ç½®äº‹ä»¶çº§åˆ«ä¸º<code>é”™è¯¯</code>å¦‚ä¸‹å›¾ï¼š<br><img src="/imgs/mysql/2.png"></p></li><li><p>é€šè¿‡ç­›é€‰æŸ¥çœ‹ï¼Œå¯ä»¥å‘ç°å¦‚ä¸‹ä¿¡æ¯ï¼ŒMySQLçš„ç«¯å£è¢«å ç”¨äº†<br><img src="/imgs/mysql/3.png"></p></li></ol><h2 id="æ’æŸ¥ç«¯å£å ç”¨æƒ…å†µ"><a href="#æ’æŸ¥ç«¯å£å ç”¨æƒ…å†µ" class="headerlink" title="æ’æŸ¥ç«¯å£å ç”¨æƒ…å†µ"></a>æ’æŸ¥ç«¯å£å ç”¨æƒ…å†µ</h2><ol><li><p>åœ¨Windowsä¸‹æŸ¥çœ‹ç«¯å£è¢«å ç”¨çš„æƒ…å†µï¼ˆè¢«å“ªä¸ªè¿›ç¨‹å ç”¨äº†ï¼‰</p> <figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">C</span>:\Users\sunha&gt;netstat -ano|findstr <span class="number">3306</span></span><br><span class="line">  <span class="attribute">TCP</span>    <span class="number">0.0.0.0:3306</span>           <span class="number">0.0.0.0:0</span>              LISTENING       <span class="number">4564</span></span><br></pre></td></tr></table></figure></li><li><p>è®°ä½æœ€å³ä¸€åˆ—çš„å€¼ï¼Œæ­¤å¤„æ˜¯<code>4564</code>ï¼Œè¿™ä¸ªå°±æ˜¯å ç”¨è¿›ç¨‹çš„<code>pid</code></p></li><li><p>æ ¹æ®ä¸Šé¢pidæŸ¥æ”¹è¿›ç¨‹è·‘çš„æ˜¯å“ªä¸ªåº”ç”¨ç¨‹åº</p> <figure class="highlight apache"><table><tr><td class="code"><pre><span class="line">  <span class="attribute">C</span>:\Users\sunha&gt;tasklist|findstr <span class="number">4564</span></span><br><span class="line"><span class="attribute">vmnat</span>.exe                     <span class="number">4564</span> Services                   <span class="number">0</span>      <span class="number">5</span>,<span class="number">364</span> K</span><br></pre></td></tr></table></figure></li><li><p>åˆ°æ­¤æ—¶å·²ç»æŸ¥åˆ°å“ªä¸ªåº”ç”¨ç¨‹åºåœ¨ä½œç¥Ÿï¼Œå°±æ˜¯<code>vmnat.exe</code></p></li><li><p>è¿™ä¸ªåˆ°åº•æ˜¯ä»€ä¹ˆç©æ„ï¼Ÿæ ¹æ®åç§°<code>vm</code>å¤§æ¦‚èƒ½çŒœåˆ°æ˜¯è™šæ‹Ÿæœºï¼Œå†æ ¹æ®<code>nat</code>èƒ½çŒœåˆ°ç½‘ç»œ</p></li><li><p>æ‰€ä»¥æ­¤å¤„åº”è¯¥æ˜¯æˆ‘ç”µè„‘é‡Œå®‰è£…çš„è™šæ‹Ÿæœºç½‘ç»œé€ æˆçš„</p></li></ol><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><ol><li><p>æ­¤æ—¶æˆ‘å·²ç»å›å¿†èµ·æ¥äº†ï¼Œæˆ‘ç”µè„‘é‡Œå®‰è£…äº†<code>VMware</code></p></li><li><p>è€Œä¸”æˆ‘çš„ç½‘ç»œç­–ç•¥æ˜¯<code>natæ¨¡å¼</code></p></li><li><p>ä¸ºäº†å°†è™šæ‹Ÿæœºé‡Œçš„MySQLç»™åŒäº‹ä½¿ç”¨ï¼Œå°±åšäº†ä¸€ä¸ªæ˜ å°„å‡ºæ¥</p></li><li><p>ä¸€æŸ¥ï¼Œæœç„¶æ˜¯çš„äº†<br><img src="/imgs/mysql/4.png"></p></li><li><p>åˆ é™¤è¿™ä¸ªé…ç½®ï¼ŒWindowsä¸Šçš„MySQLå°±å¯ä»¥é¡ºåˆ©å¯åŠ¨äº†ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Helmå­¦ä¹ </title>
      <link href="/2019/11/22/yun-wei/helm-yong-fa/"/>
      <url>/2019/11/22/yun-wei/helm-yong-fa/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å®‰è£…helm</p><pre><code> # å®˜æ–¹ä¸€é”®å®‰è£…è„šæœ¬ curl https://raw.githubusercontent.com/helm/helm/master/scripts/get &gt; get_helm.sh $ chmod 700 get_helm.sh $ ./get_helm.sh</code></pre></li></ol><span id="more"></span>    <ol start="2"><li><p>å®‰è£…Tiller</p><ol><li><p>å…ˆåœ¨ K8S é›†ç¾¤ä¸Šæ¯ä¸ªèŠ‚ç‚¹å®‰è£… socat è½¯ä»¶(yum install -y socat)ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><pre><code> E0522 22:22:15.492436   24409 portforward.go:331] an error occurred forwarding 38398 -&gt; 44134: error forwarding port 44134 to pod dc6da4ab99ad9c497c0cef1776b9dd18e0a612d507e2746ed63d36ef40f30174, uid : unable to do port forwarding: socat not found. Error: cannot connect to Tiller</code></pre></li><li><p>å›½å†…å®‰è£…ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒï¼ŒGoogleè¢«å¢™</p><pre><code> helm init --service-account tiller --upgrade -i registry.cn-hangzhou.aliyuncs.com/google_containers/tiller:v2.13.1</code></pre></li><li><p>æŸ¥çœ‹æ‰€æœ‰çš„ä»“åº“</p><pre><code> [root@k8s-master home]# helm repo list NAME     URL                                              stable   https://kubernetes-charts.storage.googleapis.com local    http://127.0.0.1:8879/charts</code></pre></li><li><p>æ·»åŠ harborçš„chartsä»“åº“</p><pre><code> helm repo add --username helm --password Helm12345 home-helm http://home.lodsve.com:9013/chartrepo/helm</code></pre></li><li><p>æ›´æ–°ä»“åº“</p><pre><code> helm repo update</code></pre></li><li><p>ç»™ Tiller æˆæƒ</p><ol><li><p>åˆ›å»ºservice account</p><pre><code> kubectl create serviceaccount --namespace kube-system tiller kubectl create clusterrolebinding tiller-cluster-rule --clusterrole=cluster-admin --serviceaccount=kube-system:tiller</code></pre></li><li><p>æˆæƒ</p><pre><code> kubectl patch deploy --namespace kube-system tiller-deploy -p &#39;&#123;&quot;spec&quot;:&#123;&quot;template&quot;:&#123;&quot;spec&quot;:&#123;&quot;serviceAccount&quot;:&quot;tiller&quot;&#125;&#125;&#125;&#125;&#39;</code></pre></li><li><p>éªŒè¯æ˜¯å¦æˆåŠŸ</p><pre><code> [root@k8s-master home]# kubectl get deploy --namespace kube-system tiller-deploy --output yaml | grep serviceAccount       serviceAccount: tiller       serviceAccountName: tiller</code></pre></li></ol></li><li><p>å¸è½½</p><pre><code> helm resetæˆ–è€…helm reset --force</code></pre></li></ol></li><li><p>åˆ›å»ºcharts</p><ol><li><p>åˆ›å»ºåä¸ºcsc-fmis-config-serverçš„chart</p><pre><code> helm create csc-fmis-config-server</code></pre></li><li><p>ç¼–è¾‘å„ç§æ–‡ä»¶ï¼š</p><pre><code> [root@k8s-master workspace]# tree csc-fmis-config-server/ csc-fmis-config-server/ â”œâ”€â”€ Chart.yaml                      # Chartæœ¬èº«çš„ç‰ˆæœ¬å’Œé…ç½®ä¿¡æ¯ â”œâ”€â”€ charts                          # ä¾èµ–çš„chart â”œâ”€â”€ README.md                       # readme â”œâ”€â”€ templates                       # é…ç½®æ¨¡æ¿ç›®å½• â”‚Â Â  â”œâ”€â”€ NOTES.txt                   # helmæç¤ºä¿¡æ¯ â”‚Â Â  â”œâ”€â”€ _helpers.tpl                # ç”¨äºä¿®æ”¹kubernetes objceté…ç½®çš„æ¨¡æ¿ â”‚Â Â  â”œâ”€â”€ deployment.yaml             # k8sçš„éƒ¨ç½²yaml â”‚Â Â  â””â”€â”€ service.yaml                # k8sçš„æœåŠ¡yaml â””â”€â”€ values.yaml                     # ä¸Šé¢æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°çš„å€¼ 2 directory, 7 files</code></pre></li><li><p>ä½¿ç”¨goçš„templateè¯­æ³•</p></li><li><p>æ£€æŸ¥é…ç½®å’Œæ¨¡æ¿æ˜¯å¦æœ‰æ•ˆ</p><pre><code> helm install --dry-run --debug csc-fmis-config-server -f custom.yaml</code></pre></li><li><p>å¯ä»¥ä½¿ç”¨å¤–éƒ¨yamlæ–‡ä»¶è¦†ç›–chartså†…éƒ¨çš„values.yamlä¸­çš„å€¼ï¼Œç±»ä¼¼spring-bootä¸­çš„application.ymlä¸€æ ·</p></li></ol></li><li><p>æ¨é€åˆ°è¿œç«¯helm charts repo</p><ol><li><p>å®‰è£…helmæ’ä»¶ï¼Œä»¥æ”¯æŒhelm push</p><pre><code> helm plugin install https://github.com/chartmuseum/helm-push</code></pre></li><li><p>helm push </p><pre><code> helm push csc-fmis-config-server/ --version=&quot;0.1.2&quot; home-helm</code></pre></li><li><p>pushè¯­æ³•</p><pre><code> $ helm push mychart-0.1.0.tgz chartmuseum       # push .tgz from &quot;helm package&quot; $ helm push . chartmuseum                       # package and push chart directory $ helm push . --version=&quot;7c4d121&quot; chartmuseum   # override version in Chart.yaml $ helm push . https://my.chart.repo.com         # push directly to chart repo URL</code></pre></li></ol></li><li><p>å®‰è£…åˆ°k8sä¸­</p><ol><li><code>helm install csc-fmis-config-server</code></li><li><code>helm install csc-fmis-config-server -f custom.yaml</code></li><li><code>helm install csc-fmis-config-server --set foo=bar --set foo=newbar</code></li><li><code>helm install --help</code>æŸ¥çœ‹å…¶å®ƒç”¨æ³•</li><li><code>helm list</code></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> DevOps </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨PowerMockito+MockServeræµ‹è¯•å¤–éƒ¨æœåŠ¡</title>
      <link href="/2019/10/10/hou-duan/shi-yong-powermockito-mockserver-ce-shi-wai-bu-fu-wu/"/>
      <url>/2019/10/10/hou-duan/shi-yong-powermockito-mockserver-ce-shi-wai-bu-fu-wu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰è¨€</p><p>&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šä¸ç¬¬ä¸‰æ–¹æœåŠ¡è¿›è¡Œé€šè®¯ï¼Œæ¯”å¦‚å‘çŸ­ä¿¡ã€å¯¼å…¥è´¦å•ç­‰ç­‰ï¼Œè¿™äº›æœåŠ¡å†™å¥½åï¼Œå¦‚ä½•èƒ½ä¿è¯æ˜¯OKçš„ï¼Ÿè¿™å°±éœ€è¦è¿›è¡Œ**<code>å•å…ƒæµ‹è¯•</code><strong>ï¼Œä½†æ˜¯æ¯æ¬¡è·‘</strong><code>æŒç»­é›†æˆ</code>**æ—¶ï¼Œä¸å¯èƒ½çœŸå®çš„å»è°ƒç”¨è¿™äº›å‘é€çŸ­ä¿¡ã€å¯¼å…¥è´¦å•çš„çœŸå®æ¥å£ï¼Œæ‰€ä»¥è¿™é‡Œå°±éœ€è¦ç”¨åˆ°å¼ºå¤§çš„mockæ¥æ¨¡æ‹Ÿè¿™äº›æ¥å£ï¼Œä»¥å®ç°è¿™äº›æ¥å£ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†powermockå’Œmockserverä¸¤ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚</p><p>powermockitoå’Œmockitoçš„åŒºåˆ«ï¼š</p></blockquote><ol><li>mockitoç”¨ä»£ç†å®ç°mockï¼Œè€Œpowermockitoæ˜¯ç›´æ¥å»ä¿®æ”¹å­—èŠ‚ç å®ç°æ›´å¼ºå¤§çš„mockã€‚</li><li>æ‰€ä»¥è¯´powermockitoæ˜¯mockitoçš„ä¸€ä¸ªæ›´åŠ å¼ºå¤§çš„æ‰©å±•ã€‚</li><li>mockitoä¸èƒ½mocké™æ€ã€finalã€ç§æœ‰æ–¹æ³•ç­‰ã€‚</li><li>powermockitoå·ç§°æ˜¯<strong>æ— æ‰€ä¸èƒ½çš„PowerMock</strong>,ä¸Šé¢mockitoçš„ç¼ºé™·éƒ½å¯ä»¥å¾ˆå¥½çš„å¼¥è¡¥æ‰ã€‚</li></ol><span id="more"></span><h1 id="è°ƒç”¨å¤–éƒ¨æœåŠ¡åˆ†ä¸¤ç§æƒ…å†µ"><a href="#è°ƒç”¨å¤–éƒ¨æœåŠ¡åˆ†ä¸¤ç§æƒ…å†µ" class="headerlink" title="è°ƒç”¨å¤–éƒ¨æœåŠ¡åˆ†ä¸¤ç§æƒ…å†µ"></a>è°ƒç”¨å¤–éƒ¨æœåŠ¡åˆ†ä¸¤ç§æƒ…å†µ</h1><ol><li>ç¬¬ä¸‰æ–¹ç»™æˆ‘ä»¬clientåŒ…</li><li>ç›´æ¥å‘ç¬¬ä¸‰æ–¹æä¾›çš„urlå‘é€post&#x2F;getè¯·æ±‚</li></ol><h1 id="ä¸¤ç§æƒ…å†µçš„å…·ä½“æµ‹è¯•æ–¹å¼"><a href="#ä¸¤ç§æƒ…å†µçš„å…·ä½“æµ‹è¯•æ–¹å¼" class="headerlink" title="ä¸¤ç§æƒ…å†µçš„å…·ä½“æµ‹è¯•æ–¹å¼"></a>ä¸¤ç§æƒ…å†µçš„å…·ä½“æµ‹è¯•æ–¹å¼</h1><ol><li><p>client</p><ul><li><p>ç¬¬ä¸‰æ–¹æä¾›ç»™æˆ‘ä»¬clientåŒ…ï¼Œå…¶å®ä»–ä»¬æ˜¯å°†å…·ä½“è¯·æ±‚çš„urlå°è£…åœ¨è¿™ä¸ªjaråŒ…ä¸­ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ²¡åŠæ³•å»ä¿®æ”¹è¯·æ±‚çš„urlï¼Œé‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•å»åšå‘¢ï¼Ÿ</p></li><li><p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºç¬¬ä¸‰æ–¹ç»™æˆ‘ä»¬çš„clientæ˜¯ç»è¿‡ä»–ä»¬è‡ªå·±çš„æµ‹è¯•ï¼Œå®Œå…¨å¯ä»¥ä¿è¯å…¶çš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥é‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠè¿™ä¸ªclientç»™mockæ‰ï¼Œé‚£å°±ä»clientçš„å…¥å£å¤„å¼€å§‹mockå§</p></li><li><p>è¿™é‡Œéœ€è¦ç”¨åˆ°powermockï¼ˆ<strong>æ— æ‰€ä¸èƒ½çš„PowerMock</strong>ï¼‰å»mockç§æœ‰æ–¹æ³•æˆ–è€…é™æ€æ–¹æ³•ï¼Œå…³äºpowermockçš„ä»‹ç»è¯·å‚è€ƒ<a href="http://blog.csdn.net/jackiehff/article/details/14000779" title="powermock">powermock</a>ã€‚</p></li><li><p>pom.xmlçš„é…ç½®</p><pre><code>  &lt;!-- mock --&gt;  &lt;dependency&gt;      &lt;groupId&gt;org.powermock&lt;/groupId&gt;      &lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;      &lt;version&gt;1.5.5&lt;/version&gt;      &lt;scope&gt;test&lt;/scope&gt;  &lt;/dependency&gt;  &lt;dependency&gt;      &lt;groupId&gt;org.powermock&lt;/groupId&gt;      &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;      &lt;version&gt;1.5.5&lt;/version&gt;      &lt;scope&gt;test&lt;/scope&gt;  &lt;/dependency&gt;  &lt;dependency&gt;      &lt;groupId&gt;org.powermock&lt;/groupId&gt;      &lt;artifactId&gt;powermock-module-junit4-rule-agent&lt;/artifactId&gt;      &lt;version&gt;1.5.5&lt;/version&gt;      &lt;scope&gt;test&lt;/scope&gt;  &lt;/dependency&gt;</code></pre></li><li><p>unit-testä»£ç </p><ul><li>å…·ä½“è¯·å‚è€ƒ<code>sharing\labs\powermock</code>å’Œ<code>coral.mashup.push</code></li></ul></li></ul></li><li><p>url</p><ul><li>ç›´æ¥ç”¨urlï¼Œæˆ‘ä»¬å¯ä»¥å°†urlæ¢æˆæˆ‘ä»¬è‡ªå·±çš„urlï¼Œç„¶åè‡ªå·±åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„è™šæ‹ŸæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡å°†æŒ‰ç…§æŒ‡å®šçš„è¯·æ±‚åœ°å€ä»¥åŠå‚æ•°è¿”å›æŒ‡å®šçš„æ•°æ®æ ¼å¼ã€‚å¦‚æœå»åˆ›å»ºè¿™ä¸ªæœåŠ¡ï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±ç”¨åˆ°äº†MockServerè¿™ä¸ªå·¥å…·ã€‚</li><li>å¦‚ä½•å»ä½¿ç”¨ï¼š<ol><li><p>pom.xmlçš„é…ç½®</p><pre><code> &lt;!-- mock server --&gt; &lt;dependency&gt;     &lt;groupId&gt;org.mock-server&lt;/groupId&gt;     &lt;artifactId&gt;mockserver-netty&lt;/artifactId&gt;     &lt;version&gt;3.4&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt;     &lt;groupId&gt;org.mock-server&lt;/groupId&gt;     &lt;artifactId&gt;mockserver-client-java&lt;/artifactId&gt;     &lt;version&gt;3.4&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt;     &lt;groupId&gt;org.mock-server&lt;/groupId&gt;     &lt;artifactId&gt;mockserver-core&lt;/artifactId&gt;     &lt;version&gt;3.4&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;</code></pre></li><li><p>unit-testä»£ç </p><ul><li>å…·ä½“è¯·å‚è€ƒ<code>coral.mashup.sms</code></li><li>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚ä½•å»æ›¿æ¢urlã€‚æˆ‘ä»¬urlä¸€èˆ¬éƒ½ä¼šå†™åœ¨propertiesä¸­ï¼Œç„¶åé€šè¿‡SystemConfigè¿™ä¸ªå·¥å…·ç±»å»è·å–ï¼Œæ‰€ä»¥è¿™é‡Œæƒ³æ›¿æ¢urlï¼Œåªéœ€å°†SystemConfigå·¥å…·ç±»ç›¸åº”çš„æ–¹æ³•ç»™mockæ‰ï¼Œè°ƒç”¨æ–¹æ³•çš„æ¡ä»¶æ˜¯ä¼ å…¥å¯¹åº”çš„keyï¼Œè¿”å›å€¼å°±æ˜¯ä½ æƒ³è¦çš„valueå³å¯ï¼</li></ul></li></ol></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•å…ƒæµ‹è¯• </tag>
            
            <tag> mock </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨mockitoè¿›è¡Œå•å…ƒæµ‹è¯•</title>
      <link href="/2019/10/10/hou-duan/shi-yong-mockito-jin-xing-dan-yuan-ce-shi/"/>
      <url>/2019/10/10/hou-duan/shi-yong-mockito-jin-xing-dan-yuan-ce-shi/</url>
      
        <content type="html"><![CDATA[<p>å†™è¿™ç¯‡æ–‡æ¡£çš„åŸå› ï¼š<br>ç°åœ¨é¡¹ç›®ä¸­çš„mockå•å…ƒæµ‹è¯•é…ç½®æœ‰ä¸€ç‚¹é—®é¢˜:</p><ol><li>å•å…ƒæµ‹è¯•å¾ˆæ…¢ï¼Œæµ‹è¯•ç±»ç»§æ‰¿BaseTestï¼Œæ¯æ¬¡æµ‹è¯•æ—¶éƒ½ä¼šå»åŠ è½½xmlæ–‡ä»¶åˆ°springå®¹å™¨ä¸­ï¼Œè€Œè¿™ä¸ªæ˜¯æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºmockæµ‹è¯•å°±æ˜¯ç”¨äºæ¨¡æ‹Ÿ è¢«æµ‹è¯•ç±» æ‰€è°ƒç”¨çš„å…¶ä»–ç±»çš„æ–¹æ³•ï¼Œè®¾å®šè¿™äº›æ–¹æ³•çš„è¿”å›å€¼ï¼ˆå³æ‰“æ¡©ï¼‰ï¼Œå› æ­¤ï¼Œä¸éœ€è¦åŠ è½½ä»»ä½•springæ–‡ä»¶ï¼Œé™¤éä½ è¦è°ƒç”¨çœŸå®æ–¹æ³•æ“ä½œæ•°æ®åº“æˆ–è€…dubboæœåŠ¡ç­‰æ¥å£ã€‚</li><li>ä»£ç ä¸­æ—¢ä½¿ç”¨äº†æ³¨è§£@mock,åˆä½¿ç”¨äº†springçš„é…ç½®æ–¹å¼ï¼Œäº§ç”Ÿäº†å†—ä½™é…ç½®ã€‚åŸºäºä¸Šé¢é—®é¢˜ï¼Œè¯´æ˜ä½¿ç”¨è€…å¯¹mockitoçš„ä½¿ç”¨å¹¶ä¸æ˜¯å¾ˆäº†è§£ï¼Œæ‰€ä»¥åœ¨è¿™è¾¹ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</li></ol><span id="more"></span><h1 id="ä½¿ç”¨æ³¨è§£è‡ªåŠ¨ç”Ÿæˆmockç±»"><a href="#ä½¿ç”¨æ³¨è§£è‡ªåŠ¨ç”Ÿæˆmockç±»" class="headerlink" title="ä½¿ç”¨æ³¨è§£è‡ªåŠ¨ç”Ÿæˆmockç±»"></a>ä½¿ç”¨æ³¨è§£è‡ªåŠ¨ç”Ÿæˆmockç±»</h1><p>åœ¨éœ€è¦Mockçš„å±æ€§ä¸Šæ ‡è®°@Mockæ³¨è§£æˆ–è€…@Spyæ³¨è§£ï¼Œç„¶å@RunWith(MockitoJUnitRunner.class)æˆ–è€…åœ¨setUp()æ–¹æ³•ä¸­æ˜¾ç¤ºè°ƒç”¨MockitoAnnotations.initMocks(this);ç”ŸæˆMockç±»å³å¯ã€‚</p><blockquote><p>å…³äº@Mockå’Œ@Spyæ³¨è§£çš„åŒºåˆ«ï¼š</p></blockquote><p>ä½¿ç”¨@Mockæ³¨è§£çš„å±æ€§ä¼šè¢«mockåŒ–ï¼Œè€Œä½¿ç”¨@Spyçš„å±æ€§ä¸ä¼šè¢«mockåŒ–ï¼Œå³å¦‚æœä¸æ‰“æ¡©é»˜è®¤éƒ½ä¼šæ‰§è¡ŒçœŸå®çš„æ–¹æ³•ï¼Œå¦‚æœæ‰“æ¡©åˆ™è¿”å›æ¡©å®ç°ã€‚<br>ï¼ˆæ³¨ï¼šä½¿ç”¨@Mockçš„å±æ€§å¦‚æœæƒ³è°ƒç”¨çœŸå®æ–¹æ³•å¯ä»¥ä½¿ç”¨doCallRealMethod()æ–¹æ³•æˆ–thenCallRealMethod()ï¼Œä½¿ç”¨@Spyçš„å±æ€§æ‰“æ¡©æ˜¯éœ€è¦ä½¿ç”¨doReturnè€Œä¸è¦ä½¿ç”¨thenReturnï¼Œä½¿ç”¨thenReturnå³ä½¿è¿”å›æ‰“æ¡©å®ç°ï¼Œä¹Ÿä¼šå»æ‰çœŸå®æ–¹æ³•ï¼Œè¿™åº”è¯¥æ˜¯ä¸€ä¸ªmockitoçš„ä¸€ä¸ªbugã€‚)</p><h1 id="è‡ªåŠ¨æ³¨å…¥Mockç±»åˆ°è¢«æµ‹è¯•ç±»"><a href="#è‡ªåŠ¨æ³¨å…¥Mockç±»åˆ°è¢«æµ‹è¯•ç±»" class="headerlink" title="è‡ªåŠ¨æ³¨å…¥Mockç±»åˆ°è¢«æµ‹è¯•ç±»"></a>è‡ªåŠ¨æ³¨å…¥Mockç±»åˆ°è¢«æµ‹è¯•ç±»</h1><p>åªè¦åœ¨è¢«æµ‹è¯•ç±»ä¸Šæ ‡è®°@InjectMocksï¼ŒMockitoå°±ä¼šè‡ªåŠ¨å°†æ ‡è®°@Mockã€@Spyç­‰æ³¨è§£çš„å±æ€§å€¼æ³¨å…¥åˆ°è¢«æµ‹è¯•ç±»ä¸­ã€‚  </p><h1 id="å®Œæ•´ä¾‹å­ï¼š"><a href="#å®Œæ•´ä¾‹å­ï¼š" class="headerlink" title="å®Œæ•´ä¾‹å­ï¼š"></a>å®Œæ•´ä¾‹å­ï¼š</h1><p>  æµ‹è¯•ç±»</p><pre><code>public class ServiceTest&#123;@Mockprivate Dao mockDao;//@Spy//private Dao spyDao = new Dao();@InjectMocksprivate Service service = new Service();@Beforepublic void setup()&#123;MockitoAnnotations.initMocks(this);&#125;@Testpublic void mockCallRealMethod()&#123;/*è°ƒç”¨çœŸå®æ–¹æ³•*///  doCallRealMethod().when(mockDao).getName(Mockito.anyString());//  doCallRealMethod().when(mockDao).getSex(Mockito.anyString());    when(mockDao.getName(Mockito.anyString())).thenCallRealMethod();    when(mockDao.getSex(Mockito.anyString())).thenCallRealMethod();    String[] userInfos = service.getUserInfos(&quot;1&quot;);    System.out.println(&quot;name:&quot;+userInfos[0]);    System.out.println(&quot;sex:&quot;+userInfos[1]);&#125;@Testpublic void spyTest()&#123;/*ä½¿ç”¨thenReturnæ–¹å¼æ‰“æ¡©ï¼Œä¾æ—§ä¼šè°ƒç”¨çœŸå®æ–¹æ³•*///  when(spyDao.getName(&quot;1&quot;)).thenReturn(&quot;zhangsan&quot;);//  when(spyDao.getSex(&quot;1&quot;)).thenReturn(&quot;famle&quot;);/*ä½¿ç”¨doReturnæ–¹å¼æ‰“æ¡©ï¼Œåˆ™ä¸ä¼šè°ƒç”¨çœŸå®æ–¹æ³•*///  doReturn(&quot;zhangsan&quot;).when(spyDao).getName(Mockito.anyString());//  doReturn(&quot;famle&quot;).when(spyDao).getSex(Mockito.anyString());    String[] userInfos = service.getUserInfos(&quot;1&quot;);    System.out.println(&quot;name:&quot;+userInfos[0]);    System.out.println(&quot;sex:&quot;+userInfos[1]);&#125;&#125;</code></pre><p>è¢«è°ƒç”¨ç±»ï¼Œå³è¢«mockçš„ç±»ï¼š<br>    public class Dao {</p><pre><code>public String getName(String id)&#123;    if(StringUtils.isEmpty(id))&#123;        return &quot;no this people&quot;;    &#125;    System.out.println(&quot;id:&quot;+id+&quot; --- name:dengzhi&quot;);    return &quot;dengzhi&quot;;&#125;public String getSex(String id)&#123;    if(StringUtils.isEmpty(id))&#123;        return &quot;no this people&quot;;    &#125;    System.out.println(&quot;id:&quot;+id+&quot; --- sex:male&quot;);    return &quot;male&quot;;&#125;&#125;</code></pre><p>è¢«æµ‹è¯•ç±»ï¼š</p><pre><code>public class Service &#123;Dao dao = new Dao();public String[] getUserInfos(String id)&#123;    String[] userInfos = new String[2];        userInfos[0] = dao.getName(id);    userInfos[1] = dao.getSex(id);    return  userInfos;&#125;&#125;</code></pre><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨@Mockå’Œ@Spyéƒ½å±æ€§æ˜¯ä¸å†éœ€è¦springé…ç½®æ–‡ä»¶çš„æ³¨å…¥çš„ï¼Œå¦‚æœè¦ä½¿ç”¨springæ³¨å…¥ï¼Œåˆ™ç»“åˆ@Autowiredä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š</p><pre><code>æ­£å¸¸çš„beanå£°æ˜ &lt;bean id=â€daoâ€ class=â€Daoâ€&gt;mock &lt;bean id=&quot;dao1&quot;  class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;        &lt;constructor-arg value=&quot;DaoInterface&quot;&gt;&lt;/constructor-arg&gt;        &lt;/bean&gt;         è¯·æ³¨æ„åˆ°svcä¸å˜åŒ–ï¼Œmockå°†è‡ªåŠ¨æ³¨å…¥è¿›å…¥ã€‚è¿™æ˜¯å› ä¸ºspringçš„beanå®¹å™¨ï¼Œå¦‚æœidä¸€æ ·ï¼Œåå£°æ˜çš„beanä¼šè¦†ç›–å‰é¢çš„beanã€‚spy &lt;bean id=&quot;daoInst&quot;  class=&quot;Dao&quot;&gt;&lt;/bean&gt;        &lt;bean id=&quot;dao2&quot;  class=&quot;org.mockito.Mockito&quot; factory-method=&quot;spy&quot;&gt;        &lt;constructor-arg ref=&quot;daoInst&quot;&gt;&lt;/constructor-arg&gt;        &lt;/bean&gt;         åŒæ ·svcä¸å˜åŒ–ï¼Œç›´æ¥æ³¨å…¥ã€‚è¯·æ³¨æ„spyéœ€è¦è·å¾—ä¸€ä¸ªå®ä¾‹ã€‚</code></pre><p>å› æ­¤ï¼Œå»ºè®®é¡¹ç›®ä¸­çš„mockæµ‹è¯•å»æ‰mock_service.xmlé…ç½®æ–‡ä»¶ï¼Œå»æ‰ç»§æ‰¿BaseTestã€‚è¿™æ ·åšå³å»æ‰å†—ä½™é…ç½®ï¼ŒåˆåŠ å¿«æµ‹è¯•é€Ÿåº¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•å…ƒæµ‹è¯• </tag>
            
            <tag> mock </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä¸­çš„åæ‚”è¯</title>
      <link href="/2019/01/27/gong-ju/git-zhong-de-hou-hui-yao/"/>
      <url>/2019/01/27/gong-ju/git-zhong-de-hou-hui-yao/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“gitæäº¤ä¸Šå»ä¸€äº›é”™è¯¯ä»£ç æˆ–è€…ä¸€äº›æ•æ„Ÿä¿¡æ¯æ—¶ï¼Œè¿™æ—¶å€™ä½ éœ€è¦å›æ»šï¼Œä½†æ˜¯è¿˜æ˜¯èƒ½åœ¨gitçš„æ—¥å¿—æ‰¾åˆ°è››ä¸é©¬è¿¹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦åæ‚”è¯äº†ï¼</p></blockquote><span id="more"></span><ol><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æˆ‘ä»¬éœ€è¦å›æ»šåˆ°çš„æäº¤ç‚¹çš„hashï¼Œå³<code>commit id</code></p><ul><li><p>åœ¨git shellä¸­è¿›å…¥æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•</p></li><li><p>ä½¿ç”¨git logå‘½ä»¤è·å–æäº¤çš„å†å²æ‰¾åˆ°éœ€è¦å›æ»šåˆ°çš„æäº¤ç‚¹(#æ˜¯æˆ‘æ·»åŠ çš„)</p><pre><code>  [sunhao@sunhaode-MacBook-Pro docker-templates]$ git log  # è¿™æ¬¡æäº¤åŒ…å«äº†æ•æ„Ÿä¿¡æ¯ï¼Œéœ€è¦åƒç‚¹åæ‚”è¯  commit 17449b6201cdf2429217dc056d1d66dbeb11f488 (HEAD -&gt; master, origin/master, origin/HEAD)  Author: å­™æ˜Š &lt;sunhao.java@gmail.com&gt;  Date:   Sun Jan 27 01:11:06 2019 +0800      yapi    # éœ€è¦å›æ»šåˆ°è¿™æ¬¡æäº¤  commit bcb9f25c09b6cac68bff3f95ccbb2d8df9192414  Author: å­™æ˜Š &lt;sunhao.java@gmail.com&gt;  Date:   Fri Jan 25 18:24:28 2019 +0800      jenkins  commit c9098ba3ec2745ad1107b64bea6e0a5f417d131b  Author: å­™æ˜Š &lt;sunhao.java@gmail.com&gt;  Date:   Fri Jan 25 12:27:09 2019 +0800      owncloud</code></pre></li></ul></li><li><p>å¤åˆ¶ä½ éœ€è¦å›æ»šçš„commit idï¼Œè¾“å…¥å¤åˆ¶commit idå€¼ï¼Œä½¿ç”¨<code>git reset --hard commit_id</code></p><pre><code> [sunhao@sunhaode-MacBook-Pro docker-templates]$ git reset --hard bcb9f25c09b6cac68bff3f95ccbb2d8df9192414 HEAD is now at bcb9f25 jenkins</code></pre></li><li><p>ç„¶ååªè¦å¼ºåˆ¶æäº¤å°±è¡Œäº†</p><pre><code> # --force æ…ç”¨ï¼Œä¼šä½¿ç”¨ä½ æœ¬åœ°çš„ä»£ç ä»“åº“ç›´æ¥è¦†ç›–è¿œç«¯ä»“åº“ git push origin HEAD --force</code></pre></li><li><p>å°†äº‹å…ˆå¤‡ä»½å¥½çš„æ–‡ä»¶ä¸­çš„æ•æ„Ÿä¿¡æ¯å»æ‰ï¼Œå†æ­£å¸¸æ“ä½œå³å¯</p><pre><code> git add . git commit -m &quot;yapi&quot; git push</code></pre></li><li><p>è¿™æ ·è¿œç«¯ä»“åº“ä¸­çš„æ•æ„Ÿä¿¡æ¯å°±å»æ‰äº†ï¼Œå¹¶ä¸”åœ¨commit logä¸­ä¹Ÿçœ‹ä¸è§äº†ï¼Œè¾¾åˆ°äº†â€œæ¯å°¸ç­è¿¹â€çš„æ•ˆæœäº†</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockerå®‰è£…YApi</title>
      <link href="/2019/01/23/gong-ju/shi-yong-docker-an-zhuang-yapi/"/>
      <url>/2019/01/23/gong-ju/shi-yong-docker-an-zhuang-yapi/</url>
      
        <content type="html"><![CDATA[<p><code>YApi</code>æ˜¯<code>å»å“ªå„¿ç½‘å¤§å‰ç«¯æŠ€æœ¯ä¸­å¿ƒï¼ˆYMFEï¼‰</code>å¼€å‘å¹¶å¼€æºçš„ä¸€æ¬¾<code>é«˜æ•ˆã€æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„APIç®¡ç†å¹³å°</code>ã€‚æ”¯æŒ<code>é¡¹ç›®ç®¡ç†</code>ã€<code>æ¥å£ç®¡ç†</code>ã€<code>MockServer</code>ã€<code>æ–‡æ¡£ç®¡ç†</code>ç­‰ç­‰å®ç”¨åŠŸèƒ½ã€‚</p><h1 id="å…³äºYApi"><a href="#å…³äºYApi" class="headerlink" title="å…³äºYApi"></a>å…³äº<code>YApi</code></h1><ol><li>æºç ï¼š<a href="https://github.com/YMFE/yapi">https://github.com/YMFE/yapi</a></li><li>ä½¿ç”¨æ•™ç¨‹ï¼š<a href="https://yapi.ymfe.org/documents/index.html">https://yapi.ymfe.org/documents/index.html</a></li><li>åœ¨çº¿Demoï¼š<a href="http://yapi.demo.qunar.com/">http://yapi.demo.qunar.com/</a></li><li>æœ€æ–°ç‰ˆæœ¬ï¼š<a href="https://github.com/YMFE/yapi/releases">https://github.com/YMFE/yapi/releases</a></li><li>ç‰ˆæœ¬è®°å½•ï¼š<a href="https://yapi.ymfe.org/documents/CHANGELOG.html">https://yapi.ymfe.org/documents/CHANGELOG.html</a><span id="more"></span></li></ol><h1 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="headerlink" title="åˆ›å»ºé•œåƒ"></a>åˆ›å»ºé•œåƒ</h1><ol><li>ç¼–å†™<code>Dockerfile</code>æ–‡ä»¶ï¼Œæ–‡ä»¶å¤ªé•¿ï¼Œç›´æ¥æŸ¥çœ‹<a href="https://github.com/sunhao-java/docker-templates/blob/master/yapi/Dockerfile">Github</a>ä¸Šçš„æ–‡ä»¶</li><li>ä¸‹è½½å¥½<code>yapi-1.4.4.tar.gz</code></li><li>å¯ä»¥ç›´æ¥å…ˆæ„å»ºé•œåƒï¼Œæˆ–è€…ä½¿ç”¨<code>docker-compose</code>æ¥æ„å»ºï¼Œæ¨èä½¿ç”¨åè€…</li></ol><h1 id="åˆ›å»ºdocker-compose-ymlæ–‡ä»¶"><a href="#åˆ›å»ºdocker-compose-ymlæ–‡ä»¶" class="headerlink" title="åˆ›å»ºdocker-compose.ymlæ–‡ä»¶"></a>åˆ›å»º<code>docker-compose.yml</code>æ–‡ä»¶</h1><ol><li>æ–‡ä»¶å¤ªé•¿äº†ï¼Œè¯·ç›´æ¥æŸ¥çœ‹<a href="https://github.com/sunhao-java/docker-templates/blob/master/yapi/docker-compose.yml">Github</a>ä¸Šçš„æ–‡ä»¶</li><li>å¯ä»¥è‡ªå®šä¹‰å‡ å¤„ç”¨æˆ·åå¯†ç ï¼Œä¸‹é¢çš„<code>YApi</code>é…ç½®æ–‡ä»¶ä¼šä½¿ç”¨åˆ°</li></ol><h1 id="åˆ›å»ºYApiçš„é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºYApiçš„é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºYApiçš„é…ç½®æ–‡ä»¶"></a>åˆ›å»º<code>YApi</code>çš„é…ç½®æ–‡ä»¶</h1><ol><li><p><code>mkdir config</code></p></li><li><p><code>vim config.json</code></p><pre><code> &#123;   &quot;port&quot;: &quot;3000&quot;,   &quot;adminAccount&quot;: &quot;sunhao@lodsve.com&quot;,   &quot;db&quot;: &#123;     &quot;servername&quot;: &quot;yapi-mongo&quot;,     &quot;port&quot;: 27017,     &quot;DATABASE&quot;: &quot;yapi&quot;,     &quot;user&quot;: &quot;admin&quot;,     &quot;pass&quot;: &quot;admin123&quot;,     &quot;authSource&quot;: &quot;admin&quot;   &#125;,   &quot;mail&quot;: &#123;     &quot;enable&quot;: true,     &quot;host&quot;: &quot;smtp.qiye.aliyun.com&quot;,     &quot;port&quot;: 25,     &quot;from&quot;: &quot;sunhao@lodsve.com&quot;,     &quot;auth&quot;: &#123;       &quot;user&quot;: &quot;sunhao@lodsve.com&quot;,       &quot;pass&quot;: &quot;xxxxxxxxx&quot;     &#125;   &#125; &#125;</code></pre></li></ol><h1 id="å¯åŠ¨YApi"><a href="#å¯åŠ¨YApi" class="headerlink" title="å¯åŠ¨YApi"></a>å¯åŠ¨<code>YApi</code></h1><ol><li><code>docker-compose up -d</code></li></ol><h1 id="è®¿é—®åœ°å€ï¼š"><a href="#è®¿é—®åœ°å€ï¼š" class="headerlink" title="è®¿é—®åœ°å€ï¼š"></a>è®¿é—®åœ°å€ï¼š</h1><ol><li><p>YApi</p><pre><code> url: http://your_yapi_server_ip:3000 # ç”¨æˆ·ååœ¨yapiçš„é…ç½®æ–‡ä»¶config.jsonä¸­è®¾ç½®çš„ï¼Œå¯†ç æ˜¯é»˜è®¤åˆå§‹å¯†ç  username: sunhao@lodsve.com password: ymfe.org</code></pre></li><li><p>mongo-express        </p><pre><code> url: http://your_yapi_server_ip:8081 # ç”¨æˆ·åå¯†ç åœ¨docker-compose.ymlä¸­è®¾ç½®çš„ username: root password: root123</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> yapi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºHarborä¼ä¸šçº§dockerä»“åº“</title>
      <link href="/2019/01/18/yun-wei/da-jian-harbor-qi-ye-ji-docker-cang-ku/"/>
      <url>/2019/01/18/yun-wei/da-jian-harbor-qi-ye-ji-docker-cang-ku/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½harborå®‰è£…æ–‡ä»¶"><a href="#ä¸‹è½½harborå®‰è£…æ–‡ä»¶" class="headerlink" title="ä¸‹è½½harborå®‰è£…æ–‡ä»¶"></a>ä¸‹è½½harborå®‰è£…æ–‡ä»¶</h1><ol><li><a href="https://storage.googleapis.com/harbor-releases/release-1.7.0/harbor-online-installer-v1.7.1.tgz" title="harbor-online-installer-v1.7.1.tgz">harbor-online-installer-v1.7.1.tgz</a></li><li>æ”¾ç½®åœ¨<code>/opt</code>ç›®å½•ä¸‹</li><li>è§£å‹</li><li><code>cd /opt/harbor</code><span id="more"></span></li></ol><h1 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><ol><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/opt/harbor/harbor.cfg</code></p><pre><code> vim /opt/harbor/harbor.cfg # ä¸»æœºåï¼Œåé¢ç”¨è¿™ä¸ªåœ°å€æ¥è®¿é—® hostname = harbor.lodsve.com # é‚®ç®±é…ç½® email_server = smtp.qiye.aliyun.com email_server_port = 25 email_username = harbor@lodsve.com email_password = XXXXXXXXXXX email_from = Harbor &lt;harbor@lodsve.com&gt; email_ssl = false email_insecure = false # ç¦æ­¢ç”¨æˆ·æ³¨å†Œ self_registration = off # è®¾ç½®åªæœ‰ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºé¡¹ç›® project_creation_restriction = adminonly</code></pre></li></ol><h1 id="æ‰§è¡Œå®‰è£…è„šæœ¬"><a href="#æ‰§è¡Œå®‰è£…è„šæœ¬" class="headerlink" title="æ‰§è¡Œå®‰è£…è„šæœ¬"></a>æ‰§è¡Œå®‰è£…è„šæœ¬</h1><pre><code>/opt/harbor/install.sh</code></pre><p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p><pre><code>[Step 0]: checking installation environment ...Note: docker version: 18.09.0Note: docker-compose version: 1.23.1[Step 1]: preparing environment ...Generated and saved secret to file: /data/secretkeyGenerated configuration file: ./common/config/nginx/nginx.confGenerated configuration file: ./common/config/adminserver/envGenerated configuration file: ./common/config/core/envGenerated configuration file: ./common/config/registry/config.ymlGenerated configuration file: ./common/config/db/envGenerated configuration file: ./common/config/jobservice/envGenerated configuration file: ./common/config/jobservice/config.ymlGenerated configuration file: ./common/config/log/logrotate.confGenerated configuration file: ./common/config/registryctl/envGenerated configuration file: ./common/config/core/app.confGenerated certificate, key file: ./common/config/core/private_key.pem, cert file: ./common/config/registry/root.crtThe configuration files are ready, please use docker-compose to start the service.[Step 2]: checking existing instance of Harbor ...[Step 3]: starting Harbor ...Creating network &quot;harbor_harbor&quot; with the default driverPulling log (goharbor/harbor-log:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-log321a8da5ee1f: Pull completee58cb02d4a79: Pull completeb1addcae27cf: Pull complete0add5fe71c61: Pull complete701d7cb4751e: Pull completeae052802ba8f: Pull complete474572a6c946: Pull completePulling registry (goharbor/registry-photon:v2.6.2-v1.7.1)...v2.6.2-v1.7.1: Pulling from goharbor/registry-photon321a8da5ee1f: Already exists427e471dc5bb: Pull complete79d644c380a9: Pull completed1ee69ba441f: Pull complete13ee399ae5e6: Pull complete52da6cf3d71f: Pull completee6dfe8d3336d: Pull complete2261e5dd4591: Pull completePulling registryctl (goharbor/harbor-registryctl:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-registryctl321a8da5ee1f: Already exists60ab2a220157: Pull complete685cb36a4aa6: Pull complete6ab9cbb7c05b: Pull completed66f51b51c32: Pull complete152d893b8817: Pull completePulling postgresql (goharbor/harbor-db:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-db321a8da5ee1f: Already exists3b62caa7690c: Pull complete0c0b8f8af809: Pull complete68db7c777555: Pull complete810390407c8c: Pull completed99f5e0b551e: Pull complete0dedd5da1f5d: Pull complete5e156cfb841f: Pull complete0433d5b9e1ad: Pull completePulling adminserver (goharbor/harbor-adminserver:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-adminserver321a8da5ee1f: Already exists3235adc5dfba: Pull complete36df358268ae: Pull completef07cf44733c3: Pull complete153223fc88f2: Pull completePulling core (goharbor/harbor-core:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-core321a8da5ee1f: Already exists95d433145bab: Pull complete49d3e2a9635a: Pull complete6a4cbc768efe: Pull complete7e7d30cebeb5: Pull completePulling portal (goharbor/harbor-portal:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-portal321a8da5ee1f: Already exists0c2edbea17ee: Pull complete35f0e6ee2803: Pull complete815b36cabaa4: Pull completePulling redis (goharbor/redis-photon:v1.7.1)...v1.7.1: Pulling from goharbor/redis-photon321a8da5ee1f: Already existse37a237fdce1: Pull completea533db83c439: Pull complete60f1956f70fa: Pull completec7eecf8b746b: Pull completePulling jobservice (goharbor/harbor-jobservice:v1.7.1)...v1.7.1: Pulling from goharbor/harbor-jobservice321a8da5ee1f: Already exists4809bd624b7e: Pull complete889c696c8f56: Pull complete72d181b0302b: Pull completePulling proxy (goharbor/nginx-photon:v1.7.1)...v1.7.1: Pulling from goharbor/nginx-photon321a8da5ee1f: Already exists044755eb163c: Pull completeDigest: sha256:9ec5644c667e87bf051e581ce74b2933d3ed469b27862534ba60ccf17b4ff57aStatus: Downloaded newer image for vmware/nginx-photon:1.11.13Creating harbor-log ... doneCreating harbor-log ... doneCreating harbor-db ... doneCreating harbor-adminserver ... doneCreating registry ... doneCreating harbor-db ... doneCreating registry ... doneCreating registry ... doneCreating harbor-ui ... doneCreating harbor-ui ... doneCreating nginx ... doneCreating harbor-jobservice ... doneCreating harbor-jobservice ... doneCreating nginx ... doneâœ” ----Harbor has been installed and started successfully.----Now you should be able to visit the admin portal at http://harbor.lodsve.com. For more details, please visit https://github.com/vmware/harbor .</code></pre><h1 id="Harborå¯åŠ¨å’Œåœæ­¢"><a href="#Harborå¯åŠ¨å’Œåœæ­¢" class="headerlink" title="Harborå¯åŠ¨å’Œåœæ­¢"></a>Harborå¯åŠ¨å’Œåœæ­¢</h1><ol><li><p>Harbor çš„æ—¥å¸¸è¿ç»´ç®¡ç†æ˜¯é€šè¿‡docker-composeæ¥å®Œæˆçš„ï¼ŒHarboræœ¬èº«æœ‰å¤šä¸ªæœåŠ¡è¿›ç¨‹ï¼Œéƒ½æ”¾åœ¨dockerå®¹å™¨ä¹‹ä¸­è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡docker pså‘½ä»¤æŸ¥çœ‹ã€‚</p><pre><code> [root@localhost harbor]# docker ps CONTAINER ID        IMAGE                                        COMMAND                  CREATED             STATUS                 PORTS                                                                              NAMES 3c69bd72f85d        goharbor/nginx-photon:v1.7.1                 &quot;nginx -g &#39;daemon ofâ€¦&quot;   6 hours ago         Up 6 hours (healthy)   0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, 0.0.0.0:4443-&gt;4443/tcp                   nginx a88dcf21cd32        goharbor/harbor-portal:v1.7.1                &quot;nginx -g &#39;daemon ofâ€¦&quot;   6 hours ago         Up 6 hours (healthy)   80/tcp                                                                             harbor-portal 92523370eeb3        goharbor/harbor-jobservice:v1.7.1            &quot;/harbor/start.sh&quot;       6 hours ago         Up 6 hours                                                                                                harbor-jobservice 3963d6efe445        goharbor/harbor-core:v1.7.1                  &quot;/harbor/start.sh&quot;       6 hours ago         Up 6 hours (healthy)                                                                                      harbor-core cb96daa8cfd8        goharbor/harbor-registryctl:v1.7.1           &quot;/harbor/start.sh&quot;       6 hours ago         Up 6 hours (healthy)                                                                                      registryctl e0c704663b1b        goharbor/harbor-db:v1.7.1                    &quot;/entrypoint.sh postâ€¦&quot;   6 hours ago         Up 6 hours (healthy)   5432/tcp                                                                           harbor-db 277d48e55a01        goharbor/redis-photon:v1.7.1                 &quot;docker-entrypoint.sâ€¦&quot;   6 hours ago         Up 6 hours             6379/tcp                                                                           redis a1881948c75d        goharbor/registry-photon:v2.6.2-v1.7.1       &quot;/entrypoint.sh /etcâ€¦&quot;   6 hours ago         Up 6 hours (healthy)   5000/tcp                                                                           registry 1a412be89d98        goharbor/harbor-adminserver:v1.7.1           &quot;/harbor/start.sh&quot;       6 hours ago         Up 6 hours (healthy)                                                                                      harbor-adminserver 5a162a3252a8        goharbor/harbor-log:v1.7.1                   &quot;/bin/sh -c /usr/locâ€¦&quot;   6 hours ago         Up 6 hours (healthy)   127.0.0.1:1514-&gt;10514/tcp                                                          harbor-log</code></pre></li><li><p>æˆ–è€…ä½¿ç”¨docker-compose æ¥æŸ¥çœ‹</p><pre><code> [root@localhost harbor]# cd /opt/harbor/ [root@localhost harbor]# docker-compose ps        Name                     Command                  State                                    Ports                               ------------------------------------------------------------------------------------------------------------------------------------- harbor-adminserver   /harbor/start.sh                 Up (healthy)                                                                    harbor-core          /harbor/start.sh                 Up (healthy)                                                                    harbor-db            /entrypoint.sh postgres          Up (healthy)   5432/tcp                                                         harbor-jobservice    /harbor/start.sh                 Up                                                                              harbor-log           /bin/sh -c /usr/local/bin/ ...   Up (healthy)   127.0.0.1:1514-&gt;10514/tcp                                        harbor-portal        nginx -g daemon off;             Up (healthy)   80/tcp                                                           nginx                nginx -g daemon off;             Up (healthy)   0.0.0.0:443-&gt;443/tcp, 0.0.0.0:4443-&gt;4443/tcp, 0.0.0.0:80-&gt;80/tcp redis                docker-entrypoint.sh redis ...   Up             6379/tcp                                                         registry             /entrypoint.sh /etc/regist ...   Up (healthy)   5000/tcp                                                         registryctl          /harbor/start.sh                 Up (healthy)                </code></pre></li><li><p>Harborçš„å¯åŠ¨å’Œåœæ­¢</p><pre><code> å¯åŠ¨Harbor # docker-compose start åœæ­¢Harbor # docker-comose stop é‡å¯Harbor # docker-compose restart</code></pre></li></ol><h1 id="è®¿é—®æµ‹è¯•"><a href="#è®¿é—®æµ‹è¯•" class="headerlink" title="è®¿é—®æµ‹è¯•"></a>è®¿é—®æµ‹è¯•</h1><ol><li><p>é…ç½®hosts</p><pre><code> 10.20.2.152     harbor.lodsve.com </code></pre></li><li><p>è®¿é—®<code>http://harbor.lodsve.com</code>                </p></li><li><p>é»˜è®¤ç”¨æˆ·åå¯†ç ï¼š<code>admin</code>&#x2F;<code>Harbor12345</code></p></li></ol><h1 id="æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½é•œåƒ"><a href="#æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½é•œåƒ" class="headerlink" title="æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½é•œåƒ"></a>æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½é•œåƒ</h1><ol><li><p>ä¿®æ”¹å„docker clienté…ç½®</p><pre><code> [root@localhost harbor]# vim /usr/lib/systemd/system/docker.service ExecStart=/usr/bin/dockerd --insecure-registry harbor.lodsve.com systemctl daemon-reload systemctl  restart docker</code></pre></li><li><p>æˆ–è€…åˆ›å»º<code>/etc/docker/daemon.json</code>æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æŒ‡å®šä»“åº“åœ°å€</p><pre><code> [root@localhost harbor]# sudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39; &#123;   &quot;insecure-registries&quot;: [&quot;harbor.lodsve.com&quot;] &#125; EOF sudo systemctl daemon-reload sudo systemctl restart docker</code></pre></li><li><p>åˆ›å»ºDockerfile</p><pre><code> [root@localhost harbor]# vim Dockerfile  FROM centos:centos7.1.1503 ENV TZ &quot;Asia/Shanghai&quot;</code></pre></li><li><p>åˆ›å»ºé•œåƒ</p><pre><code> [root@localhost harbor]# docker build -t harbor.lodsve.com/library/centos7.1:0.1 .</code></pre></li><li><p>æŠŠé•œåƒpushåˆ°Harbor</p><pre><code> [root@localhost harbor]# docker login harbor.lodsve.com [root@localhost harbor]# docker push harbor.lodsve.com/library/centos7.1:0.1</code></pre></li></ol><h1 id="TODO-Harboré…ç½®TLSè¯ä¹¦"><a href="#TODO-Harboré…ç½®TLSè¯ä¹¦" class="headerlink" title="[TODO]Harboré…ç½®TLSè¯ä¹¦"></a>[TODO]Harboré…ç½®TLSè¯ä¹¦</h1>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> DevOps </tag>
            
            <tag> k8s </tag>
            
            <tag> Harbor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…kubernetes</title>
      <link href="/2019/01/10/yun-wei/an-zhuang-kubernetes/"/>
      <url>/2019/01/10/yun-wei/an-zhuang-kubernetes/</url>
      
        <content type="html"><![CDATA[<ol><li>å®‰è£…å¥½3å°è™šæ‹Ÿæœº<ol><li>10.20.2.194[k8s-master]</li><li>10.20.2.44[k8s-node1]</li><li>10.20.2.37[k8s-node2]<span id="more"></span></li></ol></li><li>Â åŸºæœ¬é…ç½®ï¼Œmasterå’Œå„ä¸ªnodeéƒ½éœ€è¦é…ç½®<ul><li>ä¿®æ”¹hostname<br>  vim &#x2F;etc&#x2F;hostname<br>  hostnamectl set-hostname k8s-master|k8s-node1|k8s-node2|â€¦|k8s-noden</li><li>å…³é—­selinux<br>  vi &#x2F;etc&#x2F;sysconfig&#x2F;selinux<br>  SELINUX&#x3D;disabled</li><li>ç›´æ¥å…³é—­é˜²ç«å¢™<br>  systemctl stop firewalld.service #åœæ­¢firewall<br>  systemctl disable firewalld.service #ç¦æ­¢firewallå¼€æœºå¯åŠ¨</li><li>æ°¸ä¹…å…³é—­swapâ€”é¿å…é‡å¯æœåŠ¡å™¨åkubectlæœåŠ¡æ— æ³•å¯åŠ¨çš„é—®é¢˜<br>  åœ¨&#x2F;etc&#x2F;fstab é‡Œé¢æ‰¾çš„ å¸¦æœ‰swapçš„ä¸€è¡Œï¼ŒæŠŠä»–æ³¨é‡Šæˆ–è€…åˆ é™¤éƒ½å¯ä»¥ï¼Œæ³¨é‡Šå®‰å…¨äº›ã€‚<br>  vim &#x2F;etc&#x2F;fstab<br>  ä¿®æ”¹åä¿å­˜é€€å‡º</li><li>å…³é—­swapå‘½ä»¤<br>  swapoff -a</li><li>å®‰è£…docker-ceä»“åº“<br>  sudo yum-config-manager â€“add-repo <a href="https://download.docker.com/linux/centos/docker-ce.repo">https://download.docker.com/linux/centos/docker-ce.repo</a></li><li>å®‰è£…dockerç›¸å…³ï¼Œå¹¶ä¸”ç‰ˆæœ¬å·ä¸º17.12.0.ceï¼ŒåŒ¹é…ä½¿ç”¨çš„kubernetesÂ <br>  yum install net-tools nfs-utils telnet vim  docker-ce-17.12.0.ce-1.el7.centos -y<br>  systemctl start docker &amp;&amp; systemctl enable docker</li><li>éªŒè¯<br>  [root@k8s-master shell]# docker version<br>  Client:<br>   Version:17.12.0-ce<br>   API version:1.35<br>   Go version:go1.9.2<br>   Git commit:c97c6d6<br>   Built:Wed Dec 27 20:10:14 2017<br>   OS&#x2F;Arch:linux&#x2F;amd64<br><br>  Server:<br>   Engine:<br>    Version:17.12.0-ce<br>    API version:1.35 (minimum version 1.12)<br>    Go version:go1.9.2<br>    Git commit:c97c6d6<br>    Built:Wed Dec 27 20:12:46 2017<br>    OS&#x2F;Arch:linux&#x2F;amd64<br>    Experimental:false</li><li>ä¸Šä¼ æ‰€éœ€è¦çš„kubernetesæ–‡ä»¶ï¼Œåˆ°&#x2F;optä¸‹ï¼Œå¹¶è§£å‹</li></ul></li><li>masterä¸Šæ‰§è¡Œï¼ˆåˆ°ä¸Šä¼ çš„kubernetesæ–‡ä»¶è§£å‹åçš„æ–‡ä»¶å¤¹ç¬¬ä¸€å±‚ä¸­ï¼‰<br> cd shell &amp;&amp; sh init.sh &amp;&amp; sh master.sh<ul><li>ä¸€èˆ¬æ¥è¯´ä¼šæˆåŠŸçš„</li><li>ç»§ç»­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<br>  mkdir -p $HOME&#x2F;.kube<br>  sudo cp -i &#x2F;etc&#x2F;kubernetes&#x2F;admin.conf $HOME&#x2F;.kube&#x2F;config<br>  sudo chown $(id -u):$(id -g) $HOME&#x2F;.kube&#x2F;config</li><li>è®°ä½å®‰è£…å®Œè¾“å‡ºçš„ä¸€æ¡å‘½ä»¤ï¼š<br>  kubeadm join 10.20.2.194:6443 â€“token xie4h6.ariunlewb0qypf5v â€“discovery-token-ca-cert-hash sha256:4e9c3197ccf30d47cdf70afb975b8b7d0d0a77630a26c1fcd673c49c8739e143</li><li>è‡³æ­¤ï¼ŒmasterèŠ‚ç‚¹å®‰è£…å®Œæˆï¼</li></ul></li><li>åœ¨æ¯ä¸€ä¸ªnodeèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼ˆåˆ°ä¸Šä¼ çš„kubernetesæ–‡ä»¶è§£å‹åçš„æ–‡ä»¶å¤¹ç¬¬ä¸€å±‚ä¸­ï¼‰<br> cd shell &amp;&amp; sh init.sh<ul><li>ä¸€èˆ¬æ¥è¯´ä¼šæˆåŠŸçš„</li><li>ç»§ç»­æ‰§è¡Œä¹‹å‰åœ¨masterèŠ‚ç‚¹å¾—åˆ°çš„joinå‘½ä»¤<br>  kubeadm join 10.20.2.194:6443 â€“token xie4h6.ariunlewb0qypf5v â€“discovery-token-ca-cert-hash sha256:4e9c3197ccf30d47cdf70afb975b8b7d0d0a77630a26c1fcd673c49c8739e143</li><li>å®Œäº‹ä¹‹åï¼Œåˆ°masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œkubectl get nodesï¼Œå³å¯çœ‹åˆ°å·²æ³¨å†Œçš„nodeèŠ‚ç‚¹<br>  [root@k8s-master shell]# kubectl get nodes<br>  NAME         STATUS     ROLES     AGE       VERSION<br>  k8s-master   Ready      master    7m        v1.11.3<br>  k8s-node1    Ready      <none>    30s       v1.11.3<br>  k8s-node2    Ready      <none>    4s        v1.11.3</li></ul></li><li>è‡³æ­¤æ•´ä¸ªé›†ç¾¤æ­å»ºå®Œæ¯•</li><li>ä½¿ç”¨httpsè®¿é—®masterçš„32000ç«¯å£ï¼Œä½¿ç”¨ä»¤ç‰Œçš„æ–¹å¼ç™»å½•<br> <a href="https://10.20.2.194:32000/">https://10.20.2.194:32000</a></li><li>ä¸ºdashboardåˆ›å»ºç”¨æˆ·ï¼Œå¹¶ç”Ÿæˆä»¤ç‰ŒÂ <ul><li>åˆ›å»ºdashboardç®¡ç†ç”¨æˆ·<br>  kubectl create serviceaccount dashboard-admin -n kube-system</li><li>ç»‘å®šç”¨æˆ·ä¸ºé›†ç¾¤ç®¡ç†ç”¨æˆ·<br>  kubectl create clusterrolebinding dashboard-cluster-admin â€“clusterrole&#x3D;cluster-admin â€“serviceaccount&#x3D;kube-system:dashboard-admin</li><li>è·å–tocken<br>  kubectl describe secret -n kube-system dashboard-admin</li><li>æ•ˆæœå¦‚ä¸‹ï¼š<br>  [root@k8s-master dashboard]# kubectl create serviceaccount dashboard-admin -n kube-system<br>  serviceaccount&#x2F;dashboard-admin created<br>  [root@k8s-master dashboard]# kubectl create clusterrolebinding dashboard-cluster-admin â€“clusterrole&#x3D;cluster-admin â€“serviceaccount&#x3D;kube-system:dashboard-admin<br>  clusterrolebinding.rbac.authorization.k8s.io&#x2F;dashboard-cluster-admin created<br>  [root@k8s-master dashboard]# kubectl describe secret -n kube-system dashboard-admin-token-l7kpn<br>  Error from server (NotFound): secrets â€œdashboard-admin-token-l7kpnâ€ not found<br>  [root@k8s-master dashboard]# kubectl describe secret -n kube-system dashboard-admin<br>  Name:         dashboard-admin-token-ltcr7<br>  Namespace:    kube-system<br>  Labels:       <none><br>  Annotations:  kubernetes.io&#x2F;service-account.name&#x3D;dashboard-admin<br>                kubernetes.io&#x2F;service-account.uid&#x3D;002635bb-1106-11e9-a723-000c29023ca2<br><br>  Type:  kubernetes.io&#x2F;service-account-token<br><br>  Data<br>  &#x3D;&#x3D;&#x3D;&#x3D;<br>  ca.crt:     1025 bytes<br>  namespace:  11 bytes<br>  token:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4tbHRjcjciLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiMDAyNjM1YmItMTEwNi0xMWU5LWE3MjMtMDAwYzI5MDIzY2EyIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRhc2hib2FyZC1hZG1pbiJ9.FzeJOWlH5ugUDqPUErLWfbW_vqq-3wuBeY77v74Bm6Wl4a1Fv_2pMJoB7mQomVfvXegmg6_ISvrrm0mJ4f2DZC8SSUTMDEDLhgnrLAdHeuLJ82ZX04Oh7Pu9uFEVhHJc2rHBWX6tqyQ-rVLyGJsxM7R7L0FntXZ25uUWujwktegRzRXcMG30tnopsEQTx1fzb_47IygXRbGoiy2p1mGpOHlElqoGRvy6le5eLl38CPpuxQJbRUWFbpLsQV1Umcy4WPy1aifD2_q-l81eSRi4D0oxM1yuPksEq3ZdaYN4SYao1zdx_8D_CQwzESZ9-w4njGVbT5lkQbL4xkN2X4pP7g</li><li>ä½¿ç”¨ä¸Šé¢çš„tokenç™»å½•å³å¯</li></ul><p>Â </p></li><li>å¿˜è®°nodeèŠ‚ç‚¹joinåˆ°masterèŠ‚ç‚¹çš„å‘½ä»¤æ€ä¹ˆåŠï¼Ÿ<ul><li>åŸºæœ¬å‘½ä»¤<br>  kubeadm join â€“token <token> <master-ip>:<master-port> â€“discovery-token-ca-cert-hash sha256:<hash><ol><li>&lt;master-ip&gt;:&lt;master-port&gt; ï¼Œæœ¬æ–‡è¿™é‡Œå¯¹åº”å¾—æ˜¯10.20.2.194:6443</li><li>tokenï¼Œä¸€èˆ¬tokenä¸¤å¤©å°±è¿‡æœŸäº†ï¼Œå¦‚æœè¿‡æœŸäº†ä½ éœ€è¦é‡æ–°åˆ›å»ºï¼ˆæŸ¥çœ‹tokenå‘½ä»¤æ˜¯kubeadm token listï¼Œåˆ›å»ºtokenå‘½ä»¤æ˜¯kubeadm token create)<br> [root@k8s-master ~]# kubeadm token list<br> TOKEN                     TTL       EXPIRES                     USAGES                   DESCRIPTION   EXTRA GROUPS<br> xie4h6.ariunlewb0qypf5v   23h       2019-01-07T00:05:01+08:00   authentication,signing   <none>        system:bootstrappers:kubeadm:default-node-token<br> [root@k8s-master ~]# kubeadm token create<br> 5w6qwh.8n0ektfrjdct3ib4</li><li>â€“discovery-token-ca-cert-hashï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥å¾—åˆ°<br> [root@k8s-master ~]# openssl x509 -pubkey -in &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.crt | openssl rsa -pubin -outform der 2&gt;&#x2F;dev&#x2F;null | openssl dgst -sha256 -hex | sed â€˜s&#x2F;^.* &#x2F;&#x2F;â€˜<br> 4e9c3197ccf30d47cdf70afb975b8b7d0d0a77630a26c1fcd673c49c8739e143</li><li>è¿™æ ·å°±å¯ä»¥ç»„æˆjoinå‘½ä»¤äº†</li></ol></li></ul></li></ol><p>Â </p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> DevOps </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡Travisæ¥è‡ªåŠ¨æ„å»ºåšå®¢</title>
      <link href="/2018/12/13/gong-ju/build-blog-on-travis/"/>
      <url>/2018/12/13/gong-ju/build-blog-on-travis/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡åŸºäºç†Ÿç»ƒæ­å»ºåŸºäºgithub+hexoæ­å»ºåšå®¢çš„åŸºç¡€ä¸Šï¼Œå¹¶ä¸”å¯¹githubç®€å•æ“ä½œï¼Œå¹¶ä¸”ä¼šä½¿ç”¨é€šè¿‡sshçš„æ–¹å¼æäº¤ä»£ç åˆ°githubä¸Šã€‚<br>PSï¼šå¦‚æœä½ åªæœ‰Windowsç”µè„‘ï¼Œé‚£è¯·æ”¾å¼ƒï¼æˆ–è€…é€‰æ‹©ä½¿ç”¨Linuxã€macOSç³»ç»Ÿ!</p></blockquote><span id="more"></span><h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><ol><li>é€šè¿‡githubè´¦å·ç™»å½•Travis</li><li>å¹¶ä¸”å¯ç”¨å·²ç»åœ¨githubä¸Šåˆ›å»ºå¥½çš„åšå®¢é¡¹ç›®ï¼Œå¦‚ä¸‹å›¾<br><img src="/imgs/build_blog_by_travis/1.png"></li><li>ç‚¹å‡»å³ä¾§çš„<code>Setting</code>ï¼ŒæŒ‰ä¸‹å›¾é…ç½®ï¼ˆçº¢æ¡†å¤„ï¼Œæš‚æ—¶å¯ä»¥ä¸ç®¡ï¼‰<br><img src="/imgs/build_blog_by_travis/2.png"></li></ol><h1 id="ä¿®æ”¹åŸæ¥çš„åšå®¢é¡¹ç›®"><a href="#ä¿®æ”¹åŸæ¥çš„åšå®¢é¡¹ç›®" class="headerlink" title="ä¿®æ”¹åŸæ¥çš„åšå®¢é¡¹ç›®"></a>ä¿®æ”¹åŸæ¥çš„åšå®¢é¡¹ç›®</h1><ol><li>åœ¨æ ¹ç›®å½•å¢åŠ <code>.travis.yml</code>æ–‡ä»¶å’Œ<code>.travis</code>æ–‡ä»¶å¤¹</li><li>ä¿®æ”¹<code>.travis.yml</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ <figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">language</span><span class="punctuation">:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attribute">node_js</span><span class="punctuation">:</span> <span class="string">stable</span></span><br><span class="line"><span class="attribute">install</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm install</span></span><br><span class="line"><span class="attribute">script</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo d -g</span></span><br></pre></td></tr></table></figure></li><li>æˆ‘ä»¬ç”¨<code>hexo deploy</code>å»å‘å¸ƒåšå®¢ï¼Œä¼šå‘ç°Travisåå°æç¤ºè¯´æ²¡æœ‰æƒé™</li><li>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç”¨<code>git@github.com:[Your name]/[Your project].git</code>çš„æ–¹å¼å»æ‹‰å–ä»£ç çš„ï¼Œå¹¶ä¸”åœ¨hexoçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯è¿™æ ·é…ç½®ä½¿ç”¨sshæ–¹å¼æ‹‰å–ã€æ¨é€ä»£ç çš„</li><li>è€ŒTravisç¯å¢ƒä¸­æ²¡æœ‰å¯¹åº”çš„ssh keyï¼Œæ‰€ä»¥ä¸èƒ½æ¨é€ä»£ç ã€‚</li></ol><h1 id="ä¸ºTravisåˆ›å»ºSSH"><a href="#ä¸ºTravisåˆ›å»ºSSH" class="headerlink" title="ä¸ºTravisåˆ›å»ºSSH"></a>ä¸ºTravisåˆ›å»ºSSH</h1><ol><li>é¦–å…ˆä½¿ç”¨ä½ å·²ç»ç”Ÿæˆå¥½çš„ssh keyç§é’¥&#x2F;å…¬é’¥æ–‡ä»¶</li><li>å°†å…¬é’¥ä¸Šä¼ åˆ°githubä¸Š</li><li>å°†ç§˜é’¥å¤åˆ¶åˆ°åšå®¢ç›®å½•ä¸‹ï¼ˆæœ‰.gitæ–‡ä»¶å¤¹çš„é‚£ä¸€å±‚ï¼‰ï¼Œå¹¶æ”¹åä¸º<code>id_rsa_github</code>[éšæ„]</li><li>å®‰è£…Travis Client</li><li>é¦–å…ˆç¡®ä¿å·²ç»å®‰è£…äº†Rubyï¼Œå¹¶ä¸”å¤§äºç­‰äº2.0.0ç‰ˆæœ¬ <figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-attr">[sunhao@sunhaode-MacBook-Pro blog]</span>$ ruby -v</span><br><span class="line">ruby <span class="number">2.3</span><span class="selector-class">.7p456</span> (<span class="number">2018</span>-<span class="number">03</span>-<span class="number">28</span> revision <span class="number">63024</span>) <span class="selector-attr">[universal.x86_64-darwin18]</span></span><br></pre></td></tr></table></figure></li><li>å®‰è£…Travis Client <figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæ˜¯Macæˆ–è€…Linuxï¼Œéœ€è¦åŠ sudo</span></span><br><span class="line">gem <span class="keyword">install</span> travis</span><br></pre></td></tr></table></figure></li><li>ç®€ç§°æ˜¯å¦æ­£ç¡®å®‰è£… <figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">[sunhao<span class="variable">@sunhaode</span>-MacBook-Pro blog]<span class="variable">$ </span>travis version</span><br><span class="line"><span class="number">1.8</span>.<span class="number">9</span></span><br></pre></td></tr></table></figure></li><li>å¼€å§‹åŠ å¯†SSH key <figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># å¦‚æœæ˜¯githubé¡¹ç›®ï¼Œå…ˆç”¨travis loginç™»å½•ï¼Œå¦‚å›¾</span></span><br></pre></td></tr></table></figure><img src="/imgs/build_blog_by_travis/3.png"> <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># é€šè¿‡å‘½ä»¤travis encrypt-<span class="keyword">file</span> id_rsa_github -<span class="built_in">add</span>åŠ å¯†ç§é’¥</span><br><span class="line">[sunhao@sunhaode-MacBook-Pro blog_hexo]$ travis encrypt-<span class="keyword">file</span> id_rsa_github -<span class="built_in">add</span></span><br><span class="line">encrypting id_rsa_github <span class="keyword">for</span> sunhao-java/blog_hexo</span><br><span class="line">storing result <span class="keyword">as</span> id_rsa_github.enc</span><br><span class="line">storing secure env variables <span class="keyword">for</span> decryption</span><br><span class="line"></span><br><span class="line">Make sure <span class="keyword">to</span> <span class="built_in">add</span> id_rsa_github.enc <span class="keyword">to</span> the git repository.</span><br><span class="line">Make sure not <span class="keyword">to</span> <span class="built_in">add</span> id_rsa_github <span class="keyword">to</span> the git repository.</span><br><span class="line">Commit <span class="keyword">all</span> <span class="keyword">changes</span> <span class="keyword">to</span> your .travis.yml.</span><br></pre></td></tr></table></figure></li><li>è¿™ä¸ªæ—¶å€™ï¼ŒTravisä¼šè‡ªåŠ¨æŠŠä¸€äº›å‚æ•°ä¸Šä¼ åˆ°Travisçš„ç½‘ç«™ä¸Šäº†ï¼Œå°±æ˜¯ç¬¬äºŒå¼ å›¾å±•ç¤ºçš„<code>æš‚æ—¶ä¸éœ€è¦å…³æ³¨çš„çº¢æ¡†å†…å®¹</code>ï¼Œè®°ä½å‰é¢çš„keyï¼Œä¸‹æ–‡éœ€è¦ç”¨åˆ°</li><li>ç„¶åå¤åˆ¶ç”Ÿæˆçš„<code>enc</code>æ–‡ä»¶åˆ°<code>.travis</code>æ–‡ä»¶å¤¹ä¸‹</li><li>å¹¶ä¸”åˆ é™¤åŸæ¥çš„<code>id_rsa_github</code>æ–‡ä»¶</li></ol><h1 id="ä¿®æ”¹-travis-yml"><a href="#ä¿®æ”¹-travis-yml" class="headerlink" title="ä¿®æ”¹.travis.yml"></a>ä¿®æ”¹<code>.travis.yml</code></h1><ol><li>ä¿®æ”¹å‰é¢åˆ›å»ºçš„<code>.travis.yml</code>æ–‡ä»¶</li><li>è¿™ä¸ªæ–‡ä»¶é‡Œæœ‰å¯èƒ½æœ‰ä¸€æ®µè¯ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼Œå¯ä»¥åˆ æ‰ï¼Œæ˜¯å› ä¸ºå‰é¢ä½¿ç”¨äº†â€“addå‚æ•° <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl aes-256-cbc -K <span class="variable">$encrypted_65cc9ea56965_key</span> -iv <span class="variable">$encrypted_65cc9ea56965_iv</span></span><br><span class="line">-<span class="keyword">in</span> .travis/id_rsa_github.enc -out ~/.ssh/id_rsa_github -d</span><br></pre></td></tr></table></figure></li><li>åœ¨è¿™ä¸ªæ–‡ä»¶çš„æœ«å°¾åŠ ä¸Šå¦‚ä¸‹çš„å‘½ä»¤ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">before_install:</span><br><span class="line">  - openssl aes-256-cbc -K <span class="variable">$encrypted_65cc9ea56965_key</span> -iv <span class="variable">$encrypted_65cc9ea56965_iv</span></span><br><span class="line">  -<span class="keyword">in</span> .travis/id_rsa_github.enc -out ~/.ssh/id_rsa_github -d</span><br><span class="line">  - <span class="built_in">chmod</span> 600 ~/.ssh/id_rsa_github</span><br><span class="line">  - <span class="built_in">eval</span> $(ssh-agent)</span><br><span class="line">  - ssh-add ~/.ssh/id_rsa_github</span><br><span class="line">  - <span class="built_in">cp</span> .travis/ssh_config ~/.ssh/config</span><br><span class="line">  - git config --global user.name \&#x27;Your Name\&#x27;</span><br><span class="line">  - git config --global user.email \&#x27;Your Email\&#x27;</span><br></pre></td></tr></table></figure></li><li>é™„ä¸Šä¸Šé¢çš„<code>.travis/ssh_config</code>æ–‡ä»¶å†…å®¹ï¼š <figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">    <span class="keyword">User</span> <span class="title">git</span></span><br><span class="line">    StrictHostKeyChecking no</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line">    IdentitiesOnly yes</span><br></pre></td></tr></table></figure></li></ol><h1 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h1><ol><li>è‡³æ­¤ï¼Œé…ç½®ä»¥åŠå…¨éƒ¨OKäº†</li><li>å¯ä»¥å†™ä¸€ç¯‡åšå®¢ï¼Œå¹¶pushåˆ°githubä¸Š</li><li>ç„¶ååˆ°Travisçš„æ§åˆ¶å°è§‚å¯Ÿ,ä¸€æ¬¡æ„å»ºå°±è¢«è§¦å‘äº†</li><li>ç¨ç­‰ç‰‡åˆ»å°±å¯ä»¥åœ¨åšå®¢ä¸Šçœ‹åˆ°ä½ åˆšåˆšå†™çš„æ–‡ç« äº†</li></ol><h1 id="Tksï¼Œå®‰åˆ©ä¸€ä¸‹æˆ‘å†™çš„ä¸œè¥¿"><a href="#Tksï¼Œå®‰åˆ©ä¸€ä¸‹æˆ‘å†™çš„ä¸œè¥¿" class="headerlink" title="Tksï¼Œå®‰åˆ©ä¸€ä¸‹æˆ‘å†™çš„ä¸œè¥¿"></a>Tksï¼Œå®‰åˆ©ä¸€ä¸‹æˆ‘å†™çš„ä¸œè¥¿</h1><ul><li>åšå®¢ï¼š<a href="https://www.crazy-coder.cn/">https://www.crazy-coder.cn/</a></li><li>å¼€æºçš„ä»£ç ï¼š<a href="https://github.com/lodsve/lodsve-framework">https://github.com/lodsve/lodsve-framework</a></li><li>æ¬¢è¿æIssueå’ŒPR</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç«™åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-cloudå„ç»„ä»¶</title>
      <link href="/2018/09/04/hou-duan/spring-cloud-components/"/>
      <url>/2018/09/04/hou-duan/spring-cloud-components/</url>
      
        <content type="html"><![CDATA[<h1 id="spring-cloudå„ç»„ä»¶"><a href="#spring-cloudå„ç»„ä»¶" class="headerlink" title="spring-cloudå„ç»„ä»¶"></a>spring-cloudå„ç»„ä»¶</h1><span id="more"></span><ol><li><code>Ribbon</code>ï¼Œå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œç‰¹æ€§æœ‰åŒºåŸŸäº²å’Œã€é‡è¯•æœºåˆ¶ã€‚</li><li><code>Eureka</code>ï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œç‰¹æ€§æœ‰å¤±æ•ˆå‰”é™¤ã€æœåŠ¡ä¿æŠ¤ã€‚</li><li><code>Hystrix</code>ï¼Œå®¢æˆ·ç«¯å®¹é”™ä¿æŠ¤ï¼Œç‰¹æ€§æœ‰æœåŠ¡é™çº§ã€æœåŠ¡ç†”æ–­ã€è¯·æ±‚ç¼“å­˜ã€è¯·æ±‚åˆå¹¶ã€ä¾èµ–éš”ç¦»ã€‚</li><li><code>Dashboard</code>ï¼Œ<code>Hystrix</code>ä»ªè¡¨ç›˜ï¼Œç›‘æ§é›†ç¾¤æ¨¡å¼å’Œå•ç‚¹æ¨¡å¼ï¼Œå…¶ä¸­é›†ç¾¤æ¨¡å¼éœ€è¦æ”¶é›†å™¨<code>Turbine</code>é…åˆã€‚</li><li><code>Feign</code>ï¼Œå£°æ˜å¼æœåŠ¡è°ƒç”¨ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯<code>Ribbon+Hystrix</code></li><li><code>Zuul</code>ï¼ŒAPIæœåŠ¡ç½‘å…³ï¼ŒåŠŸèƒ½æœ‰è·¯ç”±åˆ†å‘å’Œè¿‡æ»¤</li><li><code>Config</code>ï¼Œåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Œæ”¯æŒæœ¬åœ°ä»“åº“ã€SVNã€Gitã€JaråŒ…å†…é…ç½®ç­‰æ¨¡å¼ï¼Œ</li><li><code>Bus</code>ï¼Œæ¶ˆæ¯æ€»çº¿ï¼Œé…åˆConfigä»“åº“ä¿®æ”¹çš„ä¸€ç§Streamå®ç°ï¼Œ</li><li><code>Stream</code>ï¼Œæ¶ˆæ¯é©±åŠ¨ï¼Œæœ‰Sinkã€Sourceã€Processorä¸‰ç§é€šé“ï¼Œç‰¹æ€§æœ‰è®¢é˜…å‘å¸ƒã€æ¶ˆè´¹ç»„ã€æ¶ˆæ¯åˆ†åŒºã€‚</li><li><code>Sleuth</code>ï¼Œåˆ†å¸ƒå¼æœåŠ¡è¿½è¸ªï¼Œéœ€è¦ææ¸…æ¥šTraceIDå’ŒSpanIDä»¥åŠæŠ½æ ·ï¼Œå¦‚ä½•ä¸ELKæ•´åˆã€‚</li></ol><p>ç‹¬æŒ‘å¤§æ¢ï¼Œç‹¬è‡ªå¯åŠ¨ä¸éœ€è¦ä¾èµ–å…¶å®ƒç»„ä»¶ã€‚</p><blockquote><ol><li><code>Eureka</code></li><li><code>Dashboard</code></li><li><code>Zuul</code></li><li><code>Config</code></li></ol></blockquote><h1 id="å«ä¹‰ã€ä¾èµ–"><a href="#å«ä¹‰ã€ä¾èµ–" class="headerlink" title="å«ä¹‰ã€ä¾èµ–"></a>å«ä¹‰ã€ä¾èµ–</h1><ol><li><code>Eureka</code>å’Œ<code>Ribbon</code>ï¼Œæ˜¯æœ€åŸºç¡€çš„ç»„ä»¶ï¼Œä¸€ä¸ªæ³¨å†ŒæœåŠ¡ï¼Œä¸€ä¸ªæ¶ˆè´¹æœåŠ¡ã€‚</li><li><code>Hystrix</code>ä¸ºäº†ä¼˜åŒ–<code>Ribbon</code>ã€é˜²æ­¢æ•´ä¸ªå¾®æœåŠ¡æ¶æ„å› ä¸ºæŸä¸ªæœåŠ¡èŠ‚ç‚¹çš„é—®é¢˜å¯¼è‡´å´©æºƒï¼Œæ˜¯ä¸ª<strong>ä¿é™©ä¸</strong>çš„ä½œç”¨ã€‚</li><li><code>Dashboard</code>ç»™<code>Hystrix</code>ç»Ÿè®¡å’Œå±•ç¤ºç”¨çš„ï¼Œè€Œä¸”ç›‘æ§æœåŠ¡èŠ‚ç‚¹çš„æ•´ä½“å‹åŠ›å’Œå¥åº·æƒ…å†µã€‚</li><li><code>Turbine</code>æ˜¯é›†ç¾¤æ”¶é›†å™¨ï¼ŒæœåŠ¡äº<code>Dashboard</code>çš„ã€‚</li><li><code>Feign</code>æ˜¯æ–¹ä¾¿æˆ‘ä»¬ç¨‹åºå‘˜äº›æ›´ä¼˜ç¾çš„ä»£ç çš„ã€‚</li><li><code>Zuul</code>æ˜¯åŠ åœ¨æ•´ä¸ªå¾®æœåŠ¡æœ€å‰æ²¿çš„é˜²ç«å¢™å’Œä»£ç†å™¨ï¼Œéšè—å¾®æœåŠ¡ç»“ç‚¹IPç«¯å£ä¿¡æ¯ï¼ŒåŠ å¼ºå®‰å…¨ä¿æŠ¤çš„ã€‚</li><li><code>Config</code>æ˜¯ä¸ºäº†è§£å†³æ‰€æœ‰å¾®æœåŠ¡å„è‡ªç»´æŠ¤å„è‡ªçš„é…ç½®ï¼Œè®¾ç½®ä¸€ä¸ªåŒæ„çš„é…ç½®ä¸­å¿ƒï¼Œæ–¹ä¾¿ä¿®æ”¹é…ç½®çš„ã€‚</li><li><code>Bus</code>æ˜¯å› ä¸º<code>Config</code>ä¿®æ”¹å®Œé…ç½®åå„ä¸ªç»“ç‚¹éƒ½è¦refreshæ‰èƒ½ç”Ÿæ•ˆå®åœ¨å¤ªéº»çƒ¦ï¼Œæ‰€ä»¥äº¤ç»™busæ¥é€šçŸ¥æœåŠ¡èŠ‚ç‚¹åˆ·æ–°é…ç½®çš„ã€‚</li><li><code>Stream</code>æ˜¯ä¸ºäº†ç®€åŒ–ç ”å‘äººå‘˜å¯¹MQä½¿ç”¨çš„å¤æ‚åº¦ï¼Œå¼±åŒ–MQçš„å·®å¼‚æ€§ï¼Œè¾¾åˆ°ç¨‹åºå’ŒMQæ¾è€¦åˆã€‚</li><li><code>Sleuth</code>æ˜¯å› ä¸ºå•æ¬¡è¯·æ±‚åœ¨å¾®æœåŠ¡èŠ‚ç‚¹ä¸­è·³è½¬æ— æ³•è¿½æº¯ï¼Œè§£å†³ä»»åŠ¡é“¾æ—¥å¿—è¿½è¸ªé—®é¢˜çš„ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> spring-cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>keepalived + nginx å®ç°é«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆ</title>
      <link href="/2017/06/05/zhong-jian-jian/nginx-keepalived-cluster/"/>
      <url>/2017/06/05/zhong-jian-jian/nginx-keepalived-cluster/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>ä¸¤å°è™šæ‹Ÿæœºå¦‚ï¼š<ul><li>10.211.55.8</li><li>10.211.55.10</li></ul></li><li>å‡†å¤‡å®‰è£…æ–‡ä»¶<ul><li>nginx-1.13.1.tar.gz</li><li>pcre-8.36.zip</li><li>keepalived-1.2.22.tar.gz</li></ul></li></ol><span id="more"></span><h2 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…<code>nginx</code></h2><ol><li><p>å‚è€ƒ<a href="http://www.crazy-coder.cn/2016/03/15/linux_ubuntu_install_nginx/">å®‰è£…Linux</a>ä¸€æ–‡ï¼Œåœ¨ä¸¤å°æœåŠ¡å™¨å®‰è£…nginx</p><p> <code>10.211.55.8</code> ç§°ä¸º <code>nginx1</code><br/><br> <code>10.211.55.10</code> ç§°ä¸º <code>nginx2</code></p></li></ol><h2 id="å®‰è£…keepalived"><a href="#å®‰è£…keepalived" class="headerlink" title="å®‰è£…keepalived"></a>å®‰è£…<code>keepalived</code></h2><ol><li><p>è§£å‹æ–‡ä»¶</p><pre><code> cd /opt/software tar -zxvf keepalived-1.2.22.tar.gz cd keepalived-1.2.22</code></pre></li><li><p>å®‰è£…</p><pre><code> ./configure --prefix=/opt/keepalived make &amp;&amp; make install</code></pre></li><li><p>å¤„ç†é…ç½®æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶</p><pre><code> cp /opt/keepalived/etc/rc.d/init.d/keepalived /etc/init.d/ cp /opt/keepalived/etc/sysconfig/keepalived /etc/sysconfig/ mkdir /etc/keepalived cp /opt/keepalived/etc/keepalived/keepalived.conf /etc/keepalived ln -s /opt/keepalived/sbin/keepalived /usr/sbin/</code></pre></li><li><p>å¯åŠ¨æœåŠ¡</p><pre><code> /etc/init.d/keepalived start </code></pre></li><li><p>æŒ‰ç…§ç›¸åŒçš„æ­¥éª¤åœ¨å¦ä¸€å°æœåŠ¡å™¨å®‰è£…<code>keepalived</code></p></li></ol><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p><code>vim /etc/keepalived/keepalived.conf</code></p><pre><code>! Configuration File for keepalivedglobal_defs &#123;   # keepalived è‡ªå¸¦çš„é‚®ä»¶æé†’éœ€è¦å¼€å¯ sendmail æœåŠ¡ã€‚å»ºè®®ç”¨ç‹¬ç«‹çš„ç›‘æ§æˆ–ç¬¬ä¸‰æ–¹ SMTP,ä¹Ÿå¯é…ç½®é‚®ä»¶å‘é€   router_id 10.211.55.8&#125;vrrp_script chk_nginx &#123;    # è¿è¡Œè„šæœ¬ï¼Œè„šæœ¬å†…å®¹ä¸‹é¢æœ‰ï¼Œå°±æ˜¯èµ·åˆ°ä¸€ä¸ªnginxå®•æœºä»¥åï¼Œè‡ªåŠ¨å¼€å¯æœåŠ¡    script &quot;/opt/shell/nginx_check.sh&quot;    # æ£€æµ‹æ—¶é—´é—´éš”    interval 2    # å¦‚æœæ¡ä»¶æˆç«‹çš„è¯ï¼Œåˆ™æƒé‡ -20    weight -20&#125;# å®šä¹‰è™šæ‹Ÿè·¯ç”±ï¼ŒVI_1 ä¸ºè™šæ‹Ÿè·¯ç”±çš„æ ‡ç¤ºç¬¦ï¼Œè‡ªå·±å®šä¹‰åç§°vrrp_instance VI_1 &#123;    # æ¥å†³å®šä¸»ä»(ä»ï¼šBACKUP)    state MASTER    # ç»‘å®šè™šæ‹Ÿ IP çš„ç½‘ç»œæ¥å£ï¼Œæ ¹æ®è‡ªå·±çš„æœºå™¨å¡«å†™    interface eth0    # è™šæ‹Ÿè·¯ç”±çš„ ID å·ï¼Œ ä¸¤ä¸ªèŠ‚ç‚¹è®¾ç½®å¿…é¡»ä¸€æ ·    virtual_router_id 121    # å¡«å†™æœ¬æœºip    mcast_src_ip 10.211.55.10    # èŠ‚ç‚¹ä¼˜å…ˆçº§,ä¸»èŠ‚ç‚¹æ¯”ä»èŠ‚ç‚¹ä¼˜å…ˆçº§é«˜    priority 100    # ä¼˜å…ˆçº§é«˜çš„è®¾ç½® nopreempt è§£å†³å¼‚å¸¸æ¢å¤åå†æ¬¡æŠ¢å çš„é—®é¢˜    nopreempt    # ç»„æ’­ä¿¡æ¯å‘é€é—´éš”ï¼Œä¸¤ä¸ªèŠ‚ç‚¹è®¾ç½®å¿…é¡»ä¸€æ ·ï¼Œé»˜è®¤ 1s    advert_int 1    authentication &#123;        auth_type PASS        auth_pass 1111    &#125;    # å°† track_script å—åŠ å…¥ instance é…ç½®å—    track_script &#123;        #æ‰§è¡Œ Nginx ç›‘æ§çš„æœåŠ¡        chk_nginx    &#125;    virtual_ipaddress &#123;        # è™šæ‹Ÿip,ä¹Ÿå°±æ˜¯è§£å†³å†™æ­»ç¨‹åºçš„ipæ€ä¹ˆèƒ½åˆ‡æ¢çš„ip,ä¹Ÿå¯æ‰©å±•ï¼Œç”¨é€”å¹¿æ³›ã€‚å¯é…ç½®å¤šä¸ªã€‚        10.211.55.100    &#125;&#125;</code></pre><p>ä»¥ä¸Šé…ç½®ä¸ºä¸»èŠ‚ç‚¹é…ç½®ï¼Œä»èŠ‚ç‚¹ç±»ä¼¼ï¼Œæœ‰åŒºåˆ«çš„å·²ç»æ ‡æ˜ã€‚ä¸‹é¢æ˜¯ç›‘æ§æœåŠ¡è„šæœ¬å†…å®¹</p><pre><code>#!/bin/bashA=`ps -C nginx --no-header |wc -l`if [ $A -eq 0 ];then    /opt/nginx/sbin/nginx    sleep 2    if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then        killall keepalived    fifi</code></pre><p>å®šä¹‰å˜é‡ï¼Œæ­¤å˜é‡ä¸ºæ£€æŸ¥nginxè¿›ç¨‹è„šæœ¬ï¼Œå¦‚æœè¿›ç¨‹ä¸º0ï¼Œåˆ™å¯åŠ¨nginxæœåŠ¡ï¼Œå†æ¬¡æ£€æŸ¥nginxæœåŠ¡ï¼Œå¦‚æœä»æ²¡å¯åŠ¨ ï¼Œæ€æ‰æ‰€æœ‰keepalivedçš„è¿›ç¨‹ã€‚</p><h2 id="æµ‹è¯•é«˜å¯ç”¨"><a href="#æµ‹è¯•é«˜å¯ç”¨" class="headerlink" title="æµ‹è¯•é«˜å¯ç”¨"></a>æµ‹è¯•é«˜å¯ç”¨</h2><ol><li><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥è™šæ‹Ÿip <code>10.211.55.100</code></p></li><li><p>æ˜¾ç¤ºçš„æ˜¯<code>nginx1</code>çš„é¡µé¢</p></li><li><p>æ­¤æ—¶å¯ä»¥åœæ‰ä¸€å°nginxæœåŠ¡å™¨</p><pre><code> /opt/nginx/sbin/nginx -s stop</code></pre></li><li><p>è¿™æ—¶å€™ï¼Œå•ç‹¬è®¿é—®è¿™å°æœåŠ¡å™¨ï¼Œå‘ç°è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>keepalived</code>ç›‘æ§åˆ°<code>nginx</code>æœåŠ¡downæ‰äº†ï¼Œç„¶åè‡ªåŠ¨é‡å¯è¿™å°æœºå™¨äº†ã€‚</p></li><li><p>è¿™æ—¶å†åœæ‰ä¸€å°<code>keepalived</code>æœåŠ¡å™¨</p><pre><code> /etc/init.d/keepalived stop</code></pre></li><li><p>åˆ·æ–°æµè§ˆå™¨ï¼Œæ˜¾ç¤ºçš„å°†æ˜¯å¦å¤–ä¸€å°<code>nginx</code></p></li><li><p>è¿™æ—¶å°±å¯ä»¥è¯æ˜å·²ç»å®ç°**<code>é«˜å¯ç”¨</code>**</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FastDFSä¹‹é›†ç¾¤éƒ¨ç½²</title>
      <link href="/2017/06/05/zhong-jian-jian/install-fastdfs-cluster/"/>
      <url>/2017/06/05/zhong-jian-jian/install-fastdfs-cluster/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ol><li>trackerï¼š192.168.20.116</li><li>storageï¼š<ul><li>group1ï¼š192.168.20.117</li><li>group2ï¼š192.168.20.118</li></ul></li><li>å‡†å¤‡å¥½å®‰è£…æ–‡ä»¶<ul><li>fastdfs-5.05.zip</li><li>fastdfs-nginx-module.zip</li><li>libfastcommon-1.0.7.zip</li><li>nginx-1.8.1.tar.gz</li><li>ngx_cache_purge-2.3.tar.gz</li><li>pcre-8.36.zip</li><li>zlib-1.2.8.tar.gz</li></ul></li></ol><span id="more"></span><h2 id="å®‰è£…tracker"><a href="#å®‰è£…tracker" class="headerlink" title="å®‰è£…tracker"></a><span id="install_tracker">å®‰è£…tracker</span></h2><ol><li><p>å®‰è£…ä¾èµ–libfastcommon</p><pre><code> unzip libfastcommon-1.0.7.zip cd libfastcommon-1.0.7 ./make.sh  ./make.sh  install</code></pre></li><li><p>å®‰è£…FastDFS</p><pre><code> unzip fastdfs-5.05.zip cd fastdfs-5.05 ./make.sh  ./make.sh install </code></pre><p> é»˜è®¤å®‰è£…ç›®å½•ï¼š<code>/usr/bin</code></p><p> é…ç½®æ–‡ä»¶åœ¨ï¼š<code>/etc/fdfs</code>ï¼Œéœ€è¦é‡å‘½åå§<code>.sample</code>å»æ‰</p></li><li><p>é…ç½®</p><p> ç¼–è¾‘é…ç½®æ–‡ä»¶ç›®å½•ä¸‹çš„<code>tracker.conf</code>ï¼Œä¸€èˆ¬åªéœ€æ”¹åŠ¨ä»¥ä¸‹å‡ ä¸ªå‚æ•°å³å¯ï¼š</p><pre><code> disabled=false            #å¯ç”¨é…ç½®æ–‡ä»¶ port=22122                #è®¾ç½®trackerçš„ç«¯å£å· base_path=/opt/fastdfs   #è®¾ç½®trackerçš„æ•°æ®æ–‡ä»¶å’Œæ—¥å¿—ç›®å½•ï¼ˆéœ€é¢„å…ˆåˆ›å»ºï¼‰ http.server_port=8080     #è®¾ç½®httpç«¯å£å·</code></pre></li><li><p>åˆ›å»ºæ•°æ®å­˜å‚¨æ–‡ä»¶å¤¹ </p><pre><code> mkdir /opt/fastdfs</code></pre></li><li><p>å¯åŠ¨</p><pre><code> fdfs_trackerd /etc/fdfs/tracker.conf</code></pre></li><li><p>å®‰è£…trackerä»£ç†nginx</p><p> åœ¨trackerä¸Šå®‰è£…çš„nginxä¸»è¦ä¸ºäº†æä¾›httpè®¿é—®çš„åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡ä»¥åŠç¼“å­˜æœåŠ¡ã€‚</p><ol><li><p>å®‰è£…nginxï¼ˆå…·ä½“å‚è€ƒ<a href="http://www.crazy-coder.cn/2016/03/15/linux_ubuntu_install_nginx/">å®‰è£…Nginx</a>ï¼‰</p><pre><code> tar -zxvf nginx-1.8.1.tar.gz  tar -zxvf ngx_cache_purge-2.3.tar.gz  cd nginx-1.8.1 ./configure --prefix=/opt/nginx --add-module=/opt/software/ngx_cache_purge-2.3 --without-http_gzip_module make  make install </code></pre><p> å¦‚æœæç¤ºé”™è¯¯ï¼Œå¯èƒ½ç¼ºå°‘ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œéœ€å…ˆå®‰è£…ä¾èµ–åŒ…ï¼Œå†æ¬¡è¿è¡Œ.&#x2F;configureã€‚nginxä»¥åŠnginx cache purgeæ’ä»¶æ¨¡å—å®‰è£…å®Œæˆï¼Œå®‰è£…ç›®å½•&#x2F;opt&#x2F;nginxã€‚</p></li><li><p>é…ç½®nginx</p><pre><code> #user  nobody; worker_processes  1;  error_log  logs/error.log  info;  events &#123;     worker_connections  1024; &#125;  http &#123;     include       mime.types;     default_type  application/octet-stream;      #è®¾ç½®ç¼“å­˜å‚æ•°     server_names_hash_bucket_size 128;     client_header_buffer_size 32k;     large_client_header_buffers 4 32k;     client_max_body_size 300m;     sendfile        on;     tcp_nopush     on;     proxy_redirect off;     proxy_set_header Host $http_host;     proxy_set_header X-Real-IP $remote_addr;     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;     proxy_connect_timeout 90;     proxy_send_timeout 90;     proxy_read_timeout 90;     proxy_buffer_size 16k;     proxy_buffers 4 64k;     proxy_busy_buffers_size 128k;     proxy_temp_file_write_size 128k;     # è®¾ç½®ç¼“å­˜å­˜å‚¨è·¯å¾„ã€å­˜å‚¨æ–¹å¼ã€åˆ†é…å†…å­˜å¤§å°ã€ç£ç›˜æœ€å¤§ç©ºé—´ã€ç¼“å­˜æœŸé™     proxy_cache_path /var/cache/nginx/proxy_cache levels=1:2 keys_zone=http-cache:500m max_size=10g inactive=30d;      proxy_temp_path /var/cache/nginx/proxy_cache/tmp;      keepalive_timeout  65;      #è®¾ç½®groupæœåŠ¡å™¨     upstream fdfs_group1 &#123;         server 192.168.20.117:8090 weight=1 max_fails=2 fail_timeout=30s;     &#125;      upstream fdfs_group2 &#123;         server 192.168.20.118:8090 weight=1 max_fails=2 fail_timeout=30s;     &#125;      server &#123;         listen       80;         server_name  localhost;         charset utf-8;          location /group1/M00 &#123;                 proxy_next_upstream http_502 http_504 error timeout invalid_header;                 proxy_cache http-cache;                 proxy_cache_valid  200 304 12h;                 proxy_cache_key $uri$is_args$args;                 proxy_pass http://fdfs_group1;                 expires 30d;         &#125;         location /group2/M00 &#123;                 proxy_next_upstream http_502 http_504 error timeout invalid_header;                 proxy_cache http-cache;                 proxy_cache_valid  200 304 12h;                 proxy_cache_key $uri$is_args$args;                 proxy_pass http://fdfs_group2;                 expires 30d;         &#125;          #è®¾ç½®æ¸…é™¤ç¼“å­˜çš„è®¿é—®æƒé™         location ~ /purge(/.*) &#123;                 allow 127.0.0.1;                 allow 192.168.72.0/24;                 deny all;                 proxy_cache_purge http-cache  $1$is_args$args;         &#125;     &#125;  &#125;</code></pre><p> åˆ›å»ºç¼“å­˜ç›®å½•ï¼š&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;proxy_cache&#x2F;tmp</p></li><li><p>å¯åŠ¨nginx</p><pre><code> /opt/nginx/sbin/nginx</code></pre></li></ol></li></ol><h2 id="å®‰è£…storage"><a href="#å®‰è£…storage" class="headerlink" title="å®‰è£…storage"></a>å®‰è£…storage</h2><ol><li><p>å®‰è£…</p><p> å‚è€ƒ<a href="#install_tracker">å®‰è£…tracker</a>å‰2æ­¥éª¤ã€‚</p></li><li><p>é…ç½®</p><p> ç¼–è¾‘é…ç½®æ–‡ä»¶ç›®å½•ä¸‹çš„storage.confï¼Œåªéœ€æ”¹åŠ¨ä»¥ä¸‹å‡ ä¸ªå‚æ•°å³å¯ï¼š</p><pre><code> disabled=false     #å¯ç”¨é…ç½®æ–‡ä»¶ group_name=group1 #ç»„åï¼Œæ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ port=23000 #è®¾ç½®storageçš„ç«¯å£å· base_path=/opt/fastdfs #è®¾ç½®storageçš„æ—¥å¿—ç›®å½•ï¼ˆéœ€é¢„å…ˆåˆ›å»ºï¼‰ store_path_count=1 #å­˜å‚¨è·¯å¾„ä¸ªæ•°ï¼Œéœ€è¦å’Œstore_pathä¸ªæ•°åŒ¹é… store_path0=/opt/fastdfs#å­˜å‚¨è·¯å¾„ tracker_server=192.168.20.116:22122#trackeræœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£å· http.server_port=8080   #è®¾ç½®httpç«¯å£å·</code></pre></li><li><p>åˆ›å»ºå­˜å‚¨ç›®å½•</p><pre><code> mkdir /opt/fastdfs</code></pre></li><li><p>è¿è¡Œ</p><pre><code> fdfs_storaged /etc/fdfs/storage.conf</code></pre></li><li><p>æŒ‰ç…§åŒæ ·çš„é…ç½®åœ¨<code>192.168.20.118</code>ä¸Šåˆ›å»º<code>storage2</code>ï¼Œåšç›¸åº”çš„è°ƒæ•´ï¼ˆipç­‰ï¼‰</p><p> å¦å¤–æ¯ä¸ªgroupä¸­æ‰€æœ‰storageçš„ç«¯å£å·å¿…é¡»ä¸€è‡´ã€‚</p></li><li><p>åœ¨storageä¸Šå®‰è£…nginx</p><p> åœ¨storageä¸Šå®‰è£…çš„nginxä¸»è¦ä¸ºäº†æä¾›httpçš„è®¿é—®æœåŠ¡ï¼ŒåŒæ—¶è§£å†³groupä¸­storageæœåŠ¡å™¨çš„åŒæ­¥å»¶è¿Ÿé—®é¢˜ã€‚</p><ol><li><p>è§£å‹<code>fastdfs-nginx-module.zip</code>æ’ä»¶</p><pre><code> unzip  fastdfs-nginx-module.zip</code></pre></li><li><p>å®‰è£…nginxï¼ˆå…·ä½“å‚è€ƒ<a href="http://blog.crazy-coder.cn/2016/03/15/linux_ubuntu_install_nginx/">å®‰è£…Nginx</a>ï¼‰</p><pre><code> tar -zxvf nginx-1.8.1.tar.gz  cd nginx-1.8.1 ./configure --prefix=/usr/local/nginx --add-module=../fastdfs-nginx-module/src --without-http_gzip_module make  make install</code></pre></li><li><p>é…ç½®</p><ul><li><p>é…ç½®FastDFSçš„nginxæ’ä»¶</p><p>  å°†FastDFSçš„nginxæ’ä»¶æ¨¡å—çš„é…ç½®æ–‡ä»¶copyåˆ°FastDFSé…ç½®æ–‡ä»¶ç›®å½•</p><pre><code>  cp /opt/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/</code></pre><p>  ç¼–è¾‘&#x2F;etc&#x2F;fdfsé…ç½®æ–‡ä»¶ç›®å½•ä¸‹çš„mod_fastdfs.confï¼Œè®¾ç½®storageä¿¡æ¯å¹¶ä¿å­˜ã€‚</p></li></ul></li></ol></li></ol><p>ä¸€èˆ¬åªéœ€æ”¹åŠ¨ä»¥ä¸‹å‡ ä¸ªå‚æ•°å³å¯ï¼š</p><pre><code>            base_path=/opt/fastdfs #ä¿å­˜æ—¥å¿—ç›®å½•            tracker_server=192.168.20.116:22122 #trackeræœåŠ¡å™¨çš„IPåœ°å€ä»¥åŠç«¯å£å·            storage_server_port=23000 #storageæœåŠ¡å™¨çš„ç«¯å£å·            group_name=group1  #å½“å‰æœåŠ¡å™¨çš„groupå            url_have_group_name = true        #æ–‡ä»¶urlä¸­æ˜¯å¦æœ‰groupå            store_path_count=1                #å­˜å‚¨è·¯å¾„ä¸ªæ•°ï¼Œéœ€è¦å’Œstore_pathä¸ªæ•°åŒ¹é…            store_path0=/opt/fastdfs         #å­˜å‚¨è·¯å¾„                    åœ¨æœ«å°¾å¢åŠ 2ä¸ªç»„çš„å…·ä½“ä¿¡æ¯ï¼š                    [group1]            group_name=group1            storage_server_port=23000            store_path_count=1            store_path0=/opt/fastdfs                        [group2]            group_name=group2            storage_server_port=23000            store_path_count=1            store_path0=/opt/fastdfs    - å»ºç«‹M00è‡³å­˜å‚¨ç›®å½•çš„ç¬¦å·è¿æ¥ï¼š            ln -s /opt/fastdfs/data /opt/fastdfs/data/M00    - é…ç½®nginx            vi nginx.conf                        # åœ¨serverä¸­æ·»åŠ å¦‚ä¸‹location            location ~/group[1-3]/M00 &#123;                root /home/fastdfs/data;                ngx_fastdfs_module;            &#125;    - å¯åŠ¨                        /usr/local/nginx/sbin/nginx            </code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>é…ç½®&#x2F;etc&#x2F;fdfs&#x2F;client.conf</p><pre><code>base_path=/opt/fastdfs #æ—¥å¿—å­˜æ”¾è·¯å¾„tracker_server=192.168.20.116:22122 #trackeræœåŠ¡å™¨IPåœ°å€å’Œç«¯å£å·http.tracker_server_port=8080   #trackeræœåŠ¡å™¨çš„httpç«¯å£å·</code></pre><p>é€šè¿‡fdfs_upload_fileä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åˆ°FastDFSï¼Œç¨‹åºä¼šè‡ªåŠ¨è¿”å›æ–‡ä»¶çš„URL</p><pre><code>[root@localhost /opt/]#fdfs_upload_file /etc/fdfs/client.conf test group1/M00/00/00/wKgUdVk1drmARcxsAAAOGgU8nEQ0713851</code></pre><p>ç„¶åä½¿ç”¨æµè§ˆå™¨è®¿é—®ï¼Œè®¿é—®æ­£å¸¸<code>http://192.168.20.116/group1/M00/00/00/wKgUdVk1drmARcxsAAAOGgU8nEQ0713851</code></p><h2 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h2><p>å¯ä»¥ä½¿ç”¨fdfs_monitoræŸ¥çœ‹trackerå’Œæ‰€æœ‰groupçš„è¿è¡Œæƒ…å†µ</p><pre><code>[root@localhost /opt/nginx/conf]#fdfs_monitor /etc/fdfs/client.conf   [2017-06-05 23:21:50] DEBUG - base_path=/opt/fastdfs, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0server_count=1, server_index=0tracker server is 192.168.20.116:22122group count: 2Group 1:group name = group1disk total space = 35660 MBdisk free space = 29390 MBtrunk free space = 0 MBstorage server count = 1active server count = 1storage server port = 23000storage HTTP port = 8080store path count = 1subdir count per path = 256current write server index = 0current trunk file id = 0        Storage 1:                id = 192.168.20.117                ip_addr = 192.168.20.117  ACTIVE                http domain =                 version = 5.05                join time = 2017-06-05 19:59:44                up time = 2017-06-05 19:59:44                total storage = 35660 MB                free storage = 29390 MB                upload priority = 10                store_path_count = 1                subdir_count_per_path = 256                storage_port = 23000                storage_http_port = 8080                current_write_path = 0                source storage id =                 if_trunk_server = 0                connection.alloc_count = 256                connection.current_count = 0                connection.max_count = 1                total_upload_count = 3                success_upload_count = 3                total_append_count = 0                success_append_count = 0                total_modify_count = 0                success_modify_count = 0                total_truncate_count = 0                success_truncate_count = 0                total_set_meta_count = 0                success_set_meta_count = 0                total_delete_count = 0                success_delete_count = 0                total_download_count = 0                success_download_count = 0                total_get_meta_count = 0                success_get_meta_count = 0                total_create_link_count = 0                success_create_link_count = 0                total_delete_link_count = 0                success_delete_link_count = 0                total_upload_bytes = 7429                success_upload_bytes = 7429                total_append_bytes = 0                success_append_bytes = 0                total_modify_bytes = 0                success_modify_bytes = 0                stotal_download_bytes = 0                success_download_bytes = 0                total_sync_in_bytes = 0                success_sync_in_bytes = 0                total_sync_out_bytes = 0                success_sync_out_bytes = 0                total_file_open_count = 3                success_file_open_count = 3                total_file_read_count = 0                success_file_read_count = 0                total_file_write_count = 3                success_file_write_count = 3                last_heart_beat_time = 2017-06-05 23:21:47                last_source_update = 2017-06-05 23:20:24                last_sync_update = 1970-01-01 08:00:00                last_synced_timestamp = 1970-01-01 08:00:00 Group 2:group name = group2disk total space = 35660 MBdisk free space = 29390 MBtrunk free space = 0 MBstorage server count = 1active server count = 1storage server port = 23000storage HTTP port = 8080store path count = 1subdir count per path = 256current write server index = 0current trunk file id = 0        Storage 1:                id = 192.168.20.118                ip_addr = 192.168.20.118  ACTIVE                http domain =                 version = 5.05                join time = 2017-06-05 20:05:35                up time = 2017-06-05 20:05:35                total storage = 35660 MB                free storage = 29390 MB                upload priority = 10                store_path_count = 1                subdir_count_per_path = 256                storage_port = 23000                storage_http_port = 8080                current_write_path = 0                source storage id =                 if_trunk_server = 0                connection.alloc_count = 256                connection.current_count = 0                connection.max_count = 1                total_upload_count = 1                success_upload_count = 1                total_append_count = 0                success_append_count = 0                total_modify_count = 0                success_modify_count = 0                total_truncate_count = 0                success_truncate_count = 0                total_set_meta_count = 0                success_set_meta_count = 0                total_delete_count = 0                success_delete_count = 0                total_download_count = 0                success_download_count = 0                total_get_meta_count = 0                success_get_meta_count = 0                total_create_link_count = 0                success_create_link_count = 0                total_delete_link_count = 0                success_delete_link_count = 0                total_upload_bytes = 833473                success_upload_bytes = 833473                total_append_bytes = 0                success_append_bytes = 0                total_modify_bytes = 0                success_modify_bytes = 0                stotal_download_bytes = 0                success_download_bytes = 0                total_sync_in_bytes = 0                success_sync_in_bytes = 0                total_sync_out_bytes = 0                success_sync_out_bytes = 0                total_file_open_count = 1                success_file_open_count = 1                total_file_read_count = 0                success_file_read_count = 0                total_file_write_count = 4                success_file_write_count = 4                last_heart_beat_time = 2017-06-05 23:21:37                last_source_update = 2017-06-05 22:26:05                last_sync_update = 1970-01-01 08:00:00                last_synced_timestamp = 1970-01-01 08:00:00</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…é…ç½®FastDFS</title>
      <link href="/2017/05/26/zhong-jian-jian/fastdfs-install/"/>
      <url>/2017/05/26/zhong-jian-jian/fastdfs-install/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨æ–°çš„æœåŠ¡å™¨ä¸Šå®‰è£…äº†FastDFS_v5.05ï¼Œç›¸æ¯”è¾ƒFastDFSV3.02è¿˜æ˜¯æœ‰å¾ˆå¤šå˜åŒ–ï¼Œç°å°†å®‰è£…é…ç½®è¿‡ç¨‹è®°å½•ä¸‹ï¼Œä¾›å¤§å®¶å‚è€ƒï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå…¶ä¸­æ¶‰åŠåˆ°IPåœ°å€çš„åœ°æ–¹ï¼Œéšæ„ç”¨äº†ä¸€ä¸ªIP202.98.27.31ï¼Œåœ¨è®¿é—®é‡ä¸å¤§æƒ…å†µä¸‹ï¼Œå°†trackerå’Œstorageéƒ½éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼ŒåæœŸæ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œæ‰©å±•ï¼š</p></blockquote><span id="more"></span><ol><li><p>è½¯ä»¶ä¸‹è½½ï¼š</p><pre><code> wget https://github.com/happyfish100/libfastcommon/archive/V1.0.7.tar.gz wget http://jaist.dl.sourceforge.net/project/fastdfs/FastDFS%20Nginx%20Module%20Source%20Code/fastdfs-nginx-module_v1.16.tar.gz wget https://github.com/happyfish100/fastdfs/archive/V5.05.tar.gz wget http://nginx.org/download/nginx-1.8.0.tar.gz wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.36.tar.gz wget http://zlib.net/zlib-1.2.8.tar.gz</code></pre></li><li><p>libfastcommonå®‰è£…ï¼š</p><pre><code> cp V1.0.7.tar.gz /usr/local/ tar -zxvf V1.0.7.tar.gz cd libfastcommon-1.0.7 ./make.sh ./make.sh install </code></pre><p>  libfastcommon.soé»˜è®¤å®‰è£…åˆ°äº†&#x2F;usr&#x2F;lib64&#x2F;libfastcommon.soï¼Œè€ŒFastDFSä¸»ç¨‹åºè®¾ç½®çš„libç›®å½•æ˜¯&#x2F;usr&#x2F;local&#x2F;libï¼Œæ‰€ä»¥è®¾ç½®è½¯è¿æ¥</p><pre><code>   ln -s /usr/lib64/libfastcommon.so /usr/local/lib/libfastcommon.so  ln -s /usr/lib64/libfastcommon.so /usr/lib/libfastcommon.so  ln -s /usr/lib64/libfdfsclient.so /usr/local/lib/libfdfsclient.so  ln -s /usr/lib64/libfdfsclient.so /usr/lib/libfdfsclient.so  </code></pre></li><li><p>å®‰è£…FastDFS</p><ul><li><p>è§£å‹å®‰è£…</p><pre><code>  tar -zxvf V5.05.tar.gz -C /usr/local  cd /usr/local/fastdfs-5.05/    ./make.sh  ./make.sh install</code></pre></li><li><p>é…ç½®æ–‡ä»¶ä¿®æ”¹</p><pre><code>  cd /etc/fdfs  cp tracker.conf.sample tracker.conf  cp storage.conf.sample storage.conf  cp client.conf.sample client.conf  </code></pre><p>  è¯¦ç»†è®¾ç½®è§é™„ä»¶</p><ul><li><p>é™„ä»¶1:</p><pre><code>  tracker.confé…ç½®ä¸­è¦ä¿®æ”¹çš„å‡ ä¸ªé¡¹ï¼š  bind_addr=202.98.27.31  port=22122  http.server_port=8080</code></pre></li><li><p>é™„ä»¶2ï¼š</p><pre><code>  storage.confé…ç½®ä¸­è¦ä¿®æ”¹çš„å‡ ä¸ªé¡¹ï¼š  group_name=group1  bind_addr=202.98.27.31  port=23000  base_path=/usrdata/fastdfs  store_path0=/usrdata/fastdfs  tracker_server=202.98.27.31:22122  http.server_port=8888</code></pre></li></ul></li><li><p>å¯åŠ¨</p><pre><code>  å¯åŠ¨tracker storage  fdfs_trackerd /etc/fdfs/tracker.conf  fdfs_storaged /etc/fdfs/storage.conf</code></pre></li></ul></li><li><p>å®‰è£…nginxæ’ä»¶</p><ul><li><p>å®‰è£…</p><pre><code>  tar -zxvf fastdfs-nginx-module_v1.16.tar.gz  cd fastdfs-nginx-module/src/</code></pre></li><li><p><code>config</code>æ–‡ä»¶ä¿®æ”¹</p><pre><code>  vi config  ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼Œæˆ‘è¿™é‡ŒåŸæ¥æ˜¯  CORE_INCS=&quot;$CORE_INCS /usr/local/include/fastdfs /usr/local/include/fastcommon/&quot;  æ”¹æˆ  CORE_INCS=&quot;$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/&quot;</code></pre></li><li><p>ä¿®æ”¹é…ç½®</p><pre><code>  cp  mod_fastdfs.conf /etc/fdfs  ä¿®æ”¹é…ç½®  group_name=group1  tracker_server=202.98.27.31:22122  store_path0=/usrdata/fastdfs  base_path=/usrdata/fastdfs  url_have_group_name = true</code></pre></li><li><p>é…ç½®æ–‡ä»¶æœåŠ¡å™¨çš„è½¯è¿æ¥</p><pre><code>  ln -s /usrdata/fastdfs/data /usrdata/fastdfs/data/M00  (é…ç½®æ–‡ä»¶ä¸­stoageå­˜æ”¾æ•°æ®çš„è·¯å¾„)</code></pre></li><li><p>åŒæ—¶å°†ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°<code>/etc/fdfs/</code></p><pre><code>  cp /usr/local/fastdfs-5.05/http.conf /etc/fdfs/  cp /usr/local/fastdfs-5.05/mime.types /etc/fdfs/</code></pre></li></ul></li><li><p>nginxå®‰è£…ï¼š</p><p> åœ¨æ¯ä¸ªStorageæœåŠ¡å™¨ä¸Šå®‰è£…Nginx</p><ul><li><p>pcreå®‰è£…ï¼š</p><pre><code>  tar -zxvf pcre-8.36.tar.gz  cd pcre-8.36  ./configure  make &amp;&amp; make install  cd ../    ln -s /usr/local/lib/libpcre.so.1 /lib64/</code></pre></li><li><p>zlibå®‰è£…ï¼š</p><pre><code>  tar -zxvf zlib-1.2.8.tar.gz  cd zlib-1.2.8  ./configure  make &amp;&amp; make install  cd ../</code></pre></li><li><p>nginxå®‰è£…ï¼š</p><pre><code>  tar -zxvf nginx-1.8.0.tar.gz  cd nginx-1.8.0    ./configure --prefix=/usr/local/nginx --add-module=/home/yq/fastdfs-nginx-module/src  make  make install</code></pre></li><li><p>nginxé…ç½®</p><pre><code>  cd /usr/local/nginx/conf  vi nginx.conf</code></pre><p>  åœ¨serverä¸­æ·»åŠ </p><pre><code>  location /group1/M00&#123;      root /usrdata/fastdfs/data;      ngx_fastdfs_module;  &#125;</code></pre></li><li><p>å¯åŠ¨ï¼š</p><pre><code>  /usr/local/nginx/sbin/nginx</code></pre></li></ul></li><li><p>æµ‹è¯•æ–‡ä»¶ä¸Šä¼ ï¼š</p><pre><code> /usr/bin/fdfs_test /etc/fdfs/client.conf upload benz.jpg</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mongodbé«˜å¯ç”¨é›†ç¾¤æ­å»º</title>
      <link href="/2017/05/26/zhong-jian-jian/mongodb-high-availability-cluster/"/>
      <url>/2017/05/26/zhong-jian-jian/mongodb-high-availability-cluster/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å…¬å¸é¡¹ç›®è¦æ±‚Mongodbé›†ç¾¤ä¸”é«˜å¯ç”¨ï¼Œåœ¨æŸ¥è¯¢äº†ä¸€ç³»åˆ—æ–‡ç« ï¼Œå†ç»“åˆé¡¹ç›®å®é™…æƒ…å†µï¼Œæ‰€ä»¥é‡‡ç”¨äº†è¿™ä¸€å¥—é«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆ</p></blockquote><span id="more"></span><h2 id="æ–¹æ¡ˆé€‰é¡¹"><a href="#æ–¹æ¡ˆé€‰é¡¹" class="headerlink" title="æ–¹æ¡ˆé€‰é¡¹"></a>æ–¹æ¡ˆé€‰é¡¹</h2><p>Mongodbçš„ä¸‰ç§é›†ç¾¤æ–¹å¼çš„æ­å»ºï¼šReplica Set &#x2F; Sharding &#x2F; Master-Slaverã€‚</p><ol><li><p>Replica Setï¼ˆå‰¯æœ¬é›†ï¼‰</p><p> å…¶å®ç®€å•æ¥è¯´å°±æ˜¯é›†ç¾¤å½“ä¸­åŒ…å«äº†å¤šä»½æ•°æ®ï¼Œä¿è¯ä¸»èŠ‚ç‚¹æŒ‚æ‰äº†ï¼Œå¤‡èŠ‚ç‚¹èƒ½ç»§ç»­æä¾›æ•°æ®æœåŠ¡ï¼Œæä¾›çš„å‰æå°±æ˜¯æ•°æ®éœ€è¦å’Œä¸»èŠ‚ç‚¹ä¸€è‡´ã€‚</p><p> <img src="http://img.my.csdn.net/uploads/201301/13/1358056331_2790.png"></p><p> Mongodb(M)è¡¨ç¤ºä¸»èŠ‚ç‚¹ï¼ŒMongodb(S)è¡¨ç¤ºå¤‡èŠ‚ç‚¹ï¼ŒMongodb(A)è¡¨ç¤ºä»²è£èŠ‚ç‚¹ã€‚ä¸»å¤‡èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œä»²è£èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ã€‚å®¢æˆ·ç«¯åŒæ—¶è¿æ¥ä¸»èŠ‚ç‚¹ä¸å¤‡èŠ‚ç‚¹ï¼Œä¸è¿æ¥ä»²è£èŠ‚ç‚¹ã€‚</p><p> é»˜è®¤è®¾ç½®ä¸‹ï¼Œä¸»èŠ‚ç‚¹æä¾›æ‰€æœ‰å¢åˆ æŸ¥æ”¹æœåŠ¡ï¼Œå¤‡èŠ‚ç‚¹ä¸æä¾›ä»»ä½•æœåŠ¡ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡è®¾ç½®ä½¿å¤‡èŠ‚ç‚¹æä¾›æŸ¥è¯¢æœåŠ¡ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ä¸»èŠ‚ç‚¹çš„å‹åŠ›ï¼Œå½“å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®æŸ¥è¯¢æ—¶ï¼Œè¯·æ±‚è‡ªåŠ¨è½¬åˆ°å¤‡èŠ‚ç‚¹ä¸Šã€‚è¿™ä¸ªè®¾ç½®å«åšRead Preference Modesï¼ŒåŒæ—¶Javaå®¢æˆ·ç«¯æä¾›äº†ç®€å•çš„é…ç½®æ–¹å¼ï¼Œå¯ä»¥ä¸å¿…ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œã€‚</p><p> ä»²è£èŠ‚ç‚¹æ˜¯ä¸€ç§ç‰¹æ®Šçš„èŠ‚ç‚¹ï¼Œå®ƒæœ¬èº«å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œä¸»è¦çš„ä½œç”¨æ˜¯å†³å®šå“ªä¸€ä¸ªå¤‡èŠ‚ç‚¹åœ¨ä¸»èŠ‚ç‚¹æŒ‚æ‰ä¹‹åæå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸éœ€è¦è¿æ¥æ­¤èŠ‚ç‚¹ã€‚è¿™é‡Œè™½ç„¶åªæœ‰ä¸€ä¸ªå¤‡èŠ‚ç‚¹ï¼Œä½†æ˜¯ä»ç„¶éœ€è¦ä¸€ä¸ªä»²è£èŠ‚ç‚¹æ¥æå‡å¤‡èŠ‚ç‚¹çº§åˆ«ã€‚æˆ‘å¼€å§‹ä¹Ÿä¸ç›¸ä¿¡å¿…é¡»è¦æœ‰ä»²è£èŠ‚ç‚¹ï¼Œä½†æ˜¯è‡ªå·±ä¹Ÿè¯•è¿‡æ²¡ä»²è£èŠ‚ç‚¹çš„è¯ï¼Œä¸»èŠ‚ç‚¹æŒ‚äº†å¤‡èŠ‚ç‚¹è¿˜æ˜¯å¤‡èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’±ä»¬è¿˜æ˜¯éœ€è¦å®ƒçš„ã€‚</p></li><li><p>Sharding</p><p> å’ŒReplica Setç±»ä¼¼ï¼Œéƒ½éœ€è¦ä¸€ä¸ªä»²è£èŠ‚ç‚¹ï¼Œä½†æ˜¯Shardingè¿˜éœ€è¦é…ç½®èŠ‚ç‚¹å’Œè·¯ç”±èŠ‚ç‚¹ã€‚å°±ä¸‰ç§é›†ç¾¤æ­å»ºæ–¹å¼æ¥è¯´ï¼Œè¿™ç§æ˜¯æœ€å¤æ‚çš„ã€‚éƒ¨ç½²å›¾å¦‚ä¸‹ï¼š</p><p> <img src="http://img.my.csdn.net/uploads/201301/13/1358091861_1772.png"></p></li><li><p>Master-Slaver</p><p> è¿™ä¸ªæ˜¯æœ€ç®€ç­”çš„é›†ç¾¤æ­å»ºï¼Œä¸è¿‡å‡†ç¡®è¯´ä¹Ÿä¸èƒ½ç®—æ˜¯é›†ç¾¤ï¼Œåªèƒ½è¯´æ˜¯ä¸»å¤‡ã€‚å¹¶ä¸”å®˜æ–¹å·²ç»ä¸æ¨èè¿™ç§æ–¹å¼ã€‚</p></li><li><p>ç»¼è¿°</p><ul><li><code>Master-Slaver</code>å®˜æ–¹å·²ç»ä¸æ¨èè¿™ç§æ–¹å¼äº†ã€‚ä¸é‡‡ç”¨ï¼</li><li><code>Sharding</code>è¿‡äºå¤æ‚ï¼Œè€ƒè™‘é¡¹ç›®æƒ…å†µï¼Œä¹Ÿä¸é‡‡ç”¨ï¼</li><li><code>Replica Set</code>é›†ç¾¤ã€é«˜å¯ç”¨ï¼Œéƒ¨ç½²ä¹Ÿç®€å•ï¼Œé‡‡ç”¨è¿™ç§æƒ…å†µï¼Œä¸‹é¢ä»‹ç»è¿™ç§æƒ…å†µçš„éƒ¨ç½²ï¼</li></ul></li></ol><h2 id="åŸºäºReplica-Setçš„æ–¹å¼è¿›è¡Œéƒ¨ç½²"><a href="#åŸºäºReplica-Setçš„æ–¹å¼è¿›è¡Œéƒ¨ç½²" class="headerlink" title="åŸºäºReplica Setçš„æ–¹å¼è¿›è¡Œéƒ¨ç½²"></a>åŸºäº<code>Replica Set</code>çš„æ–¹å¼è¿›è¡Œéƒ¨ç½²</h2><ol><li><p>å‡†å¤‡</p><p> ç”±äºæ˜¯åœ¨æœ¬æœºè™šæ‹Ÿæœºéƒ¨ç½²ï¼Œæ‰€ä»¥åªé‡‡ç”¨ä¸€å°æœºå™¨ï¼ˆ10.211.55.10ï¼‰ï¼Œå¼€å¯4ä¸ªç«¯å£ï¼ˆmasterï¼š27017ï¼Œslaverï¼š27018ã€27019ï¼Œarbiterï¼š27020ï¼‰</p></li><li><p>é…ç½®æ–‡ä»¶(mongodbé…ç½®æ–‡ä»¶å…·ä½“å±æ€§è§£é‡Šè¯·å‚è€ƒé™„å½•1)</p><ul><li><p>master</p><pre><code>  # master.conf  dbpath=/opt/mongodb/data/master  logpath=/opt/mongodb/logs/master.log  pidfilepath=/opt/mongodb/logs/master.pid  directoryperdb=true  logappend=true  replSet=ynzw  bind_ip=10.211.55.10  port=27017  oplogSize=10000  fork=true  noprealloc=true</code></pre></li><li><p>slaver1</p><pre><code>  # slaver1.conf  dbpath=/opt/mongodb/data/slaver1  logpath=/opt/mongodb/logs/slaver1.log  pidfilepath=/opt/mongodb/logs/slaver1.pid  directoryperdb=true  logappend=true  replSet=ynzw  bind_ip=10.211.55.10  port=27018  oplogSize=10000  fork=true  noprealloc=true</code></pre></li><li><p>slaver2</p><pre><code>  # slaver2.conf  dbpath=/opt/mongodb/data/slaver2  logpath=/opt/mongodb/logs/slaver2.log  pidfilepath=/opt/mongodb/logs/slaver2.pid  directoryperdb=true  logappend=true  replSet=ynzw  bind_ip=10.211.55.10  port=27019  oplogSize=10000  fork=true  noprealloc=true</code></pre></li><li><p>arbiter</p><pre><code>  # arbiter.conf  dbpath=/opt/mongodb/data/arbiter  logpath=/opt/mongodb/logs/arbiter.log  pidfilepath=/opt/mongodb/logs/arbiter.pid  directoryperdb=true  logappend=true  replSet=ynzw  bind_ip=10.211.55.10  port=27020  oplogSize=10000  fork=true  noprealloc=true</code></pre></li></ul></li><li><p>å¯åŠ¨4ä¸ªèŠ‚ç‚¹</p><pre><code> /opt/mongodb/bin/mongod -f /opt/mongodb/conf/master.conf /opt/mongodb/bin/mongod -f /opt/mongodb/conf/slaver1.conf /opt/mongodb/bin/mongod -f /opt/mongodb/conf/slaver2.conf /opt/mongodb/bin/mongod -f /opt/mongodb/conf/arbiter.conf</code></pre></li><li><p>é…ç½®ä¸»ï¼Œå¤‡ï¼Œä»²è£èŠ‚ç‚¹</p><ul><li><p>å®¢æˆ·ç«¯è¿æ¥masterã€slaverä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹mongodb</p><pre><code>  /opt/mongodb/bin/mongo 10.211.55.10:27017</code></pre></li><li><p>å¼€å§‹é…ç½®</p><pre><code>  &gt; use admin  &gt; cfg = &#123;    _id: &quot;ynzw&quot;,    members: [      &#123;        _id: 0,        host: &#39;10.211.55.10:27017&#39;,        priority: 3      &#125;,      &#123;        _id: 1,        host: &#39;10.211.55.10:27018&#39;,        priority: 2      &#125;,      &#123;        _id: 2,        host: &#39;10.211.55.10:27019&#39;,        priority: 1      &#125;,      &#123;        _id: 3,        host: &#39;10.211.55.10:27020&#39;,        arbiterOnly: true      &#125;    ]  &#125;;  &gt; rs.initiate(cfg)  </code></pre><p>  cfgæ˜¯å¯ä»¥ä»»æ„çš„åå­—ï¼Œå½“ç„¶æœ€å¥½ä¸è¦æ˜¯mongodbçš„å…³é”®å­—ï¼Œconfï¼Œconfigéƒ½å¯ä»¥ã€‚æœ€å¤–å±‚çš„_idè¡¨ç¤ºreplica setçš„åå­—ï¼Œmembersé‡ŒåŒ…å«çš„æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„åœ°å€ä»¥åŠä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§æœ€é«˜çš„å³æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œå³è¿™é‡Œçš„10.211.55.10:27017ã€‚ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä»²è£èŠ‚ç‚¹ï¼Œéœ€è¦æœ‰ä¸ªç‰¹åˆ«çš„é…ç½®â€”â€”arbiterOnly:trueã€‚è¿™ä¸ªåƒä¸‡ä¸èƒ½å°‘äº†ï¼Œä¸ç„¶ä¸»å¤‡æ¨¡å¼å°±ä¸èƒ½ç”Ÿæ•ˆã€‚</p></li><li><p>æ£€éªŒ</p><p>  é…ç½®çš„ç”Ÿæ•ˆæ—¶é—´æ ¹æ®ä¸åŒçš„æœºå™¨é…ç½®ä¼šæœ‰é•¿æœ‰çŸ­ï¼Œé…ç½®ä¸é”™çš„è¯åŸºæœ¬ä¸Šåå‡ ç§’å†…å°±èƒ½ç”Ÿæ•ˆï¼Œæœ‰çš„é…ç½®éœ€è¦ä¸€ä¸¤åˆ†é’Ÿã€‚å¦‚æœç”Ÿæ•ˆäº†ï¼Œæ‰§è¡Œrs.status()å‘½ä»¤ä¼šçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><pre><code>  ynzw:SECONDARY&gt; rs.status()  &#123;          &quot;set&quot; : &quot;ynzw&quot;,          &quot;date&quot; : ISODate(&quot;2017-05-26T06:47:32.069Z&quot;),          &quot;myState&quot; : 1,          &quot;term&quot; : NumberLong(8),          &quot;heartbeatIntervalMillis&quot; : NumberLong(2000),          &quot;members&quot; : [                  &#123;                          &quot;_id&quot; : 0,                          &quot;name&quot; : &quot;10.211.55.10:27017&quot;,                          &quot;health&quot; : 1,                          &quot;state&quot; : 1,                          &quot;stateStr&quot; : &quot;PRIMARY&quot;,                          &quot;uptime&quot; : 24,                          &quot;optime&quot; : &#123;                                  &quot;ts&quot; : Timestamp(1495781239, 2),                                  &quot;t&quot; : NumberLong(8)                          &#125;,                          &quot;optimeDate&quot; : ISODate(&quot;2017-05-26T06:47:19Z&quot;),                          &quot;electionTime&quot; : Timestamp(1495781239, 1),                          &quot;electionDate&quot; : ISODate(&quot;2017-05-26T06:47:19Z&quot;),                          &quot;configVersion&quot; : 1,                          &quot;self&quot; : true                  &#125;,                  &#123;                          &quot;_id&quot; : 1,                          &quot;name&quot; : &quot;10.211.55.10:27018&quot;,                          &quot;health&quot; : 1,                          &quot;state&quot; : 2,                          &quot;stateStr&quot; : &quot;SECONDARY&quot;,                          &quot;uptime&quot; : 18,                          &quot;optime&quot; : &#123;                                  &quot;ts&quot; : Timestamp(1495781239, 2),                                  &quot;t&quot; : NumberLong(8)                          &#125;,                          &quot;optimeDate&quot; : ISODate(&quot;2017-05-26T06:47:19Z&quot;),                          &quot;lastHeartbeat&quot; : ISODate(&quot;2017-05-26T06:47:31.424Z&quot;),                          &quot;lastHeartbeatRecv&quot; : ISODate(&quot;2017-05-26T06:47:31.247Z&quot;),                          &quot;pingMs&quot; : NumberLong(0),                          &quot;syncingTo&quot; : &quot;10.211.55.10:27017&quot;,                          &quot;configVersion&quot; : 1                  &#125;,                  &#123;                          &quot;_id&quot; : 2,                          &quot;name&quot; : &quot;10.211.55.10:27019&quot;,                          &quot;health&quot; : 1,                          &quot;state&quot; : 2,                          &quot;stateStr&quot; : &quot;SECONDARY&quot;,                          &quot;uptime&quot; : 18,                          &quot;optime&quot; : &#123;                                  &quot;ts&quot; : Timestamp(1495781239, 2),                                  &quot;t&quot; : NumberLong(8)                          &#125;,                          &quot;optimeDate&quot; : ISODate(&quot;2017-05-26T06:47:19Z&quot;),                          &quot;lastHeartbeat&quot; : ISODate(&quot;2017-05-26T06:47:31.424Z&quot;),                          &quot;lastHeartbeatRecv&quot; : ISODate(&quot;2017-05-26T06:47:31.734Z&quot;),                          &quot;pingMs&quot; : NumberLong(0),                          &quot;syncingTo&quot; : &quot;10.211.55.10:27018&quot;,                          &quot;configVersion&quot; : 1                  &#125;,                  &#123;                          &quot;_id&quot; : 3,                          &quot;name&quot; : &quot;10.211.55.10:27020&quot;,                          &quot;health&quot; : 1,                          &quot;state&quot; : 7,                          &quot;stateStr&quot; : &quot;ARBITER&quot;,                          &quot;uptime&quot; : 18,                          &quot;lastHeartbeat&quot; : ISODate(&quot;2017-05-26T06:47:31.424Z&quot;),                          &quot;lastHeartbeatRecv&quot; : ISODate(&quot;2017-05-26T06:47:30.437Z&quot;),                          &quot;pingMs&quot; : NumberLong(0),                          &quot;configVersion&quot; : 1                  &#125;          ],          &quot;ok&quot; : 1  &#125;  ynzw:PRIMARY&gt;   </code></pre><p>  å¦‚æœé…ç½®æ­£åœ¨ç”Ÿæ•ˆï¼Œå…¶ä¸­ä¼šåŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼š<code>&quot;stateStr&quot; : &quot;RECOVERING&quot;</code></p></li></ul></li></ol><h2 id="å®¢æˆ·ç«¯è¿æ¥"><a href="#å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="å®¢æˆ·ç«¯è¿æ¥"></a>å®¢æˆ·ç«¯è¿æ¥</h2><ol><li><p>ä½¿ç”¨<code>spring-data-mongodb</code>+<code>mongo-java-driver</code>æ“ä½œmongodb</p></li><li><p><code>10.211.55.10:27017</code>ã€<code>10.211.55.10:27018</code>ã€<code>10.211.55.10:27019</code>æ˜¯ä¸»ä»èŠ‚ç‚¹ï¼Œç”±äºä»²è£èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿æ¥</p></li><li><p>ä»£ç </p><pre><code> List&lt;ServerAddress&gt; servers = new ArrayList&lt;&gt;(addresses.size()); for (String address : addresses) &#123;     String host = address.split(&quot;:&quot;)[0];     Integer port = Integer.valueOf(address.split(&quot;:&quot;)[1]);      servers.add(new ServerAddress(host, port)); &#125;  MongoClient client = new MongoClient(servers); MongoDatabase db = client.getDatabase(mongoName);</code></pre></li></ol><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><ol><li><p>mongodbé…ç½®æ–‡ä»¶å…·ä½“å±æ€§è§£é‡Š</p><pre><code> dbpathï¼šæ•°æ®å­˜æ”¾ç›®å½• logpathï¼šæ—¥å¿—å­˜æ”¾è·¯å¾„ pidfilepathï¼šè¿›ç¨‹æ–‡ä»¶ï¼Œæ–¹ä¾¿åœæ­¢mongodb directoryperdbï¼šä¸ºæ¯ä¸€ä¸ªæ•°æ®åº“æŒ‰ç…§æ•°æ®åº“åå»ºç«‹æ–‡ä»¶å¤¹å­˜æ”¾ logappendï¼šä»¥è¿½åŠ çš„æ–¹å¼è®°å½•æ—¥å¿— replSetï¼šreplica setçš„åå­— bind_ipï¼šmongodbæ‰€ç»‘å®šçš„ipåœ°å€ portï¼šmongodbè¿›ç¨‹æ‰€ä½¿ç”¨çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º27017 oplogSizeï¼šmongodbæ“ä½œæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ã€‚å•ä½ä¸ºMbï¼Œé»˜è®¤ä¸ºç¡¬ç›˜å‰©ä½™ç©ºé—´çš„5% forkï¼šä»¥åå°æ–¹å¼è¿è¡Œè¿›ç¨‹ nopreallocï¼šä¸é¢„å…ˆåˆ†é…å­˜å‚¨</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mongodb </tag>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisé«˜å¯ç”¨é›†ç¾¤æ­å»º</title>
      <link href="/2017/05/24/zhong-jian-jian/redis-high-availability-cluster/"/>
      <url>/2017/05/24/zhong-jian-jian/redis-high-availability-cluster/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å…¬å¸é¡¹ç›®è¦æ±‚Redisé›†ç¾¤ä¸”é«˜å¯ç”¨ï¼Œåœ¨æŸ¥è¯¢äº†ä¸€ç³»åˆ—æ–‡ç« ï¼Œå†ç»“åˆé¡¹ç›®å®é™…æƒ…å†µï¼Œæ‰€ä»¥é‡‡ç”¨äº†è¿™ä¸€å¥—é«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆ</p></blockquote><span id="more"></span><h2 id="æ–¹æ¡ˆé€‰å‹"><a href="#æ–¹æ¡ˆé€‰å‹" class="headerlink" title="æ–¹æ¡ˆé€‰å‹"></a>æ–¹æ¡ˆé€‰å‹</h2><p>Redisé›†ç¾¤æœ‰ä¸‰ç§æ–¹æ¡ˆå®ç°ï¼š</p><ol><li><p>Rediså®˜æ–¹é›†ç¾¤æ–¹æ¡ˆ Redis Cluster</p><p> è¿™ç§æ–¹æ¡ˆæ˜¯rediså®˜æ–¹æä¾›çš„ï¼Œé‡‡ç”¨slotçš„æ¦‚å¿µï¼Œä¸€å…±åˆ†æˆ16384ä¸ªæ§½ã€‚å¯¹keyçš„å€¼è¿›è¡Œæ•£åˆ—ï¼Œåˆ†é…åˆ°è¿™16384ä¸ªslotä¸­çš„æŸä¸€ä¸ªä¸­ã€‚ä½†æ˜¯è¿™ä¸ªRedisé›†ç¾¤ï¼Œè¦ä¿è¯16384ä¸ªæ§½å¯¹åº”çš„nodeéƒ½æ­£å¸¸å·¥ä½œï¼Œå¦‚æœæŸä¸ªnodeå‘ç”Ÿæ•…éšœï¼Œé‚£å®ƒè´Ÿè´£çš„slotsä¹Ÿå°±å¤±æ•ˆï¼Œæ•´ä¸ªé›†ç¾¤å°†ä¸èƒ½å·¥ä½œã€‚è¿™ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼š<strong>é«˜å¯ç”¨</strong>ã€‚</p></li><li><p>åˆ©ç”¨ä»£ç†ä¸­é—´ä»¶å®ç°å¤§è§„æ¨¡Redisé›†ç¾¤</p><p> è¿‡äºå¤æ‚ï¼Œå¹¶ä¸”æˆ‘ä»¬redisçš„ä½¿ç”¨é‡ä¸æ˜¯å¾ˆå¤§ï¼Œåªéœ€è¦ä¿è¯ç¨³å®šå³å¯ï¼ˆé«˜å¯ç”¨ï¼‰ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ²¡æœ‰é‡‡çº³ã€‚</p></li><li><p>Redis Sentinelä¸»ä»é«˜å¯ç”¨æ–¹æ¡ˆ</p><p> éƒ¨ç½²redisä¸»ä»æœåŠ¡ï¼ˆ1ä¸ªmasterï¼Œå¤šä¸ªsalveï¼‰ï¼Œç„¶åé€šè¿‡rediså®˜æ–¹çš„ç›‘æ§å·¥å…·Sentinelï¼ˆå“¨å…µï¼‰ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œç›‘æ§ï¼Œå®ç°è‡ªåŠ¨æ•…éšœè¿ç§»ï¼Œå³masteræ­»æ‰ï¼Œå°†salveå‡çº§ä¸ºmasterã€‚åŸºæœ¬åŸç†æ˜¯ï¼šå¿ƒè·³æœºåˆ¶+æŠ•ç¥¨è£å†³ã€‚</p></li></ol><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ol><li>ä¸‹è½½redisæºç åŒ…ã€‚<a href="http://download.redis.io/releases/redis-3.2.9.tar.gz">åœ°å€</a></li><li>å‡†å¤‡1å°æœåŠ¡å™¨ï¼ˆæŒ‰ç…§éƒ¨ç½²æƒ…å†µï¼Œå…±æœ‰5ä¸ªç«¯å£ï¼‰</li><li>5ä¸ªç«¯å£ä¸­ï¼Œ1ä¸ªmaster(6379)ï¼Œ2ä¸ªslave(6380,6381)ï¼Œ2ä¸ªsentinelï¼ˆå“¨å…µï¼‰(63791, 63792)</li></ol><h2 id="sentinelé…ç½®-å‚æ•°é…ç½®æŸ¥çœ‹é™„å½•1"><a href="#sentinelé…ç½®-å‚æ•°é…ç½®æŸ¥çœ‹é™„å½•1" class="headerlink" title="sentinelé…ç½®(å‚æ•°é…ç½®æŸ¥çœ‹é™„å½•1)"></a>sentinelé…ç½®(å‚æ•°é…ç½®æŸ¥çœ‹é™„å½•1)</h2><ol><li><p>é…ç½®æ–‡ä»¶_63791(<code>sentinel_63791.conf</code>)</p><pre><code> # ç«¯å£ port 63791 daemonize yes # å¾ˆé‡è¦ï¼Œè§é™„å½•2 protected-mode no # æ—¥å¿—æ–‡ä»¶ logfile &quot;/opt/redis-cluster/logs/sentinel_63791.log&quot; #master-1 # ç›‘æ§master # sentinel monitor master_name ip port quorum # quorumæ˜¯ä¸€ä¸ªæ•°å­—ï¼ŒæŒ‡æ˜å½“æœ‰å¤šå°‘ä¸ªsentinelè®¤ä¸ºä¸€ä¸ªmasterå¤±æ•ˆæ—¶ï¼Œmasteræ‰ç®—çœŸæ­£å¤±æ•ˆã€‚ sentinel monitor master-1 10.211.55.10 6381 1 # è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†éœ€è¦å¤šå°‘å¤±æ•ˆæ—¶é—´ï¼Œä¸€ä¸ªmasteræ‰ä¼šè¢«è¿™ä¸ªsentinelä¸»è§‚åœ°è®¤ä¸ºæ˜¯ä¸å¯ç”¨çš„ã€‚ å•ä½æ˜¯æ¯«ç§’ï¼Œé»˜è®¤ä¸º30ç§’ sentinel down-after-milliseconds master-1 5000 sentinel failover-timeout master-1 18000 # è®¾ç½®è¿æ¥masterå’Œslaveæ—¶çš„å¯†ç ,masterå’Œslaveç”¨æˆ·åå¯†ç è¦ä¸€è‡´ sentinel auth-pass master-1 test123 sentinel parallel-syncs master-1 1</code></pre></li><li><p>é…ç½®æ–‡ä»¶_63792(<code>sentinel_63792.conf</code>)</p><pre><code> port 63792 daemonize yes protected-mode no logfile &quot;/opt/redis-cluster/logs/sentinel_63792.log&quot; #master-1 sentinel monitor master-1 10.211.55.10 6381 1 sentinel down-after-milliseconds master-1 5000 sentinel failover-timeout master-1 18000 sentinel auth-pass master-1 test123 sentinel parallel-syncs master-1 1</code></pre></li></ol><h2 id="MasterèŠ‚ç‚¹é…ç½®"><a href="#MasterèŠ‚ç‚¹é…ç½®" class="headerlink" title="MasterèŠ‚ç‚¹é…ç½®"></a>MasterèŠ‚ç‚¹é…ç½®</h2><p><code>redis_master_6379.conf</code> é…ç½®ï¼š</p><pre><code>port 6379daemonize yesrequirepass test123masterauth test123</code></pre><h2 id="ä¸¤ä¸ªslaveèŠ‚ç‚¹é…ç½®"><a href="#ä¸¤ä¸ªslaveèŠ‚ç‚¹é…ç½®" class="headerlink" title="ä¸¤ä¸ªslaveèŠ‚ç‚¹é…ç½®"></a>ä¸¤ä¸ªslaveèŠ‚ç‚¹é…ç½®</h2><ol><li><p><code>redis_slave_6380.conf</code></p><pre><code> port 6380 daemonize yes requirepass &quot;test123&quot; slaveof 10.211.55.10 6379 masterauth &quot;sunhao123&quot; bind 0.0.0.0</code></pre></li><li><p><code>redis_slave_6381.conf</code> </p><pre><code> port 6381 daemonize yes requirepass &quot;test123&quot; slaveof 10.211.55.10 6379 masterauth &quot;sunhao123&quot; bind 0.0.0.0</code></pre></li></ol><h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><p>æŒ‰å¦‚ä¸‹é¡ºåºä¾æ¬¡å¯åŠ¨æœåŠ¡ï¼š</p><pre><code>redis-server /opt/redis-cluster/redis_master_6379.conf redis-server /opt/redis-cluster/redis_slave_6380.conf redis-server /opt/redis-cluster/redis_slave_6381.conf redis-sentinel /opt/redis-cluster/sentinel_63791.conf redis-sentinel /opt/redis-cluster/sentinel_63792.conf </code></pre><h2 id="æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€"><a href="#æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€"></a>æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€</h2><ol><li><p>æŸ¥çœ‹å…¨éƒ¨èŠ‚ç‚¹çŠ¶æ€</p><pre><code> [root@CentOS-3 redis-cluster]# ps aux | grep redis root      1782  0.0  0.0 103252   824 pts/4    S+   21:36   0:00 grep redis root     25331  0.1  0.3 133528  7648 ?        Ssl  18:06   0:20 redis-server 0.0.0.0:6380                             root     25336  0.1  0.5 135576  9720 ?        Ssl  18:06   0:21 redis-server 0.0.0.0:6381                             root     29303  0.2  0.4 133524  7700 ?        Ssl  18:27   0:32 redis-sentinel *:63791 [sentinel]                     root     29308  0.2  0.4 133524  7704 ?        Ssl  18:27   0:33 redis-sentinel *:63792 [sentinel]                     root     29486  0.1  0.3 133528  7648 ?        Ssl  18:28   0:18 redis-server 0.0.0.0:6379 </code></pre></li><li><p>æŸ¥çœ‹masterçŠ¶æ€</p><pre><code> [root@CentOS-3 redis-cluster]# redis-cli -h 10.211.55.10 -p 6379 10.211.55.10:6379&gt; auth test123 OK 10.211.55.10:6379&gt; info replication # Replication role:master connected_slaves:2 slave0:ip=10.211.55.10,port=6380,state=online,offset=1568095,lag=1 slave1:ip=10.211.55.10,port=6381,state=online,offset=1568095,lag=1 master_repl_offset:1568095 repl_backlog_active:1 repl_backlog_size:1048576 repl_backlog_first_byte_offset:519520 repl_backlog_histlen:1048576 10.211.55.10:6379&gt;  </code></pre></li><li><p>æŸ¥çœ‹slaveçš„çŠ¶æ€ï¼š</p><pre><code> [root@CentOS-3 redis-cluster]# redis-cli -h 10.211.55.10 -p 6380 10.211.55.10:6380&gt; auth test123 OK 10.211.55.10:6380&gt; info replication # Replication role:slave master_host:10.211.55.10 master_port:6379 master_link_status:up master_last_io_seconds_ago:1 master_sync_in_progress:0 slave_repl_offset:1578354 slave_priority:100 slave_read_only:1 connected_slaves:0 master_repl_offset:0 repl_backlog_active:0 repl_backlog_size:1048576 repl_backlog_first_byte_offset:0 repl_backlog_histlen:0 10.211.55.10:6380&gt; </code></pre></li><li><p>æŸ¥çœ‹sentinelçš„çŠ¶æ€ï¼š</p><pre><code> [root@CentOS-3 redis-cluster]# redis-cli -h 10.211.55.10 -p 63791 10.211.55.10:63791&gt; info sentinel # Sentinel sentinel_masters:1 sentinel_tilt:0 sentinel_running_scripts:0 sentinel_scripts_queue_length:0 sentinel_simulate_failure_flags:0 master0:name=master-1,status=ok,address=10.211.55.10:6379,slaves=2,sentinels=2 10.211.55.10:63791&gt;</code></pre></li></ol><h2 id="éªŒè¯redis-sentinelçš„ä¸»ä»åˆ‡æ¢ï¼š"><a href="#éªŒè¯redis-sentinelçš„ä¸»ä»åˆ‡æ¢ï¼š" class="headerlink" title="éªŒè¯redis sentinelçš„ä¸»ä»åˆ‡æ¢ï¼š"></a>éªŒè¯redis sentinelçš„ä¸»ä»åˆ‡æ¢ï¼š</h2><ol><li><p>é¦–å…ˆå…³é—­masterèŠ‚ç‚¹ï¼Œå³killæ‰masterè¿›ç¨‹</p></li><li><p>æŸ¥çœ‹sentinelæœåŠ¡ï¼Œå‘ç°ç«¯å£6381å‡çº§ä¸ºmasterèŠ‚ç‚¹ï¼Œè¿™æ—¶sentinelå®Œæˆæ•…éšœè‡ªåŠ¨åˆ‡æ¢ã€‚</p><pre><code> [root@CentOS-3 redis-cluster]# redis-cli -h 10.211.55.10 -p 63791 10.211.55.10:63791&gt; info sentinel # Sentinel sentinel_masters:1 sentinel_tilt:0 sentinel_running_scripts:0 sentinel_scripts_queue_length:0 sentinel_simulate_failure_flags:0 master0:name=master-1,status=ok,address=10.211.55.10:6381,slaves=2,sentinels=2 10.211.55.10:63791&gt; </code></pre></li><li><p>å¯åŠ¨åˆšæ‰è¢«shutdownçš„6379æœåŠ¡å¹¶æŸ¥çœ‹ï¼Œå‘ç°å®ƒå˜æˆäº†slaveæœåŠ¡ã€‚</p><pre><code> [root@CentOS-3 redis-cluster]# redis-cli -h 10.211.55.10 -p 6379 10.211.55.10:6379&gt; auth test123 OK 10.211.55.10:6379&gt; info replication # Replication role:slave master_host:10.211.55.10 master_port:6381 master_link_status:up master_last_io_seconds_ago:2 master_sync_in_progress:0 slave_repl_offset:15074 slave_priority:100 slave_read_only:1 connected_slaves:0 master_repl_offset:0 repl_backlog_active:0 repl_backlog_size:1048576 repl_backlog_first_byte_offset:0 repl_backlog_histlen:0 10.211.55.10:6379&gt;</code></pre></li></ol><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><ol><li><p>Redisæ­å»ºsentinel,æ— æ³•ä¸»ä»è‡ªåŠ¨åˆ‡æ¢,ä¸€ç›´å¡åœ¨-sdown sentinel</p><p> redis-sentinelæœ‰ä¿æŠ¤æ¨¡å¼ï¼Œæ‰€ä»¥è¦å°†è¿™ä¸ªæ¨¡å—å…³é—­ï¼</p><pre><code> protected-mode no</code></pre></li><li><p>redis-sentinelé…ç½®é¡¹è¯¦ç»†è¯´æ˜</p><p> å‚è€ƒ<a href="http://blog.csdn.net/a1282379904/article/details/52335051">é“¾æ¥</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡Atlaså®ç°MySQLè¯»å†™åˆ†ç¦»</title>
      <link href="/2017/05/23/shu-ju-ku/atlas-mysql/"/>
      <url>/2017/05/23/shu-ju-ku/atlas-mysql/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å…¬å¸é¡¹ç›®è¦æ±‚MySQLé«˜å¯ç”¨ï¼ŒåŠ ä¸Šä»¥å‰å…¬å¸å¬è¿‡QiHoo360çš„Atlasï¼Œæ‰€ä»¥å°±å°è¯•æ­å»ºäº†ä¸€ä¸ªMySQLè¯»å†™åˆ†ç¦»ï¼Œå¹¶ä¸”é«˜å¯ç”¨çš„ã€‚</p></blockquote><span id="more"></span><h2 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h2><ol><li>å‡†å¤‡4å°æœºå™¨ï¼Œç³»ç»Ÿä¸º<code>CentOS release 6.6</code></li><li>Ipåˆ†åˆ«ä¸º<code>192.168.20.121</code>ã€<code>192.168.20.122</code>ã€<code>192.168.20.123</code>ã€<code>192.168.20.124</code></li><li>4å°æœºå™¨åˆ†åˆ«ä½œä¸º<code>Atlasä»£ç†æœåŠ¡</code>ï¼Œ<code>master MySQL</code>ï¼Œ<code>slave MySQL 1</code>ï¼Œ<code>slave MySQL 2</code></li><li>ä¸‹è½½QiHoo360çš„Atlas <a href="https://github.com/Qihoo360/Atlas/releases">åœ°å€</a></li></ol><h2 id="å®‰è£…Atlas"><a href="#å®‰è£…Atlas" class="headerlink" title="å®‰è£…Atlas"></a>å®‰è£…Atlas</h2><ol><li><p>ä¸‹è½½å¾—åˆ°<code>Atlas-XX.el6.x86_64.rpm</code>å®‰è£…æ–‡ä»¶</p></li><li><p><code>sudo rpm â€“i Atlas-XX.el6.x86_64.rpm</code>å®‰è£…</p></li><li><p>å®‰è£…åœ¨<code>/usr/local/mysql-proxy</code></p></li><li><p>å®‰è£…ç›®å½•åˆ†æ</p><ul><li><code>bin</code><ul><li>å¯æ‰§è¡Œæ–‡ä»¶</li><li><code>encrypt</code>ç”¨æ¥åŠ å¯†å¯†ç ï¼Œåé¢ä¼šç”¨åˆ°</li><li><code>mysql-proxy</code>æ˜¯MySQLè‡ªå·±çš„è¯»å†™åˆ†ç¦»ä»£ç†</li><li><code>mysql-proxyd</code>æ“ä½œAtlas</li><li><code>VERSION</code></li></ul></li><li><code>conf</code><ul><li><code>test.cnf</code>é…ç½®æ–‡ä»¶</li><li>ä¸€ä¸ªæ–‡ä»¶ä¸ºä¸€ä¸ªå®ä¾‹ï¼Œå®ä¾‹åå³æ–‡ä»¶åï¼Œå¯åŠ¨éœ€è¦å¸¦ä¸Šè¿™ä¸ªå®ä¾‹å</li></ul></li><li><code>lib</code>ä¾èµ–åŒ…</li><li><code>log</code>è®°å½•æ—¥å¿—</li></ul></li><li><p>å¯åŠ¨å‘½ä»¤ï¼š<code>/usr/local/mysql-proxy/bin/mysql-proxyd [å®ä¾‹å] start</code></p></li><li><p>åœæ­¢å‘½ä»¤ï¼š<code>/usr/local/mysql-proxy/bin/mysql-proxyd [å®ä¾‹å] stop</code></p></li><li><p>åŒç†ï¼Œ<code>restart</code>ä¸ºé‡å¯ï¼Œ<code>status</code>ä¸ºæŸ¥çœ‹çŠ¶æ€</p></li><li><p>é…ç½®æ–‡ä»¶è§£é‡Š</p><p> è¯·æŸ¥çœ‹<a href="https://github.com/Qihoo360/Atlas/wiki/Atlas%E7%9A%84%E5%AE%89%E8%A3%85">å®˜æ–¹æ–‡æ¡£</a></p></li></ol><h2 id="æ•°æ®åº“é…ç½®"><a href="#æ•°æ®åº“é…ç½®" class="headerlink" title="æ•°æ®åº“é…ç½®"></a>æ•°æ®åº“é…ç½®</h2><ol><li><p>1å°master2å°slaveï¼Œéƒ½è¦é…ç½®ç›¸åŒçš„ç”¨æˆ·åå¯†ç ï¼Œä¸”éƒ½è¦å¯ä»¥è¿œç¨‹è®¿é—®</p></li><li><p>åˆ†åˆ«è¿›å…¥3å°æœåŠ¡å™¨ï¼Œåˆ›å»ºç›¸åŒçš„ç”¨æˆ·åå¯†ç ï¼Œåˆ›å»ºæ•°æ®åº“<code>test</code>ï¼Œè®¾ç½®æƒé™</p><pre><code> CREATE USER &#39;test&#39;@&#39;%&#39; IDENTIFIED BY &#39;test123&#39;; CREATE USER &#39;test&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;test123&#39;; grant all privileges on test.* to &#39;test&#39;@&#39;%&#39; identified by &#39;test123&#39;; grant all privileges on test.* to &#39;test&#39;@&#39;localhost&#39; identified by &#39;test123&#39;; flush privileges;</code></pre></li><li><p>ä¸»ä»æ•°æ®åº“é…ç½®</p><ol><li>é…ç½®masteræœåŠ¡å™¨<ul><li><p>æ‰¾åˆ°MySQLé…ç½®æ–‡ä»¶<code>my.cnf</code>ï¼Œä¸€èˆ¬åœ¨<code>etc</code>ç›®å½•ä¸‹</p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><pre><code>  [mysqld]  # ä¸€äº›å…¶ä»–é…ç½®  ...       #ä¸»ä»å¤åˆ¶é…ç½®    innodb_flush_log_at_trx_commit=1    sync_binlog=1    #éœ€è¦å¤‡ä»½çš„æ•°æ®åº“  binlog-do-db=test  #ä¸éœ€è¦å¤‡ä»½çš„æ•°æ®åº“  binlog-ignore-db=mysql        #å¯åŠ¨äºŒè¿›åˆ¶æ–‡ä»¶    log-bin=mysql-bin        #æœåŠ¡å™¨ID    server-id=1        # Disabling symbolic-links is recommended to prevent assorted security risks    symbolic-links=0</code></pre></li><li><p>é‡å¯æ•°æ®åº“<code>service mysql restart</code></p></li><li><p>è¿›å…¥æ•°æ®åº“ï¼Œé…ç½®ä¸»ä»å¤åˆ¶çš„æƒé™</p><pre><code>  mysql -uroot -p123456  grant replication slave on *.* to &#39;test&#39;@&#39;127.0.0.1&#39; identified by &#39;test123&#39;;</code></pre></li><li><p>æŸ¥çœ‹ä¸»æ•°æ®åº“ä¿¡æ¯ï¼Œè®°ä½ä¸‹é¢çš„<code>File</code>ä¸<code>Position</code>çš„ä¿¡æ¯ï¼Œå®ƒä»¬æ˜¯ç”¨æ¥é…ç½®ä»æ•°æ®åº“çš„å…³é”®ä¿¡æ¯ã€‚</p><pre><code>  mysql&gt; show master status;  +------------------+----------+--------------+------------------+  | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |  +------------------+----------+--------------+------------------+  | mysql-bin.000002 | 17620976 | test         | mysql            |  +------------------+----------+--------------+------------------+  1 row in set (0.00 sec)</code></pre></li></ul></li><li>é…ç½®ä¸¤å°salveæœåŠ¡å™¨<ul><li><p>æ‰¾åˆ°é…ç½®æ–‡ä»¶<code>my.cnf</code></p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><pre><code>  [mysqld]  # ä¸€äº›å…¶ä»–é…ç½®  ...     # å‡ å°æœåŠ¡å™¨ä¸èƒ½ä¸€æ ·  server-id=2    # Disabling symbolic-links is recommended to prevent assorted security risks  symbolic-links=0</code></pre></li><li><p>è¿›å…¥æ•°æ®åº“ï¼Œé…ç½®ä»æ•°æ®åº“çš„ä¿¡æ¯ï¼Œè¿™é‡Œè¾“å…¥åˆšæ‰è®°å½•ä¸‹æ¥çš„<code>File</code>ä¸<code>Position</code>çš„ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š</p><pre><code>          # masteræ•°æ®åº“çš„ip  mysql&gt; change master to master_host=&#39;192.168.20.122&#39;,          # masterçš„ç”¨æˆ·å      -&gt; master_user=&#39;buck&#39;,          # å¯†ç       -&gt; master_password=&#39;hello&#39;,          # ç«¯å£      -&gt; master_port=3306,          # masteræ•°æ®åº“çš„`File `      -&gt; master_log_file=&#39;mysql-bin.000002&#39;,          # masteræ•°æ®åº“çš„`Position`      -&gt; master_log_pos=17620976,      -&gt; master_connect_retry=10;</code></pre></li><li><p>å¯åŠ¨è¿›ç¨‹</p><pre><code>  mysql&gt; start slave;  Query OK, 0 rows affected (0.00 sec)</code></pre></li><li><p>æ£€æŸ¥ä¸»ä»å¤åˆ¶çŠ¶æ€ï¼Œè¦çœ‹åˆ°ä¸‹åˆ—<code>Slave_IO_Running</code>ã€<code>Slave_SQL_Running </code>çš„ä¿¡æ¯ä¸­ï¼Œä¸¤ä¸ªéƒ½æ˜¯<code>Yes</code>ï¼Œæ‰è¯´æ˜ä¸»ä»è¿æ¥æ­£ç¡®ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ˜¯Noï¼Œéœ€è¦é‡æ–°ç¡®å®šåˆšæ‰è®°å½•çš„æ—¥å¿—ä¿¡æ¯ï¼Œåœæ‰â€œstop slaveâ€é‡æ–°è¿›è¡Œé…ç½®ä¸»ä»è¿æ¥ã€‚</p><pre><code>  mysql&gt; show slave status \G;  *************************** 1. row ***************************                 Slave_IO_State: Waiting for master to send event                    Master_Host: 192.168.246.134                    Master_User: buck                    Master_Port: 3306                  Connect_Retry: 10                Master_Log_File: mysql-bin.000002            Read_Master_Log_Pos: 17620976                 Relay_Log_File: mysqld-relay-bin.000002                  Relay_Log_Pos: 251          Relay_Master_Log_File: mysql-bin.000002               Slave_IO_Running: Yes              Slave_SQL_Running: Yes                Replicate_Do_DB:             Replicate_Ignore_DB:              Replicate_Do_Table:          Replicate_Ignore_Table:         Replicate_Wild_Do_Table:     Replicate_Wild_Ignore_Table:                      Last_Errno: 0                     Last_Error:                    Skip_Counter: 0            Exec_Master_Log_Pos: 17620976                Relay_Log_Space: 407                Until_Condition: None                 Until_Log_File:                   Until_Log_Pos: 0             Master_SSL_Allowed: No             Master_SSL_CA_File:              Master_SSL_CA_Path:                 Master_SSL_Cert:               Master_SSL_Cipher:                  Master_SSL_Key:           Seconds_Behind_Master: 0  Master_SSL_Verify_Server_Cert: No                  Last_IO_Errno: 0                  Last_IO_Error:                  Last_SQL_Errno: 0                 Last_SQL_Error:   1 row in set (0.00 sec)    ERROR:   No query specified</code></pre></li></ul></li></ol></li></ol><h2 id="Atlasé…ç½®"><a href="#Atlasé…ç½®" class="headerlink" title="Atlasé…ç½®"></a>Atlasé…ç½®</h2><ol><li><p>ä½¿ç”¨Atlasçš„åŠ å¯†å·¥å…·å¯¹ä¸Šé¢ç”¨æˆ·çš„å¯†ç è¿›è¡ŒåŠ å¯†</p><pre><code> /usr/local/mysql-proxy/bin/encrypt test123 29uENYYsKLo=</code></pre></li><li><p>é…ç½®atlas</p><ul><li><p>è¿™æ˜¯ç”¨æ¥ç™»å½•åˆ°Atlasçš„ç®¡ç†å‘˜çš„è´¦å·ä¸å¯†ç ï¼Œä¸ä¹‹å¯¹åº”çš„æ˜¯<code>Atlasç›‘å¬çš„ç®¡ç†æ¥å£IPå’Œç«¯å£</code>ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦è®¾ç½®ç®¡ç†å‘˜ç™»å½•çš„ç«¯å£ï¼Œæ‰èƒ½è¿›å…¥ç®¡ç†å‘˜ç•Œé¢ï¼Œé»˜è®¤ç«¯å£æ˜¯<code>2345</code>ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šIPç™»å½•ï¼ŒæŒ‡å®šIPåï¼Œå…¶ä»–çš„IPæ— æ³•è®¿é—®ç®¡ç†å‘˜çš„å‘½ä»¤ç•Œé¢ã€‚æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰æŒ‡å®šIPå’Œç«¯å£ç™»å½•ã€‚</p></li><li><p>é…ç½®ä¸»æ•°æ®çš„åœ°å€ä¸ä»æ•°æ®åº“çš„åœ°å€ï¼Œè¿™é‡Œé…ç½®çš„ä¸»æ•°æ®åº“æ˜¯122ï¼Œä»æ•°æ®åº“æ˜¯123ã€124</p><pre><code>  #Atlasåç«¯è¿æ¥çš„MySQLä¸»åº“çš„IPå’Œç«¯å£ï¼Œå¯è®¾ç½®å¤šé¡¹ï¼Œç”¨é€—å·åˆ†éš”  proxy-backend-addresses = 192.168.20.122:3306  #Atlasåç«¯è¿æ¥çš„MySQLä»åº“çš„IPå’Œç«¯å£ï¼Œ@åé¢çš„æ•°å­—ä»£è¡¨æƒé‡ï¼Œç”¨æ¥ä½œè´Ÿè½½å‡è¡¡ï¼Œè‹¥çœç•¥åˆ™é»˜è®¤ä¸º1ï¼Œå¯è®¾ç½®å¤šé¡¹ï¼Œç”¨é€—å·åˆ†éš”  proxy-read-only-backend-addresses = 192.168.20.123:3306@1,192.168.20.124:3306@2</code></pre></li><li><p>è¿™ä¸ªæ˜¯ç”¨æ¥é…ç½®MySQLçš„è´¦æˆ·ä¸å¯†ç çš„ï¼Œå°±æ˜¯ä¸Šé¢åˆ›å»ºçš„ç”¨æˆ·ï¼Œç”¨æˆ·åæ˜¯<code>test</code>,å¯†ç æ˜¯<code>test123</code>,åˆšåˆšä½¿ç”¨Atlasæä¾›çš„å·¥å…·ç”Ÿæˆäº†å¯¹åº”çš„åŠ å¯†å¯†ç </p><pre><code>  pwds = buck:RePBqJ+5gI4=</code></pre></li></ul></li><li><p>å¯åŠ¨Atlas</p><pre><code> [root@localhost /usr/local/mysql-proxy/bin]# ./mysql-proxyd test start OK: MySQL-Proxy of test is started</code></pre></li></ol><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><ol><li><p>è¿›å…¥atlasçš„ç®¡ç†ç•Œé¢</p><pre><code> [root@localhost ~]#mysql -h127.0.0.1 -P2345 -uuser -ppwd Welcome to the MySQL monitor.  Commands end with ; or \g. Your MySQL connection id is 1 Server version: 5.0.99-agent-admin  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.  Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners.  Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.  mysql&gt; select * from help; +----------------------------+---------------------------------------------------------+ | command                    | description                                             | +----------------------------+---------------------------------------------------------+ | SELECT * FROM help         | shows this help                                         | | SELECT * FROM backends     | lists the backends and their state                      | | SET OFFLINE $backend_id    | offline backend server, $backend_id is backend_ndx&#39;s id | | SET ONLINE $backend_id     | online backend server, ...                              | | ADD MASTER $backend        | example: &quot;add master 127.0.0.1:3306&quot;, ...               | | ADD SLAVE $backend         | example: &quot;add slave 127.0.0.1:3306&quot;, ...                | | REMOVE BACKEND $backend_id | example: &quot;remove backend 1&quot;, ...                        | | SELECT * FROM clients      | lists the clients                                       | | ADD CLIENT $client         | example: &quot;add client 192.168.1.2&quot;, ...                  | | REMOVE CLIENT $client      | example: &quot;remove client 192.168.1.2&quot;, ...               | | SELECT * FROM pwds         | lists the pwds                                          | | ADD PWD $pwd               | example: &quot;add pwd user:raw_password&quot;, ...               | | ADD ENPWD $pwd             | example: &quot;add enpwd user:encrypted_password&quot;, ...       | | REMOVE PWD $pwd            | example: &quot;remove pwd user&quot;, ...                         | | SAVE CONFIG                | save the backends to config file                        | | SELECT VERSION             | display the version of Atlas                            | +----------------------------+---------------------------------------------------------+ 16 rows in set (0.00 sec)  mysql&gt; </code></pre></li><li><p>ä½¿ç”¨å·¥ä½œæ¥å£æ¥è®¿é—®</p><pre><code> [root@localhost ~]#mysql -h127.0.0.1 -P1234 -utest -ptest123 Welcome to the MySQL monitor.  Commands end with ; or \g. Your MySQL connection id is 34 Server version: 5.0.81-log MySQL Community Server (GPL)  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.  Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners.  Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.  mysql&gt; show databases; +--------------------+ | Database           | +--------------------+ | information_schema | | mysql              | | performance_schema | | test               | +--------------------+ 4 rows in set (0.00 sec)  mysql&gt;</code></pre></li></ol><h2 id="ä½¿ç”¨å¯è§†åŒ–ç®¡ç†å·¥å…·Navicatç™»å½•"><a href="#ä½¿ç”¨å¯è§†åŒ–ç®¡ç†å·¥å…·Navicatç™»å½•" class="headerlink" title="ä½¿ç”¨å¯è§†åŒ–ç®¡ç†å·¥å…·Navicatç™»å½•"></a>ä½¿ç”¨å¯è§†åŒ–ç®¡ç†å·¥å…·<code>Navicat</code>ç™»å½•</h2><p>ä½¿ç”¨ç”¨æˆ·å<code>test</code>ã€å¯†ç <code>test123</code>ã€ç«¯å£<code>1234</code>ã€åœ°å€<code>192.168.20.121</code>æ­£å¸¸ç™»å½•ã€‚æ³¨æ„ï¼Œè¿™é‡Œç™»å½•çš„æ˜¯atlasæœåŠ¡å™¨ï¼Œä¸å†æ˜¯ä»»ä½•ä¸€ä¸ªMySQLæœåŠ¡å™¨</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> MySQL </tag>
            
            <tag> Atlas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æ°ä¼¦Jayæ‰€æœ‰ä¸“è¾‘</title>
      <link href="/2016/08/30/qi-ta/jay/"/>
      <url>/2016/08/30/qi-ta/jay/</url>
      
        <content type="html"><![CDATA[<h2 id="Jay-2000"><a href="#Jay-2000" class="headerlink" title="Jay(2000)"></a>Jay(2000)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€ŠJayã€‹æ˜¯å‘¨æ°ä¼¦jayçš„ç¬¬ä¸€éƒ¨ä¸“è¾‘ï¼Œç”±å‘¨æ°ä¼¦åˆ¶ä½œã€ä½œæ›²ï¼Œæ–¹æ–‡å±±ã€å¾è‹¥ç‘„ç­‰äººä½œè¯ï¼Œæ”¶å½•äº†10é¦–æ­Œæ›²ï¼Œ2000å¹´11æœˆ7æ—¥å‘è¡Œã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>å¯çˆ±å¥³äºº</li><li>å®Œç¾ä¸»ä¹‰</li><li>æ˜Ÿæ™´</li><li>å¨˜å­</li><li>æ–—ç‰›</li><li>é»‘è‰²å¹½é»˜</li><li>ä¼Šæ–¯å¦å ¡</li><li>å°åœ°å®‰è€æ–‘é¸ </li><li>é¾™å·é£</li><li>åæ–¹å‘çš„é’Ÿ</li></ul></li></ol><span id="more"></span><h2 id="èŒƒç‰¹è¥¿-2001"><a href="#èŒƒç‰¹è¥¿-2001" class="headerlink" title="èŒƒç‰¹è¥¿(2001)"></a>èŒƒç‰¹è¥¿(2001)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€ŠèŒƒç‰¹è¥¿ã€‹æ˜¯å‘¨æ°ä¼¦2001å¹´å‘è¡Œçš„ä¸“è¾‘ï¼Œå…±æ”¶å½•äº†çˆ±åœ¨è¥¿å…ƒå‰ã€çˆ¸æˆ‘å›æ¥äº†ã€ç®€å•çˆ±ç­‰10é¦–æ­Œæ›²ï¼Œä¸“è¾‘çš„ç›‘åˆ¶ä¹Ÿç”±å‘¨æ°ä¼¦jayæ‹…ä»»ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>çˆ±åœ¨è¥¿å…ƒå‰</li><li>çˆ¸æˆ‘å›æ¥äº†</li><li>ç®€å•çˆ±</li><li>å¿è€…</li><li>å¼€ä¸äº†å£</li><li>ä¸Šæµ·ä¸€ä¹å››ä¸‰</li><li>å¯¹ä¸èµ·</li><li>å¨å»‰å¤å ¡</li><li>åŒæˆªæ£</li><li>å®‰é™</li></ul></li></ol><h2 id="å…«åº¦ç©ºé—´-2002"><a href="#å…«åº¦ç©ºé—´-2002" class="headerlink" title="å…«åº¦ç©ºé—´(2002)"></a>å…«åº¦ç©ºé—´(2002)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šå…«åº¦ç©ºé—´ã€‹æ˜¯å‘¨æ°ä¼¦å‘è¡Œçš„ç¬¬3å¼ ä¸“è¾‘ï¼Œç”±å‘¨æ°ä¼¦ä½œæ›²å¹¶æ‹…ä»»åˆ¶ä½œäººï¼Œæ–¹æ–‡å±±ã€è®¸ä¸–æ˜Œã€åˆ˜è€•å®ã€å‘¨æ°ä¼¦ä½œè¯ã€‚ä¸“è¾‘äº2002å¹´7æœˆå‘è¡Œï¼Œå…±æ”¶å½•10é¦–æ­Œæ›²ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>åŠå…½äºº </li><li>åŠå²›é“ç›’  </li><li>æš—å·  </li><li>é¾™æ‹³  </li><li>ç«è½¦å¨ä½å»   </li><li>åˆ†è£‚  </li><li>çˆ·çˆ·æ³¡çš„èŒ¶   </li><li>å›åˆ°è¿‡å»  </li><li>ç±³å…°çš„å°é“åŒ   </li><li>æœ€åçš„æˆ˜å½¹</li></ul></li></ol><h2 id="å¶æƒ ç¾-2003"><a href="#å¶æƒ ç¾-2003" class="headerlink" title="å¶æƒ ç¾(2003)"></a>å¶æƒ ç¾(2003)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šå¶æƒ ç¾ã€‹æ˜¯å‘¨æ°ä¼¦ä»¥ä»–å¦ˆå¦ˆçš„åå­—å‘½åçš„ä¸€å¼ ä¸“è¾‘ã€‚ç”±äºã€Šå¶æƒ ç¾ã€‹ä¹‹å‰çš„é‚£å¼ ä¸“è¾‘å¸‚åœºååº”ä¸ç”šç†æƒ³ï¼Œå‘¨æ°ä¼¦æ±‚æ–°æ±‚å˜çš„éŸ³ä¹ç†å¿µåœ¨è¿™å¼ ä¸“è¾‘é‡Œæ˜¾å¾—å¼‚å¸¸æ¸…æ™°ã€‚å‘¨æ°ä¼¦ä¸ä»…ä¸ºä¸“è¾‘çš„å¤šé¦–æ­Œæ›²ä½œè¯ã€ä½œæ›²ï¼Œæ›´æ˜¯æ‹…å½“èµ·äº†ä¸“è¾‘çš„åˆ¶ä½œäººã€‚ä¸“è¾‘é™¤äº†æœ‰å‘¨æ°ä¼¦å’Œå¥½å‹æ–¹æ–‡å±±çš„åˆ›ä½œä¹‹å¤–ï¼Œé’Ÿå…´æ°‘ã€æ´ªæ•¬å°§ã€æ—è¿ˆå¯ã€æ¨å¤§çº¬ç­‰éŸ³ä¹äººä¹Ÿå‚ä¸çš„ä¸“è¾‘çš„åˆ¶ä½œã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p></li></ol><ul><li>ä»¥çˆ¶ä¹‹å    </li><li>æ‡¦å¤«  </li><li>æ™´å¤©  </li><li>ä¸‰å¹´äºŒç­    </li><li>ä¸œé£ç ´ </li><li>ä½ å¬å¾—åˆ°    </li><li>åŒä¸€ç§è°ƒè°ƒ   </li><li>å¥¹çš„ç«æ¯›    </li><li>çˆ±æƒ…æ‚¬å´–    </li><li>æ¢¯ç”°  </li><li>åŒåˆ€</li></ul><h2 id="ä¸ƒé‡Œé¦™-2004"><a href="#ä¸ƒé‡Œé¦™-2004" class="headerlink" title="ä¸ƒé‡Œé¦™(2004)"></a>ä¸ƒé‡Œé¦™(2004)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šä¸ƒé‡Œé¦™ã€‹æ˜¯å‘¨æ°ä¼¦2004å¹´å‘è¡Œçš„ä¸“è¾‘ï¼Œå…±æ”¶å½•äº†10é¦–æ­Œæ›²ã€‚ä¸“è¾‘çš„ç›‘åˆ¶ç”±å‘¨æ°ä¼¦æ‹…ä»»ã€‚ä¸“è¾‘ä¸­çš„æ­Œæ›²å…¨éƒ¨ç”±å‘¨æ°ä¼¦ä½œæ›²ï¼Œä½œè¯ç”±æ–¹æ–‡å±±ã€å‘¨æ°ä¼¦ç­‰äººå®Œæˆã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>æˆ‘çš„åœ°ç›˜  </li><li>ä¸ƒé‡Œé¦™   </li><li>å€Ÿå£    </li><li>å¤–å©†</li><li>å°†å†›</li><li>ææµ…</li><li>ä¹±èˆæ˜¥ç§‹  </li><li>å›°å…½ä¹‹æ–—  </li><li>å›­æ¸¸ä¼š</li><li>æ­¢æˆ˜ä¹‹æ®‡</li></ul></li></ol><h2 id="åä¸€æœˆçš„è§é‚¦-2005"><a href="#åä¸€æœˆçš„è§é‚¦-2005" class="headerlink" title="åä¸€æœˆçš„è§é‚¦(2005)"></a>åä¸€æœˆçš„è§é‚¦(2005)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šåä¸€æœˆçš„è§é‚¦ã€‹æ˜¯å‘¨æ°ä¼¦2005å¹´11æœˆå‘è¡Œçš„ä¸“è¾‘ã€‚ä½œæ›²äººä¸ºå‘¨æ°ä¼¦ï¼Œä½œè¯äººä¸ºå‘¨æ°ä¼¦ã€æ–¹æ–‡å±±ç­‰äººã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>å¤œæ›²   </li><li>è“è‰²é£æš´</li><li>å‘å¦‚é›ª </li><li>é»‘è‰²æ¯›è¡£</li><li>å››é¢æ¥šæ­Œ</li><li>æ«     </li><li>æµªæ¼«æ‰‹æœº</li><li>é€†é³   </li><li>éº¦èŠ½ç³– </li><li>çŠç‘šæµ· </li><li>é£˜ç§»   </li><li>ä¸€è·¯å‘åŒ—</li></ul></li></ol><h2 id="ä¾ç„¶èŒƒç‰¹è¥¿-2006"><a href="#ä¾ç„¶èŒƒç‰¹è¥¿-2006" class="headerlink" title="ä¾ç„¶èŒƒç‰¹è¥¿(2006)"></a>ä¾ç„¶èŒƒç‰¹è¥¿(2006)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šä¾ç„¶èŒƒç‰¹è¥¿ã€‹æ˜¯å‘¨æ°ä¼¦äº2006å¹´å‘è¡Œçš„ä¸“è¾‘ï¼Œå…±æ”¶å½•äº†10é¦–æ­Œæ›²ã€‚è¯¥ä¸“è¾‘çš„åˆ¶ä½œäººå’ŒéŸ³ä¹æ€»ç›‘ç”±å‘¨æ°ä¼¦æ‹…ä»»ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>å¤œçš„ç¬¬ä¸ƒç« </li><li>å¬å¦ˆå¦ˆçš„è¯</li><li>åƒé‡Œä¹‹å¤–</li><li>æœ¬è‰çº²ç›®</li><li>é€€å</li><li>çº¢æ¨¡ä»¿</li><li>å¿ƒé›¨</li><li>ç™½è‰²é£è½¦</li><li>è¿·è¿­é¦™</li><li>èŠèŠ±å°</li></ul></li></ol><h2 id="æˆ‘å¾ˆå¿™-2007"><a href="#æˆ‘å¾ˆå¿™-2007" class="headerlink" title="æˆ‘å¾ˆå¿™(2007)"></a>æˆ‘å¾ˆå¿™(2007)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šæˆ‘å¾ˆå¿™ã€‹æ˜¯å‘¨æ°ä¼¦2007å¹´11æœˆ2æ—¥å‘è¡Œçš„ç¬¬å…«å¼ ä¸“è¾‘ï¼Œå…±æ”¶å½•äº†10é¦–æ­Œæ›²ï¼Œç”±å‘¨æ°ä¼¦æ‹…ä»»ä¸“è¾‘çš„ç›‘åˆ¶ï¼Œå…¨ç¢Ÿ10é¦–æ­Œæ›²å‡ç”±å‘¨æ°ä¼¦ä½œæ›²ã€‚ä½œè¯æ–¹é¢ï¼Œå‘¨æ°ä¼¦è´Ÿè´£å…¶ä¸­2é¦–ï¼Œå…¶ä½™ä½œè¯å·¥ä½œç”±æ–¹æ–‡å±±ã€é»„ä¿Šéƒå®Œæˆã€‚ä¸“è¾‘å–åã€Šæˆ‘å¾ˆå¿™ã€‹ï¼Œå®é™…åæ˜ å‡ºä»–çš„ç”Ÿæ´»çŠ¶æ€ï¼Œå¿™ç€ç”µå½±å®£ä¼ ã€æ¼”å”±ä¼šã€æ‹å¹¿å‘Šã€æ–°ä¸“è¾‘ç­‰ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>ç‰›ä»”å¾ˆå¿™</li><li>å½©è™¹</li><li>é’èŠ±ç“·</li><li>é˜³å…‰å®…ç”·</li><li>è’²å…¬è‹±çš„çº¦å®š</li><li>æ— åŒ</li><li>æˆ‘ä¸é…</li><li>æ‰¯</li><li>ç”œç”œçš„</li><li>æœ€é•¿çš„ç”µå½±</li></ul></li></ol><h2 id="é­”æ°åº§-2008"><a href="#é­”æ°åº§-2008" class="headerlink" title="é­”æ°åº§(2008)"></a>é­”æ°åº§(2008)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šé­”æ°åº§ã€‹æ˜¯å‘¨æ°ä¼¦2008å¹´å‘è¡Œçš„ä¸“è¾‘ã€‚ä½œè¯è€…åŒ…æ‹¬æ–¹æ–‡å±±ã€å‘¨æ°ä¼¦ã€é»„ä¿Šéƒç­‰äººï¼Œç¼–æ›²è€…åŒ…æ‹¬é’Ÿå…´æ°‘ã€æ—è¿ˆå¯ã€é»„é›¨å‹‹ç­‰äººã€‚ã€Šé­”æ°åº§ã€‹ä¸“è¾‘çš„åå­—å–è‡ªå‘¨æ°ä¼¦æ‰€å±çš„æ‘©ç¾¯åº§çš„è°éŸ³ï¼Œä¸»æ‰“æ­Œã€Šç¨»é¦™ã€‹çš„çµæ„Ÿæ¥è‡ªå‘¨æ°ä¼¦å°æ—¶å€™çš„å›å¿†ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>é¾™æˆ˜éª‘å£«</li><li>ç»™æˆ‘ä¸€é¦–æ­Œçš„æ—¶é—´</li><li>è›‡èˆ</li><li>èŠ±æµ·</li><li>é­”æœ¯å…ˆç”Ÿ</li><li>è¯´å¥½çš„å¹¸ç¦å‘¢</li><li>å…°äº­åº</li><li>æµæµªè¯—äºº</li><li>æ—¶å…‰æœº</li><li>ä¹”å…‹å”å”</li><li>å‘¨æ°ä¼¦</li><li>ç¨»é¦™</li></ul></li></ol><h2 id="è·¨æ™‚ä»£-2010"><a href="#è·¨æ™‚ä»£-2010" class="headerlink" title="è·¨æ™‚ä»£(2010)"></a>è·¨æ™‚ä»£(2010)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šè·¨æ—¶ä»£ã€‹æ˜¯å‘¨æ°ä¼¦çš„ä¸“è¾‘ï¼Œä¸»è¦ç”±å‘¨æ°ä¼¦è´Ÿè´£å…¨éƒ¨ä½œæ›²å’Œåˆ¶ä½œï¼Œæ–¹æ–‡å±±ã€é»„ä¿Šéƒç­‰äººå¡«è¯ï¼Œæ”¶å½•äº†11é¦–æ­Œæ›²ã€‚å‘¨æ°ä¼¦å¸Œæœ›è‡ªå·±çš„éŸ³ä¹å°±åƒä¸“è¾‘å°é¢çš„å¸è¡€é¬¼ä¸€æ ·ï¼Œè·¨è¶Šæ—¶ä»£ä¹Ÿè¶…è¶Šä¸–ä»£ï¼Œå› æ­¤å‘½åä¸ºã€Šè·¨æ—¶ä»£ã€‹ã€‚é™¤äº†å‘¨æ°ä¼¦ï¼Œæ¨ç‘ä»£å’Œå·¨ç‚®ä¹Ÿåœ¨ä¸“è¾‘ä¸­å‹æƒ…çŒ®å£°ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>è·¨æ—¶ä»£</li><li>è¯´äº†å†è§</li><li>çƒŸèŠ±æ˜“å†·</li><li>å…è´¹æ•™å­¦å½•å½±å¸¦</li><li>å¥½ä¹…ä¸è§</li><li>é›¨ä¸‹ä¸€æ•´æ™š</li><li>å˜»å“ˆç©ºå§</li><li>æˆ‘è½æ³ªÂ·æƒ…ç»ªé›¶ç¢</li><li>çˆ±çš„é£è¡Œæ—¥è®°</li><li>è‡ªå¯¼è‡ªæ¼”</li><li>è¶…äººä¸ä¼šé£</li></ul></li></ol><h2 id="æƒŠå¹å·-2011"><a href="#æƒŠå¹å·-2011" class="headerlink" title="æƒŠå¹å·(2011)"></a>æƒŠå¹å·(2011)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€ŠæƒŠå¹å·ã€‹æ˜¯å‘¨æ°ä¼¦æ¨å‡ºçš„ç¬¬11å¼ ä¸“è¾‘ï¼Œ2011å¹´11æœˆ11æ—¥å‘è¡Œï¼Œç”±å‘¨æ°ä¼¦ä½œæ›²ï¼Œæ–¹æ–‡å±±ã€é»„ä¿Šéƒã€å”ä»åœ£ç­‰ä½œè¯ï¼Œå…±æ”¶å½•11é¦–æ­Œæ›²ã€‚è¯¥ä¸“è¾‘èåˆå¤šç§æ›²é£ï¼Œä»¥åŠä¸åŒå”±è…”ã€‚å¡é€šçš„ä¸“è¾‘å°é¢å…·æœ‰ç¾å¼æ¼«ç”»é£æ ¼ï¼Œå‘¨æ°ä¼¦åŒ–èº«ä¸ºæ°´æ‰‹ï¼Œé©¾é©­â€œæƒŠå¹å·â€èˆ¹èˆ°ï¼Œååœ¨èˆ¹æ²¿é’“é±¼ï¼Œå¿ƒæƒ³ç€é’“åˆ°ä»€ä¹ˆå¤§é±¼ï¼ŒåŸæ¥èƒŒåæœ‰ä¸€åªç« é±¼åœ¨æŠ“å¼„ä»–ï¼Œè¿™ä¹Ÿæ˜¯ã€ŠæƒŠå¹å·ã€‹çš„å‘½åç¼˜ç”±ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>æƒŠå¹å· </li><li>è¿·é­‚æ›²</li><li>Mine Mine  </li><li>å…¬ä¸»ç—…  </li><li>ä½ å¥½å—  </li><li>ç–—ä¼¤çƒ§è‚‰ç²½  </li><li>ç´ä¼¤  </li><li>æ°´æ‰‹æ€•æ°´  </li><li>ä¸–ç•Œæœªæœ«æ—¥ </li><li>çš®å½±æˆ </li><li>è¶…è·‘å¥³ç¥</li></ul></li></ol><h2 id="åäºŒæ–°ä½œ-2012"><a href="#åäºŒæ–°ä½œ-2012" class="headerlink" title="åäºŒæ–°ä½œ(2012)"></a>åäºŒæ–°ä½œ(2012)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Š12æ–°ä½œã€‹æ˜¯å‘¨æ°ä¼¦æ¨å‡ºçš„ç¬¬åäºŒå¼ ä¸ªäººä¸“è¾‘ï¼Œä¸“è¾‘ä¸­æ”¶å½•äº†å‘¨æ°ä¼¦çš„12é¦–ä½œå“ï¼Œäº2012å¹´12æœˆ28æ—¥å‘è¡Œã€‚è¯¥ä¸“è¾‘æ˜¯å‘¨æ°ä¼¦å‡ºé“12å¹´ä»¥æ¥çš„ç¬¬12å¼ ä¸“è¾‘ï¼Œå› æ­¤å–åä¸ºã€Š12æ–°ä½œã€‹ã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>å››å­£åˆ—è½¦  </li><li>æ‰‹è¯­    </li><li>å…¬å…¬åå¤´ç—› </li><li>æ˜æ˜å°±   </li><li>å‚»ç¬‘    </li><li>æ¯”è¾ƒå¤§çš„å¤§æç´ </li><li>çˆ±ä½ æ²¡å·® </li><li>çº¢å°˜å®¢æ ˆ  </li><li>æ¢¦æƒ³å¯åŠ¨  </li><li>å¤§ç¬¨é’Ÿ   </li><li>å“ªé‡Œéƒ½æ˜¯ä½  </li><li>ä¹Œå…‹ä¸½ä¸½</li></ul></li></ol><h2 id="å“å‘¦ï¼Œä¸é”™å“¦-2014"><a href="#å“å‘¦ï¼Œä¸é”™å“¦-2014" class="headerlink" title="å“å‘¦ï¼Œä¸é”™å“¦(2014)"></a>å“å‘¦ï¼Œä¸é”™å“¦(2014)</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šå“å‘¦ï¼Œä¸é”™å“¦ã€‹æ˜¯å‘¨æ°ä¼¦åœ¨2014å¹´12æœˆå‘è¡Œçš„ä¸€å¼ æ•°å­—éŸ³ä¹ä¸“è¾‘ï¼Œå…±æ”¶å½•äº†12é¦–æ­Œæ›²ã€‚è¯¥ä¸“è¾‘äº2014å¹´12æœˆ24æ—¥åœ¨QQéŸ³ä¹ä¸Šé¦–å‘ï¼Œå¹¶äº12æœˆ26æ—¥å…¨çƒåŒæ­¥å‘è¡Œã€‚</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>é˜³æ˜å±±       </li><li>çªƒçˆ±         </li><li>ç®—ä»€ä¹ˆç”·äºº    </li><li>å¤©æ¶¯è¿‡å®¢     </li><li>æ€ä¹ˆäº†       </li><li>ä¸€å£æ°”å…¨å¿µå¯¹  </li><li>æˆ‘è¦å¤å¤©     </li><li>æ‰‹å†™çš„ä»å‰    </li><li>é‹å­ç‰¹å¤§å·    </li><li>å¬çˆ¸çˆ¸çš„è¯    </li><li>ç¾äººé±¼       </li><li>å¬è§ä¸‹é›¨çš„å£°éŸ³</li></ul></li></ol><h2 id="å‘¨æ°ä¼¦çš„åºŠè¾¹æ•…äº‹"><a href="#å‘¨æ°ä¼¦çš„åºŠè¾¹æ•…äº‹" class="headerlink" title="å‘¨æ°ä¼¦çš„åºŠè¾¹æ•…äº‹"></a>å‘¨æ°ä¼¦çš„åºŠè¾¹æ•…äº‹</h2><ol><li><p>ä¸“è¾‘ç®€ä»‹ï¼š</p><p> ã€Šå‘¨æ°ä¼¦çš„åºŠè¾¹æ•…äº‹ã€‹æ˜¯ä¸­å›½å°æ¹¾æ­Œæ‰‹å‘¨æ°ä¼¦åˆ›ä½œæ¨å‡ºçš„ç¬¬14å¼ ä¸ªäººä¸“è¾‘ï¼Œäº2016å¹´6æœˆ24æ—¥æ­£å¼å‘è¡Œã€‚[åœ¨ä¸­å›½å¤§é™†åœ°åŒºå‘è¡Œæ—¶çš„å®ä½“ä¸“è¾‘åç§°ä¸ºã€Šå‘¨æ°ä¼¦çš„ç¡å‰æ•…äº‹ã€‹ï¼Œäº2016å¹´7æœˆ8æ—¥å‘è¡Œã€‚]</p></li><li><p>æ­Œæ›²åˆ—è¡¨</p><ul><li>åºŠè¾¹æ•…äº‹</li><li>è¯´èµ°å°±èµ°</li><li>ä¸€ç‚¹ç‚¹  </li><li>å‰ä¸–æƒ…äºº</li><li>è‹±é›„   </li><li>ä¸è¯¥   </li><li>åœŸè€³å…¶å†°æ·‡æ·‹    </li><li>å‘Šç™½æ°”çƒ        </li><li>Now You See Me </li><li>çˆ±æƒ…åºŸæŸ´</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´»éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢æ­å»ºè¿‡ç¨‹</title>
      <link href="/2016/03/21/gong-ju/blog-create/"/>
      <url>/2016/03/21/gong-ju/blog-create/</url>
      
        <content type="html"><![CDATA[<h1 id="å»ºç«™è¿‡ç¨‹"><a href="#å»ºç«™è¿‡ç¨‹" class="headerlink" title="å»ºç«™è¿‡ç¨‹"></a>å»ºç«™è¿‡ç¨‹</h1><h2 id="é€‰å‹"><a href="#é€‰å‹" class="headerlink" title="é€‰å‹"></a>é€‰å‹</h2><ol><li><p>æœ¬äººç§¯ç´¯äº†4å¹´å·¦å³çš„æŠ€æœ¯æ–‡æ¡£</p></li><li><p>è‹¦äºæ— å¤„ç®¡ç†</p></li><li><p>åŸå…ˆæƒ³åœ¨<a href="http://www.oschina.net/">å¼€æºä¸­å›½</a>ä¸Šåˆ›å»ºåšå®¢å†™å†™æ–‡ç« ,å¹¶ä¸”ä¹Ÿä»˜ä¹‹è¡ŒåŠ¨</p></li><li><p>åæ¥å‘ç°å°†è¿™ä¹ˆå¤šæ–‡æ¡£è½¬ç§»åˆ°å¼€æºä¸­å›½ä¸Šå¾—å·¥ä½œé‡å®åœ¨å¤ªå¤§äº†</p></li><li><p>Nä¹…ä¹‹å‰æƒ³å­¦ä¹ Node.JS</p></li><li><p>åœ¨åŒäº‹çš„æ¨èä¸‹,çŸ¥é“äº†Hexoè¿™ä¸ªä¸œè¥¿</p></li><li><p>è€Œä¸”æœ‰å¾ˆå¤šthemeå¯ä»¥ä½¿ç”¨,<a href="http://www.zhihu.com/question/24422335">æœ‰å“ªäº›å¥½çœ‹çš„ Hexo ä¸»é¢˜? - GitHub - çŸ¥ä¹</a></p></li><li><p>è€Œä¸”æ‰€æœ‰çš„æ–‡æ¡£éƒ½æ˜¯ç”¨markdownå»å†™çš„</p></li><li><p>markdownçš„è¯­æ³•å¾ˆç®€å•,å¾ˆå®¹æ˜“å…¥é—¨ä¸Šæ‰‹.<a href="http://www.appinn.com/markdown/">Markdown è¯­æ³•è¯´æ˜(ç®€ä½“ä¸­æ–‡ç‰ˆ)</a></p></li><li><p>é‚,é€‰ä¹‹.</p><p>PS: æ–‡æœ¬æ–‡æ¡£è½¬markdownçš„ä»£ä»·ä¹Ÿå¤§,ä½†æ˜¯å€¼å¾—!</p></li></ol><span id="more"></span><h2 id="ç¯å¢ƒæ­å»ºè¿‡ç¨‹"><a href="#ç¯å¢ƒæ­å»ºè¿‡ç¨‹" class="headerlink" title="ç¯å¢ƒæ­å»ºè¿‡ç¨‹"></a>ç¯å¢ƒæ­å»ºè¿‡ç¨‹</h2><ol><li>é¦–å…ˆåœ¨æœ¬åœ°æ­å»ºNode.JSå¼€å‘ç¯å¢ƒ<ul><li><p>å»Node.JS<a href="http://nodejs.org/">å®˜ç½‘</a>ä¸‹è½½æœ€æ–°ç‰ˆæœ¬Node.JS,<a href="https://nodejs.org/dist/v4.4.0/node-v4.4.0-darwin-x64.tar.gz">ä¸‹è½½åœ°å€</a></p></li><li><p>è¿™ä¸ªæ˜¯å…å®‰è£…ç‰ˆæœ¬,è§£å‹åé…ç½®ç¯å¢ƒå˜é‡å³å¯</p><pre><code>  vim ~/.bash_profile  export NODE_JS_HOME=/Users/sunhao/Documents/tools/node-v5.6.0  export PATH=$NODE_JS_HOME:$PATH</code></pre></li><li><p>ç„¶åæ‰§è¡Œ:<code>source ~/.bash_profile</code></p></li><li><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ: <code>node -v</code></p><pre><code>  sunhaodeMacBook-Pro:~ sunhao$ node -v  v5.6.0  sunhaodeMacBook-Pro:~ sunhao$</code></pre></li></ul></li><li>npmç›¸å…³<ul><li><p>å¾ˆä¹…ä»¥å‰çš„Node.JSå®‰è£…åéœ€è¦å•ç‹¬å®‰è£…npmçš„</p></li><li><p>ç°åœ¨ä¸éœ€è¦äº†,å¯ä»¥ç›´æ¥ä½¿ç”¨äº†</p></li><li><p>ç”±äºæˆ‘å¤§å¤©æœå¼ºå¤§çš„GFW,npmçš„æºåœ¨å¤©æœå±€åŸŸç½‘è®¿é—®å¾ˆä¸ç†æƒ³</p></li><li><p>æ‰€ä»¥,é˜¿é‡Œçš„å¤§ç¥ä»¬ç»™å¤§ä¼™æä¾›äº†ä¸€ä¸ªnpm registryé•œåƒ</p></li><li><p>é…ç½®é˜¿é‡Œnpmé•œåƒ</p><pre><code>  npm config set registry https://registry.npm.taobao.org  npm config set disturl https://npm.taobao.org/dist</code></pre></li><li><p>è¿™ä¸‹npmçš„é€Ÿåº¦å¦¥å¦¥çš„</p></li><li><p>å‚è€ƒæ–‡æ¡£:</p><ul><li><a href="http://npm.taobao.org/">æ·˜å® NPM é•œåƒ</a></li><li><a href="http://www.jb51.net/article/50671.htm">npmä»‹ç»</a></li></ul></li></ul></li><li>hexoç›¸å…³<ul><li><p>å‰æˆéƒ½åšå¥½äº†,æˆ‘ä»¬å°±è¿›å…¥æ­£äº‹å§</p></li><li><p>ç”±äºhexoæ˜¯ç»å¸¸ä½¿ç”¨çš„,æ‰€ä»¥éœ€è¦å…¨å±€å®‰è£…</p><pre><code>  npm install hexo -g</code></pre></li><li><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ<br>  <img src="/imgs/hexo/1.png"></p></li></ul></li></ol><h2 id="å¼€å§‹æ­å»ºåšå®¢"><a href="#å¼€å§‹æ­å»ºåšå®¢" class="headerlink" title="å¼€å§‹æ­å»ºåšå®¢"></a>å¼€å§‹æ­å»ºåšå®¢</h2><ol><li>é€‰æ‹©ä¸€ä¸ªç›®å½•</li><li>è¿›å…¥ä¹‹åæ‰§è¡Œ<code>hexo init</code></li><li>ç­‰å¾…æ­¥éª¤2ä¸‹è½½ä¸€å †ä¾èµ–å,å³åˆ›å»ºå¥½åŸºäºHexoçš„åšå®¢åŸºæœ¬ç›®å½•ç»“æ„<br> <img src="/imgs/hexo/2.png"></li><li>ç®€å•åº”ç”¨<ul><li><p>ç›´æ¥åœ¨æœ¬æœºè¿è¡Œåšå®¢</p><pre><code>  sunhaodeMacBook-Pro:test sunhao$ hexo serve  INFO  Start processing  INFO  Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</code></pre><p>  è¿™æ ·åœ¨æœ¬æœºæµè§ˆå™¨ä¸Šç›´æ¥è®¿é—®<code>http://localhost:4000</code>å³å¯ä»¥è®¿é—®æœ€ç®€å•çš„åšå®¢</p></li><li><p>hexoæ„å»ºé™æ€æ–‡ä»¶,å¯ä»¥æ”¾å…¥nginxä¸­ç›´æ¥è®¿é—®(æœ¬äººå°±æ˜¯è¿™ç§æ–¹å¼)</p><pre><code>  hexo generate</code></pre><p>  ç”Ÿæˆçš„æ–‡ä»¶æ”¾åœ¨<code>public</code>æ–‡ä»¶å¤¹ä¸‹</p></li></ul></li><li>è‡ªå®šä¹‰ä¸€äº›é…ç½®<ul><li>åœ¨<code>_config.yml</code>ä¸­è¿›è¡Œé…ç½®</li><li>å‚è€ƒ<a href="https://hexo.io/docs/configuration.html">å®˜æ–¹æ–‡æ¡£</a></li></ul></li><li>è‡ªå®šä¹‰ä¸»é¢˜<ul><li><p>ä¸»é¢˜è¯·å‚è€ƒ<a href="http://www.zhihu.com/question/24422335">æœ‰å“ªäº›å¥½çœ‹çš„ Hexo ä¸»é¢˜? - GitHub - çŸ¥ä¹</a></p></li><li><p>ä¸»é¢˜æ”¾åœ¨<code>themes</code>æ–‡ä»¶å¤¹ä¸‹</p></li><li><p>é€‰æ‹©ä¸»é¢˜,åœ¨<code>_config.yml</code>ä¸­è®¾ç½®</p><pre><code>   # Extensions   ## Plugins: https://hexo.io/plugins/   ## Themes: https://hexo.io/themes/   theme: landscape</code></pre><p>  å³å°†<code>theme</code>è®¾ç½®ä¸ºä¸»é¢˜æ–‡ä»¶å¤¹å</p></li><li><p>ä¸»é¢˜é…ç½®:åœ¨æ¯ä¸ªä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­</p></li></ul></li><li>æˆ‘çš„ä¸»é¢˜æ˜¯åŸºäº<code>yelee</code>æ·»åŠ äº†ä¸€äº›ä¿®æ”¹,åé¢ä¼šæŠŠè¿™ä¸ªä¿®æ”¹åçš„ä¸»é¢˜æ”¾åˆ°gitä¸Š<ul><li>åŸç”Ÿçš„<code>yelee</code>: <a href="https://github.com/MOxFIVE/hexo-theme-yelee">yelee</a></li><li>æˆ‘ä¿®æ”¹åçš„<code>yelee</code>: <code>æ•¬è¯·æœŸå¾…</code></li></ul></li></ol><h2 id="å¦‚ä½•è¿›è¡Œæ›´æ–°åšå®¢"><a href="#å¦‚ä½•è¿›è¡Œæ›´æ–°åšå®¢" class="headerlink" title="å¦‚ä½•è¿›è¡Œæ›´æ–°åšå®¢"></a>å¦‚ä½•è¿›è¡Œæ›´æ–°åšå®¢</h2><ol><li>å°†åšå®¢æ•´ä¸ªé¡¹ç›®æ–‡ä»¶æ‰˜ç®¡åˆ°Githubæˆ–è€…Git@OSCä¸­</li><li>åˆ©ç”¨gitçš„pushé’©å­è¿›è¡Œæ›´æ–°</li><li>åˆ©ç”¨Node.JSåœ¨æœåŠ¡å™¨çš„åå°å¯ç”¨ä¸€ä¸ªæœåŠ¡,å»æ¥æ”¶gité’©å­çš„è¯·æ±‚,ä»è€Œè¿›è¡Œæ›´æ–°</li><li>æˆ‘å°±æ˜¯é‡‡ç”¨è¿™ä¸ªæ–¹æ³•çš„,æ‰€ä»¥æˆ‘ä¹°äº†ä¸€ä¸ªåŸŸåå’Œä¸€ä¸ªé˜¿é‡Œäº‘æœåŠ¡å™¨å¹¶ä¸”å°†åŸŸåå¤‡æ¡ˆäº†</li><li>æ­å»ºè¿‡ç¨‹<ul><li><p>å°†é¡¹ç›®æ‰˜ç®¡åˆ°gitä¸Š,æˆ‘é€‰æ‹©çš„æ˜¯Git@OSC,æ¯•ç«Ÿæ˜¯å¤©æœå±€åŸŸç½‘ç›´æ¥äº’ç›¸è®¿é—®,é€Ÿåº¦å¿«<br>  <img src="/imgs/hexo/3.png"></p></li><li><p>é…ç½®gitçš„pushé’©å­<br>  <img src="/imgs/hexo/4.png"></p></li><li><p>åœ¨æœåŠ¡å™¨ä¸Šå°†Node.JS+Npm+Hexoçš„ç¯å¢ƒæ­å»ºå¥½</p></li><li><p>åœ¨æœåŠ¡å™¨ä¸Šå°†gitä¸Šå¾—åšå®¢pullä¸‹æ¥,è·¯å¾„å¦‚:<code>/opt/blog</code></p></li><li><p>åœ¨æœåŠ¡å™¨ä¸Šåˆ©ç”¨Node.JSèµ·ä¸€ä¸ªæœåŠ¡</p><pre><code>  var express = require(&#39;express&#39;);  var app = express();  var exec = require(&#39;child_process&#39;).exec;    app.post(&#39;/hexo&#39;, function(req, res)&#123;      // æ‰“å¼€ç›®å½•,å…ˆæ‰§è¡Œgit pull      // å†æ‰§è¡Œhexo clean      // å†é‡æ–°ç”Ÿæˆpublicæ–‡ä»¶      exec(&#39;cd /opt/blog/ &amp;&amp; git pull &amp;&amp; hexo clean &amp;&amp; hexo generate&#39;, function (error, stdout, stderr) &#123;          console.log(&#39;stdout: &#39; + stdout);          console.log(&#39;stderr: &#39; + stderr);          if (error !== null) &#123;              console.log(&#39;exec error: &#39; + error);          &#125;      &#125;);        res.send(&#39;ok&#39;);  &#125;);    // åœ¨3000ç«¯å£å¯åŠ¨ç›‘å¬æœåŠ¡  var server = app.listen(3000, function() &#123;      console.log(&#39;Listening on port %d&#39;, server.address().port);  &#125;);</code></pre></li><li><p>æ³¨æ„,è¦å†™ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶,å†™æ˜æ­¤æœåŠ¡æ‰€ä»¥æ¥çš„ç»„ä»¶</p><pre><code>  &#123;    &quot;name&quot;: &quot;gitlab-hexo-webhook&quot;,    &quot;version&quot;: &quot;1.0.0&quot;,    &quot;description&quot;: &quot;gitlabé’©å­&quot;,    &quot;main&quot;: &quot;hexo-webhook.js&quot;,    &quot;dependencies&quot;: &#123;      &quot;debug&quot;: &quot;^2.0.0&quot;,      &quot;express&quot;: &quot;^3.0.6&quot;    &#125;,    &quot;devDependencies&quot;: &#123;&#125;,    &quot;scripts&quot;: &#123;      &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;    &#125;,    &quot;author&quot;: &quot;sunhao&quot;,    &quot;license&quot;: &quot;ISC&quot;  &#125;</code></pre></li><li><p>åˆ©ç”¨Node.JSçš„<code>forever</code>åœ¨åå°å¯åŠ¨æ­¤æœåŠ¡</p><pre><code>  forever -a start /opt/shell/gitlab-hexo-webhook/hexo-webhook.js</code></pre></li><li><p>è¿™æ ·æ¯æ¬¡åœ¨æœ¬åœ°ç”¨markdownå†™å¥½åšå®¢åpushåˆ°gitä¸Š,pushé’©å­å°±ä¼šæ‰§è¡Œ,å»è¯·æ±‚æœåŠ¡å™¨ä¸Šçš„è¿™ä¸ªæœåŠ¡,è¿™ä¸ªæœåŠ¡å°±ä¼šå°†åšå®¢æ›´æ–°å,é‡æ–°generateæ–°çš„<code>public</code></p></li></ul></li></ol><h2 id="éƒ¨ç½²åˆ°nginxä¸Š"><a href="#éƒ¨ç½²åˆ°nginxä¸Š" class="headerlink" title="éƒ¨ç½²åˆ°nginxä¸Š"></a>éƒ¨ç½²åˆ°nginxä¸Š</h2><ol><li><p>åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…nginx</p></li><li><p>è¿›è¡Œé…ç½®</p><pre><code> server &#123;     listen       80;     # æ‚¨çš„åŸŸå     server_name  blog.izufang.me;          location / &#123;         // æ‚¨çš„åšå®¢publicæ–‡ä»¶å¤¹ç»å¯¹è·¯å¾„         root   /opt/blog/public;         index  index.html;         try_files $uri $uri/ /index.html;         expires -1;     &#125; &#125;</code></pre></li><li><p>åœ¨æ‚¨çš„åŸŸåæä¾›å•†è®¾ç½®åŸŸåè§£æå³å¯</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç«™åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntuä¸‹å®‰è£…é…ç½®Svn+ApacheæœåŠ¡å™¨</title>
      <link href="/2016/03/18/zhong-jian-jian/linux-ubuntu-install-svn-apache/"/>
      <url>/2016/03/18/zhong-jian-jian/linux-ubuntu-install-svn-apache/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…-Subversion"><a href="#å®‰è£…-Subversion" class="headerlink" title="å®‰è£… Subversion"></a>å®‰è£… Subversion</h2><ol><li><p>å®‰è£… Subversion</p><pre><code> sudo apt-get install subversion</code></pre></li></ol><span id="more"></span><ol start="2"><li><p>åˆ›å»ºä»“åº“</p><pre><code> svnadmin create /opt/svn/message</code></pre><p> <code>/opt/svn/message</code>ä¸ºsvnä»“åº“æ‰€è¦åˆ›å»ºåˆ°çš„ç›®å½•ï¼Œå¦‚åˆ›å»ºç›®å½•çš„ä½ç½®éœ€è¦rootæƒé™ï¼Œä½¿ç”¨<code>sudo svnadmin</code></p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ </p><pre><code> sudo vi /opt/svn/message/conf/svnserve.conf #å»æ‰#[general]å‰é¢çš„#å·   [general]   #åŒ¿åè®¿é—®çš„æƒé™ï¼Œå¯ä»¥æ˜¯read,write,none,é»˜è®¤ä¸ºread   anon-access = none #è®¤è¯ç”¨æˆ·çš„æƒé™ï¼Œå¯ä»¥æ˜¯read,write,none,é»˜è®¤ä¸ºwrite   auth-access = write #å¯†ç æ•°æ®åº“çš„è·¯å¾„ï¼Œå»æ‰å‰é¢çš„#   password-db = passwd</code></pre></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>passwd</code></p><pre><code> [users]   admin = admin</code></pre><p> ä¸€å®šè¦å»æ‰[users]å‰é¢çš„#,å¦åˆ™svnåªèƒ½ä»¥åŒ¿åç”¨æˆ·ç™»å½•ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå‡ºç°ç™»å½•çª—å£ï¼Œé™¤éä½ çš„anonä¸ä¸ºnone,å¦åˆ™å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚è¿™é‡Œçš„å¯†ç æ˜¯æ²¡æœ‰åŠ å¯†çš„ï¼Œåé¢åœ¨apacheæ—¶ï¼Œä¼šè®²åˆ°ç”¨htppasswdç”ŸæˆåŠ å¯†çš„å¯†ç ã€‚</p></li></ol><p>åˆ°è¿™é‡Œï¼ŒSvnæœåŠ¡å™¨å·²ç»é…ç½®å¥½äº†ã€‚ä¸€äº›å‘½ä»¤:</p><pre><code>#åœæ­¢SubversionæœåŠ¡å™¨sudo killall svnserve#å¯åŠ¨SubversionæœåŠ¡å™¨svnserve -d -r /opt/svn/messageå…¶ä¸­-dè¡¨ç¤ºåœ¨åå°è¿è¡Œï¼Œ-ræŒ‡å®šæœåŠ¡å™¨çš„æ ¹ç›®å½•ï¼Œè¿™æ ·è®¿é—®æœåŠ¡å™¨æ—¶å°±å¯ä»¥ç›´æ¥ ç”¨svn://æœåŠ¡å™¨ipæ¥è®¿é—®äº†ã€‚</code></pre><h2 id="å®‰è£…apacheæœåŠ¡å™¨-ç¬¬34æ­¥éª¤å¯ä»¥çœç•¥"><a href="#å®‰è£…apacheæœåŠ¡å™¨-ç¬¬34æ­¥éª¤å¯ä»¥çœç•¥" class="headerlink" title="å®‰è£…apacheæœåŠ¡å™¨(ç¬¬34æ­¥éª¤å¯ä»¥çœç•¥)"></a>å®‰è£…apacheæœåŠ¡å™¨(ç¬¬34æ­¥éª¤å¯ä»¥çœç•¥)</h2><ol><li><p>å®‰è£…ApacheæœåŠ¡å™¨</p><pre><code> sudo apt-get install libapache2-svn sudo apt-get install apache2</code></pre><p> åœ¨<code>/etc/apache2/mods-available/dav_svn.load</code>æœ€åä¸€è¡ŒåŠ ä¸Šä¸€ä¸‹ä¸€å¥è¯</p><pre><code> LoadModule authz_svn_module /usr/lib/apache2/modules/mod_authz_svn.so</code></pre></li><li><p>æ­¤æ—¶å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><pre><code> sudo /etc/init.d/apache2 restart æ—¶å¤±è´¥  æç¤ºï¼šNo apache MPM package installed </code></pre><p> åˆ™è¿˜è¦ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre><code> sudo apt-get install apache2-mpm-worker</code></pre></li><li><p>æ·»åŠ subversionç®¡ç†ç”¨æˆ·åŠsvnç»„</p><pre><code> sudo adduser svn sudo addgroup svn svn</code></pre></li><li><p>ç‰ˆæœ¬ä»“åº“ã€‚</p><p> ç‰ˆæœ¬ä»“åº“æˆ‘ä»¬ç”¨ç¬¬ä¸€æ­¥ä¸­æ‰€åˆ›å»ºçš„ï¼Œè¿™æ—¶éœ€è¦ä¸ºå®ƒåŠ ä¸€äº›ç”¨æˆ·æƒé™<br/><br> è¿™é‡Œè¦ä¸ºapacheç”¨åˆ°çš„www-dataæ·»åŠ æƒé™</p><pre><code> sudo chown -R root:svn /opt/svn/message sudo chown -R www-data:www-data /opt/svn/message</code></pre><p> èµ‹äºˆç»„æˆå‘˜å¯¹æ‰€æœ‰æ–°åŠ å…¥æ–‡ä»¶ä»“åº“æ‹¥æœ‰ç›¸åº”çš„æƒé™</p><pre><code> sudo chmod -R g+rws /opt/svn/message</code></pre></li><li><p>æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®æƒé™</p><p> è¿™é‡Œæ³¨æ„äº†,é€šè¿‡httpè®¿é—®çš„è´¦å·æ˜¯ApachehttpéªŒè¯çš„ã€‚<br> é€šè¿‡svn:&#x2F;&#x2F;è®¿é—®çš„è´¦å·æ˜¯svnä»“åº“confç›®å½•ä¸‹passwdæŒ‡å®šçš„ã€‚ä¸¤ä¸ªæ˜¯ç‹¬ç«‹çš„è®¤è¯æ–¹å¼ã€‚<br> å¦‚æœç”¨åŒä¸€ä¸ªpasswdæ–‡ä»¶ å°±ä¼šå‡ºç°httpè·Ÿsvnåªèƒ½æœ‰å…¶ä¸­ä¸€ä¸ªèƒ½è®¿é—®<br> å› ä¸ºhtpasswdåˆ›å»ºç”¨æˆ·çš„å¯†ç æ˜¯åŠ å¯†çš„,ç›¸ååŸå§‹passwdæ–‡ä»¶é‡Œçš„ç”¨æˆ·æ˜¯æ²¡åŠ å¯†çš„</p><p> è¿™é‡Œæˆ‘ä»¬ç”¨htpasswdåˆ›å»ºå¯†ç æ–‡ä»¶ï¼Œå–åpwdfile</p><pre><code> htpasswd -c /opt/svn/message/conf/pwdfile admin</code></pre><p> æ‰§è¡Œä¸Šé¢è¯­å¥åï¼Œåˆ›å»ºadminè´¦å·ï¼Œä»¥åŠä¼šè¦è¾“å…¥å¯†ç ç­‰ä¸œä¸œï¼Œå®‰æç¤ºå®Œæˆå°±è¡Œäº†ã€‚<br> å¦‚æœè¦åŠ ç¬¬äºŒä¸ªç”¨æˆ·ï¼Œè¦æŠŠ -c å‚æ•°å»æ‰ï¼Œå¦åˆ™ä¼šè¦†ç›–æ‰å‰é¢æ–‡ä»¶ã€‚</p></li><li><p>é…ç½®httpd.confæ–‡ä»¶</p><pre><code> sudo vi /etc/apache2/mods-enabled/dav_svn.conf</code></pre><p> åœ¨æœ€åé¢æ·»åŠ ä¸‹é¢å†…å®¹</p><pre><code> &lt;Location /message&gt;     DAV svn     SVNPath /opt/svn/message     AuthType Basic     AuthName &quot;SVN è®¤è¯åç§°&quot;     AuthUserFile /opt/svn/message/conf/pwdfile     #&lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;         Require valid-user     #&lt;/LimitExcept&gt; &lt;/Location&gt;</code></pre><p> æ­¤æ—¶ AuthUserFile ï¼Œè¦æŒ‡å®špwdfile</p></li><li><p>é‡å¯apacheå’Œsvnå°±å¯ä»¥äº†</p><pre><code> sudo /etc/init.d/apache2 restart sudo svnserve -d -r /opt/svn/message</code></pre></li><li><p>æ‰“å¼€æµè§ˆå™¨ è®¿é—®: <code>http://sunhao-java.vicp.cc/message</code> è¾“å…¥ admin å¯†ç ï¼šadmin å°±å¯ä»¥è¿›å»äº†ï¼</p></li><li><p>ç”¨svnå®¢æˆ·ç«¯è®¿é—®: <code>svn://sunhao-java.vicp.cc/</code>  è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å°±å¯ä»¥è¿›å»äº†ï¼</p></li></ol><h2 id="dav-svn-confæ–‡ä»¶"><a href="#dav-svn-confæ–‡ä»¶" class="headerlink" title="dav_svn.confæ–‡ä»¶"></a>dav_svn.confæ–‡ä»¶</h2><pre><code>#demo for svn#&lt;Location /svn&gt;#    DAV svn#    SVNPath /opt/test/demo #    AuthType Basic#    AuthName &quot;SVN è®¤è¯åç§°&quot;#    AuthUserFile /opt/test/demo/conf/pwdfile#    #&lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;#        Require valid-user#    #&lt;/LimitExcept&gt;#&lt;/Location&gt;#message&lt;Location /message&gt;    DAV svn    SVNPath /opt/svn/message    AuthType Basic    AuthName &quot;SVN è®¤è¯åç§°&quot;    AuthUserFile /opt/svn/message/conf/pwdfile    #&lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;        Require valid-user    #&lt;/LimitExcept&gt;&lt;/Location&gt;#messageboard&lt;Location /messageboard&gt;    DAV svn    SVNPath /opt/svn/messageboard    AuthType Basic    AuthName &quot;SVN è®¤è¯åç§°&quot;    AuthUserFile /opt/svn/messageboard/conf/pwdfile    #&lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;        Require valid-user    #&lt;/LimitExcept&gt;&lt;/Location&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Svn </tag>
            
            <tag> Apache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB_å®‰è£…</title>
      <link href="/2016/03/18/zhong-jian-jian/mongodb-install/"/>
      <url>/2016/03/18/zhong-jian-jian/mongodb-install/</url>
      
        <content type="html"><![CDATA[<ol><li>å·²ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤è¡Œ</li><li>è¾“å…¥å‘½ä»¤<span id="more"></span><pre><code> mongod --dbpath &quot;F:\mongodb\data\db&quot; --logpath &quot;F:\mongodb\data\log\MongoDB.log&quot; --install --serviceName &quot;MongoDB&quot;</code></pre> å…¶ä¸­ï¼š<ul><li>dbpath: æ•°æ®åº“æ•°æ®æ–‡ä»¶è·¯å¾„</li><li>logpath:æ•°æ®åº“æ—¥å¿—æ–‡ä»¶è·¯å¾„</li><li>serviceName:æ³¨å†Œçš„æœåŠ¡åç§°</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxè¿‡æ»¤urlå®ç°å‰å°jsçš„é…ç½®é—®é¢˜</title>
      <link href="/2016/03/18/zhong-jian-jian/nginx-url/"/>
      <url>/2016/03/18/zhong-jian-jian/nginx-url/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¬åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­,å¯èƒ½éœ€è¦ä¸€äº›é…ç½®,è¿™äº›é…ç½®å¯èƒ½å°±æ˜¯ä»…ä»…ä¸ºäº†å¼€å‘çš„æ–¹ä¾¿,æ¯”æ–¹è¯´,è®¢å•è¿‡æœŸæ—¶é—´,ç”Ÿäº§ç¯å¢ƒéœ€è¦åŠå°æ—¶å¤±æ•ˆ,ä½†æ˜¯çœŸæ­£å¼€å‘æ—¶,æˆ‘ä¸å¯èƒ½ç­‰ä¸Šä¸ªåŠå°æ—¶,æ‰€ä»¥è¿™ä¸ªæ—¶é—´è¿™ä¸ªå¤±æ•ˆæ—¶é—´æˆ‘ä»¬ä¼šå†™åœ¨é…ç½®æ–‡ä»¶ä¸­,è¿™æ ·å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒå„ä¸€å¥—é…ç½®,æ¥å›åˆ‡æ¢å¾ˆæ–¹ä¾¿çš„.</p></blockquote><span id="more"></span><ul><li>åŸºäºæ‘˜è¦é‡Œçš„,åœ¨Javaåå°å®ç°å¾ˆæ–¹ä¾¿,åªéœ€è¦è¯»å–propertiesé…ç½®æ–‡ä»¶å³å¯</li><li>ä½†æ˜¯åœ¨å‰å°js,jsæ˜¯åœ¨æµè§ˆå™¨é‡Œæ‰§è¡Œçš„,æ— æ³•è¯»å–æœåŠ¡å™¨ä¸Šçš„é…ç½®,é™¤éè¯·æ±‚åå°,ä½†æ˜¯æ¯æ¬¡çš„å¼€é”€ä¹Ÿæ˜¯æŒºå¤§çš„,æ‰€ä»¥è¿™ä¸ªæƒ³æ³•è¢«psäº†</li><li>è¿™æ—¶å€™å¯ä»¥åˆ©ç”¨nginx,å‰å°é™æ€é¡µé¢æ˜¯éƒ¨ç½²åœ¨nginxä¸­,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é…ç½®nginxè¿‡æ»¤æŸä¸ªjsçš„url,ç„¶åæŒ‡å‘æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶</li><li>å‰å°ä»£ç <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line"><span class="comment">&lt;!-- å³é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/config.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€åŠ è½½js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (config.<span class="property">devMode</span> == <span class="string">&#x27;dev&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">loadJs</span>(<span class="string">&quot;å¼€å‘ç¯å¢ƒçš„js&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">loadJs</span>(<span class="string">&quot;å¼€å‘ç¯å¢ƒçš„js&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">loadJs</span>(<span class="params">url, callback</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å®ç°</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>é…ç½®æ–‡ä»¶(ç”Ÿäº§ç¯å¢ƒé…ç½®å’Œå¼€å‘ç¯å¢ƒçš„é…ç½®åœ¨ä¸åŒè·¯å¾„ä¸‹,ä½†æ˜¯æ–‡ä»¶ååŒå)<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">config</span> = &#123;</span><br><span class="line">    <span class="comment">// æˆ–è€… prd</span></span><br><span class="line">    devMode: <span class="number">&#x27;de</span>v&#x27;,</span><br><span class="line">    <span class="comment">// è¿˜å¯ä»¥é…ç½®è¯·æ±‚åå°çš„urlå‰ç¼€</span></span><br><span class="line">    serverUrl: &#x27;http:<span class="comment">//dev.company.com&#x27;</span></span><br><span class="line">    <span class="comment">// serverUrl: &#x27;http://api.company.com&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>nginxçš„é…ç½®<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  www.company.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span> /Users/sunhao/Documents/company/project;</span><br><span class="line">        <span class="attribute">index</span> index.html;</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">        <span class="attribute">expires</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  <span class="literal">debug</span>.company.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span> /Users/sunhao/Documents/company/project;</span><br><span class="line">        <span class="attribute">index</span> index.html;</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">        <span class="attribute">expires</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> <span class="regexp">~ .flower\.js$</span> &#123;</span><br><span class="line">        <span class="attribute">root</span> /Users/sunhao/Documents/company/project/js;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‰ä¸€ä¸ªserveré…ç½®çš„æ˜¯ç”Ÿäº§ç¯å¢ƒ,æ­£å¸¸é…ç½®</li><li>åä¸€ä¸ª,è¿‡æ»¤flower.js,å®šå‘åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹</li></ul></li><li>è®¿é—®<a href="http://www.company.comå°±æ˜¯æ­£å¼ç¯å¢ƒ/">www.company.comå°±æ˜¯æ­£å¼ç¯å¢ƒ</a></li><li>è®¿é—®debug.company.comå°±æ˜¯å¼€å‘ç¯å¢ƒäº†</li><li>è¿™æ ·å°±å¯ä»¥å®ç°é…ç½®çš„åŠŸèƒ½äº†</li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frontend </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solråˆ é™¤æ•°æ®çš„å‡ ç§æ–¹å¼</title>
      <link href="/2016/03/18/zhong-jian-jian/solr-delete-index/"/>
      <url>/2016/03/18/zhong-jian-jian/solr-delete-index/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ‰æ—¶å€™éœ€è¦åˆ é™¤ Solr ä¸­çš„æ•°æ®ï¼ˆç‰¹åˆ«æ˜¯ä¸é‡åšç´¢å¼•çš„ç³»ç»Ÿä¸­ï¼Œåœ¨é‡åšç´¢å¼•æœŸé—´ï¼‰ã€‚åˆ é™¤ä¸€äº› Solræ— æ•ˆæ•°æ®ï¼ˆæˆ–ä¸åˆæ ¼æ•°æ®ï¼‰ã€‚</p></blockquote><span id="more"></span><h1 id="åˆ é™¤-solr-ä¸­çš„æ•°æ®æœ‰å‡ ç§æ–¹å¼ï¼š"><a href="#åˆ é™¤-solr-ä¸­çš„æ•°æ®æœ‰å‡ ç§æ–¹å¼ï¼š" class="headerlink" title="åˆ é™¤ solr ä¸­çš„æ•°æ®æœ‰å‡ ç§æ–¹å¼ï¼š"></a>åˆ é™¤ solr ä¸­çš„æ•°æ®æœ‰å‡ ç§æ–¹å¼ï¼š</h1><h2 id="å…ˆæ¥çœ‹-curl-æ–¹å¼ï¼š"><a href="#å…ˆæ¥çœ‹-curl-æ–¹å¼ï¼š" class="headerlink" title="å…ˆæ¥çœ‹ curl æ–¹å¼ï¼š"></a>å…ˆæ¥çœ‹ curl æ–¹å¼ï¼š</h2><pre><code>curl http://localhost:8080/solr/update --data-binary &quot;&lt;delete&gt;&lt;query&gt;title:abc&lt;/query&gt;&lt;/delete&gt;&quot; -H &#39;Content-type:text/xml; charset=utf-8&#39;  #åˆ é™¤å®Œåï¼Œè¦æäº¤  curl http://localhost:8080/solr/update --data-binary &quot;&lt;commit/&gt;&quot; -H &#39;Content-type:text/xml; charset=utf-8&#39;  </code></pre><h2 id="ç”¨è‡ªå¸¦çš„-post-jarï¼Œåœ¨-apache-solr-XXX-example-exampledocs-ç›®å½•ä¸‹ï¼š"><a href="#ç”¨è‡ªå¸¦çš„-post-jarï¼Œåœ¨-apache-solr-XXX-example-exampledocs-ç›®å½•ä¸‹ï¼š" class="headerlink" title="ç”¨è‡ªå¸¦çš„ post.jarï¼Œåœ¨ apache-solr-XXX\example\exampledocs ç›®å½•ä¸‹ï¼š"></a>ç”¨è‡ªå¸¦çš„ post.jarï¼Œåœ¨ apache-solr-XXX\example\exampledocs ç›®å½•ä¸‹ï¼š</h2><pre><code>java -Ddata=args  -jar post.jar &quot;&lt;delete&gt;&lt;id&gt;42&lt;/id&gt;&lt;/delete&gt;&quot;  #æ€ä¹ˆä½¿ç”¨ post.jar æŸ¥çœ‹å¸®åŠ©    java -jar post.jar -help  </code></pre><h2 id="ç›´æ¥ç”¨-urlï¼Œä½¿ç”¨-stream-ç›¸å…³å‚æ•°ï¼š"><a href="#ç›´æ¥ç”¨-urlï¼Œä½¿ç”¨-stream-ç›¸å…³å‚æ•°ï¼š" class="headerlink" title="ç›´æ¥ç”¨ urlï¼Œä½¿ç”¨ stream ç›¸å…³å‚æ•°ï¼š"></a>ç›´æ¥ç”¨ urlï¼Œä½¿ç”¨ stream ç›¸å…³å‚æ•°ï¼š</h2><pre><code>æ¯”å¦‚ï¼šhttp://localhost:80/solr/update/?stream.body=&lt;delete&gt;&lt;query&gt;*:*&lt;/query&gt;&lt;/delete&gt;&amp;stream.contentType=text/xml;charset=utf-8&amp;commit=truestream ç›¸å…³å‚æ•°è¿˜æœ‰ï¼šstream.file=ï¼ˆæœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶ï¼‰ï¼Œstream.url åˆ†åˆ«æŒ‡åˆ°ä½ çš„åˆ é™¤æ–‡æœ¬ï¼Œè¿™é‡Œæ˜¯ç›´æ¥å­—ç¬¦ä¸²å†…å®¹ç”¨ stream.body å‚æ•°ã€‚commit å‚æ•°æ˜¯æŒ‡æäº¤ï¼Œæäº¤äº†æ‰èƒ½çœ‹åˆ°åˆ é™¤æ•ˆæœã€‚</code></pre><h2 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h2><blockquote><p>å…¶å®ï¼Œæ–¹å¼1ã€2åŸç†ä¸€æ ·ï¼Œç›´æ¥ POST xml æ•°æ®è¿‡å»ã€‚æ–¹å¼3å°±æ˜¯ç›´æ¥å¯ä»¥å‘Šè¯‰æœåŠ¡å™¨ä»é‚£äº›åœ°æ–¹å–åˆ é™¤çš„ xml å†…å®¹ã€‚</p></blockquote><p>åˆ é™¤æŒ‡ä»¤æœ‰ä¸¤ç§:</p><ol><li>ç”¨ <id></id> åŒ…è£…ï¼›</li><li><query></query> åŒ…è£…ã€‚</li></ol><p>æŒ‡ä»¤éƒ½å¾ˆæ˜æ˜¾ï¼Œä¸€ä¸ªæ˜¯ id å€¼ï¼ˆæ˜¯åœ¨ schema.xml çš„ uniqueKey æ‰€æŒ‡å­—æ®µçš„å€¼ï¼Œè€Œä¸æ˜¯ç´¢å¼•å†…éƒ¨çš„ docIdï¼‰ï¼›query å€¼æ˜¯æŸ¥è¯¢ä¸²ï¼Œå¦‚ï¼štitle:â€solr luceneâ€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Solr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring3.0.5çš„å·¥å…·ç±»</title>
      <link href="/2016/03/18/hou-duan/spring-3.0.5-utils/"/>
      <url>/2016/03/18/hou-duan/spring-3.0.5-utils/</url>
      
        <content type="html"><![CDATA[<blockquote><p>springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„å·¥å…·ç±», åº”è¯¥åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œä¸­å¾ˆå¥½çš„åˆ©ç”¨èµ·æ¥. å®ƒå¯ä»¥å¤§å¤§çš„å‡è½»æˆ‘ä»¬çš„å¹³æ—¶ç¼–å†™ä»£ç çš„é•¿åº¦. å› æˆ‘ä»¬åªæƒ³ç”¨springçš„å·¥å…·ç±»,è€Œä¸æƒ³æŠŠä¸€ä¸ªå¤§å¤§çš„springå·¥ç¨‹ç»™å¼•å…¥è¿›æ¥. ä¸‹é¢æ˜¯æˆ‘ä»spring3.0.5é‡ŒæŠ½å–å‡ºæ¥çš„å·¥å…·ç±».</p></blockquote><span id="more"></span><h1 id="å†…ç½®çš„resouceç±»å‹"><a href="#å†…ç½®çš„resouceç±»å‹" class="headerlink" title="å†…ç½®çš„resouceç±»å‹"></a>å†…ç½®çš„resouceç±»å‹</h1><pre><code>UrlResourceClassPathResourceFileSystemResourceServletContextResourceInputStreamResourceByteArrayResourceEncodedResource ä¹Ÿå°±æ˜¯ResourceåŠ ä¸Šencoding, å¯ä»¥è®¤ä¸ºæ˜¯æœ‰ç¼–ç çš„èµ„æºVfsResource (åœ¨jbossé‡Œç»å¸¸ç”¨åˆ°, ç›¸åº”è¿˜æœ‰ å·¥å…·ç±» VfsUtils)org.springframework.util.xml.ResourceUtils  ç”¨äºå¤„ç†è¡¨è¾¾èµ„æºå­—ç¬¦ä¸²å‰ç¼€æè¿°èµ„æºçš„å·¥å…·. å¦‚: classpath:.æœ‰ getURL, getFile, isFileURL, isJarURL, extractJarFileURL</code></pre><h1 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h1><pre><code>org.springframework.core.annotation.AnnotationUtils å¤„ç†æ³¨è§£org.springframework.core.io.support.PathMatchingResourcePatternResolver ç”¨äºå¤„ç† ant åŒ¹é…é£æ ¼(com/*.jsp, com/**/*.jsp),æ‰¾å‡ºæ‰€æœ‰çš„èµ„æº, ç»“åˆä¸Šé¢çš„resourceçš„æ¦‚å¿µä¸€èµ·ä½¿ç”¨,å¯¹äºéå†æ–‡ä»¶å¾ˆæœ‰ç”¨. å…·ä½“è¯·è¯¦ç»†æŸ¥çœ‹javadocorg.springframework.core.io.support.PropertiesLoaderUtils åŠ è½½Propertiesèµ„æºå·¥å…·ç±»,å’ŒResourceç»“åˆorg.springframework.core.BridgeMethodResolver æ¡¥æ¥æ–¹æ³•åˆ†æå™¨.å…³äºæ¡¥æ¥æ–¹æ³•è¯·å‚è€ƒ: http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.12.4.5org.springframework.core.GenericTypeResolver èŒƒå‹åˆ†æå™¨, åœ¨ç”¨äºå¯¹èŒƒå‹æ–¹æ³•, å‚æ•°åˆ†æ.org.springframework.core.NestedExceptionUtils</code></pre><h1 id="xmlå·¥å…·"><a href="#xmlå·¥å…·" class="headerlink" title="xmlå·¥å…·"></a>xmlå·¥å…·</h1><pre><code>org.springframework.util.xml.AbstractStaxContentHandlerorg.springframework.util.xml.AbstractStaxXMLReaderorg.springframework.util.xml.AbstractXMLReaderorg.springframework.util.xml.AbstractXMLStreamReaderorg.springframework.util.xml.DomUtilsorg.springframework.util.xml.SimpleNamespaceContextorg.springframework.util.xml.SimpleSaxErrorHandlerorg.springframework.util.xml.SimpleTransformErrorListenerorg.springframework.util.xml.StaxUtilsorg.springframework.util.xml.TransformerUtils</code></pre><h1 id="å…¶å®ƒå·¥å…·é›†"><a href="#å…¶å®ƒå·¥å…·é›†" class="headerlink" title="å…¶å®ƒå·¥å…·é›†"></a>å…¶å®ƒå·¥å…·é›†</h1><pre><code>org.springframework.util.xml.AntPathMatcher anté£æ ¼çš„å¤„ç†org.springframework.util.xml.AntPathStringMatcherorg.springframework.util.xml.Assert æ–­è¨€,åœ¨æˆ‘ä»¬çš„å‚æ•°åˆ¤æ–­æ—¶åº”è¯¥ç»å¸¸ç”¨org.springframework.util.xml.CachingMapDecoratororg.springframework.util.xml.ClassUtils ç”¨äºClassçš„å¤„ç†org.springframework.util.xml.CollectionUtils ç”¨äºå¤„ç†é›†åˆçš„å·¥å…·org.springframework.util.xml.CommonsLogWriterorg.springframework.util.xml.CompositeIteratororg.springframework.util.xml.ConcurrencyThrottleSupportorg.springframework.util.xml.CustomizableThreadCreatororg.springframework.util.xml.DefaultPropertiesPersisterorg.springframework.util.xml.DigestUtils æ‘˜è¦å¤„ç†, è¿™é‡Œæœ‰ç”¨äºmd5å¤„ç†ä¿¡æ¯çš„org.springframework.util.xml.FileCopyUtils æ–‡ä»¶çš„æ‹·è´å¤„ç†, ç»“åˆResourceçš„æ¦‚å¿µä¸€èµ·æ¥å¤„ç†, çœŸçš„æ˜¯å¾ˆæ–¹ä¾¿org.springframework.util.xml.FileSystemUtilsorg.springframework.util.xml.LinkedCaseInsensitiveMap keyå€¼ä¸åŒºåˆ†å¤§å°å†™çš„LinkedMaporg.springframework.util.xml.LinkedMultiValueMap ä¸€ä¸ªkeyå¯ä»¥å­˜æ”¾å¤šä¸ªå€¼çš„LinkedMaporg.springframework.util.xml.Log4jConfigurer ä¸€ä¸ªlog4jçš„å¯åŠ¨åŠ è½½æŒ‡å®šé…åˆ¶æ–‡ä»¶çš„å·¥å…·ç±»org.springframework.util.xml.NumberUtils å¤„ç†æ•°å­—çš„å·¥å…·ç±», æœ‰parseNumber å¯ä»¥æŠŠå­—ç¬¦ä¸²å¤„ç†æˆæˆ‘ä»¬æŒ‡å®šçš„æ•°å­—æ ¼å¼, è¿˜æ”¯æŒformatæ ¼å¼, convertNumberToTargetClass å¯ä»¥å®ç°Numberç±»å‹çš„è½¬åŒ–.org.springframework.util.xml.ObjectUtils æœ‰å¾ˆå¤šå¤„ç†null objectçš„æ–¹æ³•. å¦‚nullSafeHashCode, nullSafeEquals, isArray, containsElement, addObjectToArray, ç­‰æœ‰ç”¨çš„æ–¹æ³•org.springframework.util.xml.PatternMatchUtils springé‡Œç”¨äºå¤„ç†ç®€å•çš„åŒ¹é…. å¦‚ Spring&#39;s typical xxx*, *xxx and *xxx* pattern stylesorg.springframework.util.xml.PropertyPlaceholderHelper ç”¨äºå¤„ç†å ä½ç¬¦çš„æ›¿æ¢org.springframework.util.xml.ReflectionUtils åæ˜ å¸¸ç”¨å·¥å…·æ–¹æ³•. æœ‰ findField, setField, getField, findMethod, invokeMethodç­‰æœ‰ç”¨çš„æ–¹æ³•org.springframework.util.xml.SerializationUtils ç”¨äºjavaçš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–. serializeä¸deserializeæ–¹æ³•org.springframework.util.xml.StopWatch ä¸€ä¸ªå¾ˆå¥½çš„ç”¨äºè®°å½•æ‰§è¡Œæ—¶é—´çš„å·¥å…·ç±», ä¸”å¯ä»¥ç”¨äºä»»åŠ¡åˆ†é˜¶æ®µçš„æµ‹è¯•æ—¶é—´. æœ€åæ”¯æŒä¸€ä¸ªå¾ˆå¥½çœ‹çš„æ‰“å°æ ¼å¼. è¿™ä¸ªç±»åº”è¯¥ç»å¸¸ç”¨org.springframework.util.xml.StringUtilsorg.springframework.util.xml.SystemPropertyUtilsorg.springframework.util.xml.TypeUtils ç”¨äºç±»å‹ç›¸å®¹çš„åˆ¤æ–­. isAssignableorg.springframework.util.xml.WeakReferenceMonitor å¼±å¼•ç”¨çš„ç›‘æ§</code></pre><h1 id="å’Œwebç›¸å…³çš„å·¥å…·"><a href="#å’Œwebç›¸å…³çš„å·¥å…·" class="headerlink" title="å’Œwebç›¸å…³çš„å·¥å…·"></a>å’Œwebç›¸å…³çš„å·¥å…·</h1><pre><code>org.springframework.web.util.CookieGeneratororg.springframework.web.util.HtmlCharacterEntityDecoderorg.springframework.web.util.HtmlCharacterEntityReferencesorg.springframework.web.util.HtmlUtilsorg.springframework.web.util.HttpUrlTemplate è¿™ä¸ªç±»ç”¨äºç”¨å­—ç¬¦ä¸²æ¨¡æ¿æ„å»ºurl, å®ƒä¼šè‡ªåŠ¨å¤„ç†urlé‡Œçš„æ±‰å­—åŠå…¶å®ƒç›¸å…³çš„ç¼–ç . åœ¨è¯»å–åˆ«äººæä¾›çš„urlèµ„æºæ—¶, åº”è¯¥ç»å¸¸ç”¨String url = &quot;http://localhost/myapp/&#123;name&#125;/&#123;id&#125;&quot;org.springframework.web.util.JavaScriptUtilsorg.springframework.web.util.Log4jConfigListener ç”¨listenerçš„æ–¹å¼æ¥é…åˆ¶log4jåœ¨webç¯å¢ƒä¸‹çš„åˆå§‹åŒ–org.springframework.web.util.UriTemplateorg.springframework.web.util.UriUtils å¤„ç†urié‡Œç‰¹æ®Šå­—ç¬¦çš„ç¼–ç org.springframework.web.util.WebUtils</code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows7å…±äº«ç½‘ç»œ</title>
      <link href="/2016/03/18/gong-ju/windows7-share-network/"/>
      <url>/2016/03/18/gong-ju/windows7-share-network/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼š</p><pre><code>   å¿«æ·é”®win+Râ†’è¾“å…¥cmdâ†’å›è½¦</code></pre></li></ol><span id="more"></span><ol start="2"><li><p>å¯ç”¨å¹¶è®¾å®šè™šæ‹ŸWiFiç½‘å¡ï¼š</p><pre><code>   è¿è¡Œå‘½ä»¤ï¼š netsh wlan set hostednetwork mode=allow ssid=ä½ çš„wifiåå­— key=ä½ çš„å¯†ç </code></pre></li><li><p>è®¾ç½®Internetè¿æ¥å…±äº«ï¼š</p><pre><code>   åœ¨â€œç½‘ç»œè¿æ¥â€çª—å£ä¸­ï¼Œå³é”®å•å‡»å·²è¿æ¥åˆ°Internetçš„ç½‘ç»œè¿æ¥ï¼Œé€‰æ‹©â€œå±æ€§â€â†’â€œå…±äº«â€ å‹¾ä¸Šâ€œå…è®¸å…¶ä»–........è¿æ¥(N)â€ å¹¶é€‰æ‹©åˆšæ‰å»ºç«‹çš„wifi(ç›´æ¥é€‰æœ¬åœ°è¿æ¥å³å¯)</code></pre></li><li><p>å¼€å¯æ— çº¿ç½‘ç»œï¼š</p><pre><code> ç»§ç»­åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¿è¡Œï¼šnetsh wlan start hostednetwork</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows7 </tag>
            
            <tag> å…±äº«ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹åˆ›å»ºè½¯è¿æ¥</title>
      <link href="/2016/03/18/gong-ju/windows-soft-link/"/>
      <url>/2016/03/18/gong-ju/windows-soft-link/</url>
      
        <content type="html"><![CDATA[<h1 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚:"></a>è¦æ±‚:</h1><ol><li><p>æ–‡ä»¶ç±»å‹ä¸ºNFS</p></li><li><p>ä½¿ç”¨junction</p><p> <code>ä¸‹è½½junction(http://technet.microsoft.com/en-us/sysinternals/bb896768)</code></p></li></ol><span id="more"></span><h1 id="åˆ›å»ºè½¯è¿æ¥"><a href="#åˆ›å»ºè½¯è¿æ¥" class="headerlink" title="åˆ›å»ºè½¯è¿æ¥"></a>åˆ›å»ºè½¯è¿æ¥</h1><p>è¯­æ³•:</p><pre><code>junction [-s] destDir srcDirä¸¾ä¾‹:junction -s message-test\src\main\webapp\js\easyjs message-easyjs\easyjs</code></pre><h1 id="åˆ é™¤è½¯è¿æ¥"><a href="#åˆ é™¤è½¯è¿æ¥" class="headerlink" title="åˆ é™¤è½¯è¿æ¥"></a>åˆ é™¤è½¯è¿æ¥</h1><p>è¯­æ³•:</p><pre><code>junction -d linkPathä¸¾ä¾‹junction -d message-test\src\main\webapp\js\easyjs</code></pre>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_oracleç®¡ç†</title>
      <link href="/2016/03/18/shu-ju-ku/linux-oracle-manager/"/>
      <url>/2016/03/18/shu-ju-ku/linux-oracle-manager/</url>
      
        <content type="html"><![CDATA[<h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><ol><li><code>su - oracle</code> åˆ‡æ¢åˆ°oracleç”¨æˆ·ä¸”åˆ‡æ¢åˆ°å®ƒçš„ç¯å¢ƒ</li><li><code>lsnrctl status</code> æŸ¥çœ‹ç›‘å¬åŠæ•°æ®åº“çŠ¶æ€</li><li><code>lsnrctl start</code> å¯åŠ¨ç›‘å¬</li><li><code>sqlplus /nolog</code> è¿›å…¥sqlplus</li><li><code>SQL&gt; conn / as sysdba</code> ä»¥DBAèº«ä»½ç™»å½•</li><li><code>SQL&gt; startup</code> å¯åŠ¨db</li></ol><span id="more"></span><h2 id="åœæ­¢"><a href="#åœæ­¢" class="headerlink" title="åœæ­¢"></a>åœæ­¢</h2><ol><li><p><code>su - oracle</code> åˆ‡æ¢åˆ°oracleç”¨æˆ·ä¸”åˆ‡æ¢åˆ°å®ƒçš„ç¯å¢ƒ</p></li><li><p><code>lsnrctl stop</code> åœæ­¢ç›‘å¬</p></li><li><p><code>sqlplus /nolog</code> è¿›å…¥sqlplus</p></li><li><p><code>SQL&gt;conn / as sysdba</code> ä»¥DBAèº«ä»½ç™»å½•</p></li><li><p><code>SQL&gt;SHUTDOWN IMMEDIATE</code> å…³é—­db</p><p>  å…¶ä¸­startupå’Œshutdowmè¿˜æœ‰å…¶ä»–ä¸€äº›å¯é€‰å‚æ•°ï¼Œæœ‰å…´è¶£å¯ä»¥å¦è¡ŒæŸ¥é˜…</p></li></ol><h2 id="æŸ¥çœ‹åˆå§‹åŒ–å‚æ•°åŠä¿®æ”¹"><a href="#æŸ¥çœ‹åˆå§‹åŒ–å‚æ•°åŠä¿®æ”¹" class="headerlink" title="æŸ¥çœ‹åˆå§‹åŒ–å‚æ•°åŠä¿®æ”¹"></a>æŸ¥çœ‹åˆå§‹åŒ–å‚æ•°åŠä¿®æ”¹</h2><ol><li><code>su - oracle</code> åˆ‡æ¢åˆ°oracleç”¨æˆ·ä¸”åˆ‡æ¢åˆ°å®ƒçš„ç¯å¢ƒ</li><li><code>sqlplus / as sysdba</code> è¿›å…¥sqlplus</li><li><code>SQL&gt;conn / as sysdba</code> ä»¥DBAèº«ä»½ç™»å½•</li><li><code>SQL&gt;show parameter session;</code> æŸ¥çœ‹æ‰€æ¥å—çš„sessionæ•°é‡</li><li><code>SQL&gt;alter system set shared_servers=10;</code> å°†shared_serversçš„æ•°é‡è®¾ç½®ä¸º10</li></ol><h2 id="æ•°æ®åº“è¿æ¥æ•°ç›®"><a href="#æ•°æ®åº“è¿æ¥æ•°ç›®" class="headerlink" title="æ•°æ®åº“è¿æ¥æ•°ç›®"></a>æ•°æ®åº“è¿æ¥æ•°ç›®</h2><ol><li><p>å…¶ä¸­ä¸€ä¸ªæ•°æ®åº“è¿æ¥éœ€è¦ä¸€ä¸ªsession,å®ƒçš„å€¼ç”±processeså†³å®šï¼Œsessionä¸processesé€šå¸¸æœ‰ä»¥ä¸‹å…³ç³»ï¼š</p><pre><code> session = 1.1 * processes + 5</code></pre></li><li><p>ä»¥<code>sysdba </code>èº«ä»½ç™»é™†PL&#x2F;SQL æˆ–è€… Worksheet</p><ul><li><p>æŸ¥è¯¢ç›®å‰è¿æ¥æ•°</p><pre><code>  show parameter processes;</code></pre></li><li><p>æ›´æ”¹ç³»ç»Ÿè¿æ¥æ•°</p><pre><code>  alter system set processes=1000 scope=spfile;</code></pre></li><li><p>åˆ›å»ºpfile</p><pre><code>  create pfile from spfile;</code></pre></li><li><p>é‡å¯OracleæœåŠ¡æˆ–é‡å¯OracleæœåŠ¡å™¨</p></li></ul><p> ä¸è¿‡è¿™ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œè¿˜è¦å—åˆ°CPUå’Œå†…å­˜ç­‰ç¡¬ä»¶æ¡ä»¶çš„é™åˆ¶ã€‚å¦å¤– processeså’Œsessionä¸å¯ä»¥é€šè¿‡alter systemè¯­å¥ç›´æ¥ä¿®æ”¹ï¼Œåªå¯ä»¥ä¿®æ”¹æœåŠ¡å™¨å‚æ•°æ–‡ä»¶æ¥æ›´æ”¹(Server Parameter File)ã€‚å¦‚æœå­˜åœ¨ä¸€ä¸ªserver parameter fileï¼Œé€šè¿‡alter systemè¯­å¥æ‰€ä½œçš„æ›´æ”¹å°†ä¼šè¢«æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­ã€‚</p></li></ol><h2 id="æŸ¥è¯¢Oracleæ¸¸æ ‡ä½¿ç”¨æƒ…å†µçš„æ–¹æ³•"><a href="#æŸ¥è¯¢Oracleæ¸¸æ ‡ä½¿ç”¨æƒ…å†µçš„æ–¹æ³•" class="headerlink" title="æŸ¥è¯¢Oracleæ¸¸æ ‡ä½¿ç”¨æƒ…å†µçš„æ–¹æ³•"></a>æŸ¥è¯¢Oracleæ¸¸æ ‡ä½¿ç”¨æƒ…å†µçš„æ–¹æ³•</h2><pre><code>   select * from v$open_cursor where user_name = &#39;TRAFFIC&#39;ï¼›</code></pre><h2 id="æŸ¥è¯¢Oracleä¼šè¯çš„æ–¹æ³•"><a href="#æŸ¥è¯¢Oracleä¼šè¯çš„æ–¹æ³•" class="headerlink" title="æŸ¥è¯¢Oracleä¼šè¯çš„æ–¹æ³•"></a>æŸ¥è¯¢Oracleä¼šè¯çš„æ–¹æ³•</h2><pre><code>   select * from v$session</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> database </tag>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2016/03/18/shu-ju-ku/mysql-command/"/>
      <url>/2016/03/18/shu-ju-ku/mysql-command/</url>
      
        <content type="html"><![CDATA[<ol><li><p>æ˜¾ç¤ºå½“å‰æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“åˆ—è¡¨ï¼š</p><pre><code> mysql&gt; SHOW DATABASES;</code></pre><p> æ³¨æ„ï¼šmysqlåº“é‡Œé¢æœ‰MYSQLçš„ç³»ç»Ÿä¿¡æ¯ï¼Œæˆ‘ä»¬æ”¹å¯†ç å’Œæ–°å¢ç”¨æˆ·ï¼Œå®é™…ä¸Šå°±æ˜¯ç”¨è¿™ä¸ªåº“è¿›è¡Œæ“ä½œã€‚</p></li></ol><span id="more"></span><ol start="2"><li><p>æ˜¾ç¤ºæ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ï¼š</p><pre><code> mysql&gt; USE åº“åï¼› mysql&gt; SHOW TABLES;</code></pre></li><li><p>æ˜¾ç¤ºæ•°æ®è¡¨çš„ç»“æ„ï¼š</p><pre><code> mysql&gt; DESCRIBE è¡¨å;</code></pre></li><li><p>å»ºç«‹æ•°æ®åº“ï¼š</p><pre><code> mysql&gt; CREATE DATABASE åº“å;</code></pre></li><li><p>å»ºç«‹æ•°æ®è¡¨ï¼š</p><pre><code> mysql&gt; USE åº“å; mysql&gt; CREATE TABLE è¡¨å (å­—æ®µå VARCHAR(20), å­—æ®µå CHAR(1));</code></pre></li><li><p>åˆ é™¤æ•°æ®åº“ï¼š</p><pre><code> mysql&gt; DROP DATABASE åº“å;</code></pre></li><li><p>åˆ é™¤æ•°æ®è¡¨ï¼š</p><pre><code> mysql&gt; DROP TABLE è¡¨åï¼›</code></pre></li><li><p>å°†è¡¨ä¸­è®°å½•æ¸…ç©ºï¼š</p><pre><code> mysql&gt; DELETE FROM è¡¨å;</code></pre></li><li><p>æ˜¾ç¤ºè¡¨ä¸­çš„è®°å½•ï¼š</p><pre><code> mysql&gt; SELECT * FROM è¡¨å;</code></pre></li><li><p>å¾€è¡¨ä¸­æ’å…¥è®°å½•ï¼š</p><pre><code>mysql&gt; INSERT INTO è¡¨å VALUES (â€hyqâ€,â€Mâ€);</code></pre></li><li><p>æ›´æ–°è¡¨ä¸­æ•°æ®ï¼š</p><pre><code>mysql-&gt; UPDATE è¡¨å SET å­—æ®µå1=â€™a&#39;,å­—æ®µå2=â€™bâ€™ WHERE å­—æ®µå3=â€™c&#39;;</code></pre></li><li><p>ç”¨æ–‡æœ¬æ–¹å¼å°†æ•°æ®è£…å…¥æ•°æ®è¡¨ä¸­ï¼š</p><pre><code>mysql&gt; LOAD DATA LOCAL INFILE â€œD:/mysql.txtâ€ INTO TABLE è¡¨å;</code></pre></li><li><p>å¯¼å…¥.sqlæ–‡ä»¶å‘½ä»¤ï¼š</p><pre><code>mysql&gt; USE æ•°æ®åº“å;mysql&gt; SOURCE d:/mysql.sql;</code></pre></li><li><p>å‘½ä»¤è¡Œä¿®æ”¹rootå¯†ç ï¼š</p><pre><code>mysql&gt; UPDATE mysql.user SET password=PASSWORD(â€™æ–°å¯†ç â€™) WHERE User=â€™rootâ€™;mysql&gt; FLUSH PRIVILEGES;</code></pre></li><li><p>æ˜¾ç¤ºuseçš„æ•°æ®åº“åï¼š</p><pre><code>mysql&gt; SELECT DATABASE();</code></pre></li><li><p>æ˜¾ç¤ºå½“å‰çš„userï¼š</p><pre><code>mysql&gt; SELECT USER();</code></pre></li><li><p>ä¸€ä¸ªå»ºåº“å’Œå»ºè¡¨ä»¥åŠæ’å…¥æ•°æ®çš„å®ä¾‹</p><pre><code>drop database if exists school; //å¦‚æœå­˜åœ¨SCHOOLåˆ™åˆ é™¤create database school; //å»ºç«‹åº“SCHOOLuse school; //æ‰“å¼€åº“SCHOOLcreate table teacher //å»ºç«‹è¡¨TEACHER(    id int(3) auto_increment not null primary key,    name char(10) not null,    address varchar(50) default â€˜æ·±åœ³â€™,    year date); //å»ºè¡¨ç»“æŸ//ä»¥ä¸‹ä¸ºæ’å…¥å­—æ®µinsert into teacher values(â€,â€™allenâ€™,&#39;å¤§è¿ä¸€ä¸­â€™,&#39;1976-10-10â€²);insert into teacher values(â€,â€™jackâ€™,&#39;å¤§è¿äºŒä¸­â€™,&#39;1975-12-23â€²);</code></pre></li></ol><p> å¦‚æœä½ åœ¨mysqlæç¤ºç¬¦é”®å…¥ä¸Šé¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥ï¼Œä½†ä¸æ–¹ä¾¿è°ƒè¯•ã€‚</p><pre><code>1. ä½ å¯ä»¥å°†ä»¥ä¸Šå‘½ä»¤åŸæ ·å†™å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå‡è®¾ä¸ºschool.sqlï¼Œç„¶åå¤åˆ¶åˆ°c:\\ä¸‹ï¼Œç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š        mysql -uroot -på¯†ç  &lt; c:\\school.sqlå¦‚æœæˆåŠŸï¼Œç©ºå‡ºä¸€è¡Œæ— ä»»ä½•æ˜¾ç¤ºï¼›å¦‚æœ‰é”™è¯¯ï¼Œä¼šæœ‰æç¤ºã€‚ï¼ˆä»¥ä¸Šå‘½ä»¤å·²ç»è°ƒè¯•ï¼Œä½ åªè¦å°†//çš„æ³¨é‡Šå»æ‰å³å¯ä½¿ç”¨ï¼‰ã€‚2. æˆ–è€…è¿›å…¥å‘½ä»¤è¡Œåä½¿ç”¨ `mysql&gt; source c:\\school.sql`; ä¹Ÿå¯ä»¥å°†`school.sql`æ–‡ä»¶å¯¼å…¥æ•°æ®åº“ä¸­ã€‚</code></pre><ol start="18"><li>å°†æ–‡æœ¬æ•°æ®è½¬åˆ°æ•°æ®åº“ä¸­<ol><li><p>æ–‡æœ¬æ•°æ®åº”ç¬¦åˆçš„æ ¼å¼ï¼šå­—æ®µæ•°æ®ä¹‹é—´ç”¨tabé”®éš”å¼€ï¼Œnullå€¼ç”¨ç©ºæ ¼æ¥ä»£æ›¿.ä¾‹ï¼š</p><pre><code> 3 rose å¤§è¿äºŒä¸­ 1976-10-10 4 mike å¤§è¿ä¸€ä¸­ 1975-12-23</code></pre><p> å‡è®¾ä½ æŠŠè¿™ä¸¤ç»„æ•°æ®å­˜ä¸ºschool.txtæ–‡ä»¶ï¼Œæ”¾åœ¨cç›˜æ ¹ç›®å½•ä¸‹ã€‚</p></li><li><p>æ•°æ®ä¼ å…¥å‘½ä»¤ <code>load data local infile â€œc:\\school.txtâ€ into table è¡¨å</code>;</p><p> æ³¨æ„ï¼šä½ æœ€å¥½å°†æ–‡ä»¶å¤åˆ¶åˆ°<code>\\mysql\\bin</code>ç›®å½•ä¸‹ï¼Œå¹¶ä¸”è¦å…ˆç”¨useå‘½ä»¤æ‰“è¡¨æ‰€åœ¨çš„åº“ã€‚</p></li></ol></li><li>å¤‡ä»½æ•°æ®åº“<ol><li><p>å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“</p><p> å¯¼å‡ºæ–‡ä»¶é»˜è®¤æ˜¯å­˜åœ¨mysql\binç›®å½•ä¸‹</p><pre><code> mysqldump -u ç”¨æˆ·å -p æ•°æ®åº“å &gt; å¯¼å‡ºçš„æ–‡ä»¶å mysqldump -u user_name -p123456 database_name &gt; outfile_name.sql</code></pre></li><li><p>å¯¼å‡ºä¸€ä¸ªè¡¨</p><pre><code> mysqldump -u ç”¨æˆ·å -p æ•°æ®åº“å è¡¨å&gt; å¯¼å‡ºçš„æ–‡ä»¶å mysqldump -u user_name -p database_name table_name &gt; outfile_name.sql</code></pre></li><li><p>å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ç»“æ„</p><pre><code> mysqldump -u user_name -p -d â€“add-drop-table database_name &gt; outfile_name.sql</code></pre><ul><li>-d æ²¡æœ‰æ•°æ®</li><li>â€“add-drop-table åœ¨æ¯ä¸ªcreateè¯­å¥ä¹‹å‰å¢åŠ ä¸€ä¸ªdrop table</li></ul></li><li><p>å¸¦è¯­è¨€å‚æ•°å¯¼å‡º</p><pre><code> mysqldump -uroot -p â€“default-character-set=latin1 â€“set-charset=gbk â€“skip-opt database_name &gt; outfile_name.sql</code></pre></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle_é™çº§å¯¼å…¥å¯¼å‡º</title>
      <link href="/2016/03/18/shu-ju-ku/oracle-expdb-impdb/"/>
      <url>/2016/03/18/shu-ju-ku/oracle-expdb-impdb/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨oracleçš„expdpå’Œimpdp</p></blockquote><span id="more"></span><ol><li><p>åœ¨æœåŠ¡å™¨ä¸Š<code>expdb</code>ä¸€ä¸‹,æœåŠ¡å™¨æ˜¯<code>Linux</code>,åˆ‡æ¢åˆ°<code>oracle</code>ç”¨æˆ·,è¿›è¡Œä¸‹é¢çš„æ“ä½œ:</p><pre><code> expdp userid=usr_oa_new/usr_oa_new@192.168.102.202:1521/urpdb schemas=usr_oa_new directory=test dumpfile=usr_oa_new_20130826.dmp logfile=log_20130826.log version=10.02.01</code></pre><p> æ³¨æ„:</p><ul><li><code>userid=usr_oa_new/usr_oa_new@192.168.102.202:1521/urpdb</code> ä¸ç”¨è¯´äº†,æºæ•°æ®åº“çš„ä¿¡æ¯</li><li><code>schemas=usr_oa_new</code> è¯¥æ–¹æ¡ˆç”¨äºæŒ‡å®šæ‰§è¡Œæ–¹æ¡ˆæ¨¡å¼å¯¼å‡º,é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·æ–¹æ¡ˆ.</li><li><code>directory=test</code> è¿™é‡Œéœ€è¦ç”¨æœ‰dbaæƒé™çš„oracleç”¨æˆ·ç™»å½•æ•°æ®åº“æ–°å»ºä¸€ä¸ªç›®å½•åœ°å€,è¿™é‡ŒéçœŸæ­£çš„ç¡¬ç›˜ç‰©ç†è·¯å¾„,ä»…ä»…ç›¸å½“äºä¸€ä¸ªåœ¨oracleä¸­çš„ä»£å·</li><li><code>create directory test as &#39;/home/oracle&#39;;</code></li><li><code>grant read,write on directory test to usr_oa_new;</code></li><li><code>dumpfile=usr_oa_new_20130826.dmpä»¥åŠlogfile=log_20130826.log</code> ä½ æ‡‚æ»´</li><li><code>version=10.02.01</code> è¿™ä¸ªå¾ˆé‡è¦,è¿™é‡ŒæŒ‡å®šä½ å¸Œæœ›ä»¥å“ªä¸ªç‰ˆæœ¬çš„oracleçš„dmpå¯¼å‡º,å³ç›®æ ‡æ•°æ®åº“çš„ç‰ˆæœ¬å·</li></ul><p> è‡³æ­¤,å¯¼å‡ºéƒ¨åˆ†å·²ç»OKäº†.</p></li><li><p>åœ¨ç›®æ ‡æ•°æ®åº“æ‰€åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨impdp,é€šå¸¸æƒ…å†µä¸ºwindowsç³»ç»Ÿ</p><pre><code> impdp userid=usr_oa_cumt_new/usr_oa_cumt_new@sunhao remap_schema=usr_oa_new:usr_oa_cumt_new directory=test_2 dumpfile=usr_oa_new_20130826.dmp logfile=impdp.log table_exists_action=replace version=10.02.01</code></pre><p> æ³¨æ„:</p><ul><li><code>userid=usr_oa_cumt_new/usr_oa_cumt_new@sunhao</code> the same as expdp</li><li><code>remap_schema=usr_oa_new:usr_oa_cumt_new</code> å¦‚æœç›®æ ‡ç”¨æˆ·ä¸æºç”¨æˆ·ä¸€è‡´,åˆ™å¯ä»¥ä¸å†™,å¦åˆ™,æ ¼å¼ä¸º<code>remap_schema=æº:ç›®æ ‡</code></li><li><code>directory,dumpfile,logfile</code> the same as expdp</li><li><code>table_exists_action=replace</code> è¡¨å­˜åœ¨çš„æ—¶å€™æ€ä¹ˆåŠ</li><li><code>version=10.02.01</code> è¦å¯¼å…¥çš„æ•°æ®åº“ç‰ˆæœ¬</li></ul></li></ol><p>å¦‚æœæŠ¥é”™:</p><pre><code>remap_schemaéœ€è¦æƒé™,å°±ç”¨dbaæƒé™çš„ç”¨æˆ·è®¾ç½®æƒé™å»:grant imp_full_database to usr_oa_cumt_new;</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> Oracle </tag>
            
            <tag> é™çº§ </tag>
            
            <tag> å¯¼å…¥ </tag>
            
            <tag> å¯¼å‡º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL_ä¿®æ”¹rootå¸å·å¯†ç </title>
      <link href="/2016/03/18/shu-ju-ku/mysql-update-root-pwd/"/>
      <url>/2016/03/18/shu-ju-ku/mysql-update-root-pwd/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¦‚æœä½ å¿˜äº† MySQL çš„ root å¸å·å¯†ç ï¼Œåˆ«æ‹…å¿ƒï¼Œä½¿ç”¨ä¸‹é¢æ­¥éª¤å°±å¯ä»¥é‡è®¾ä¸€ä¸ªæ–°å¯†ç ï¼š</p></blockquote><ol><li><p>é¦–å…ˆåœæ­¢ MySQL æœåŠ¡ <code>/etc/init.d/mysql stop</code></p></li><li><p>å¯åŠ¨ MySQL æœåŠ¡å¹¶å±è”½ç”¨æˆ·æƒé™æ£€æŸ¥ï¼Œå¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼š</p></li><li><span id="more"></span><pre><code>  mysqld_safe --skip-grant-tables</code></pre><p>  è®°ä½ï¼Œå½“ä½ ä½¿ç”¨è¿™ä¸ªå‚æ•°å¯åŠ¨æœåŠ¡æ—¶ï¼Œä»»ä½•äººæ— éœ€å¯†ç å³å¯è¿æ¥åˆ° MySQL å¹¶æ‹¥æœ‰æœ€é«˜æƒé™ï¼Œå› æ­¤ä½ éœ€è¦ç¡®å®šä½ åœ¨åšè¿™ä¸ªçš„è¿‡ç¨‹ä¸­ï¼Œåˆ«è®©å…¶ä»–äººè®¿é—®æ•°æ®åº“ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ‹’ç»ç½‘ç»œè¿æ¥ï¼š</p><pre><code>  mysqld_safe --skip-grant-tables --skip-networking</code></pre><p>  è¿™æ ·å°±åªèƒ½é€šè¿‡æœ¬æœºè¿æ¥åˆ° MySQL æœåŠ¡å™¨</p></li><li><p>ç„¶åä½¿ç”¨ <code>mysql -u anything</code> å‘½ä»¤æ¥è¿æ¥åˆ° MySQL</p></li><li><p>æ‰§è¡Œ SQL è¯­å¥ï¼š</p><pre><code> update mysql.user set Password=PASSWORD(â€˜new-passwordâ€™) WHERE User=â€™rootâ€™</code></pre></li><li><p>ç”¨ <code>mysqladmin -u qualquer_coisa shutdown</code> å‘½ä»¤åœæ­¢ MySQL æœåŠ¡ï¼Œç„¶åä»¥æ­£å¸¸æ¨¡å¼å¯åŠ¨ MySQL å³å¯</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> MySQL </tag>
            
            <tag> root </tag>
            
            <tag> å¯†ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle_å…³äºoracleå¯¼å…¥å¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„å’Œæ•°æ®</title>
      <link href="/2016/03/18/shu-ju-ku/oracle-export-import/"/>
      <url>/2016/03/18/shu-ju-ku/oracle-export-import/</url>
      
        <content type="html"><![CDATA[<ol><li>é¦–å…ˆåœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ–°å»ºç¯å¢ƒå˜é‡<code>ORACLE_HOME=F:\study\oracle\product\10.1.0\db_1</code>(è§†è‡ªå·±æ•°æ®å®‰è£…è·¯å¾„è€Œå®š)</li><li>åœ¨pathç¯å¢ƒå˜é‡æœ€åæ·»åŠ <code>%ORACLE_HOME%/BIN</code></li></ol><span id="more"></span><ol start="3"><li><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<code>exp username/password@dbname file=backup file path</code></p><ul><li>username: å¯¼å‡ºæ•°æ®åº“ç”¨æˆ·å</li><li>password: å¯¼å‡ºæ•°æ®åº“å¯†ç </li><li>backup file path: æ•°æ®åº“å¤‡ä»½æ–‡ä»¶å­˜æ”¾è·¯å¾„</li></ul><p> å¦‚ï¼š</p><pre><code> exp scott/123456@sunhao file=d:\1.dmp</code></pre></li><li><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<code>imp tousername/password@dbname file=backup file path fromuser=fromusername touser=tousername</code></p><ul><li>tousername:è¦å¯¼å…¥çš„æ•°æ®åº“ç”¨æˆ·å</li><li>password:è¦å¯¼å…¥çš„æ•°æ®åº“å¯†ç </li><li>backup file path:æ•°æ®åº“å¤‡ä»½æ–‡ä»¶å­˜æ”¾è·¯å¾„</li><li>fromusername:è¦å¯¼å…¥çš„æ•°æ®åº“ç”¨æˆ·å</li><li>tousername:å¯¼å…¥çš„é‚£ä¸ªæ•°æ®åº“ç”¨æˆ·å</li></ul><p> å¦‚ï¼š</p><pre><code> imp usr_oa_sys/usr_oa_sys@SUNHAO file=d:\oa_show.dmp fromuser=usr_oa_show touser=usr_oa_sys</code></pre></li></ol><p>5ã€å¯¼å…¥å¯¼å‡ºå•å¼ è¡¨ï¼š</p><pre><code>åœ¨expæˆ–è€…impè¯­å¥åé¢åŠ ä¸Š`tables(table1,table2,...)`</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> Oracle </tag>
            
            <tag> å¯¼å…¥ </tag>
            
            <tag> å¯¼å‡º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle_å¿˜è®°å¯†ç è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2016/03/18/shu-ju-ku/oracle-forget-password/"/>
      <url>/2016/03/18/shu-ju-ku/oracle-forget-password/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¦‚æœå¿˜è®°oracleçš„sysã€systemã€scottç­‰ç”¨æˆ·åçš„å¯†ç ï¼š</p></blockquote><span id="more"></span><ol><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><pre><code> ORACLE_HOME=F:\study\oracle\product\10.1.0\db_1 path=(åŸpath);ORACLE_HOME/BIN</code></pre></li><li><p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œè¾“å…¥<code>sqlplus /nolog</code></p><pre><code> conn /as sysdba alter user XXX identified by &quot;password&quot;;</code></pre><p>ç„¶åå°±OKäº†ã€‚</p></li></ol><hr><p>å‘½ä»¤è¡Œå†…å®¹ï¼š</p><pre><code>Microsoft Windows XP [ç‰ˆæœ¬ 5.1.2600](C) ç‰ˆæƒæ‰€æœ‰ 1985-2001 Microsoft Corp.C:\Documents and Settings\Administrator&gt;sqlplus /nologSQL*Plus: Release 10.1.0.2.0 - Production on æ˜ŸæœŸå›› 11æœˆ 3 18:48:48 2011Copyright (c) 1982, 2004, Oracle.  All rights reserved.SQL&gt; conn /as sysdbaå·²è¿æ¥ã€‚SQL&gt; alter user scott identified by &quot;123456&quot;;ç”¨æˆ·å·²æ›´æ”¹ã€‚SQL&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> Oracle </tag>
            
            <tag> å¿˜è®°å¯†ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle_æŸ¥çœ‹é”è¡¨ä¿¡æ¯åŠè§£é”</title>
      <link href="/2016/03/18/shu-ju-ku/oracle-table-lock/"/>
      <url>/2016/03/18/shu-ju-ku/oracle-table-lock/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><ol><li><p>æŸ¥çœ‹è¢«é”çš„è¡¨çš„ä¿¡æ¯</p><pre><code> select s.username,    decode(l.type, &#39;tm&#39;, &#39;table lock&#39;, &#39;tx&#39;, &#39;row lock&#39;, null) lock_level,    o.owner,    o.object_name,    o.object_type,    s.sid,    s.serial#,    s.terminal,    s.machine,    s.program,    s.osuser from v$session s, v$lock l, dba_objects o where l.sid = s.sid and l.id1 = o.object_id(+) and s.username is not null;</code></pre></li><li><p>è¡¨è§£é”</p><pre><code> --kill sessionè¯­å¥ alter system kill session &#39;50,492&#39;; ---(SID,SERIAL#)</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> Oracle </tag>
            
            <tag> é”è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle_æ¢å¤æ•°æ®</title>
      <link href="/2016/03/18/shu-ju-ku/oracle-revert-data/"/>
      <url>/2016/03/18/shu-ju-ku/oracle-revert-data/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ©ç”¨é—ªå›æ¢å¤æ•°æ®"><a href="#åˆ©ç”¨é—ªå›æ¢å¤æ•°æ®" class="headerlink" title="åˆ©ç”¨é—ªå›æ¢å¤æ•°æ®"></a>åˆ©ç”¨é—ªå›æ¢å¤æ•°æ®</h2><pre><code>alter table message.t_message_msg enable row movement;flashback table message.t_message_msg to timestamp to_timestamp(&#39;2013-05-19 08:30:00&#39;,&#39;yyyy-mm-dd hh24:mi:ss&#39;);</code></pre><p><code>message.t_message_msg</code> æŒ‡çš„æ˜¯éœ€è¦æ¢å¤æ•°æ®çš„è¡¨</p><span id="more"></span><h2 id="ä½¿ç”¨undoæ¢å¤æ•°æ®"><a href="#ä½¿ç”¨undoæ¢å¤æ•°æ®" class="headerlink" title="ä½¿ç”¨undoæ¢å¤æ•°æ®"></a>ä½¿ç”¨undoæ¢å¤æ•°æ®</h2><pre><code>create table t_flow_workitem_bak_20131011_2 as select * from t_flow_workitem as of timestamp (sysdate - 100/1440);create table t_flow_histworkitem_bak_2 as select * from t_flow_histworkitem as of timestamp (sysdate - 70/1440);create table t_flow_startprocess_bak_4 as select * from t_flow_startprocess as of timestamp (sysdate - 200/1440);create table urgedhandle_feedback_bak_2 as select * from t_flow_urgedhandle_feedback as of timestamp (sysdate - 70/1440);create table urgedhandle_bak_20131011 as select * from t_flow_urgedhandle as of timestamp (sysdate - 70/1440);create table t_oa_doc_relay_20131011 as select * from t_oa_doc_relay as of timestamp (sysdate - 70/1440);create table t_oa_doc_receiver_20131011 as select * from t_oa_doc_receiver as of timestamp (sysdate - 70/1440);</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> Oracle </tag>
            
            <tag> æ¢å¤æ•°æ® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntuä½¿ç”¨Debå®‰è£…rpm</title>
      <link href="/2016/03/18/yun-wei/linux-ubuntu-install-rpm-deb/"/>
      <url>/2016/03/18/yun-wei/linux-ubuntu-install-rpm-deb/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ubuntuå®‰è£…è½¯ä»¶æ˜¯ç”¨debæ ¼å¼çš„æ–‡ä»¶å®‰è£…ï¼Œubuntuå¯¹äºrpmæ ¼å¼çš„æ–‡ä»¶å®‰è£…è½¯ä»¶æ˜¯ï¼š<br>å…ˆå°†rpmæ ¼å¼çš„æ–‡ä»¶è½¬æ¢ä¸ºdebæ ¼å¼çš„ï¼Œå†è¿›è¡Œå®‰è£…</p></blockquote><span id="more"></span> <h1 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h1><blockquote><p>ubuntuå®‰è£…sqldeveloper-3.0.04.34-1.noarch.rpm</p></blockquote><ol><li><p>ubuntu å®‰è£…alienè½¬æ¢è½¯ä»¶</p><pre><code> sudo apt-get install alien</code></pre></li><li><p>è½¬æ¢</p><pre><code> sudo alien --scripts sqldeveloper-3.0.04.34-1.noarch.rpmæ‰§è¡Œå®Œåä¼šç”Ÿæˆä¸€ä¸ªsqldeveloper_3.0.04.34-2_all.debè¿™æ ·çš„æ–‡ä»¶</code></pre></li><li><p>å®‰è£…</p><p>åœ¨å›¾åƒç”»é¢ä¸ŠåŒå‡»debæ–‡ä»¶<br/><br>æˆ–è€…<br/><br>åœ¨ç»ˆç«¯é‡Œé¢è¾“å…¥</p><pre><code> sudo dpkg -i sqldeveloper_3.0.04.34-2_all.deb</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Deb </tag>
            
            <tag> rpm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å®‰è£…mongoDB</title>
      <link href="/2016/03/15/zhong-jian-jian/linux-ubuntu-install-mongodb/"/>
      <url>/2016/03/15/zhong-jian-jian/linux-ubuntu-install-mongodb/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¸‹è½½å®‰è£…åŒ…(<code>mongodb-linux-x86_64-2.4.9.tgz</code>)</p></li><li><p>è§£å‹</p><pre><code> tar -zxvf mongodb-linux-x86_64-2.4.9.tgz</code></pre><p> é‡å‘½åï¼Œæ–‡ä»¶å¤¹åç§°å¤ªé•¿</p><pre><code> mv mongodb-linux-x86_64-2.4.9 mongodb</code></pre></li></ol><span id="more"></span><ol start="3"><li><p>æ–°å»ºæ•°æ®åº“å’Œæ—¥å¿—æ–‡ä»¶å¤¹ï¼Œæ—¥å¿—æ–‡ä»¶å¤¹å¾ˆé‡è¦ï¼Œå¯ä»¥å¾ˆå¿«çš„å®šä½é—®é¢˜å‡ºåœ¨å“ªé‡Œ</p><ul><li><p>è¿›å…¥mongodbæ–‡ä»¶å¤¹</p><pre><code>    cd mongodb</code></pre></li><li><p>æ–°å»ºæ–‡ä»¶å¤¹</p><pre><code>  mkdir data  mkdir data/db  mkdir data/log  touch data/log/mongodb.log--æ—¥å¿—æ–‡ä»¶</code></pre></li></ul></li><li><p>æ–°å»ºå¯åŠ¨è„šæœ¬</p><ul><li><p>è¿›å…¥ç³»ç»Ÿæ–‡ä»¶å¤¹</p><pre><code>  cd /etc/init.d--å¿…é¡»æ˜¯æ­¤æ–‡ä»¶å¤¹</code></pre></li><li><p>åˆ›å»ºè„šæœ¬</p><pre><code>  cd /opt/shell  touch mongodb</code></pre></li><li><p>æ–‡ä»¶å†…å®¹</p><pre><code>  !/bin/sh  /opt/mongodb/bin/mongod --dbpath /opt/mongodb/data/db --logpath /opt/mongodb/data/log/mongodb.log</code></pre></li><li><p>è®¾ç½®å¯ä»¥è¿è¡Œçš„æƒé™</p><pre><code>  chmod u+x mongodb</code></pre></li></ul></li><li><p>è®¾ç½®æˆç³»ç»ŸæœåŠ¡ï¼Œå¹¶éšè®¡ç®—æœºå¯åŠ¨è€Œå¯åŠ¨</p><pre><code>   update-rc.d mongodb defaults</code></pre></li><li><p>åˆ é™¤æœåŠ¡</p><pre><code> update-rc.d -f mongodb remove</code></pre></li><li><p>è®¾ç½®å¼€æœºå¯åŠ¨</p><pre><code> vim /etc/rc.local</code></pre><p> æœ€åä¸€è¡ŒåŠ </p><pre><code> #start mongodb /opt/shell/mongodb &gt; /opt/logs/mongodb.log</code></pre></li><li><p>ä»¥é…ç½®æ–‡ä»¶æ–¹å¼å¯åŠ¨<br> å†™é…ç½®æ–‡ä»¶</p><ul><li><p>åˆ›å»ºç›®å½•</p><pre><code>mkdir /opt/mongodb/conf</code></pre></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶</p><pre><code>touch /opt/mongodb/conf/mongodb.conf</code></pre></li><li><p>é…ç½®æ–‡ä»¶</p><pre><code># ç«¯å£port=27017#æ•°æ®ç›®å½•dbpath=/opt/mongodb/data/db#æ—¥å¿—æ–‡ä»¶logpath=/opt/mongodb/data/log/mongodb.log#æ—¥å¿—æ˜¯å¦ä»¥appendæ¨¡å¼æ·»åŠ logappend=true#æ˜¯å¦é™é»˜å¯åŠ¨fork=true</code></pre></li><li><p>å›åˆ°ç¬¬3æ­¥ï¼Œæ–‡ä»¶å†…å®¹</p><pre><code>!/bin/sh/opt/mongodb/bin/mongod -f /opt/mongodb/conf/mongodb.conf</code></pre></li></ul></li><li><p>è®¾ç½®åˆ«å</p><p> mongodbå¯åŠ¨ä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œè¿›å…¥æ•°æ®åº“æ˜¯é€šè¿‡å‘½ä»¤$MONGO_HOME&#x2F;bin&#x2F;mongoã€‚æ¯æ¬¡è¿™ä¹ˆå†™å¾ˆéº»çƒ¦ï¼Œæ˜¯å¦å¯ä»¥æŠŠè¿™ä¸€æ®µå˜æˆä¸€æ¡å‘½ä»¤ï¼Œå°±åƒcdä¸€æ ·</p><pre><code> è¿™é‡Œç”¨åˆ°aliasè®¾ç½®åˆ«å alias mongo=&#39;/opt/mongodb/bin/mongo&#39; alias mongodb=&#39;/etc/init.d/mongodb&#39;</code></pre><p> aliaså‘½ä»¤æ°¸ä¹…ç”Ÿæ•ˆï¼š</p><pre><code> åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œvim .bashrcï¼Œå†™å…¥ä¸Šé¢ä¸¤è¡Œä»£ç ï¼Œsource .bashrc</code></pre></li><li><p>å®‰è£…rockmongo</p><ul><li><code>apt-get install php5-dev</code></li><li><code>pecl install mongo</code></li><li><code>cd /etc/php5/mods-available/</code></li><li><code>touch mongo.ini</code></li><li>å†™å…¥<code>extension=mongo.so</code></li><li><code>ln -s /etc/php5/mods-available/mongo.ini /etc/php5/apache2/conf.d/mongo.ini</code></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> mongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å®‰è£…Nginx</title>
      <link href="/2016/03/15/zhong-jian-jian/linux-ubuntu-install-nginx/"/>
      <url>/2016/03/15/zhong-jian-jian/linux-ubuntu-install-nginx/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¸‹è½½</p><pre><code> sudo wget http://nginx.org/download/nginx-$&#123;version&#125;.tar.gz</code></pre></li></ol><span id="more"></span><ol start="2"><li><p>è§£å‹</p><pre><code> tar -xzvf nginx-1.6.0.tar.gz</code></pre></li><li><p>è¿›å…¥ç›¸å…³nginxç›®å½•è¿›è¡Œä»¥ä¸‹æ“ä½œ</p><pre><code> ./configure --prefix=/opt/nginx --with-http_stub_status_module make make install</code></pre><p> å…¶ä¸­ï¼š<code>--prefix</code>æ˜¯åˆ¶å®šnginxçš„å®‰è£…ç›®å½•</p></li><li><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p><pre><code> cd /opt/nginx/sbin ./nginx -t</code></pre><p> ç»“æœæ˜¾ç¤ºï¼š</p><pre><code> nginx: the configuration file /opt/nginx/conf/nginx.conf syntax is ok nginx: configuration file /opt/nginx/conf/nginx.conf test is successful</code></pre></li><li><p>å¯åŠ¨nginx</p><p> <code>cd /opt/nginx/sbin</code> ç›®å½•ä¸‹é¢ è¾“å…¥ <code>./nginx</code> å¯åŠ¨ <code>nginx</code>.<br/><br> å¦‚æœä¸åœ¨å½“ä¸‹ç›®å½•å¯ä»¥é€šè¿‡ä¸€ä¸‹å‘½ä»¤å¯åŠ¨ï¼š</p><pre><code> /opt/nginx/sbin/nginx -c /opt/nginx/conf/nginx.conf</code></pre><p> <code>-c</code>åˆ¶å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œä¸åŠ nginxä¼šè‡ªåŠ¨åŠ è½½é»˜è®¤è·¯å¾„çš„é…ç½®æ–‡ä»¶ã€‚</p></li><li><p>å¯åŠ¨ã€åœæ­¢ã€é‡å¯nginx</p><pre><code> /opt/nginx/sbin/nginx /opt/nginx/sbin/nginx -s stop /opt/nginx/sbin/nginx -s reload</code></pre></li><li><p>å¸¸è§é—®é¢˜è§£å†³åŠæ³•</p><ul><li><p>ç¼ºå°‘<code>pcre library</code></p><p>é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code>    ./configure: error: the HTTP rewrite module requires the PCRE library. You can either disable the module by using --without-http_rewrite_module option, or install the PCRE library into the system, or build the PCRE library statically from the source with nginx by using --with-pcre=&lt;path&gt; option.</code></pre><p>è§£å†³æ–¹æ³•ï¼š<br>- ä¸‹è½½å®‰è£…pcre-8.31è§£å†³é—®é¢˜ï¼Œè§£å‹åå¯¹pcreè¿›è¡Œå¦‚ä¸‹æ“ä½œ<br><code>sudo wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.31.tar.gz</code><br>- sudo  tar -xzvf pcre-8.31.tar.gz<br>- cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;pcre-8.31<br>- .&#x2F;configure<br>- make<br>- sudo make install<br><br>  è¿æ°”å¥½ä¸€æ¬¡é€šè¿‡ï¼Œè¿æ°”ä¸å¥½ï¼Œmake pcreæ—¶ä¼šå‡ºé”™,ç¼ºå°‘gcc-c++å’Œlibtoolï¼Œä¹Ÿå°±æ˜¯c++ç¼–è¯‘åŒ…<br>    é”™è¯¯ä¿¡æ¯ï¼š<br><br>        libtool: compile: unrecognized option <code>-DHAVE_CONFIG_H&#39;       libtool: compile: Try </code>libtool â€“helpâ€™ for more information.<br>      make[1]: *** [pcrecpp.lo] Error 1<br>      make[1]: Leaving directory &#96;&#x2F;usr&#x2F;local&#x2F;src&#x2F;&#x2F;pcre-8.31â€™<br>      make: *** [all] Error 2root@wolfdog-virtual-machine:~&#x2F;work&#x2F;pcre-8.12$ libtool -help -DHAVE_CONFIG_H<br>      The program â€˜libtoolâ€™ is currently not installed.  You can install it by typing:<br>      sudo apt-get install libtool<br>    è§£å†³æ–¹æ³•ï¼š<br><br>        1. éœ€è¦å…ˆå®‰è£…libtoolå’Œgcc-c++<br>      2. sudo apt-get install libtool<br>      3. sudo apt-get install g++ æˆ–è€… gcc-c++</p></li><li><p>ç¼ºå°‘<code>openssl </code>åº“</p><pre><code>é”™è¯¯ä¿¡æ¯ï¼š    ./configure: error: the HTTP cache module requires md5 functions  from OpenSSL library.  You can either disable the module by using  --without-http-cache option, or install the OpenSSL library into the system,  or build the OpenSSL library statically from the source with nginx by using  --with-http_ssl_module --with-openssl=&lt;path&gt; options.ç¼ºå°‘zlibåº“ï¼š    ./configure: error: the HTTP gzip module requires the zlib library.  You can either disable the module by using --without-http_gzip_module  option, or install the zlib library into the system, or build the zlib library  statically from the source with nginx by using --with-zlib=&lt;path&gt; option.è§£å†³åŠæ³•ï¼š    sudo apt-get install openssl libssl-dev libperl-dev</code></pre></li><li><p>é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code>  ./nginx -t  ./nginx: error while loading shared libraries: libpcre.so.1: cannot open shared object file: No such file or directory</code></pre><p>è§£å†³åŠæ³•ï¼š<code>ln -s /usr/local/lib/libpcre.so.1 /lib</code></p></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Nginx </tag>
            
            <tag> frontend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å®‰è£…rabbitmq</title>
      <link href="/2016/03/15/zhong-jian-jian/linux-ubuntu-install-rabbitmq/"/>
      <url>/2016/03/15/zhong-jian-jian/linux-ubuntu-install-rabbitmq/</url>
      
        <content type="html"><![CDATA[<ol><li><p>éœ€è¦3ä¸ªæ–‡ä»¶</p><pre><code> otp_src_17.3.tar.gz simplejson-3.6.4.tar.gz rabbitmq-server-generic-unix-3.3.5.tar.gz</code></pre></li></ol><span id="more"></span><ol start="2"><li><p>å®‰è£…erlang</p><ol><li>tar -zxvf otp_src_17.3.tar.gz</li><li>cd otp_src_17.3&#x2F;</li><li>.&#x2F;configure<blockquote><p>å¤‡æ³¨ï¼š</p></blockquote><ul><li><p>[æ— ç¢]</p><pre><code>  configure: WARNING:          wxWidgets must be installed on your system.  Please check that wx-config is in path, the directory  where wxWidgets libraries are installed (returned by  &#39;wx-config --libs&#39; or &#39;wx-config --static --libs&#39; command)  is in LD_LIBRARY_PATH or equivalent variable and  wxWidgets version is 2.8.4 or above.</code></pre></li><li><p>éœ€è¦è§£å†³</p><pre><code>  configure: error: No curses library functions found  configure: error: /bin/bash &#39;/opt/software/otp_src_17.3/erts/configure&#39; failed for erts</code></pre><p>è§£å†³ï¼š</p><pre><code>    apt-cache search ncurses  apt-get install libncurses5-dev</code></pre></li></ul></li><li>make</li><li>make install</li></ol></li><li><p>å®‰è£…simplejson</p><ul><li>tar -zxvf simplejson-3.6.4.tar.gz</li><li>cd simplejson-3.6.4</li><li>python setup.py install</li></ul></li><li><p>å®‰è£…rabbitmq-server</p><ul><li><p><code>tar -zxvf rabbitmq-server-generic-unix-3.3.5.tar.gz</code></p></li><li><p><code>cd rabbitmq_server-3.3.5/etc/rabbitmq</code></p></li><li><p><code>touch rabbitmq.config</code></p></li><li><p><code>vim rabbitmq.config</code></p><p>  æ·»åŠ å†…å®¹ï¼š</p><pre><code>  [&#123;rabbit, [&#123;loopback_users, []&#125;]&#125;].</code></pre></li><li><p>å¯åŠ¨ï¼š</p><ol><li><p>cd rabbitmq_server-3.3.5&#x2F;sbin</p></li><li><p>å¯ç”¨ç›‘æ§å°web:</p><pre><code> ./rabbitmq-plugins enable rabbitmq_management</code></pre></li><li><p>å¯åŠ¨</p><pre><code> ./rabbitmq-server</code></pre></li></ol></li><li><p>å¤–ç½‘è®¿é—®ï¼š</p><pre><code>  http://ip:15672</code></pre></li></ul></li><li><p>åˆ¶ä½œå¼€æœºå¯åŠ¨</p><ol><li><p>vim &#x2F;etc&#x2F;rc.local</p></li><li><p>æœ€åexit 0ä¹‹å‰åŠ ä¸Šï¼š</p><pre><code> #start rabbitMq /opt/rabbitmq_server-3.3.5/sbin/rabbitmq-server -detached &gt; /opt/logs/rabbitmq.log</code></pre></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> rabbitmq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å®‰è£…redis</title>
      <link href="/2016/03/15/zhong-jian-jian/linux-ubuntu-install-redis/"/>
      <url>/2016/03/15/zhong-jian-jian/linux-ubuntu-install-redis/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¸‹è½½å®‰è£…ï¼š</p><p> å°†å®‰è£…åŒ…ä¸Šä¼ ï¼Œæ”¾å…¥<code>/opt/software/redis</code></p><pre><code> tar -zxf redis-2.8.13.tar.gz cd redis-2.8.13 make sudo make install make test</code></pre><p> è¿™æ—¶Redisçš„å¯æ‰§è¡Œæ–‡ä»¶è¢«æ”¾åˆ°äº†<code>/usr/local/bin</code></p></li></ol><span id="more"></span><ol start="2"><li><p>ä¸‹è½½é…ç½®æ–‡ä»¶å’Œinitå¯åŠ¨è„šæœ¬ï¼š</p><pre><code> wget https://github.com/ijonas/dotfiles/raw/master/etc/init.d/redis-server wget https://github.com/ijonas/dotfiles/raw/master/etc/redis.conf sudo mv redis-server /etc/init.d/redis-server sudo chmod +x /etc/init.d/redis-server sudo mv redis.conf /etc/redis.conf å¤‡æ³¨: redis-server--&gt; [Linux_Ubuntuå®‰è£…Redis_redis-server] Redis_redis.conf--&gt; [Linux_Ubuntuå®‰è£…Redis_redis.conf]</code></pre></li><li><p>åˆå§‹åŒ–ç”¨æˆ·å’Œæ—¥å¿—è·¯å¾„[å¿…é¡»æ‰§è¡Œ]</p><p> ç¬¬ä¸€æ¬¡å¯åŠ¨Rediså‰ï¼Œå»ºè®®ä¸ºRediså•ç‹¬å»ºç«‹ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶æ–°å»ºdataå’Œæ—¥å¿—æ–‡ä»¶å¤¹</p><pre><code> sudo useradd redis sudo mkdir -p /var/lib/redis sudo mkdir -p /var/log/redis sudo chown redis.redis /var/lib/redis sudo chown redis.redis /var/log/redis</code></pre></li><li><p>è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œå…³æœºè‡ªåŠ¨å…³é—­</p><pre><code> sudo update-rc.d redis-server defaults</code></pre></li><li><p>å¯åŠ¨Redisï¼š</p><pre><code> sudo /etc/init.d/redis-server start</code></pre></li><li><p>å¯åŠ¨clientå®¢æˆ·ç«¯è¿æ¥:</p><pre><code> root@sunhao-linux:~# redis-cli 127.0.0.1:6379&gt; set foo bar OK 127.0.0.1:6379&gt; get foo &quot;bar&quot;</code></pre></li></ol><h1 id="é—®é¢˜è§£å†³ï¼š"><a href="#é—®é¢˜è§£å†³ï¼š" class="headerlink" title="é—®é¢˜è§£å†³ï¼š"></a>é—®é¢˜è§£å†³ï¼š</h1><ol><li><p>å¦‚æœé‡åˆ°make testå‘ç”Ÿé”™è¯¯ï¼š</p><p> ç°è±¡ï¼š</p><pre><code> root@sunhao-linux:/opt/redis# make test cd src &amp;&amp; make test make[1]: æ­£åœ¨è¿›å…¥ç›®å½• `/opt/redis/src&#39; You need tcl 8.5 or newer in order to run the Redis test make[1]: *** [test] é”™è¯¯ 1 make[1]:æ­£åœ¨ç¦»å¼€ç›®å½• `/opt/redis/src&#39; make: *** [test] é”™è¯¯ 2</code></pre><p> è§£å†³æ–¹æ¡ˆï¼š</p><pre><code> root@sunhao-linux:/opt/redis# apt-get install tcl</code></pre></li></ol><blockquote><p>å®‰è£…ä¹‹åçš„ä¿¡æ¯</p></blockquote><pre><code>jemalloc version   : 3.6.0-0-g46c0af68bd248b04df75e4f92d5fb804c3d75340library revision   : 1CC                 : gccCPPFLAGS           :  -D_GNU_SOURCE -D_REENTRANTCFLAGS             : -std=gnu99 -Wall -pipe -g3 -O3 -funroll-loops  -fvisibility=hiddenLDFLAGS            : EXTRA_LDFLAGS      : LIBS               :  -lpthreadRPATH_EXTRA        : XSLTPROC           : falseXSLROOT            : PREFIX             : /usr/localBINDIR             : /usr/local/binINCLUDEDIR         : /usr/local/includeLIBDIR             : /usr/local/libDATADIR            : /usr/local/shareMANDIR             : /usr/local/share/mansrcroot            : abs_srcroot        : /opt/software/redis/redis-2.8.13/deps/jemalloc/objroot            : abs_objroot        : /opt/software/redis/redis-2.8.13/deps/jemalloc/JEMALLOC_PREFIX    : je_JEMALLOC_PRIVATE_NAMESPACE                   : je_install_suffix     : autogen            : 0experimental       : 1cc-silence         : 1debug              : 0code-coverage      : 0stats              : 1prof               : 0prof-libunwind     : 0prof-libgcc        : 0prof-gcc           : 0tcache             : 1fill               : 1utrace             : 0valgrind           : 0xmalloc            : 0mremap             : 0munmap             : 0dss                : 0lazy_lock          : 0tls                : 1</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å®‰è£…zookeeper</title>
      <link href="/2016/03/15/zhong-jian-jian/linux-ubuntu-install-zookeeper/"/>
      <url>/2016/03/15/zhong-jian-jian/linux-ubuntu-install-zookeeper/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¸‹è½½zookeeperï¼Œ<a href="http://archive.apache.org/dist/zookeeper/">http://archive.apache.org/dist/zookeeper/</a></p></li><li><p>è§£å‹åˆ°: &#x2F;opt&#x2F;zookeeper-3.4.6ä¸‹è½½</p></li><li><p>æŠŠconfä¸‹çš„<code>zoo_sample.cfg</code> copyä¸€ä»½åé‡å‘½åä¸º: <code>zoo.cfg</code>.</p><span id="more"></span><pre><code> æ–‡ä»¶ä¸­å†…å®¹å¦‚ä¸‹: syncLimit=5 initLimit=10 tickTime=2000 clientPort=2181 dataDir=/opt/zookeeper-3.4.6/data dataLogDir=/opt/zookeeper-3.4.6/logs</code></pre></li><li><p>æ–°å»ºzookeeper-3.4.6ä¸‹çš„data,logç›®å½•,ç„¶å</p><pre><code> chmod u+x /opt/zookeeper-3.4.6/bin/*</code></pre></li><li><p>æ–°å»ºshellè„šæœ¬<code>startZookeeper.sh</code>åœ¨<code>/opt/shell</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œ</p><pre><code> chmod u+x /opt/shell/startZookeeper.sh</code></pre><p> å†…å®¹ï¼š</p><pre><code> #!/bin/sh #to start zookeeper #set environment export ZOOKEEPER_INSTALL=/opt/zookeeper-3.4.6 export PATH=$PATH:$ZOOKEEPER_INSTALL/bin PID_FILE=$ZOOKEEPER_INSTALL/data/zookeeper_server.pid FLAG=$1 if [ &quot;$FLAG&quot; = &quot;os_start&quot; ] &amp;&amp; [ -f &quot;$PID_FILE&quot; ] then         rm $PID_FILE fi #start zookeeper $ZOOKEEPER_INSTALL/bin/zkServer.sh start</code></pre></li><li><p>è®¾ç½®zookeeperå¼€æœºå¯åŠ¨</p><pre><code> vim /etc/rc.local åœ¨æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹ä¸¤å¥è¯ #start zookeeper /opt/shell/startZookeeper.sh</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solr_ä½¿ç”¨</title>
      <link href="/2016/03/15/zhong-jian-jian/solr-use/"/>
      <url>/2016/03/15/zhong-jian-jian/solr-use/</url>
      
        <content type="html"><![CDATA[<ol><li><p>è§é“¾æ¥ï¼š<a href="http://www.blogjava.net/conans/articles/379556.html">http://www.blogjava.net/conans/articles/379556.html</a></p><pre><code> æœ‰å¾…æ•´ç†ï¼</code></pre></li><li><p>solræœç´¢wordã€pdfï¼š</p><pre><code> http://blog.csdn.net/aidayei/article/details/6535898</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹mysqlä¸­æ–‡ä¹±ç è§£å†³æ–¹æ³•</title>
      <link href="/2016/03/15/shu-ju-ku/linux-mysql-chinese/"/>
      <url>/2016/03/15/shu-ju-ku/linux-mysql-chinese/</url>
      
        <content type="html"><![CDATA[<h2 id="è§£å†³MySQLæ•°æ®åº“ä¹±ç é—®é¢˜æ€»ç»“ï¼š"><a href="#è§£å†³MySQLæ•°æ®åº“ä¹±ç é—®é¢˜æ€»ç»“ï¼š" class="headerlink" title="è§£å†³MySQLæ•°æ®åº“ä¹±ç é—®é¢˜æ€»ç»“ï¼š"></a>è§£å†³MySQLæ•°æ®åº“ä¹±ç é—®é¢˜æ€»ç»“ï¼š</h2><ol><li><p>ä¿®æ”¹å®‰è£…æ–‡ä»¶æ ¹ç›®å½•ä¸‹çš„my.iniæ–‡ä»¶ï¼š</p><ol><li>æœç´¢å­—æ®µ<code>default-character-set</code>ï¼Œè®¾ç½®å…¶å€¼ä¸º<code>utf8/gbk</code>ä¹‹ä¸€(æ³¨æ„è®¾ç½®utf8çš„æ—¶å€™ä¸èƒ½è®¾æˆutf-8)</li><li>å†å»é‡å¯MySQLæœåŠ¡å™¨</li><li>å¦‚æœè¿˜æ˜¯å‡ºç°ä¹±ç ï¼Œæ¥ç€æ‰§è¡Œä¸‹é¢æ“ä½œ</li></ol></li></ol><span id="more"></span><ol start="2"><li><p>ä¿®æ”¹æ•°æ®åº“ç¼–ç </p><ol><li><p>åœ¨å®‰è£…ç›®å½•çš„<code>data </code>ç›®å½•ä¸‹æ‰¾åˆ°ä½ å‡ºç°ä¹±ç çš„æ•°æ®åº“å¯¹åº”çš„æ–‡ä»¶å¤¹(è¿™ä¸ªæ–‡ä»¶å¤¹å³æ˜¯ä½ è¿™ä¸ªæ•°æ®åº“å­˜æ”¾æ•°æ®çš„åœ°æ–¹)ï¼Œ</p></li><li><p>è¿›å…¥æ‰¾åˆ°db.optæ–‡ä»¶(å³æ­¤æ•°æ®åº“çš„ç¼–ç é…ç½®æ–‡ä»¶)ï¼Œä¿®æ”¹å€¼ä¸ºä¸‹é¢çš„</p><pre><code> gbk:default-character-set=gbk     default-collation=gbk_chinese_ci utf8:default-character-set=utf8     default-collation=utf8_general_ci</code></pre></li><li><p>å†å»é‡å¯MySQLæœåŠ¡å™¨</p></li><li><p>å¦‚æœè¿˜æ˜¯å‡ºç°ä¹±ç ï¼Œæ¥ç€æ‰§è¡Œä¸‹é¢æ“ä½œ</p></li></ol></li><li><p>å†ä¸è¡Œï¼Œå¤‡ä»½åŸæ•°æ®åº“æ•°æ®ï¼Œç›´æ¥dropæ‰è¿™ä¸ªæ•°æ®åº“</p><p>é‡æ–°åˆ›å»ºæ•°æ®åº“å¹¶è®¾ç½®ç¼–ç </p><pre><code> create database yourDB character set utf8; æˆ–è€… create database yourDB character set gbk;</code></pre><p> åˆ«å¿˜äº†é‡å¯MySQLæœåŠ¡å™¨</p></li></ol><p>ç»¼ä¸Šï¼šå¦‚æœè¿˜æ²¡æœ‰è§£å†³ï¼Œæˆ‘ä¹Ÿæ²¡è¾™äº†ã€‚é‡è£…å§ï¼Œé‡è£…çš„æ—¶å€™è®¾ç½®ä¸‹ç¼–ç ä¸‰å¤„çš„ç¼–ç è¦ä¸€è‡´</p><h2 id="ç½‘ä¸Šæ‰¾åˆ°çš„"><a href="#ç½‘ä¸Šæ‰¾åˆ°çš„" class="headerlink" title="ç½‘ä¸Šæ‰¾åˆ°çš„"></a>ç½‘ä¸Šæ‰¾åˆ°çš„</h2><blockquote><p>ç³»ç»Ÿç¯å¢ƒ:suse linux server 10,mysql 5.0</p></blockquote><blockquote><p>å®‰è£…mysqlåï¼Œé»˜è®¤çš„å­—ç¬¦é›†æ˜¯latin1ã€‚åœ¨linuxä¸‹å®‰è£…mysqlä¸åƒåœ¨windowsä¸Šå®‰è£…é‚£åƒï¼Œå¯ä»¥é€‰æ‹©å­—ç¬¦é›†(å³ä½¿å½“æ—¶ä½¿ç”¨äº†é»˜è®¤çš„å­—ç¬¦é›†ï¼Œå®‰è£…åä¹Ÿå¯ä»¥åœ¨å®‰è£…ç›®å½•ä¸‹ä¿®æ”¹my.iniæ–‡ä»¶ï¼‰ï¼Œä½†æ˜¯åœ¨linuxå°±ä¸å¤ªä¸€æ ·äº†ã€‚</p></blockquote><ol><li><p>åœ¨shellè¾“å…¥mysqlç™»é™†å:</p><pre><code> mysql&gt;show variables like &#39;%char%&#39;;</code></pre><p> å›è½¦åæ˜¾ç¤º:</p><pre><code> +---------------------ï¼+-----ï¼ï¼-------------- | Variable_name | Value +-----------------------+-ï¼ï¼------------------ | character_set_client | latin1 | character_set_connection | latin1 | character_set_database | latin1 | character_set_filesystem | binary | character_set_results | latin1 | character_set_server | latin1 | character_set_system | utf8 | character_sets_dir | /usr/share/mysql/charsets/ +---------------------+ï¼ï¼ï¼-------------------</code></pre><p> è¿™å°±æ˜¯å®ƒé»˜è®¤çš„è®¾ç½®ã€‚</p></li><li><p>æ¥ä¸‹æ¥åˆ°&#x2F;usr&#x2F;share&#x2F;mysql&#x2F;ç›®å½•ä¸‹ï¼Œå°†my-medium.cnfæ–‡ä»¶(ä½¿ç”¨å…¶å®ƒå®ä¾‹é…ç½®æ–‡ä»¶ä¹Ÿè¡Œ)æ‹·è´åˆ°&#x2F;</p><p> etcç›®å½•ä¸‹ï¼š</p><pre><code> pds:~# cp /usr/share/mysql/my-medium.cnf /etc/my.cnf pds:~# vi /etc/my.cnf</code></pre><p> åˆ†åˆ«åœ¨å¦‚ä¸‹å‡ é¡¹ä¸­æ·»åŠ å­—ç¬¦é›†ï¼š</p><pre><code> [client] default-character-set=gb2312 [mysqld_safe] default-character-set=gb2312 [mysqld] default-character-set=gb2312 #default-table-type=innodb [mysql] default-character-set=gb2312</code></pre></li><li><p>å†é‡å¯mysqlè®©é…ç½®ç”Ÿæ•ˆ:</p><pre><code> pds:~# service mysql restart Shutting down MySQL done Starting MySQL done</code></pre></li><li><p>å†æ¬¡ç™»é™†mysqlåï¼ŒæŸ¥çœ‹å˜é‡ï¼š</p><pre><code> mysql&gt;show variables like &#39;%char%&#39;; +---------------------ï¼+-----ï¼ï¼-------------- | Variable_name | Value +-----------------------+-ï¼ï¼------------------ | character_set_client | gb2312 | character_set_connection | gb2312 | character_set_database | gb2312 | character_set_filesystem | binary | character_set_results | gb2312 | character_set_server | gb2312 | character_set_system | utf8 | character_sets_dir | /usr/share/mysql/charsets/ +---------------------+ï¼ï¼ï¼-------------------</code></pre></li><li><p>å¦‚æ­¤æ˜¾ç¤ºå°±å®Œæˆäº†é…ç½®äº†ï¼Œåœ¨è¡¨ä¸­æ’å…¥ä¸€æ¡å«ä¸­æ–‡çš„è®°å½•ï¼Œå°±ä¸å†å‡ºç°ä¹±ç ï¼Œä½†æ˜¯åŸæ¥æ’å…¥çš„è®°å½•å¾ˆå¯èƒ½è¿˜æ˜¯ä¹±ç ï¼Œå› ä¸ºåŸæ¥çš„å­—ç¬¦é›†ä¸å½“å‰å­—ç¬¦é›†ä¸ä¸€è‡´ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> database </tag>
            
            <tag> mysql </tag>
            
            <tag> ä¸­æ–‡ä¹±ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å®‰è£…Oracle</title>
      <link href="/2016/03/15/shu-ju-ku/linux-ubuntu-install-oracle/"/>
      <url>/2016/03/15/shu-ju-ku/linux-ubuntu-install-oracle/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å®‰è£…å¿…éœ€çš„åŒ…</p><pre><code> apt-get install gcc make binutils lesstif2 libc6 libc6dev rpm libmotif3 libaio1 libstdc++6 alien</code></pre></li><li><p>åˆ›å»ºç”¨æˆ·</p><pre><code> adduser oracle</code></pre></li></ol><span id="more"></span><ol start="3"><li><p>è®¾ç½®swapåŒº</p><p> Oracle10gè‡³å°‘éœ€è¦500Mçš„å†…å­˜å’Œ400Mçš„äº¤æ¢ç©ºé—´ï¼Œè¦æŸ¥çœ‹swapåŒºæ˜¯å¦è¶³å¤Ÿå¤§å°ï¼Œç”¨ <code>fdisk l</code> å‘½ä»¤å»æŸ¥ï¼Œå¦‚æœå°äº400Mçš„ç©ºé—´ï¼Œé‚£ä¹ˆå°±è¦å¢åŠ swapçš„å¤§å°</p><p> é‡è®¾äº¤æ¢åˆ†åŒºå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ“ä½œ:</p><pre><code> dd if=/dev/zero of=tmp_swap bs=1k count=900000 chmod 600 tmp_swap mkswap tmp_swap swapon tmp_swap å®Œæˆå®‰è£…ä»¥å,å¯ä»¥é‡Šæ”¾è¿™ä¸ªç©ºé—´: swapoff tmp_swap rm tmp_swap</code></pre></li><li><p>ä¿®æ”¹ <code>sysctl.conf</code></p><pre><code> kernel.shmmax = 3147483648 kernel.shmmni = 4096 kernel.shmall = 2097152 kernel.sem = 250 32000 100 128 fs.filemax = 65536 net.ipv4.ip_local_port_range = 1024 65000</code></pre></li><li><p>ä¿®æ”¹ <code>limits.conf</code></p><pre><code> * soft nproc 2407 * hard nproc 16384 * soft nofile 1024 * hard nofile 65536</code></pre></li><li><p>è®©ä¿®æ”¹ç”Ÿæ•ˆ</p><p> ä¿®æ”¹äº†ä»¥ä¸Šæ–‡ä»¶å,å¿…é¡»è®©å…¶ç”Ÿæ•ˆ,æˆ–é‡å¯ç³»ç»Ÿ,æˆ–åˆ‡æ¢åˆ° root ç”¨æˆ·ä¸‹ç”¨ä»¥ä¸‹çš„æ–¹å¼æ”¹å˜å†…æ ¸è¿è¡Œå‚æ•°: <code>sysctl p </code></p></li><li><p>äº§ç”Ÿç›¸åº”çš„è½¯è¿æ¥</p><p> åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¦‚ kkï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code> #!/bin/bash ln s /usr/bin/awk /bin/awk ln s /usr/bin/rpm /bin/rpm ln s /usr/bin/basename /bin/basename mkdir /etc/rc.d ln s /etc/rc0.d /etc/rc.d/rc0.d ln s /etc/rc2.d /etc/rc.d/rc2.d ln s /etc/rc3.d /etc/rc.d/rc3.d ln s /etc/rc4.d /etc/rc.d/rc4.d ln s /etc/rc5.d /etc/rc.d/rc5.d ln s /etc/rc6.d /etc/rc.d/rc6.d ln s /etc/init.d /etc/rc.d/init.d</code></pre><p> åˆ›å»ºåï¼Œåˆ‡æ¢åˆ° root ç”¨æˆ·å»æ‰§è¡Œä¸€ä¸‹ã€‚</p></li><li><p>åˆ›å»ºRedHatçš„ç‰ˆæœ¬å£°æ˜æ–‡ä»¶</p><p> åœ¨&#x2F;etc&#x2F;redhatreleaseä¸­æ·»åŠ ä»¥ä¸‹è¯­å¥ï¼Œä»¥ä½¿å®‰è£…ç¨‹åºè®¤ä¸ºæ­£åœ¨ä¸€ä¸ªRedHatçš„ç³»ç»Ÿä¸Šå®‰è£…ï¼š</p><pre><code> Red Hat Linux release 3.1 (drupal)</code></pre></li><li><p>ä¿®æ”¹ç¯å¢ƒå˜é‡</p><p> ç¼–è¾‘ &#x2F;home&#x2F;oracle&#x2F;.bashrcï¼Œå¢åŠ ä»¥ä¸‹export çš„å†…å®¹ã€‚</p></li></ol><p>(æ³¨æ„ï¼Œåœ¨Ubnutu 7.04ä¸­ç”¨æˆ·çš„profileæ–‡ä»¶å·²æ”¹åä¸º~&#x2F;.profileï¼Œæœ‰å¾ˆå¤šå®‰è£…æ•™ç¨‹éƒ½æ˜¯ç”¨ ~&#x2F;.bash_profileï¼Œåœ¨7.04ä¸­ä¸è¡Œçš„)</p><pre><code>    export ORACLE_HOME=/opt/oracle    export ORACLE_OWNER=oracle    export ORACLE_SID=oracle    export ORACLE_TERM=xterm    export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/Apache/Apache/bin:$PATH</code></pre><ol start="10"><li><p>å¼€å§‹å®‰è£…</p><p>æ³¨é”€åŸæ¥çš„ç”¨æˆ·ï¼Œæ”¹ç”¨oracleç”¨æˆ·ç™»å½•ã€‚ç”¨envæŸ¥çœ‹ä¸€ä¸‹ç¯å¢ƒå˜é‡æ˜¯å¦ç”Ÿæ•ˆã€‚ ç„¶åè¿›è¡Œ<code>/ora_ins_disk</code>ä¸­è¿›è¡Œå®‰è£…ï¼Œæ‰§è¡Œå®‰è£…è„šæœ¬æ—¶è¿˜éœ€è¦ä»¥rootæƒé™åˆ›å»ºç›®å½•<code>/opt/oracle</code></p><pre><code>sudo mkdir /opt/oraclesudo chown R oracle:oracle /opt/oraclesudo chmod R 770 /opt/oraclecd/ora_ins_disk./runInstaller</code></pre><p>åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œè¯·ä½¿ç”¨ Advanced Installationï¼Œç„¶åä¸€è·¯æŒ‰é»˜è®¤çš„è®¾ç½®è¿›è¡Œå¾€ä¸‹è®¾ç½®ï¼Œåˆ°çª—å•åä¸º â€œSpecify Database Configuration Optionsâ€çš„æ—¶å€™ï¼Œè¦ä¿®æ”¹ä»¥ä¸‹è®¾ç½®ï¼š Database Character Set ä¸­é€‰æ‹© Simplified Chinese ZHS16GBK åœ¨å®‰è£…çš„åæœŸï¼Œç³»ç»Ÿæç¤ºéœ€è¦ç”¨ root ç”¨æˆ·å»è¿è¡Œä¸¤ä¸ªè„šæœ¬æ–‡ä»¶orainstRoot.shå’Œroot.shï¼Œå®‰è£…å®Œæ¯•åï¼ŒOracleæ˜¯æ­£å¸¸å¯åŠ¨ç€çš„ï¼Œä½ å¯ä»¥è¯•ä¸€ä¸‹è¿æ¥æ•°æ®åº“ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨æµè§ˆå™¨å»è®¾ç½®ä¸€ä¸‹Oracleï¼Œï¼ˆurl:http: &#x2F;&#x2F;localhost:1158&#x2F;em&#x2F;ï¼‰ï¼ˆOracle 10gä¸ä¹‹å‰çš„ç‰ˆæœ¬éƒ½ä¸ä¸€æ ·ï¼Œä½¿ç”¨WEBé¡µçš„ä¼ä¸šç®¡ç†å™¨æ¥ä»£æ›¿ä»¥å‰çš„C&#x2F;Sç‰ˆJAVAä¼ä¸šç®¡ç†å™¨ï¼‰</p></li><li><p>å¯åŠ¨æœåŠ¡,ä¸€èˆ¬é‡‡ç”¨æ‰‹åŠ¨:</p><p>Ubuntuä¸‹å¯åŠ¨Oracleï¼Œå¯åŠ¨oracleå¿…é¡»åœ¨ä½ å®‰è£…oracleçš„é‚£ä¸ªè´¦æˆ·ä¸Šè¿›è¡Œçš„.</p><p>æ‰‹åŠ¨å¯åŠ¨oracle:</p><pre><code>1.å…ˆåœ¨å‘½ä»¤çš„æ¨¡å¼ä¸‹å¯åŠ¨ç›‘å¬lsnrctl start2.ç„¶åä½¿ç”¨sqlplusæ¥å¯åŠ¨oraclesqlplus / as sysdbastartupexit</code></pre><p>èƒ½çœ‹åˆ°oracleå¯åŠ¨æˆåŠŸçš„æ¶ˆæ¯å°±okäº†ã€‚</p></li></ol><blockquote><p>å®‰è£…è¿‡ç¨‹ä¸­,å¯èƒ½ä¼šå‡ºé”™,è§£å†³æ–¹æ¡ˆ:</p></blockquote><ol><li><p>é—®é¢˜ï¼š</p><p> è°ƒç”¨makefileÂ <code>ï¼ï¼/sqlplus/lib/ins_sqlplus.mk</code>Â çš„ç›®æ ‡<code>install</code>Â æ—¶å‡ºé”™ã€‚è¯·å‚é˜…<code>/home/oracle/oraInventory/logs/installActions20111206_110318AM.log</code>ä»¥äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚Â Â </p><p>   è§£å†³åŠæ³•ï¼š</p><pre><code> $ORACLE_HOME/Â /sqlplus/lib/env_sqlplus.mkæ·»åŠ ä¸€è¡Œï¼šEXPDLIBS=lclntshÂ ï¼Œç„¶åç‚¹å‡»â€œé‡è¯•â€æŒ‰é’®ï¼ŒÂ ok.</code></pre></li><li><p>é—®é¢˜ï¼š</p><p> è°ƒç”¨makefileÂ <code>ï¼ï¼/sysman/lib/ins_sysman.mk</code>Â çš„ç›®æ ‡<code>agentÂ nmoÂ nmb</code>Â æ—¶å‡ºé”™ã€‚è¯·å‚é˜…<code>../oraInventory/logs/installActions20111206_110318AM.log</code>Â ä»¥äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚Â </p><p>   è§£å†³åŠæ³•ï¼š</p><pre><code> 1. é™ä½gccçš„ç‰ˆæœ¬,oracle10gçš„gccæ˜¯3.4å·¦å³çš„ç‰ˆæœ¬.ä½¿ç”¨gcc3.4_3.4.66ubuntu3_i386.deb. 2. åœ¨ubuntuä¸­æœ‰å¯èƒ½æˆ‘ä»¬çš„gccç‰ˆæœ¬è¿‡é«˜æˆ–è€…è¿‡ä½ï¼Œéœ€è¦æ”¹å˜åˆ°åˆé€‚çš„ç‰ˆæœ¬ï¼Œï¼Œï¼Œ 3. åœ¨/usr/bin/ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›gccå¼€å¤´çš„æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯gccï¼Œç”¨lså‘½ä»¤çœ‹ä¸€ä¸‹ï¼Œä»–æ˜¯ä¸ªé“¾æ¥æ–‡ä»¶ï¼Œé“¾æ¥åˆ°å½“å‰çš„gccæ–‡ä»¶ï¼Œä¹Ÿå³æ˜¯è¯´ï¼Œ 4. ä»–æ˜¯è¿æ¥åˆ°å½“å‰ä½¿ç”¨çš„gccä¸Šçš„ï¼Œæ‰€ä»¥æ”¹å˜ä»–çš„é“¾æ¥æºæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨çš„gccæ˜¯gcc4.6,æˆ‘ä»¬è¦é™çº§åˆ°gcc3.4ï¼Œæˆ‘ä»¬å…ˆä¸‹è½½ä¸€ä¸ªgcc3.4å®‰è£…ï¼Œ 5. ä¼šåœ¨/usr/binç›®å½•ä¸‹çœ‹åˆ°gcc3.4è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨/usr/binç›®å½•ä¸‹åˆ é™¤(å¤‡ä»½)gccè¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ 6. ln s gcc3.4 gcc ,è¿™æ ·ä¹‹åï¼Œæ‰§è¡Œï¼šgcc v</code></pre></li><li><p>é—®é¢˜:</p><p> <code>libstdc++.so.5</code>æ‰¾ä¸åˆ°<code>No such file or directory</code></p><p>   è§£å†³åŠæ³•:</p><ol><li><p>ä¸‹è½½å®‰è£…åŒ…ï¼š</p><p>   è¯·åˆ°ubuntuçš„å®˜æ–¹ç½‘ç«™çš„packagesæ ç›®<code>http://packages.ubuntu.com/precise/amd64/libstdc++5/download</code>é€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„é“¾æ¥æ¥ä¸‹è½½.debæ–‡ä»¶ã€‚</p><p>   æˆ‘å·²ä¸‹è½½:<code>libstdc++5_3.3.625ubuntu1_amd64.deb</code></p></li><li><p>è§£åŒ…ä¸ºlibstdc++5ï¼š</p><p> <code>dpkg x libstdc++5_3.3.625ubuntu1_amd64.deb libstdc++5</code></p></li><li><p>å¤åˆ¶åˆ°ç³»ç»Ÿlibç›®å½•ï¼š</p><p> <code>sudo cp libstdc++5/usr/lib/x86_64linuxgnu/libstdc++.so.5.0.7 /usr/lib</code></p></li><li><p>è¿›å…¥ç³»ç»Ÿlibç›®å½•å»ºlibstdc++5é“¾æ¥ï¼š</p><p> <code>cd /usr/lib</code><br/><br> <code>sudo ln s libstdc++.so.5.0.7 libstdc++.so.5</code></p></li></ol></li><li><p>é—®é¢˜:</p><p> <code>libgcc_s.so.1</code>æ‰¾ä¸åˆ°</p><p>   è§£å†³æ–¹æ¡ˆ: ä¸äºˆç†ä¼š</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> database </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹è¿œç¨‹æ‹·è´æ–‡ä»¶å¤¹</title>
      <link href="/2016/03/15/yun-wei/linux-copy-remote/"/>
      <url>/2016/03/15/yun-wei/linux-copy-remote/</url>
      
        <content type="html"><![CDATA[<p><code>scp -r /opt/test root@202.119.200.201:/opt/</code></p><blockquote><p>è¿œç¨‹ä»ä¸€å°æœºå™¨æ‹·è´æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹åˆ°å¦ä¸€å°æœºå™¨</p></blockquote><span id="more"></span><pre><code>scp [-r] dir name@ip:dir1. scpè¿œç¨‹æ‹·è´å‘½ä»¤2. -rå¦‚æœæ˜¯æ‹·è´æ–‡ä»¶å¤¹ï¼Œéœ€è¦è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå‘å­ç›®å½•é€’å½’ï¼›å¦‚æœæ˜¯æ‹·è´æ–‡ä»¶ï¼Œåˆ™ä¸éœ€è¦3. diræºæœºå™¨ä¸Šçš„æºæ–‡ä»¶è·¯å¾„4. nameç›®æ ‡æœºå™¨çš„ç”¨æˆ·5. ipç›®æ ‡æœºå™¨IP6. diræ‹·è´åˆ°ç›®æ ‡æœºå™¨å“ªä¸ªç›®å½•</code></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ‹·è´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_å…è®¸rootç™»å½•</title>
      <link href="/2016/03/15/yun-wei/linux-ubuntu-root-login/"/>
      <url>/2016/03/15/yun-wei/linux-ubuntu-root-login/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ubuntu12.04é»˜è®¤æ˜¯ä¸å…è®¸rootç™»å½•çš„ï¼Œåœ¨ç™»å½•çª—å£åªèƒ½çœ‹åˆ°æ™®é€šç”¨æˆ·å’Œè®¿å®¢ç™»å½•ã€‚</p></blockquote><ol><li><p>ä»¥æ™®é€šèº«ä»½ç™»é™†Ubuntuåæˆ‘ä»¬éœ€è¦åšä¸€äº›ä¿®æ”¹,</p><p> æ™®é€šç”¨æˆ·ç™»å½•åï¼Œä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶éœ€è¦åˆ‡æ¢åˆ°è¶…çº§ç”¨æˆ·æ¨¡å¼,åœ¨ç»ˆç«¯çª—å£é‡Œé¢è¾“å…¥: <code>sudo -s</code>.ç„¶åè¾“å…¥æ™®é€šç”¨æˆ·ç™»é™†çš„å¯†ç ï¼Œå›è½¦å³å¯è¿›å…¥ rootç”¨æˆ·æƒé™æ¨¡å¼.</p><p> ç„¶åæ‰§è¡Œ: <code>vi /etc/lightdm/lightdm.conf</code></p></li></ol><span id="more"></span><pre><code>å¢åŠ          greeter-show-manual-login=true      allow-guest=false  ä¿®æ”¹å®Œçš„æ•´ä¸ªé…ç½®æ–‡ä»¶æ˜¯    [SeatDefaults]    greeter-session=unity-greeter    user-session=ubuntu    greeter-show-manual-login=true#æ‰‹å·¥è¾“å…¥ç™»é™†ç³»ç»Ÿçš„ç”¨æˆ·åå’Œå¯†ç     allow-guest=false#ä¸å…è®¸guestç™»å½•</code></pre><ol start="2"><li><p>ç„¶åæˆ‘ä»¬å¯åŠ¨rootå¸å·ï¼š</p><pre><code> sudo passwd root</code></pre><p> æ ¹æ®æç¤ºè¾“å…¥rootå¸å·å¯†ç ã€‚</p></li><li><p>é‡å¯ubuntuï¼Œç™»å½•çª—å£ä¼šæœ‰â€œç™»å½•â€é€‰é¡¹ï¼Œç‚¹å‡»â€œç™»å½•â€é€‰é¡¹ï¼Œå°±ä¼šæç¤ºè®©è¾“å…¥ç”¨æˆ·åäº†ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡rootç™»å½•äº†ã€‚</p></li></ol><h2 id="é€šè¿‡ç™»é™†ç•Œé¢è¿›å…¥ubuntu-14-04-çš„-rootã€‚"><a href="#é€šè¿‡ç™»é™†ç•Œé¢è¿›å…¥ubuntu-14-04-çš„-rootã€‚" class="headerlink" title="é€šè¿‡ç™»é™†ç•Œé¢è¿›å…¥ubuntu 14.04 çš„ rootã€‚"></a>é€šè¿‡ç™»é™†ç•Œé¢è¿›å…¥ubuntu 14.04 çš„ rootã€‚</h2><ol><li>æ‰“å¼€ç»ˆç«¯ã€‚</li><li>è¾“å…¥<code>sudo gedit /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf</code></li><li>åœ¨å¼¹å‡ºçš„ç¼–è¾‘æ¡†é‡Œè¾“å…¥ï¼š<code>greeter-show-manual-login=true</code> ä¿å­˜å…³é—­ã€‚</li><li>å†åœ¨ä¸­ç«¯ä¸­è¾“å…¥ï¼š<code>sudo passwd root</code></li><li>è¾“å…¥ä½ æƒ³è¦çš„å¯†ç ï¼Œå…³æœºé‡å¯åœ¨å¤šå‡ºçš„ç™»å½•æ¡†é‡Œè¾“å…¥root è¿˜æœ‰ä½ çš„å¯†ç å°±å¥½äº†ï¼</li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> root </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu_é˜²ç«å¢™æ“ä½œ</title>
      <link href="/2016/03/15/yun-wei/linux-ubuntu-ufw/"/>
      <url>/2016/03/15/yun-wei/linux-ubuntu-ufw/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å®‰è£…</p><pre><code> sudo apt-get install ufw</code></pre></li><li><p>å¯ç”¨</p><pre><code> sudo ufw enable sudo ufw default deny</code></pre><p> è¿è¡Œä»¥ä¸Šä¸¤æ¡å‘½ä»¤åï¼Œå¼€å¯äº†é˜²ç«å¢™ï¼Œå¹¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¼€å¯ã€‚<br> å…³é—­æ‰€æœ‰å¤–éƒ¨å¯¹æœ¬æœºçš„è®¿é—®ï¼Œä½†æœ¬æœºè®¿é—®å¤–éƒ¨æ­£å¸¸ã€‚</p></li></ol><span id="more"></span><ol start="3"><li><p>å¼€å¯&#x2F;ç¦ç”¨</p><pre><code> sudo ufw allow|deny [service]</code></pre><p> æ‰“å¼€æˆ–å…³é—­æŸä¸ªç«¯å£ï¼Œä¾‹å¦‚ï¼š</p><pre><code> sudo ufw allow smtpã€€å…è®¸æ‰€æœ‰çš„å¤–éƒ¨IPè®¿é—®æœ¬æœºçš„25/tcp (smtp)ç«¯å£ sudo ufw allow 22/tcp å…è®¸æ‰€æœ‰çš„å¤–éƒ¨IPè®¿é—®æœ¬æœºçš„22/tcp (ssh)ç«¯å£ sudo ufw allow 53 å…è®¸å¤–éƒ¨è®¿é—®53ç«¯å£(tcp/udp) sudo ufw allow from 192.168.1.100 å…è®¸æ­¤IPè®¿é—®æ‰€æœ‰çš„æœ¬æœºç«¯å£ sudo ufw allow proto udp 192.168.0.1 port 53 to 192.168.0.2 port 53 sudo ufw deny smtp ç¦æ­¢å¤–éƒ¨è®¿é—®smtpæœåŠ¡ sudo ufw delete allow smtp åˆ é™¤ä¸Šé¢å»ºç«‹çš„æŸæ¡è§„åˆ™</code></pre></li><li><p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p><pre><code> sudo ufw status</code></pre><p> ä¸€èˆ¬ç”¨æˆ·ï¼Œåªéœ€å¦‚ä¸‹è®¾ç½®ï¼š</p><ol><li><code>sudo apt-get install ufw</code></li><li><code>sudo ufw enable</code></li><li><code>sudo ufw default deny</code></li></ol><p> ä»¥ä¸Šä¸‰æ¡å‘½ä»¤å·²ç»è¶³å¤Ÿå®‰å…¨äº†ï¼Œå¦‚æœä½ éœ€è¦å¼€æ”¾æŸäº›æœåŠ¡ï¼Œå†ä½¿ç”¨<code>sudo ufw allow</code>å¼€å¯ã€‚<br> è¡¥å……ï¼š</p></li></ol><h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><ol><li><p>å¼€å¯&#x2F;å…³é—­é˜²ç«å¢™ (é»˜è®¤è®¾ç½®æ˜¯â€™disableâ€™)</p><pre><code> # ufw enable|disable</code></pre></li><li><p>è½¬æ¢æ—¥å¿—çŠ¶æ€</p><pre><code> # ufw logging on|off</code></pre></li><li><p>è®¾ç½®é»˜è®¤ç­–ç•¥ (æ¯”å¦‚ â€œmostly openâ€ vs â€œmostly closedâ€)</p><pre><code> # ufw default allow|deny</code></pre></li><li><p>è®¸å¯æˆ–è€…å±è”½æŸäº›å…¥åŸ çš„åŒ… (å¯ä»¥åœ¨â€œstatusâ€ ä¸­æŸ¥çœ‹åˆ°æœåŠ¡åˆ—è¡¨ï¼»è§åæ–‡ï¼½)ã€‚å¯ä»¥ç”¨â€œåè®®ï¼šç«¯å£â€çš„æ–¹å¼æŒ‡å®šä¸€ä¸ªå­˜åœ¨äº&#x2F;etc&#x2F;servicesä¸­çš„æœåŠ¡åç§°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŒ…çš„meta-dataã€‚ â€˜allowâ€™ å‚æ•°å°†æŠŠæ¡ç›®åŠ å…¥ &#x2F;etc&#x2F;ufw&#x2F;maps ï¼Œè€Œ â€˜denyâ€™ åˆ™ç›¸åã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code> # ufw allow|deny [service]</code></pre></li><li><p>æ˜¾ç¤ºé˜²ç«å¢™å’Œç«¯å£çš„ä¾¦å¬çŠ¶æ€ï¼Œå‚è§ &#x2F;var&#x2F;lib&#x2F;ufw&#x2F;mapsã€‚æ‹¬å·ä¸­çš„æ•°å­—å°†ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p><pre><code> # ufw status</code></pre></li></ol><p>ï¼»æ³¨æ„ï¼šä¸Šæ–‡ä¸­è™½ç„¶æ²¡æœ‰ä½¿ç”¨ sudoï¼Œä½†æ˜¯å‘½ä»¤æç¤ºç¬¦å·éƒ½æ˜¯â€œ#â€ã€‚æ‰€ä»¥â€¦â€¦ä½ çŸ¥é“å•¥æ„æ€äº†å“ˆã€‚åŸæ–‡å¦‚æ­¤ã€‚â”€â”€è¯‘è€…æ³¨ï¼½</p><h1 id="UFW-ä½¿ç”¨èŒƒä¾‹ï¼š"><a href="#UFW-ä½¿ç”¨èŒƒä¾‹ï¼š" class="headerlink" title="UFW ä½¿ç”¨èŒƒä¾‹ï¼š"></a>UFW ä½¿ç”¨èŒƒä¾‹ï¼š</h1><ol><li><p>å…è®¸ 53 ç«¯å£</p><pre><code> $ sudo ufw allow 53</code></pre></li><li><p>ç¦ç”¨ 53 ç«¯å£</p><pre><code> $ sudo ufw delete allow 53</code></pre></li><li><p>å…è®¸ 80 ç«¯å£</p><pre><code> $ sudo ufw allow 80/tcp</code></pre></li><li><p>ç¦ç”¨ 80 ç«¯å£</p><pre><code> $ sudo ufw delete allow 80/tcp</code></pre></li><li><p>å…è®¸ smtp ç«¯å£</p><pre><code> $ sudo ufw allow smtp</code></pre></li><li><p>åˆ é™¤ smtp ç«¯å£çš„è®¸å¯</p><pre><code> $ sudo ufw delete allow smtp</code></pre></li><li><p>å…è®¸æŸç‰¹å®š IP</p><pre><code> $ sudo ufw allow from 192.168.254.254</code></pre></li><li><p>åˆ é™¤ä¸Šé¢çš„è§„åˆ™</p><pre><code> $ sudo ufw delete allow from 192.168.254.254</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> é˜²ç«å¢™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Linuxä¸Šå®‰è£…MemcachedæœåŠ¡</title>
      <link href="/2016/03/14/zhong-jian-jian/install-memcache-linux/"/>
      <url>/2016/03/14/zhong-jian-jian/install-memcache-linux/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…MemcachedæœåŠ¡"><a href="#å®‰è£…MemcachedæœåŠ¡" class="headerlink" title="å®‰è£…MemcachedæœåŠ¡"></a>å®‰è£…MemcachedæœåŠ¡</h1><ol><li><p>åˆ†åˆ«æŠŠmemcachedå’Œlibeventä¸‹è½½å›æ¥ï¼Œæ”¾åˆ° &#x2F;tmp ç›®å½•ä¸‹ï¼š</p><pre><code> # cd /tmp # wget http://www.danga.com/memcached/dist/memcached-1.2.0.tar.gz # wget http://www.monkey.org/~provos/libevent-1.2.tar.gz</code></pre></li></ol><span id="more"></span><ol start="2"><li><p>å…ˆå®‰è£…libeventï¼š</p><pre><code> # tar zxvf libevent-1.2.tar.gz # cd libevent-1.2 # ./configure â€“prefix=/usr # make # make install</code></pre></li><li><p>æµ‹è¯•libeventæ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><pre><code> # ls -al /usr/lib | grep libevent lrwxrwxrwx 1 root root 21 11?? 12 17:38 libevent-1.2.so.1 -&gt; libevent-1.2.so.1.0.3 -rwxr-xr-x 1 root root 263546 11?? 12 17:38 libevent-1.2.so.1.0.3 -rw-râ€“râ€“ 1 root root 454156 11?? 12 17:38 libevent.a -rwxr-xr-x 1 root root 811 11?? 12 17:38 libevent.la lrwxrwxrwx 1 root root 21 11?? 12 17:38 libevent.so -&gt; libevent-1.2.so.1.0.3 è¿˜ä¸é”™ï¼Œéƒ½å®‰è£…ä¸Šäº†ã€‚</code></pre></li><li><p>å®‰è£…memcachedï¼ŒåŒæ—¶éœ€è¦å®‰è£…ä¸­æŒ‡å®šlibeventçš„å®‰è£…ä½ç½®ï¼š</p><pre><code> # cd /tmp # tar zxvf memcached-1.2.0.tar.gz # cd memcached-1.2.0 # ./configure â€“with-libevent=/usr # make # make install</code></pre></li></ol><p>å¦‚æœä¸­é—´å‡ºç°æŠ¥é”™ï¼Œè¯·ä»”ç»†æ£€æŸ¥é”™è¯¯ä¿¡æ¯ï¼ŒæŒ‰ç…§é”™è¯¯ä¿¡æ¯æ¥é…ç½®æˆ–è€…å¢åŠ ç›¸åº”çš„åº“æˆ–è€…è·¯å¾„ã€‚<br>å®‰è£…å®Œæˆåä¼šæŠŠmemcachedæ”¾åˆ° &#x2F;usr&#x2F;local&#x2F;bin&#x2F;memcached ï¼Œ</p><ol start="5"><li>æµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…memcachedï¼š</li><li><pre><code> # ls -al /usr/local/bin/mem* -rwxr-xr-x 1 root root 137986 11?? 12 17:39 /usr/local/bin/memcached -rwxr-xr-x 1 root root 140179 11?? 12 17:39 /usr/local/bin/memcached-debug</code></pre></li></ol><h1 id="å¯åŠ¨MemcachedæœåŠ¡"><a href="#å¯åŠ¨MemcachedæœåŠ¡" class="headerlink" title="å¯åŠ¨MemcachedæœåŠ¡"></a>å¯åŠ¨MemcachedæœåŠ¡</h1><ol><li><p>å¯åŠ¨Memcacheçš„æœåŠ¡å™¨ç«¯ï¼š</p><pre><code> # /usr/local/bin/memcached -d -m 10 -u root -l 192.168.141.64 -p 12000 -c 256 -P /tmp/memcached.pid -dé€‰é¡¹æ˜¯å¯åŠ¨ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œ -mæ˜¯åˆ†é…ç»™Memcacheä½¿ç”¨çš„å†…å­˜æ•°é‡ï¼Œå•ä½æ˜¯MBï¼Œæˆ‘è¿™é‡Œæ˜¯10MBï¼Œ -uæ˜¯è¿è¡ŒMemcacheçš„ç”¨æˆ·ï¼Œæˆ‘è¿™é‡Œæ˜¯rootï¼Œ -læ˜¯ç›‘å¬çš„æœåŠ¡å™¨IPåœ°å€ï¼Œå¦‚æœæœ‰å¤šä¸ªåœ°å€çš„è¯ï¼Œæˆ‘è¿™é‡ŒæŒ‡å®šäº†æœåŠ¡å™¨çš„IPåœ°å€192.168.0.200ï¼Œ -pæ˜¯è®¾ç½®Memcacheç›‘å¬çš„ç«¯å£ï¼Œæˆ‘è¿™é‡Œè®¾ç½®äº†12000ï¼Œæœ€å¥½æ˜¯1024ä»¥ä¸Šçš„ç«¯å£ï¼Œ -cé€‰é¡¹æ˜¯æœ€å¤§è¿è¡Œçš„å¹¶å‘è¿æ¥æ•°ï¼Œé»˜è®¤æ˜¯1024ï¼Œæˆ‘è¿™é‡Œè®¾ç½®äº†256ï¼ŒæŒ‰ç…§ä½ æœåŠ¡å™¨çš„è´Ÿè½½é‡æ¥è®¾å®šï¼Œ -Pæ˜¯è®¾ç½®ä¿å­˜Memcacheçš„pidæ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œæ˜¯ä¿å­˜åœ¨ /tmp/memcached.pidï¼Œ</code></pre></li><li><p>å¦‚æœè¦ç»“æŸMemcacheè¿›ç¨‹ï¼Œæ‰§è¡Œï¼š</p><pre><code> # kill `cat /tmp/memcached.pid` ä¹Ÿå¯ä»¥å¯åŠ¨å¤šä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä¸è¿‡ç«¯å£ä¸èƒ½é‡å¤ã€‚</code></pre></li></ol><h1 id="æµ‹è¯•Memcached"><a href="#æµ‹è¯•Memcached" class="headerlink" title="æµ‹è¯•Memcached"></a>æµ‹è¯•Memcached</h1><pre><code>[root@localhost /]# telnet 192.168.141.64 12000Trying 192.168.141.64...Connected to 192.168.141.64 (192.168.141.64).Escape character is &#39;^]&#39;.set key1 0 60 4zhouSTOREDget key1VALUE key1 0 4zhouEND</code></pre><blockquote><p>è‡³æ­¤Memcachedå®‰è£…æˆåŠŸ!</p></blockquote><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜:"></a>å¸¸è§é—®é¢˜:</h1><ol><li><p>å¦‚æœå¯åŠ¨MemcachedæœåŠ¡çš„æ—¶å€™é‡åˆ°äº†</p><pre><code> /usr/local/bin/memcached: error while loading shared libraries: libevent-1.2.so.1: cannot open shared object file: No such file or directory;</code></pre><blockquote><p>è§£å†³æ–¹æ¡ˆ:</p></blockquote><pre><code> [root@localhost bin]# LD_DEBUG=libs memcached -v  [root@localhost bin]# ln -s /usr/lib/libevent-1.2.so.1 /usr/lib64/libevent-1.2.so.1 [root@localhost bin]# /usr/local/bin/memcached -d -m 100 -u root -p 12000 -c 1000 -P /tmp/memcached.pid [root@localhost bin]# ps -aux å¯ä»¥çœ‹åˆ°å¯åŠ¨çš„MemcachedæœåŠ¡äº†.</code></pre></li><li><p>æŠŠMemcachedæœåŠ¡åŠ è½½åˆ°Linuxçš„å¯åŠ¨é¡¹ä¸­.ä¸‡ä¸€æœºå™¨æ–­ç”µç³»ç»Ÿé‡å¯.é‚£ä¹ˆMemcachedå°±ä¼šè‡ªåŠ¨å¯åŠ¨äº†.</p><pre><code> å‡å¦‚å¯åŠ¨Memcacheçš„æœåŠ¡å™¨ç«¯çš„å‘½ä»¤ä¸ºï¼š # /usr/local/bin/memcached -d -m 10 -u root -l 192.168.141.64 -p 12000 -c 256 -P /tmp/memcached.pidå®¹æ¥è‡ª17jquery</code></pre><blockquote><p>æƒ³å¼€æœºè‡ªåŠ¨å¯åŠ¨çš„è¯ï¼Œåªéœ€åœ¨&#x2F;etc&#x2F;rc.d&#x2F;rc.localä¸­åŠ å…¥ä¸€è¡Œï¼Œä¸‹é¢å‘½ä»¤<br> &#x2F;usr&#x2F;local&#x2F;memcached&#x2F;bin&#x2F;memcached -d -m 10 -p 12000 -u apache -c 256<br> ä¸Šé¢æœ‰äº›ä¸œè¥¿å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼šå³ï¼Œipä¸æŒ‡å®šæ—¶ï¼Œé»˜è®¤æ˜¯æœ¬æœºï¼Œç”¨æˆ·:æœ€å¥½é€‰æ‹©æ˜¯ï¼šapache æˆ– deamon<br> è¿™æ ·ï¼Œä¹Ÿå°±æ˜¯å±äºå“ªä¸ªç”¨æˆ·çš„æœåŠ¡ï¼Œç”±å“ªä¸ªç”¨æˆ·å¯åŠ¨ã€‚</p></blockquote></li></ol><h1 id="memcachedä¹‹javaå®¢æˆ·ç«¯-spymemcachedä¸springæ•´åˆ"><a href="#memcachedä¹‹javaå®¢æˆ·ç«¯-spymemcachedä¸springæ•´åˆ" class="headerlink" title="memcachedä¹‹javaå®¢æˆ·ç«¯: spymemcachedä¸springæ•´åˆ"></a>memcachedä¹‹javaå®¢æˆ·ç«¯: spymemcachedä¸springæ•´åˆ</h1><hr><blockquote><p>net.spy.memcached.spring.MemcachedClientFactoryBeanåœ¨net.spy.memcached.MemcachedClientæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™åˆ›å»ºMemcachedClientçš„æ–°å®ä¾‹ã€‚</p></blockquote><pre><code>&lt;bean id=&quot;memcachedClient&quot; class=&quot;net.spy.memcached.spring.MemcachedClientFactoryBean&quot;&gt;      &lt;property name=&quot;servers&quot; value=&quot;host1:11211,host2:11211,host3:11211&quot;/&gt;      &lt;property name=&quot;protocol&quot; value=&quot;BINARY&quot;/&gt;      &lt;property name=&quot;transcoder&quot;&gt;        &lt;bean class=&quot;net.spy.memcached.transcoders.SerializingTranscoder&quot;&gt;          &lt;property name=&quot;compressionThreshold&quot; value=&quot;1024&quot;/&gt;        &lt;/bean&gt;      &lt;/property&gt;      &lt;property name=&quot;opTimeout&quot; value=&quot;1000&quot;/&gt;      &lt;property name=&quot;timeoutExceptionThreshold&quot; value=&quot;1998&quot;/&gt;      &lt;property name=&quot;hashAlg&quot; value=&quot;KETAMA_HASH&quot;/&gt;      &lt;property name=&quot;locatorType&quot; value=&quot;CONSISTENT&quot;/&gt;       &lt;property name=&quot;failureMode&quot; value=&quot;Redistribute&quot;/&gt;      &lt;property name=&quot;useNagleAlgorithm&quot; value=&quot;false&quot;/&gt;  &lt;/bean&gt;  </code></pre><blockquote><p>å±æ€§è¯´æ˜ï¼š</p></blockquote><ol><li>Servers<br>ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ç”±ç©ºæ ¼æˆ–é€—å·åˆ†éš”çš„ä¸»æœºæˆ–IPåœ°å€ä¸ç«¯å£å·</li><li>Daemon<br>è®¾ç½®IOçº¿ç¨‹çš„å®ˆæŠ¤è¿›ç¨‹(é»˜è®¤ä¸ºtrue)çŠ¶æ€</li><li>FailureMode<br>è®¾ç½®æ•…éšœæ¨¡å¼(å–æ¶ˆï¼Œé‡æ–°åˆ†é…ï¼Œé‡è¯•)ï¼Œé»˜è®¤æ˜¯é‡æ–°åˆ†é…</li><li>HashAlg<br>è®¾ç½®å“ˆå¸Œç®—æ³•(è§net.spy.memcached.HashAlgorithmçš„å€¼)</li><li>InitialObservers<br>è®¾ç½®åˆå§‹è¿æ¥çš„è§‚å¯Ÿè€…(è§‚å¯Ÿåˆå§‹è¿æ¥)</li><li>LocatorType<br>è®¾ç½®å®šä½å™¨ç±»å‹(ARRAY_MOD,CONSISTENT),é»˜è®¤æ˜¯ARRAY_MOD</li><li>MaxReconnectDelay<br>è®¾ç½®æœ€å¤§çš„è¿æ¥å»¶è¿Ÿ</li><li>OpFact<br>è®¾ç½®æ“ä½œå·¥å‚</li><li>OpQueueFactory<br>è®¾ç½®æ“ä½œé˜Ÿåˆ—å·¥å‚</li><li>OpTimeout<br>ä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®é»˜è®¤çš„æ“ä½œè¶…æ—¶æ—¶é—´</li><li>Protocol<br>æŒ‡å®šè¦ä½¿ç”¨çš„åè®®(BINARY,TEXT),é»˜è®¤æ˜¯TEXT</li><li>ReadBufferSize<br>è®¾ç½®è¯»å–çš„ç¼“å†²åŒºå¤§å°</li><li>ReadOpQueueFactory<br>è®¾ç½®è¯»é˜Ÿåˆ—å·¥å‚</li><li>ShouldOptimize<br>å¦‚æœé»˜è®¤æ“ä½œä¼˜åŒ–æ˜¯ä¸å¯å–çš„ï¼Œè®¾ç½®ä¸ºfalse(é»˜è®¤ä¸ºtrue)</li><li>Transcoder<br>è®¾ç½®é»˜è®¤çš„è½¬ç å™¨(é»˜è®¤ä»¥net.spy.memcached.transcoders.SerializingTranscoder)</li><li>UseNagleAlgorithm<br>å¦‚æœä½ æƒ³ä½¿ç”¨Nagleç®—æ³•ï¼Œè®¾ç½®ä¸ºtrue</li><li>WriteOpQueueFactory<br>è®¾ç½®å†™é˜Ÿåˆ—å·¥å‚</li><li>AuthDescriptor<br>è®¾ç½®authDescriptor,åœ¨æ–°çš„è¿æ¥ä¸Šä½¿ç”¨èº«ä»½éªŒè¯</li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Memcached </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸Šå®‰è£…JDK</title>
      <link href="/2016/03/14/hou-duan/install-jdk-linux/"/>
      <url>/2016/03/14/hou-duan/install-jdk-linux/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¸Šä¼ <code>jdk1.6.0_26.zip</code></p></li><li><p>è§£å‹åè®¾ç½®ç¯å¢ƒå˜é‡</p><ul><li><p>&#x2F;etc&#x2F;rc.local</p><pre><code>  export JAVA_HOME=/opt/jdk1.6.0_26  export JRE_HOME=$&#123;JAVA_HOME&#125;/jre  export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib  export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</code></pre></li><li><p>~&#x2F;.bashrc</p><pre><code>  export JAVA_HOME=/opt/jdk1.6.0_26  export JRE_HOME=$&#123;JAVA_HOME&#125;/jre  export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib  export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</code></pre></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Java </tag>
            
            <tag> JDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå‘½ä»¤æ‰“waråŒ…</title>
      <link href="/2016/03/14/hou-duan/java-war/"/>
      <url>/2016/03/14/hou-duan/java-war/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å‘½ä»¤è¡Œè¿›å…¥webappä¸‹</p></li><li><p>æ‰§è¡Œ<code>jar cvf temp.war */.</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> war </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹å®‰è£…èŠ±ç”Ÿå£³</title>
      <link href="/2016/03/14/gong-ju/install-phddns-linux/"/>
      <url>/2016/03/14/gong-ju/install-phddns-linux/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å»èŠ±ç”Ÿå£³å®˜ç½‘ä¸‹è½½èŠ±ç”Ÿå£³for Linuxï¼ˆphddns-2.0.5.19225.tar.gzï¼‰</p><pre><code> D:\Software\OS\Linux\èŠ±ç”Ÿå£³</code></pre></li><li><p>è§£å‹å‹ç¼©åŒ…</p><pre><code> tar zxvf phddns-2.0.5.19225.tar.gz</code></pre></li></ol><span id="more"></span><ol start="3"><li><p>è½¬åˆ°è§£å‹åŒ…é‡Œé¢cd phddns-2.0.2.16556&#x2F;</p></li><li><p>.&#x2F;configure </p><pre><code> PSï¼š å¦‚æœå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š checking for C++ compiler default output file name... configure: error: C++ compiler cannot create executables See `config.log&#39; for more details. åˆ™æ˜¯G++æ²¡æœ‰å®‰è£…å¥½ï¼Œä½ éœ€è¦å®‰è£…å¥½G++ï¼Œè¿™ä¸ªå¯ä»¥å‚ç…§ï¼šhttp://www.cnblogs.com/umasuo/archive/2012/06/12/ubuntu_install_gplusplus.html å®‰è£…å¥½åé‡æ–°è¿è¡Œconfigureä¸€ä¸‹</code></pre></li><li><p>ç¼–è¯‘ï¼šmake</p></li><li><p>è·³è½¬åˆ°srcç›®å½•,æŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶åˆ—è¡¨ï¼šcd src  ll<br>ã€€  è‹¥åˆ—è¡¨ä¸­æœ‰ï¼š-rwxr-xr-x 1 root root 47736 Jun 12 11:46 phddns*<br> è¯´æ˜è½¯ä»¶ç¼–è¯‘å¥½äº†</p></li><li><p>è¿è¡Œï¼š.&#x2F;phddns</p></li></ol><p>PSï¼š</p><blockquote><p>ç”±äºæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä¸€ä¸‹ï¼š</p></blockquote><pre><code>Enter server address(press ENTER use phlinux3.oray.net):åœ¨è¿™é‡Œè¾“å…¥æœåŠ¡å™¨åœ°å€ï¼Œè¿™é‡Œç›´æ¥å›è½¦å°±è¡Œäº†ã€‚Enter your Oray account:åœ¨è¿™é‡Œè¾“å…¥èŠ±ç”Ÿå£³çš„è´¦å·Password:ç„¶åæ˜¯passwordNetwork interface(s):[wlan0] = [IP:192.168.1.100][MAC:fd2e028a:fd2e028b:fd2e028c:fd2e028d:fd2e028e:fd2e028f][lo] = [IP:127.0.0.1][MAC:fd2e0262:fd2e0263:fd2e0264:fd2e0265:fd2e0266:fd2e0267]ç„¶åé€‰æ‹©éœ€è¦ç»‘å®šçš„ç½‘å¡ï¼Œè¦æ˜¯æ²¡æœ‰ç‰¹æ®Šçš„è¯ï¼Œé»˜è®¤å°±å¯ä»¥äº†ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯æ— çº¿ï¼Œæ‰€ä»¥é€‰æ‹©äº†wlan0Log to use(default /var/log/phddns.log):é€‰æ‹©æ—¥å¿—çš„ä¿å­˜åœ°ç‚¹Save to configuration file (/etc/phlinux.conf)?(yes/no/other):é€‰æ‹©é…ç½®æ–‡ä»¶çš„ä¿å­˜åœ°ç‚¹ï¼Œé€‰æ‹©yesåˆ™ç›´æ¥ä¿å­˜åˆ°/etc/phlinux.confï¼Œè¾“å…¥otherå¯ä»¥æŒ‡å®šæ–‡ä»¶ï¼Œè¿™é‡Œé»˜è®¤å°±å¯ä»¥äº†ã€‚</code></pre><blockquote><p>æ¥ä¸‹æ¥ç¨‹åºå¼€å§‹è¿è¡Œï¼Œä¼šå‡ºç°ä»¥ä¸‹ä¸œè¥¿ï¼š</p></blockquote><pre><code>192.168.1.100NIC bind successdefOnStatusChanged okConnectingdefOnStatusChanged okRedirectingdefOnStatusChanged okConnectingdefOnStatusChanged okDomainListeddefOnDomainRegistered umasuo.eicp.netdefOnDomainRegistered umasuo.comdefOnDomainRegistered www.umasuo.comdefOnUserInfo &lt;userInfo account=&#39;umasuo&#39; login=&#39;umasuo&#39;&gt;&lt;ID&gt;7554606&lt;/ID&gt;&lt;Account&gt;umasuo&lt;/Account&gt;&lt;Password&gt;&lt;/Password&gt;&lt;Email&gt;liuquan89@gmail.com&lt;/Email&gt;&lt;RegDate&gt;1339458707&lt;/RegDate&gt;&lt;Credit&gt;0.0&lt;/Credit&gt;&lt;Largess&gt;0.0&lt;/Largess&gt;&lt;IsEnable&gt;&lt;/IsEnable&gt;&lt;PHServer&gt;phcnc.oray.net&lt;/PHServer&gt;&lt;IsEnterprise&gt;0&lt;/IsEnterprise&gt;&lt;Contactor&gt;umasuo&lt;/Contactor&gt;&lt;IsMale&gt;1&lt;/IsMale&gt;&lt;ServiceType&gt;0&lt;/ServiceType&gt;&lt;ClientIP&gt;2105538930&lt;/ClientIP&gt;&lt;/userInfo&gt;defOnAccountDomainInfo &lt;domainInfo account=&#39;umasuo&#39; login=&#39;umasuo&#39;&gt;&lt;roots&gt;&lt;root&gt;&lt;RootName&gt;umasuo.com&lt;/RootName&gt;&lt;RegDate&gt;1339458812&lt;/RegDate&gt;&lt;ExpireDate&gt;0&lt;/ExpireDate&gt;&lt;StatusCode&gt;17&lt;/StatusCode&gt;&lt;IsCnRoot&gt;0&lt;/IsCnRoot&gt;&lt;/root&gt;&lt;/roots&gt;&lt;domains&gt;&lt;domain&gt;&lt;DomainName&gt;umasuo.eicp.net&lt;/DomainName&gt;&lt;RegDate&gt;1339458712&lt;/RegDate&gt;&lt;Account&gt;umasuo&lt;/Account&gt;&lt;StatusCode&gt;153&lt;/StatusCode&gt;&lt;RootName&gt;eicp.net&lt;/RootName&gt;&lt;IsFree&gt;1&lt;/IsFree&gt;&lt;/domain&gt;&lt;domain&gt;&lt;DomainName&gt;umasuo.com&lt;/DomainName&gt;&lt;RegDate&gt;1339458820&lt;/RegDate&gt;&lt;Account&gt;umasuo&lt;/Account&gt;&lt;StatusCode&gt;25&lt;/StatusCode&gt;&lt;RootName&gt;umasuo.com&lt;/RootName&gt;&lt;IsFree&gt;0&lt;/IsFree&gt;&lt;/domain&gt;&lt;domain&gt;&lt;DomainName&gt;www.umasuo.com&lt;/DomainName&gt;&lt;RegDate&gt;1339458820&lt;/RegDate&gt;&lt;Account&gt;umasuo&lt;/Account&gt;&lt;StatusCode&gt;25&lt;/StatusCode&gt;&lt;RootName&gt;umasuo.com&lt;/RootName&gt;&lt;IsFree&gt;0&lt;/IsFree&gt;&lt;/domain&gt;&lt;/domains&gt;&lt;domainInfo&gt;defOnStatusChanged okDomainsRegistered, UserType: 0çœ‹åˆ°ä¸Šé¢è¿™äº›å°±è¡¨ç¤ºç™»å½•æˆåŠŸï¼Œè¿™æ—¶å€™ä½ å¯ä»¥pingä¸€ä¸‹ä½ æ‰€ç»‘å®šçš„åŸŸåï¼Œå‘ç°èƒ½å¤Ÿpingé€šäº†ã€‚</code></pre><blockquote><p>è¿™ä¸ªæ—¶å€™å¯ä»¥æŒ‰ctrl+cå…ˆé€€å‡ºç¨‹åºï¼Œå°†phddnsæ‹·è´åˆ°ä½ å¸Œæœ›çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼š</p></blockquote><pre><code>cp phddns /opt/</code></pre><blockquote><p>è¿™ç§ä¸œè¥¿ä¸€èˆ¬å¯ä»¥é‡‡ç”¨åå°æ¨¡å¼è¿è¡Œï¼š</p></blockquote><pre><code>/opt/phddns -c /etc/phlinux.conf -d</code></pre><blockquote><p>è¿™æ ·åŸºæœ¬å°±å¯ä»¥äº†ï¼Œå¦‚æœæœ‰å…´è¶£è¿˜å¯ä»¥å°†å…¶é…ç½®è‡ªåŠ¨å¯åŠ¨ã€‚</p></blockquote><pre><code>PS:è®¾ç½®å¼€æœºå¯åŠ¨ï¼švi /etc/rc.localæœ€åä¸€è¡ŒåŠ ä¸Š/opt/phddns -c /etc/phlinux.conf -dps:åˆšåˆšæƒ³åœ¨ubuntuä¸Šå®‰è£…ä¸€ä¸ªèŠ±ç”Ÿå£³ï¼Œä½†æ˜¯æŠŠèŠ±ç”Ÿå£³ä¸‹è½½ä¸‹æ¥ä»¥åæƒ³è¿›è¡Œç¼–è¯‘çš„æ—¶å€™å‡ºç°äº†checking for C++ compiler default output file name... configure: error: C++ compiler cannot create executablesSee `config.log&#39; for more details.å¤§ä»™æ˜¯G++æ²¡æœ‰è£…å¥½ï¼Œäºæ˜¯å°±è£…äº†ä¸€æ¬¡G++ubuntu ä¸çŸ¥é“ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹å°±è‡ªå¸¦äº†GCCï¼Œä½†æ˜¯G++è²Œä¼¼æ²¡æœ‰ï¼Œäºæ˜¯ç”¨apt-get install g++å®‰è£…ï¼Œå‡ºç°ä¸‹é¢é”™è¯¯ï¼šThe following packages have unmet dependencies:g++ : Depends: g++-4.6 (&gt;= 4.6.3-1~) but it is not going to be installedgoogle-chrome-stable : Depends: libxss1 but it is not going to be installedE: Unmet dependencies. Try &#39;apt-get -f install&#39; with no packages (or specify a solution).è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºæœ‰äº›éœ€è¦çš„åŒ…æ²¡æœ‰å°è¯•ä½¿ç”¨apt-get -f installæŠŠæ¬ ç¼ºçš„åŒ…å®‰è£…å®Œæ¯•ã€‚å†æ¬¡é‡è¯•apt-get install g++å®‰è£…æˆåŠŸè¿è¡Œg++ --versionæ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼šg++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3Copyright (C) 2011 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.è¯´æ˜G++å®‰è£…æˆåŠŸäº†ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> èŠ±ç”Ÿå£³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_è¿œç¨‹è®¿é—®Linuxä¸‹çš„mysql</title>
      <link href="/2016/03/14/shu-ju-ku/linux-access-mysql-remote/"/>
      <url>/2016/03/14/shu-ju-ku/linux-access-mysql-remote/</url>
      
        <content type="html"><![CDATA[<ol><li><p>é¦–å…ˆå°è¯•åœ¨mysqlå†…èµ‹äºˆè¯¥è´¦æˆ·ä»è¿œç¨‹IPè®¿é—®çš„æƒé™ã€‚</p><pre><code> mysql -u root -p use mysql; ç™»é™†ä»¥åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç»™äºˆè¿œç¨‹è®¿é—®å®¢æˆ·ç«¯æƒé™.. grant all on *.* to &#39;ray7hu&#39;@&#39;192.168.1.5&#39; identified by &#39;password&#39;; å…¶ä¸­ï¼šray7huè¡¨ç¤ºç”¨æˆ·å.  &#39;192.168.1.5&#39; æ˜¯éœ€è¦èµ‹äºˆè®¿é—®æƒé™çš„Iipåœ°å€ï¼›passwordè¡¨ç¤ºè¿œç¨‹ç™»é™†å¯†ç . mysql&gt; grant all on *.* to user_name@&#39;%&#39;identified by&#39;user_password&#39;;  mysql&gt; grant all on *.* to user_name@&#39;%&#39; identified by &#39;user_password&#39;; ä¸Šé¢çš„å‘½ä»¤æˆäºˆçš„ç”¨æˆ·æƒé™å¯ä»¥è®¿é—®mysqlä¸­çš„ä»»æ„æ•°æ®åº“å’Œè¡¨.</code></pre></li></ol><span id="more"></span><ol start="2"><li><p>å–æ¶ˆmysqlæœ¬æœºç»‘å®š</p><pre><code> ä¹Ÿå°±æ˜¯å–æ¶ˆmysqlé»˜è®¤çš„åªèƒ½æœ¬æœºè®¿é—®çš„é™åˆ¶ã€‚ ç¼–è¾‘/etc/mysql/my.cnfï¼ˆubuntuä¸‹é»˜è®¤mysqlçš„è¯å°±æ˜¯my.cnfï¼Œä¸ç„¶å°±æœ‰å¯èƒ½ä¸æ˜¯è¿™ä¸ªæ–‡ä»¶åï¼‰ï¼›æ‰¾åˆ° # Instead of skip-networking the defaultis now to listen only on # localhost which is more compatible and is not less secure. bind-address = 127.0.0.1 å°†&quot;bind-address = 127.0.0.1&quot;æ³¨é‡Šæ‰ï¼ˆå‰é¢åŠ ä¸Šä¸ª#å³å¯ï¼‰ï¼›å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥å°†127.0.0.1ä¿®æ”¹æˆç‰¹å®šçš„IPåœ°å€ã€‚ ä¿®æ”¹ä¹‹åéœ€è¦é‡å¯ä¸€ä¸‹mysqlæœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚å‘½ä»¤ï¼š sudo /etc/init.d/mysql restart è‡³æ­¤å·²ç»èƒ½å¤Ÿè¿œç¨‹è®¿é—®MySQLï¼Œä½†æ˜¯ä½ ä¹Ÿè®¸ä¼šå‘ç°èƒ½è®¿é—®ä½†æ˜¯çœ‹ä¸åˆ°æ•°æ®åº“ã€‚è¿™æ˜¯å› ä¸ºè¿˜æ²¡æœ‰æˆäºˆè®¿é—®ç‰¹å®šæ•°æ®åº“çš„æƒé™ã€‚</code></pre></li><li><p>ç»™ä»¥å­˜åœ¨çš„æ•°æ®åº“æˆæƒ</p><pre><code> å¦‚æœç”¨æˆ·test ç»å¸¸åœ¨è¿œç¨‹IPåœ°å€192.168.1.5çš„å®¢æˆ·ç«¯è®¿é—®webdbæ•°æ®åº“ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„å‘½ä»¤åº”è¯¥ä¸ºï¼ˆæ”¹è¡¨æ³•ï¼‰ï¼š mysql&gt; use mysql mysql&gt; update db set Host=&#39;192.168.1.5&#39;where Db=&#39;webdb&#39;; mysql&gt; update user set Host=&#39;192.168.1.5&#39;where user=&#39;test&#39;; è‡³æ­¤ï¼Œå¦‚æœæ²¡æœ‰æ„å¤–çš„è¯ï¼Œåº”è¯¥å°±èƒ½è¿œç¨‹è®¿é—®æ•°æ®åº“äº†ã€‚</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> database </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_åŸºæœ¬å­¦ä¹ </title>
      <link href="/2016/03/14/yun-wei/linux-base-study/"/>
      <url>/2016/03/14/yun-wei/linux-base-study/</url>
      
        <content type="html"><![CDATA[<ol><li>å¿«æ·æ“ä½œï¼š<ul><li>åˆ‡æ¢æ§åˆ¶å°ï¼Œç”±å›¾å½¢è½¬æ¢åˆ°æ§åˆ¶å°æ¨¡å¼ï¼šctrl+alt+f1(åŒæ—¶æŒ‰ä¸‹3ç§’é’Ÿä¸è¦é©¬ä¸Šæ¾å¼€)ã€‚ç”±æ§åˆ¶å°è½¬å‘å›¾å½¢æ¨¡å¼æ˜¯ï¼šalt+f7 </li><li>å‘½ä»¤è¡Œâ€”&gt;å›¾å½¢ç•Œé¢ startx</li><li>ä¿®æ”¹é»˜è®¤çš„è¯­è¨€é¡¹ï¼ˆåœ¨æ§åˆ¶å°ä¸‹ï¼‰ï¼švi &#x2F;etc&#x2F;sysconfig&#x2F;i18nä¸­çš„LANG&#x3D;zh_CN.GB18030(æ³¨æ„å¤§å°å†™ï¼Œç„¶åé‡å¯ç³»ç»Ÿå³å¯) </li><li>ä¿®æ”¹é»˜è®¤å¯åŠ¨çº§åˆ«ï¼švi &#x2F;etc&#x2F;inittab ä¿®æ”¹id:3:initdefaultä¸­çš„3ä¸ºæƒ³è¦çš„çº§åˆ«</li><li>ç¿»é¡µï¼šshift+pageup&#x2F;pagedown</li><li>å…³æœºï¼šshutdown</li><li>é‡å¯ï¼šreboot</li></ul></li></ol><span id="more"></span><ol start="2"><li><p>æˆ‘çš„Linuxé…ç½®</p><pre><code> ç”¨æˆ·årootå¯†ç sunhao ç”¨æˆ·åsunhaoå¯†ç 1314520 IPåœ°å€ 192.168.220.129 å¹¿æ’­åœ°å€ 192.168.220.255 å­ç½‘æ©ç 255.255.255.0</code></pre></li><li><p>Linuxä¸­çš„å‘½ä»¤ï¼š</p><ul><li>pwdæŸ¥çœ‹å½“å‰è·¯å¾„å</li><li>whoamiæŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·å</li><li>lsåˆ—å‡ºå½“å‰è·¯å¾„ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•<ul><li>ls -l æŒ‰ç…§ä¸€å®šæ ¼å¼(å®éªŒ)<br/><br>   ä»¥då¼€å¤´çš„éƒ½æ˜¯ç›®å½•<br/><br>   ä»¥-å¼€å¤´çš„éƒ½æ˜¯æ–‡ä»¶<br/><br>   ä»¥lå¼€å¤´çš„éƒ½æ˜¯é“¾æ¥</li><li>ls -RæŒ‰ç…§æ ‘çŠ¶ç»“æ„åˆ—å‡ºç›®å½•</li></ul></li><li>cdè¿›å…¥ä¸€ä¸ªç›®å½•<ul><li>cd ..è¿”å›ä¸Šä¸€å±‚ç›®å½•</li></ul></li><li>mkdir åˆ›å»ºä¸€ä¸ªç›®å½•</li><li>touch åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</li><li>rmdir åˆ é™¤ä¸€ä¸ªç›®å½•(åªèƒ½æ˜¯ç©ºç›®å½•)<ul><li>rm -rf ç›®å½•å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªç›®å½•(ä¸ç®¡æ˜¯å¦ä¸ºç©º)</li><li>rm -r ç›®å½•åˆ é™¤ä¸€ä¸ªéç©ºçš„ç›®å½•(ä¼šè¯¢é—®æ˜¯å¦åˆ é™¤æ­¤ç›®å½•çš„å­ç›®å½•)</li></ul></li><li>mount æŒ‚è½½<ul><li>mount &#x2F;dev&#x2F;cdrom &#x2F;mnt&#x2F;cdræŠŠdevä¸‹çš„cdrom(å…‰é©±)æŒ‚è½½åœ¨mntä¸‹çš„cdrç›®å½•ä¸‹</li><li>umount (è®¾å¤‡å&#x2F;æŒ‚è½½ç‚¹å)å–æ¶ˆæŒ‚è½½(æ³¨æ„è¦æ¨å‡ºè®¿é—®è®¾å¤‡)</li></ul></li><li>cpæ‹·è´<ul><li>cp 1 2æŠŠæ–‡ä»¶åä¸º1çš„æ–‡ä»¶æ‹·è´ä¸€ä»½ä¸ºæ–‡ä»¶2</li><li>cp-rs1 s2æŠŠç›®å½•s1å¤åˆ¶åˆ°ç›®å½•s2ä¸‹</li></ul></li><li>mvç§»åŠ¨æ–‡ä»¶<ul><li>mv 1 s1æŠŠæ–‡ä»¶1ç§»åŠ¨åˆ°s1ç›®å½•ä¸‹</li><li>mv -råŒcp -r</li><li>mv sunhaoInfo sunhaoæŠŠåä¸ºsunhaoInfoçš„æ–‡ä»¶å¤¹æ”¹åä¸ºsunhao</li></ul></li><li>clearæ¸…å±</li><li>vi(æ–‡æœ¬ç¼–è¾‘å™¨)å¾€åˆ›å»ºå¥½çš„æ–‡ä»¶ä¸­å†™å…¥<ul><li>vi 3.txtå¦‚ä½•æœ‰åˆ™ç›´æ¥å†™å…¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»º<ul><li>a(å›è½¦)å¼€å§‹ç¼–è¾‘æ¨¡å¼</li><li>ESCé€€å‡ºç¼–è¾‘æ¨¡å¼</li><li>:è¿”å›å‘½ä»¤è¡Œæ¨¡å¼</li><li>wå­˜ç›˜</li><li>qé€€å‡º</li><li>qwå­˜ç›˜é€€å‡º</li><li>q!ä¸å­˜ç›˜é€€å‡º</li><li>ddåˆ é™¤ä¸€è¡Œ</li><li>dwåˆ é™¤ä¸€ä¸ªå•è¯</li><li>oå¾€ä¸‹æ’å…¥ä¸€è¡Œ</li><li>O(å¤§å†™)å¾€ä¸Šæ’å…¥ä¸€è¡Œ</li></ul></li></ul></li><li>moreæŸ¥çœ‹æ–‡ä»¶å†…å®¹<ul><li>more 3.txtæŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹</li></ul></li><li>catåŒä¸Š(é¡ºåºæ˜¾ç¤º)</li><li>tacåŒä¸Š(é€†åºæ˜¾ç¤º)</li><li>headåŒä¸Š<ul><li>head -n 3.txtæ˜¾ç¤º3.txtçš„å‰nè¡Œå†…å®¹</li></ul></li><li>tailåŒä¸Š<ul><li>tail -n 3.txtæ˜¾ç¤º3.txtçš„ånè¡Œå†…å®¹</li></ul></li><li>findæŸ¥æ‰¾æ–‡ä»¶åœ¨å“ªé‡Œ<ul><li>find &#x2F;sunhao -name <em>.txtä»&#x2F;sunhaoè·¯å¾„ä¸‹å¼€å§‹æŸ¥æ‰¾ç¬¦åˆ</em>.txtçš„æ–‡ä»¶(æŸ¥æ–‡æ¡£)</li></ul></li><li>grepæŸ¥æ‰¾å­—ç¬¦<ul><li>grep sunhao 1.txtæŸ¥æ‰¾1.txtä¸­å­—ç¬¦ä¸²sunhaoæ‰€åœ¨çš„ä¸€è¡Œ</li></ul></li><li>whereisæŸ¥çœ‹å‘½ä»¤åœ¨å“ªé‡Œ<ul><li>whereis lsæŸ¥çœ‹lså‘½ä»¤æ‰€åœ¨çš„ä½ç½®</li></ul></li><li>echoæŸ¥çœ‹ç¯å¢ƒå˜é‡<ul><li>echo $PATHæŸ¥çœ‹Linuxä¸‹çš„PATHç¯å¢ƒå˜é‡å€¼(å¤§å†™)</li></ul></li><li>lné“¾æ¥å‘½ä»¤ç¬¦<ul><li>ln 3.txt 4åˆ›å»º3.txtçš„ä¸€ä¸ªé“¾æ¥4(ç¡¬é“¾æ¥ï¼Œå¤åˆ¶äº†ä¸€ä¸ªæ–‡ä»¶å¹¶åœ¨æ–‡ä»¶ä¸­å»ºç«‹ä¸€ä¸ªé“¾æ¥)</li><li>ln -s 3.txt 5åŒä¸Šï¼Œä½†æ˜¯è½¯é“¾æ¥(è½¯é“¾æ¥ã€ç¬¦å·é“¾æ¥ï¼Œç›¸å½“äºWindowsä¸­çš„å¿«æ·æ–¹å¼)</li><li>åŒºåˆ«ï¼šåˆ æ‰æºæ–‡ä»¶åç¡¬é“¾æ¥ä¾ç„¶å­˜åœ¨ï¼Œè€Œè½¯é“¾æ¥å°±å¤±å»äº†é“¾æ¥</li></ul></li><li>groupaddæ·»åŠ ç»„<ul><li>groupadd testgroupæ·»åŠ ç»„testgroup</li></ul></li><li>useradd&#x2F;adduseræ·»åŠ ç”¨æˆ·(å¦‚æœæ²¡æœ‰æŒ‡å®šç»„å°±åˆ›å»ºä¸€ä¸ªè·Ÿç”¨æˆ·åç›¸åŒçš„ç»„)<ul><li>useradd testuseræ·»åŠ testuserç”¨æˆ·</li><li>useradd testuser -g testgroupæ·»åŠ ç”¨æˆ·testuseråˆ°testgroupç”¨æˆ·ç»„</li></ul></li><li>passwdä¸ºç”¨æˆ·æŒ‡å®šå¯†ç <ul><li><p>passwd testuserä¸ºtestuseræ·»åŠ å¯†ç </p><pre><code>  (å½“ä»¥æ™®é€šç”¨æˆ·èº«ä»½ç™»å½•çš„æ—¶å€™ï¼Œç›´æ¥è¾“å…¥passwd      1ã€è¾“å…¥å½“å‰å¯†ç       2ã€è¾“å…¥æ–°å¯†ç       3ã€å†æ¬¡è¾“å…¥æ–°å¯†ç   )</code></pre></li></ul></li><li>groupdelåˆ é™¤ç»„(æ²¡æœ‰ç”¨æˆ·)<ul><li>groupdel testgroupåˆ é™¤ç»„testgroup</li></ul></li><li>userdelåˆ é™¤ç”¨æˆ·(æ³¨æ„è¦åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œhomeä¸‹)<ul><li>userdel teståˆ é™¤ç”¨æˆ·test</li></ul></li><li>usermodä¸ºç”¨æˆ·æ›´æ”¹ç»„<ul><li>usermod -g testgroup testuseræŠŠç”¨æˆ·testuserçš„ç»„æ”¹æˆtestgroup</li></ul></li><li>suåˆ‡æ¢ç”¨æˆ·</li></ul></li><li><p>Linuxä¸­æœ‰å››ç§æƒé™ï¼š<code>rwx----&gt; read write execute none(è¯»ã€å†™ã€æ‰§è¡Œã€æ— )</code></p><pre><code> æƒé™ï¼š-rwxr-xr-x  ---&gt; åˆ†æˆå››ç»„(1ã€è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼›2ã€æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ï¼›3ã€æ–‡ä»¶æ‰€æœ‰è€…æ‰€åœ¨ç»„çš„äººçš„æƒé™ï¼›4ã€å…¶ä»–äººæƒé™) chmodä¿®æ”¹æƒé™(+:æ·»åŠ æƒé™ -:å–æ¶ˆæƒé™)(æŒ‰ç…§rwxé¡ºåºæ’åˆ—) chmod +x 4ç»™4æ–‡ä»¶æ·»åŠ æƒé™x(å…¨éƒ¨çš„äºº) chmod u+x 4ç»™å½“å‰ç”¨æˆ·æ·»åŠ 4æ–‡ä»¶çš„xæƒé™ chmod g+x 4ç»™æ–‡ä»¶æ‰€æœ‰è€…æ‰€åœ¨ç»„çš„äººæ·»åŠ æ–‡ä»¶4çš„æƒé™x chmod o+x 4ç»™æ‰€æœ‰ä¸åœ¨åŒç»„çš„äººæ·»åŠ æ–‡ä»¶4çš„æƒé™x chmod 777ç‰¹æ®Šçš„æ–¹å¼ä¿®æ”¹æƒé™         9ä½æƒé™åˆ†æˆ3ç»„(æ‰€æœ‰è€…ï¼ŒåŒç»„äººï¼Œå…¶ä»–äºº)         æ¯ä¸€ç»„ç”¨3ä½äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå³752---&gt;111101010(rwxr-x-w-) chownä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€… chown sunhao 1.txtä¿®æ”¹1.txtçš„æ‰€æœ‰è€…ä¸ºsunhao </code></pre></li><li><p>ç®¡é“æŠŠå‘½ä»¤ä»¥|éš”å¼€ï¼Œè¡¨ç¤ºä¾æ¬¡æ‰§è¡Œ</p><pre><code> ls -l | grep &quot;^d&quot;å…ˆæ‰§è¡Œåˆ—å‡ºç›®å½•ï¼Œç„¶åæ‰§è¡ŒæŸ¥æ‰¾ä»¥då¼€å¤´çš„è¡Œ(å³åªåˆ—å‡ºç›®å½•) ls -l | grep &quot;^d&quot; | wc -l è¾“å‡ºç›®å½•çš„ä¸ªæ•° wallè­¦å‘Šæ‰€æœ‰ç™»å½•çš„äºº wall dateæ‰€æœ‰ç™»å½•çš„ç”¨æˆ·éƒ½ä¼šæ˜¾ç¤ºall wall ãƒ»dateãƒ»è­¦å‘Šæ‰€æœ‰ç™»å½•çš„äººæ‰§è¡Œdateä¹‹åçš„ç»“æœ(æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¥æœŸæ—¶é—´)</code></pre></li><li><p>é‡å®šå‘æŠŠå‘½ä»¤æ‰§è¡Œçš„ç»“æœå†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­(è¾“å‡º)</p><pre><code> ls &gt; 2.txtæŠŠlsæ‰§è¡Œç»“æœå†™åœ¨2.txtä¸­(æ›¿æ¢) ls &gt;&gt; 2.txtæŠŠæ‰§è¡Œç»“æœå†™åœ¨2.txtä¸­æ–‡æœ¬çš„æœ€å(ä¸æ›¿æ¢) lsss 2&gt; 2.txtæŠŠæ‰§è¡Œå‘½ä»¤çš„é”™è¯¯ä¿¡æ¯å†™å…¥åˆ°2.txtä¸­</code></pre></li><li><p>é‡å®šå‘æŠŠæ–‡æœ¬ä¸­çš„ä¿¡æ¯å–å‡ºç„¶åè¾“å…¥</p><pre><code> wall &lt; 2.txtæŠŠ2.txtä¸­çš„æ–‡æœ¬å–å‡ºè­¦å‘Šæ‰€æœ‰ç™»å½•çš„äºº </code></pre></li><li><p>Linux FTP Service</p><pre><code> å¯åŠ¨ï¼šservice vsftpd startdè¡¨ç¤ºåå°å¯åŠ¨ åœæ­¢ï¼šservice vsftpd stop é‡å¯ï¼šservice vsftpd restart ç™»å½•ï¼šftp localhost æŸ¥IPï¼šifconfigæŸ¥è¯¢Linuxçš„IPåœ°å€</code></pre></li><li><p>å…³é—­Linuxé˜²ç«å¢™</p><pre><code> service iptables stop</code></pre></li><li><p>å…è®¸åŒ¿åç™»å½•</p><pre><code>cmdè¿æ¥Linuxçš„FTPï¼š ftp 192.168.94.129åŒ¿åç”¨æˆ·åï¼šanonymouså¯†ç ï¼šç©º</code></pre></li><li><p>Linuxä¸­FTPé…ç½®æ–‡ä»¶ï¼š&#x2F;etc&#x2F;vsftpd&#x2F;vsftpd.conf</p></li><li><p>Linuxä¸­å…è®¸rootç”¨æˆ·ç™»å½•FTP(è®°å¾—è¦é‡å¯FTP service)ï¼š</p><pre><code>ä¿®æ”¹æ–‡ä»¶/etc/vsftpd.user_listï¼ŒæŠŠrootç»™æ³¨é‡Šæ‰ä¿®æ”¹æ–‡ä»¶/etc/vsftpd.ftpusers,æŠŠrootç»™æ³¨é‡Šæ‰</code></pre></li><li><p>Linuxä¸­è®¾ç½®vsftpå¼€æœºè‡ªå¯åŠ¨ï¼š</p><pre><code>æ–¹æ³•1ï¼švi /ect/rc.localåŠ å…¥ä»¥ä¸‹ä¸€å¥:/user/local/bin/vsftpd &amp;(è¡¨ç¤ºä»¥åå°ç¨‹åºå¯åŠ¨)æ–¹æ³•2ï¼šchkconfig vsftpd on(æŸ¥ckconfigçš„ç”¨æ³•)</code></pre></li><li><p>sshè¿œç¨‹ç™»å½•</p><pre><code>å¯åŠ¨ï¼šservice sshd start(åŸºæœ¬ä¸vsftpdç›¸åŒ)</code></pre></li><li><p>Linuxä¸‹å®‰è£…tomcat</p><ol><li><p>è§£å‹æ–‡ä»¶ï¼šå…ˆgzip -d æ–‡ä»¶å</p><pre><code>   å†tar -xvf ä¸Šé¢è§£å‹åçš„æ–‡ä»¶å   tar -zxvf ??.tar.gz</code></pre></li><li><p>éœ€è¦æŒ‡å®šJAVA_HOMEç¯å¢ƒå˜é‡(è¦æ‰§è¡Œexport JAVA_HOME,åˆ«äººæ‰èƒ½ä½¿ç”¨)</p></li><li><p>ps -efæŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹(é‡è¦å‚æ•°æ˜¯id)</p><pre><code> ps -ef tomcatæŸ¥çœ‹tomcatè¿›ç¨‹</code></pre></li><li><p>å…³é—­tomcatè¿›ç¨‹<code>kill tomcatè¿›ç¨‹id</code></p></li><li><p>è®¾ç½®tomcatå¼€æœºå¯åŠ¨</p><pre><code> vi /etc/rc.local åŠ ä¸ŠJAVA_HOME=/usr/java/jdk1.6.0_25 export JAVA_HOME /sunhao/tomcat/bin/startup.sh</code></pre></li></ol></li><li><p>rpm </p><ul><li><p>rpm-qaæŸ¥çœ‹è£…äº†å“ªäº›è½¯ä»¶</p><pre><code>  rpm -qa | grep jdkæŸ¥çœ‹æœ‰æ²¡æœ‰è£…jdk</code></pre></li><li><p>rpm-eå¸è½½(æŸ¥å¼ºåˆ¶å¸è½½)</p><pre><code>  rpm -e å®‰è£…åŒ…å</code></pre></li><li><p>rpm -ivhå®‰è£…</p><pre><code>  rpm -ivh æ–‡ä»¶å(rpmæ–‡ä»¶)</code></pre></li></ul></li><li><p>è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡</p><pre><code>/etc/profileæ–‡ä»¶vi /etc/profileæœ€åä¸€è¡ŒåŠ ä¸ŠJAVA_HOME=jdkç›®å½•</code></pre></li><li><p>Linuxä¸‹MySQLç”¨æˆ·åï¼šrootå¯†ç ï¼š1314520</p><pre><code>è®¾ç½®å¯†ç mysqladmin -uroot password &#39;1314520&#39;</code></pre></li><li><p>è¦æ˜¯å‘ç°æˆ‘ä»¬çš„åº”ç”¨å’Œæ•°æ®åº“æœåŠ¡å™¨ç³»ç»Ÿæ—¶é—´ä¸å¯¹å¯ä»¥ä½¿ç”¨è¿™å‡ ä¸ªå‘½ä»¤ä¿®æ”¹ï¼š</p><ul><li><p>å…ˆè®¾ç½®æ—¥æœŸ</p><pre><code>  date -s 20080103</code></pre></li><li><p>è®¾ç½®æ—¶é—´</p><pre><code>  date -s 18:24:00</code></pre></li><li><p>å¦‚æœè¦åŒæ—¶æ›´æ”¹BIOSæ—¶é—´</p><pre><code>  å†æ‰§è¡Œclock -w</code></pre></li></ul></li></ol><blockquote><p>export PATH&#x3D;&#x2F;usr&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;bin:&#x2F;sbin:&#x2F;usr&#x2F;X11R6&#x2F;bin</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_æ£€æŸ¥å’Œæ”¶é›†Linuxç¡¬ä»¶ä¿¡æ¯çš„7ä¸ªå‘½ä»¤</title>
      <link href="/2016/03/14/yun-wei/linux-hardware/"/>
      <url>/2016/03/14/yun-wei/linux-hardware/</url>
      
        <content type="html"><![CDATA[<ol><li><p>lscpuç”¨äºæŸ¥è¯¢CPUä¿¡æ¯</p></li><li><p>lshwæ˜¾ç¤ºç¡¬ä»¶ä¿¡æ¯è¡¨</p><blockquote><p>è¿™ä¸ªå‘½ä»¤åº”ç”¨æ™®éï¼Œå®ƒå¯é€šè¿‡ä¸ªäººéœ€æ±‚è€Œåˆ—å‡ºå¤šç§ä¸åŒçš„ç¡¬ä»¶å‚æ•°ï¼šCPUã€å†…å­˜ã€ç¡¬ç›˜ã€USBæ§åˆ¶å™¨ã€lshwå¡ç‰‡ç­‰ç­‰ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä»&#x2F;procç›®å½•ä¸åŒæ–‡ä»¶ä¸­ä¸­æå–å¯¹åº”çš„ç¡¬ä»¶ä¿¡æ¯ã€‚</p></blockquote><pre><code> æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å»å®‰è£…lshwå·¥å…·ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ wget http://ezix.org/software/files/lshw-B.02.14.tar.gz tar -zxvf lshw-B.02.14.tar.gz cd lshw-B.02.14 make &amp;&amp; make install</code></pre></li></ol><span id="more"></span><ol start="3"><li><p>hwinfo-ç¡¬ä»¶ä¿¡æ¯</p><blockquote><p>hwinfoç±»ä¼¼äºlshwï¼Œä¹Ÿèƒ½æŸ¥è¯¢ç¡¬ä»¶ä¿¡æ¯ï¼Œä¸”åº”ç”¨å¹¿æ³›ã€‚å®ƒä¹Ÿèƒ½è¾“å‡ºå¤šä¸ªç¡¬ä»¶éƒ¨åˆ†çš„è¯¦ç»†æˆ–è€…ç®€è¦ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯æœ‰æ—¶hwinfoæ¯”lshwçš„ä¿¡æ¯æ›´è¯¦ç»†ã€‚</p></blockquote><pre><code> é»˜è®¤æƒ…å†µä¸‹ï¼ŒLinuxç³»ç»Ÿæ²¡æœ‰å®‰è£…hwinfoå·¥å…·ï¼Œæ‰€ä»¥ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è‡ªå·±å®‰è£…ï¼š CentOS 6     #rpm -Uvh http://mirror.symnds.com/distributions/gf/el/6/gf/x86_64/gf-release-6-6.gf.el6.noarch.rpm     #yum list hwinfo     #yum install hwinfo CentOS 5     #rpm -Uvh http://mirror.symnds.com/distributions/gf/el/5/gf/x86_64/gf-release-5-6.gf.el5.noarch.rpm     #yum list hwinfo     #yum install hwinfo</code></pre></li><li><p>lspci</p><blockquote><p>lsppciå‘½ä»¤å¯åˆ—å‡ºPCIæ€»çº¿çš„ä¿¡æ¯ä»¥åŠè¿æ¥åˆ°PCIæ€»çº¿ä¸Šçš„è®¾å¤‡ä¿¡æ¯ï¼Œæ¯”å¦‚VGAé€‚é…å™¨ã€SATAæ§åˆ¶å™¨ã€å…¶ä»–æ¨¡å—ç­‰ç­‰ã€‚lspciå·¥å…·æ˜¯pciutilsåŒ…çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨å®‰è£…lspciä¹‹å‰ï¼Œä½ éœ€è¦å®‰è£…pciutilsåŒ…ã€‚</p></blockquote><pre><code> å®‰è£…pciutilsåŒ…ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š yum install pciutils</code></pre></li><li><p>lsusb-åˆ—å‡ºUSBæ€»çº¿ä¿¡æ¯</p></li><li><pre><code> è¿™ä¸ªå‘½ä»¤å¯åˆ—å‡ºUSBæ§åˆ¶å™¨çš„è®¾å¤‡ä¿¡æ¯ã€‚ lsusbå·¥å…·æ˜¯usbutilsåŒ…çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½ éœ€è¦æŒ‰ç…§å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š #yum install usbutils</code></pre></li><li><p>lsblk-åˆ—å‡ºå—è®¾å¤‡çš„ä¿¡æ¯</p><pre><code> [root@devops tmp]# lsblk</code></pre></li><li><p>lsscsi-åˆ—å‡ºSCSIçš„è®¾å¤‡ä¿¡æ¯</p><pre><code> åˆ—å‡ºSCSI/SDATè®¾å¤‡çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç¡¬ç›˜é©±åŠ¨å™¨ã€å…‰ç›˜é©±åŠ¨å™¨ã€‚ [root@devops tmp]# lsscsi</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ£€æŸ¥ </tag>
            
            <tag> æ”¶é›† </tag>
            
            <tag> ç¡¬ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_è®¾ç½®æ—¶é—´</title>
      <link href="/2016/03/14/yun-wei/linux-setting-time/"/>
      <url>/2016/03/14/yun-wei/linux-setting-time/</url>
      
        <content type="html"><![CDATA[<h4 id="å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆ2008å¹´3æœˆ28æ—¥çš„å‘½ä»¤å¦‚ä¸‹ã€‚"><a href="#å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆ2008å¹´3æœˆ28æ—¥çš„å‘½ä»¤å¦‚ä¸‹ã€‚" class="headerlink" title="å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆ2008å¹´3æœˆ28æ—¥çš„å‘½ä»¤å¦‚ä¸‹ã€‚"></a>å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆ2008å¹´3æœˆ28æ—¥çš„å‘½ä»¤å¦‚ä¸‹ã€‚</h4><pre><code>#date -s 03/28/2008 </code></pre><h3 id="å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆä¸‹åˆ11ç‚¹12åˆ†0ç§’çš„å‘½ä»¤å¦‚ä¸‹ã€‚"><a href="#å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆä¸‹åˆ11ç‚¹12åˆ†0ç§’çš„å‘½ä»¤å¦‚ä¸‹ã€‚" class="headerlink" title="å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆä¸‹åˆ11ç‚¹12åˆ†0ç§’çš„å‘½ä»¤å¦‚ä¸‹ã€‚"></a>å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆä¸‹åˆ11ç‚¹12åˆ†0ç§’çš„å‘½ä»¤å¦‚ä¸‹ã€‚</h3><pre><code>#date -s 11:12:00 </code></pre><p>æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯ç³»ç»Ÿæ—¶é—´ï¼Œæ˜¯linuxç”±æ“ä½œç³»ç»Ÿç»´æŠ¤çš„ã€‚ ã€€ã€€ </p><blockquote><p>åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼ŒLinuxæ“ä½œç³»ç»Ÿå°†æ—¶é—´ä»CMOSä¸­è¯»åˆ°ç³»ç»Ÿæ—¶é—´å˜é‡ä¸­ï¼Œä»¥åä¿®æ”¹æ—¶é—´é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæ—¶é—´å®ç°ã€‚ä¸ºäº†ä¿æŒç³»ç»Ÿæ—¶é—´ä¸CMOSæ—¶é—´çš„ä¸€è‡´æ€§ï¼ŒLinuxæ¯éš”ä¸€æ®µæ—¶é—´ä¼šå°†ç³»ç»Ÿæ—¶é—´å†™å…¥CMOSã€‚ç”±äºè¯¥åŒæ­¥æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆå¤§çº¦æ˜¯11åˆ†é’Ÿï¼‰è¿›è¡Œçš„ï¼Œåœ¨æˆ‘ä»¬æ‰§è¡Œdate -såï¼Œå¦‚æœé©¬ä¸Šé‡èµ·æœºå™¨ï¼Œä¿®æ”¹æ—¶é—´å°±æœ‰å¯èƒ½æ²¡æœ‰è¢«å†™å…¥CMOS,è¿™å°±æ˜¯é—®é¢˜çš„åŸå› ã€‚å¦‚æœè¦ç¡®ä¿ä¿®æ”¹ç”Ÿæ•ˆå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚ </p></blockquote><h3 id="è¿™ä¸ªå‘½ä»¤å¼ºåˆ¶æŠŠç³»ç»Ÿæ—¶é—´å†™å…¥CMOSã€‚"><a href="#è¿™ä¸ªå‘½ä»¤å¼ºåˆ¶æŠŠç³»ç»Ÿæ—¶é—´å†™å…¥CMOSã€‚" class="headerlink" title="è¿™ä¸ªå‘½ä»¤å¼ºåˆ¶æŠŠç³»ç»Ÿæ—¶é—´å†™å…¥CMOSã€‚"></a>è¿™ä¸ªå‘½ä»¤å¼ºåˆ¶æŠŠç³»ç»Ÿæ—¶é—´å†™å…¥CMOSã€‚</h3><pre><code>#clock -w </code></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ—¶é—´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸Šç»™æ–°å»ºçš„ç”¨æˆ·èµ‹æƒé™</title>
      <link href="/2016/03/14/yun-wei/linux-user-permission/"/>
      <url>/2016/03/14/yun-wei/linux-user-permission/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ubuntuçš„è¶…çº§ç®¡ç†å‘˜rootç”¨æˆ·é»˜è®¤æ˜¯ä¸å¯ç”¨çš„ï¼Œrooté»˜è®¤æ˜¯ç©ºå¯†ç ï¼Œæ‰€ä»¥rootæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚</p></blockquote><ol><li><p>ä¸ºrootè®¾ç½®å¯†ç ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œ<code>sudo passwd root</code>æŒ‡ä»¤åï¼Œç³»ç»Ÿä¼šæç¤ºä½ è®¾ç½®ä¸€ä¸ªrootè´¦å·çš„å¯†ç ã€‚åœ¨ä½ æ²¡æœ‰ç»è¿‡å½“å‰ç”¨æˆ·å¯†ç éªŒè¯çš„æ—¶å€™ï¼Œè¿˜ä¼šè¦æ±‚ä½ å…ˆè¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ï¼Œç„¶åæ‰èƒ½è®¾ç½®rootå¸å·çš„å¯†ç ã€‚è®¾ç½®å®Œæˆåï¼Œå°±å¯ä»¥åœ¨ç»ˆç«¯åˆ‡æ¢åˆ°rootç”¨æˆ·äº†ã€‚</p><pre><code>åˆ‡æ¢ç”¨æˆ·su rootæˆ–è€…su sunhao</code></pre></li></ol><span id="more"></span><h1 id="linuxä¸‹å¦‚ä½•æ·»åŠ ä¸€ä¸ªç”¨æˆ·å¹¶ä¸”è®©ç”¨æˆ·è·å¾—rootæƒé™"><a href="#linuxä¸‹å¦‚ä½•æ·»åŠ ä¸€ä¸ªç”¨æˆ·å¹¶ä¸”è®©ç”¨æˆ·è·å¾—rootæƒé™" class="headerlink" title="linuxä¸‹å¦‚ä½•æ·»åŠ ä¸€ä¸ªç”¨æˆ·å¹¶ä¸”è®©ç”¨æˆ·è·å¾—rootæƒé™"></a>linuxä¸‹å¦‚ä½•æ·»åŠ ä¸€ä¸ªç”¨æˆ·å¹¶ä¸”è®©ç”¨æˆ·è·å¾—rootæƒé™</h1><h3 id="æ·»åŠ ç”¨æˆ·ï¼Œé¦–å…ˆç”¨adduserå‘½ä»¤æ·»åŠ ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š"><a href="#æ·»åŠ ç”¨æˆ·ï¼Œé¦–å…ˆç”¨adduserå‘½ä»¤æ·»åŠ ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š" class="headerlink" title="æ·»åŠ ç”¨æˆ·ï¼Œé¦–å…ˆç”¨adduserå‘½ä»¤æ·»åŠ ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š"></a>æ·»åŠ ç”¨æˆ·ï¼Œé¦–å…ˆç”¨adduserå‘½ä»¤æ·»åŠ ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</h3><pre><code>    #adduser tommy  //æ·»åŠ ä¸€ä¸ªåä¸ºtommyçš„ç”¨æˆ·    #passwd tommy   //ä¿®æ”¹å¯†ç     Changing password for user tommy.    New UNIX password:     //åœ¨è¿™é‡Œè¾“å…¥æ–°å¯†ç     Retype new UNIX password:  //å†æ¬¡è¾“å…¥æ–°å¯†ç     passwd: all authentication tokens updated successfully.</code></pre><h3 id="èµ‹äºˆrootæƒé™"><a href="#èµ‹äºˆrootæƒé™" class="headerlink" title="èµ‹äºˆrootæƒé™"></a>èµ‹äºˆrootæƒé™</h3><ol><li><p>ä¿®æ”¹ &#x2F;etc&#x2F;sudoers æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢ä¸€è¡Œï¼ŒæŠŠå‰é¢çš„æ³¨é‡Šï¼ˆ#ï¼‰å»æ‰</p><pre><code> ## Allows people in group wheel to run all commands %wheel    ALL=(ALL)    ALL</code></pre><p> ç„¶åä¿®æ”¹ç”¨æˆ·ï¼Œä½¿å…¶å±äºrootç»„ï¼ˆwheelï¼‰ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code> #usermod -g root tommy</code></pre><p> ä¿®æ”¹å®Œæ¯•ï¼Œç°åœ¨å¯ä»¥ç”¨tommyå¸å·ç™»å½•ï¼Œç„¶åç”¨å‘½ä»¤ su - ï¼Œå³å¯è·å¾—rootæƒé™è¿›è¡Œæ“ä½œã€‚</p></li><li><p>ä¿®æ”¹ <code>/etc/sudoers</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢ä¸€è¡Œï¼Œåœ¨rootä¸‹é¢æ·»åŠ ä¸€è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code> ## Allow root to run any commands anywhere root    ALL=(ALL)     ALL tommy   ALL=(ALL)     ALL</code></pre><p> ä¿®æ”¹å®Œæ¯•ï¼Œç°åœ¨å¯ä»¥ç”¨tommyå¸å·ç™»å½•ï¼Œç„¶åç”¨å‘½ä»¤ su - ï¼Œå³å¯è·å¾—rootæƒé™è¿›è¡Œæ“ä½œã€‚</p></li><li><p>ä¿®æ”¹ <code>/etc/passwd</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹è¡Œï¼ŒæŠŠç”¨æˆ·IDä¿®æ”¹ä¸º 0 ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code> tommy:x:500:500:tommy:/home/tommy:/bin/bash</code></pre><p> ä¿®æ”¹åå¦‚ä¸‹</p><pre><code> tommy:x:0:500:tommy:/home/tommy:/bin/bash</code></pre><p> ä¿å­˜ï¼Œç”¨tommyè´¦æˆ·ç™»å½•åï¼Œç›´æ¥è·å–çš„å°±æ˜¯rootå¸å·çš„æƒé™ã€‚</p></li></ol><blockquote><p>å‹æƒ…æé†’ï¼šè™½ç„¶æ–¹æ³•ä¸‰çœ‹ä¸Šå»ç®€å•æ–¹ä¾¿ï¼Œä½†ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼Œæ¨èä½¿ç”¨æ–¹æ³•äºŒã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æƒé™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤–ç½‘è®¿é—®æœ¬æœº</title>
      <link href="/2015/06/27/gong-ju/wai-wang-fang-wen-ben-ji/"/>
      <url>/2015/06/27/gong-ju/wai-wang-fang-wen-ben-ji/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ç™»é™†è·¯ç”±å™¨ï¼šä¸€èˆ¬åœ°å€ä¸º192.168.1.1ï¼Œé»˜è®¤ç”¨æˆ·adminï¼Œå¯†ç adminã€‚</p></li><li><p>éšå°„ç«¯å£ï¼šæ‰¾åˆ°â€œè½¬å‘è§„åˆ™â€â€•â€œè™šæ‹ŸæœåŠ¡å™¨â€â€•å¢åŠ æ–°æ¡ç›®â€“æœåŠ¡ç«¯å£å·è®¾ç½®ä¸º8080ï¼ŒIPåœ°å€è®¾ç½®ä¸ºå®‰è£…é¡¹ç›®çš„IPï¼Œä¿å­˜å³å¯ã€‚</p><pre><code>  8080:æŒ‡çš„æ˜¯é¡¹ç›®tomcatçš„ç«¯å£å·</code></pre></li><li><p>æ‰¾åˆ°å¤–ç½‘IPï¼šä¸€èˆ¬åœ¨â€œè¿è¡ŒçŠ¶æ€â€-â€œWANå£çŠ¶æ€â€-â€œIPåœ°å€â€ä¸­æ˜¾ç¤ºï¼Œå¦‚113.<em>.</em>.*</p></li><li><p>æ­¤æ—¶å¤–ç½‘å·²ç»å¯ä»¥è®¿é—®ï¼Œä¸è¿‡è·¯ç”±å™¨çš„IPåœ°å€æ˜¯åŠ¨æ€çš„ï¼Œä¼šç»å¸¸å˜ï¼Œå¯ä»¥é€šè¿‡å®‰è£…ä¸ªåŠ¨æ€åŸŸåè§£æè½¯ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥èŠ±ç”Ÿå£³ä¸ºä¾‹å­ã€‚</p></li><li><p>æ³¨å†Œä¸ªåŠ¨æ€åŸŸåè§£æèŠ±ç”Ÿå£³å¸å·ï¼š<a href="http://www.oray.com/passport/register.php">http://www.oray.com/passport/register.php</a></p></li><li><p>ç™»é™†èŠ±ç”Ÿå£³åï¼Œåœ¨åŸŸåç®¡ç†æ³¨å†Œä¸€ä¸ªå…è´¹åŸŸå</p></li><li><p>ä¸‹è½½èŠ±ç”Ÿå£³è½¯ä»¶ï¼š<a href="http://www.oray.com/peanuthull/download.php">http://www.oray.com/peanuthull/download.php</a></p></li><li><p>åœ¨å®‰è£…é¡¹ç›®çš„ç”µè„‘ä¸Šå®‰è£…èŠ±ç”Ÿå£³è½¯ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨èŠ±ç”Ÿå£³å¸å·ç™»é™†ï¼Œå¦‚æœç™»é™†æˆåŠŸï¼Œå¤–ç½‘å·²ç»å¯ä»¥é€šè¿‡åŸŸåè®¿é—®é¡¹ç›®ï¼Œåœ°å€ä¸ºhttp:&#x2F;&#x2F;å…è´¹åŸŸå:8080&#x2F;é¡¹ç›®éƒ¨ç½²å</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¦å»è¯»çš„ä¹¦</title>
      <link href="/2015/06/18/qi-ta/yao-qu-du-de-shu/"/>
      <url>/2015/06/18/qi-ta/yao-qu-du-de-shu/</url>
      
        <content type="html"><![CDATA[<ol><li>æ·˜å®æŠ€æœ¯è¿™åå¹´</li><li>åæ¨¡å¼</li><li>ä»£ç ä¹‹ç¾</li><li>ä¼ä¸šåº”ç”¨æ¶æ„æ¨¡å¼</li><li>ç¼–ç¨‹ç ç‘</li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>guava vs jdk8</title>
      <link href="/2015/06/14/hou-duan/guava-vs-jdk8/"/>
      <url>/2015/06/14/hou-duan/guava-vs-jdk8/</url>
      
        <content type="html"><![CDATA[<p>#Guava<br>Guavaæ˜¯Googleå…¬å¸å¼€æºçš„ä¸€ä¸ªå®ç”¨å·¥å…·åº“ï¼Œå¯¹Javaç±»åº“è¿›è¡Œäº†å¤šæ–¹é¢çš„å¢å¼ºã€‚æ¯”å¦‚è¯´ï¼Œå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ”¯æŒï¼Œæ–°çš„é›†åˆç±»ï¼ˆMultimapç­‰ï¼‰ï¼ŒCacheæ”¯æŒï¼Œç­‰ç­‰ã€‚åœ¨Java8ä¹‹å‰ï¼ŒGuavaå’ŒJavaä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥è¡¨ç¤ºæˆä¸‹é¢è¿™å¹…å›¾ï¼š<br><img src="http://img.blog.csdn.net/20140923165231890?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvenhob28=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"></p><span id="more"></span><p>ä½†æ˜¯éšç€Java8çš„å‘å¸ƒï¼ŒGuavaå’ŒJavaçš„å…³ç³»å‘ç”Ÿäº†ä¸€äº›æ”¹å˜ã€‚Guavaæä¾›çš„å¾ˆå¤šåŠŸèƒ½ï¼Œè¢«å†…ç½®åœ¨äº†Java8é‡Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://img.blog.csdn.net/20140923134859281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvenhob28=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"></p><ul><li>æºç ï¼š <a href="https://github.com/google/guava" title="Github">Github</a> <a href="https://code.google.com/p/guava-libraries/" title="Google Code">Google Code</a></li><li>APIï¼š <a href="http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html" title="API">API</a></li><li>Usersâ€™ Guideï¼š<a href="https://code.google.com/p/guava-libraries/wiki/GuavaExplained" title="Users&#39; Guide">Usersâ€™ Guide</a></li></ul><ol><li><p>Joinerç”¨æ¥æ‹¼æ¥nä¸ªå­—ç¬¦ä¸²ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><ul><li><p>ä½¿ç”¨guava</p><pre><code>  public static String useGuava(List strList) &#123;      return Joiner.on(&quot;,&quot;).skipNulls().join(strList);  &#125;</code></pre></li><li><p>ä½¿ç”¨jdk8</p><pre><code>  public static String useJdk8(List strList) &#123;      //lambdaè¡¨è¾¾å¼      return strList.stream().filter(m -&gt; m != null).collect(Collectors.joining(&quot;,&quot;));  &#125;</code></pre></li><li><p>ä½¿ç”¨jdk7ä»¥åŠjdk7ä¹‹å‰çš„ç‰ˆæœ¬</p><pre><code>  public static String useJdk7(List strList) &#123;      StringBuilder sb = new StringBuilder();      for (int i = 0; i &lt; strList.size(); i++) &#123;          sb.append(strList.get(i));          if (i + 1 != strList.size()) &#123;              sb.append(&quot;,&quot;);          &#125;      &#125;      return sb.toString();  &#125;</code></pre></li></ul></li><li><p>Guavaæä¾›äº†Orderingç±»ä»¥æ–¹ä¾¿æˆ‘ä»¬åˆ›å»ºComparator</p><ul><li><p>ä½¿ç”¨guava</p><pre><code>  public static List useGuava(List players) &#123;      Ordering ordering = Ordering.natural().nullsFirst().onResultOf(new Function() &#123;          @Override          public Integer apply(Player foo) &#123;              return foo.getOrder();          &#125;      &#125;);      return ordering.sortedCopy(players);  &#125;</code></pre></li><li><p>ä½¿ç”¨jdk8</p><pre><code>  public static List useJdk8(List players) &#123;      Comparator cmp = Comparator.comparing(Player::getOrder, Comparator.nullsFirst(Comparator.naturalOrder()));      players.sort(cmp);      return players;  &#125;</code></pre></li><li><p>ä½¿ç”¨jdk7ä»¥åŠjdk7ä¹‹å‰çš„ç‰ˆæœ¬</p><pre><code>  public static List useJdk7(List players) &#123;      players.sort(new Comparator() &#123;          @Override          public int compare(Player o1, Player o2) &#123;              Integer order1 = o1.getOrder();              Integer order2 = o2.getOrder();              if (order1 &gt; order2) &#123;                  return 1;              &#125; else if (order1 == order2) &#123;                  return 0;              &#125; else &#123;                  return -1;              &#125;          &#125;      &#125;);      return players;  &#125;</code></pre></li></ul></li><li><p>å¯¹nullçš„å¤„ç†</p><ul><li><p>guavaä¸­å¯¹nullçš„å¤„ç†<code>Optional</code></p><ul><li>nullæ˜¯æ¨¡æ£±ä¸¤å¯çš„ï¼Œä¼šå¼•èµ·ä»¤äººå›°æƒ‘çš„é”™è¯¯ï¼Œæœ‰äº›æ—¶å€™å®ƒè®©äººå¾ˆä¸èˆ’æœã€‚å¾ˆå¤šGuavaå·¥å…·ç±»ç”¨å¿«é€Ÿå¤±è´¥æ‹’ç»nullå€¼ï¼Œè€Œä¸æ˜¯ç›²ç›®åœ°æ¥å—ã€‚</li><li><code>Optional</code>æ˜¯ä¸€ä¸ª<code>abstract</code>ç±»ï¼Œä¸¤ä¸ªå®ç°ç±»<code>Present</code>ã€<code>Absent</code><ul><li><code>Present</code>: Implementation of an Optional containing a reference.</li><li><code>Absent</code>: Implementation of an Optional not containing a reference.</li></ul></li></ul><p>  eg:</p><pre><code>      // åˆ›å»ºä¸€ä¸ªéç©ºå¯¹è±¡ï¼Œç±»å‹ä¸ºinteger      Optional possible = Optional.of(6);      // Returns true if this holder contains a (non-null) instance.      System.out.println(&quot;possible isPresent: &quot; + possible.isPresent());      System.out.println(&quot;possible value: &quot; + possible.get());      // åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡      Optional absentOpt = Optional.absent();      // å–å€¼ï¼Œä¼šæŠ¥é”™      System.out.println(&quot;absentOpt value: &quot; + absentOpt.get());      // If nullableReference is non-null, returns an Optional instance containing that reference; otherwise returns Optional.absent.      // fromNullableè¡¨ç¤ºå¦‚æœåˆ›å»ºä¸€ä¸ªéç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›Present      Optional&lt;Integer&gt; NoNullableOpt  = Optional.fromNullable(10);      // åˆ›å»ºç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›Absent      Optional&lt;Integer&gt; NullableOpt = Optional.fromNullable(null);</code></pre><p>  å…¶ä»–è¯¦ç»†è¯·æŸ¥é˜…API - <a href="http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Optional.html" title="Guava Optional API">Guava Optional API</a></p></li><li><p>Guavaä½¿ç”¨<code>Preconditions</code>å¯¹nullçš„é¢„å…ˆåˆ¤æ–­</p><ul><li><p>ç±»ä¼¼æˆ‘ä»¬ä½¿ç”¨StringUtilsç­‰å·¥å…·ç±»</p></li><li><p>ä½†æ˜¯ä¸åŒçš„æ˜¯ï¼ŒStringUtilsç­‰å·¥å…·ç±»æ˜¯åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå¹¶å¾—åˆ°ç»“æœï¼Œè€ŒGuavaæ˜¯ä½¿ç”¨åˆ¤æ–­çš„ç»“æœï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™ç›´æ¥æŠ›å¼‚å¸¸ã€‚<br> eg.</p><pre><code>      // givenNameæ˜¯ä¼ å…¥çš„å‚æ•°      String name = Preconditions.checkNotNull(givenName);      // com.google.common.base.Preconditions.checkNotNullæ–¹æ³•é‡è½½äº†ä¸‰æ¬¡      public static &lt;T&gt; T checkNotNull(T reference)      public static &lt;T&gt; T checkNotNull(T reference, Object errorMessage)      public static &lt;T&gt; T checkNotNull(T reference, String errorMessageTemplate, Object... errorMessageArgs)      // è€Œjdk8ä¸­çš„java.util.Objectsä¹Ÿæä¾›äº†ä¸‰ä¸ªç±»ä¼¼çš„æ–¹æ³•      public static &lt;T&gt; T requireNonNull(T obj) // @since 1.7      public static &lt;T&gt; T requireNonNull(T obj, String message) // @since 1.7      public static &lt;T&gt; T requireNonNull(T obj, Supplier&lt;String&gt; messageSupplier) // @since 1.8</code></pre></li></ul></li><li><p>jdk8å¯¹nullçš„å¤„ç†<br> jdk8æ–°åŠ å…¥ç±»java.util.Optionalï¼Œä½¿ç”¨æ–¹æ³•ä¸Guavaç›¸ä¼¼ã€‚å…³äºjdk8ä¸­çš„Optionalå¯å‚è€ƒ<a href="http://www.ithome.com.tw/voice/91013" title="è¿Ÿåˆ°çš„Optional">è¿Ÿåˆ°çš„Optional</a>ã€‚Optional è¢«å®šä¹‰ä¸ºä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼Œå…¶å€¼å¯èƒ½æ˜¯nullæˆ–è€…ä¸æ˜¯nullã€‚åœ¨Java 8ä¹‹å‰ä¸€èˆ¬æŸä¸ªå‡½æ•°åº”è¯¥è¿”å›éç©ºå¯¹è±¡ä½†æ˜¯å¶å°”å´å¯èƒ½è¿”å›äº†nullï¼Œè€Œåœ¨Java 8ä¸­ï¼Œä¸æ¨èä½ è¿”å›nullè€Œæ˜¯è¿”å›Optionalã€‚<br>eg.</p><pre><code>      // ä¸ç›´æ¥è¿”å›éœ€è¦çš„ç±»å‹Stringï¼Œè€Œæ˜¯è¿”å›OptionalåŒ…å«çš„String      Optional&lt;String&gt; optional = Optional.of(&quot;bam&quot;);      //  true if there is a value present, otherwise false      optional.isPresent();           // true      //  å–å€¼ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸NoSuchElementException      optional.get();                 // &quot;bam&quot;      // å¦‚æœä¸ºç©ºåˆ™è¿”å›ä¼ å…¥çš„å€¼ï¼Œå¦åˆ™è¿”å›å…¶å€¼      optional.orElse(&quot;fallback&quot;);    // &quot;bam&quot;      // ç»“åˆlambdaè¡¨è¾¾å¼      optional.ifPresent((s) -&gt; System.out.println(s.charAt(0)));     // &quot;b&quot;</code></pre></li></ul><p>å…¶ä»–è¯¦ç»†è¯·æŸ¥é˜…API - <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html" title="JDK8 Optional API">JDK8 Optional API</a></p></li><li><p>å¯¹äºé›†åˆçš„å¤„ç†</p><ul><li><p>åˆ›å»ºé›†åˆ</p><ul><li><p>æ™®é€šåšæ³•<br>  eg.</p><pre><code>  List&lt;Player&gt; players = new ArrayList&lt;Player&gt;();  players.add(new Player(&quot;bowen&quot;,20));  players.add(new Player(&quot;bob&quot;, 20));  players.add(new Player(&quot;Katy&quot;, 18));  players.add(new Player(&quot;Logon&quot;, 24));</code></pre></li><li><p>åœ¨Guavaä¸­ï¼š<br>  eg.</p><pre><code>  List&lt;Player&gt;  players = Lists.newArrayList(new Player(&quot;bowen&quot;, 20), new Player(&quot;bob&quot;, 20), new Player(&quot;Katy&quot;, 18), new Player(&quot;Logon&quot;, 24));</code></pre></li><li><p>Javaä¸­ï¼š<br>  eg.</p><pre><code>  List&lt;Player&gt; players = new ArrayList&lt;Player&gt;() &#123; &#123;      add(new Player(&quot;bowen&quot;, 20));      add(new Player(&quot;bob&quot;, 20));      add(new Player(&quot;Katy&quot;, 18));      add(new Player(&quot;Logon&quot;, 24));  &#125;&#125;;</code></pre></li></ul></li><li><p>æ“ä½œé›†åˆ<br>  è¦æ±‚ï¼šæŒ‰å¹´é¾„å°†ä¸Šè¿°äººå‘˜åˆ†ç»„</p><ul><li><p>é€šå¸¸çš„åšæ³•ï¼ˆjdk8ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰</p><pre><code>  public void mapListJava7(List&lt;Player&gt; players) &#123;      Map&lt;Integer, List&lt;Player&gt;&gt; groups = new HashMap&lt;&gt;();      for (Player player : players) &#123;          List&lt;Player&gt; group = groups.get(player.getAge());          if (group == null) &#123;              group = new ArrayList&lt;&gt;();              groups.put(player.getAge(), group);          &#125;          group.add(player);      &#125;  &#125;</code></pre></li><li><p>åœ¨guavaä¸­ï¼Œæä¾›äº†<code>Multimap </code></p><pre><code>  public void guavaMultimap(List&lt;Player&gt; players) &#123;      Multimap&lt;Integer, Player&gt; groups = ArrayListMultimap.create();      for (Player player : players) &#123;          groups.put(player.getAge(), player);      &#125;  &#125;</code></pre></li><li><p>åœ¨jdk8ä¸­ï¼Œç»™Mapæ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•<code>getOrDefault()</code>ï¼Œå³ä½¿ä¸ç”¨lambdaè¡¨è¾¾å¼ï¼Œä»£ç ä¹Ÿæ¸…æ´è®¸å¤šï¼š</p><pre><code>  // élambda  public void mapListJava8(List&lt;Player&gt; players) &#123;      Map&lt;Integer, List&lt;Player&gt;&gt; groups = new HashMap&lt;&gt;();      for (Player player : players) &#123;          List&lt;Player&gt; group = groups.getOrDefault(player.getAge(), new ArrayList&lt;&gt;());          group.add(player);          groups.put(player.getAge(), group);      &#125;  &#125;  // ä½¿ç”¨lambdaè¡¨è¾¾å¼  public void groupingByJava8(List&lt;Player&gt; players) &#123;      Map&lt;Integer, List&lt;Player&gt;&gt; groups = players.stream().collect(Collectors.groupingBy(Player::getAge));  &#125;</code></pre></li></ul></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JDK8 </tag>
            
            <tag> guava </tag>
            
            <tag> å‡½æ•°å¼ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°å¼ç¼–ç¨‹ä»‹ç»</title>
      <link href="/2015/06/14/hou-duan/han-shu-shi-bian-cheng-jie-shao/"/>
      <url>/2015/06/14/hou-duan/han-shu-shi-bian-cheng-jie-shao/</url>
      
        <content type="html"><![CDATA[<p>##ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹<br>å‡½æ•°å¼ç¼–ç¨‹æ˜¯ç§ç¼–ç¨‹å…¸èŒƒï¼Œå®ƒå°†ç”µè„‘è¿ç®—è§†ä¸ºå‡½æ•°çš„è®¡ç®—ã€‚å‡½æ•°ç¼–ç¨‹è¯­è¨€æœ€é‡è¦çš„åŸºç¡€æ˜¯ Î» æ¼”ç®—ï¼ˆlambda calculusï¼‰ã€‚è€Œä¸”Î»æ¼”ç®—çš„å‡½æ•°å¯ä»¥<strong>æ¥å—å‡½æ•°å½“ä½œè¾“å…¥ï¼ˆå‚æ•°ï¼‰å’Œè¾“å‡ºï¼ˆè¿”å›å€¼ï¼‰</strong>ã€‚å’ŒæŒ‡ä»¤å¼ç¼–ç¨‹ç›¸æ¯”ï¼Œå‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒå‡½æ•°çš„è®¡ç®—æ¯”æŒ‡ä»¤çš„æ‰§è¡Œé‡è¦ã€‚å’Œè¿‡ç¨‹åŒ–ç¼–ç¨‹ç›¸æ¯”ï¼Œå‡½æ•°å¼ç¼–ç¨‹é‡Œï¼Œå‡½æ•°çš„è®¡ç®—å¯éšæ—¶è°ƒç”¨ã€‚</p><span id="more"></span><p>##Guavaä¸­çš„å‡½æ•°å¼ç¼–ç¨‹<br>ä¸ºäº†æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼ŒGuavaæä¾›äº†ä¸‹é¢è¿™ä¸¤ä¸ªæ¥å£ï¼š</p><pre><code>public interface Function&lt;F, T&gt; &#123;    @Nullable T apply(@Nullable F input);&#125;public interface Predicate&lt;T&gt; &#123;    boolean apply(@Nullable T input);&#125;</code></pre><p>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ç¾¤Peopleå¯¹è±¡ä¸­ï¼Œæ‰¾åˆ°å¹´é¾„å¤§äº20çš„People</p><ul><li><p>é€šå¸¸åšæ³•ï¼š</p><p>  List<Person> oldPeople &#x3D; new ArrayList<Person>();<br>  for (Person person : people) {<br>  if (person.getAge() &gt;&#x3D; 20) {<br>      oldPeople.add(person);<br>  }<br>  }</p></li><li><p>åœ¨Guavaä¸­æä¾›äº†filteræ¨¡å¼ï¼Œfilterå³ä»ä¸€ä¸ªé›†åˆä¸­æ ¹æ®ä¸€ä¸ªæ¡ä»¶ç­›é€‰å…ƒç´ ã€‚</p><ul><li><p>æ‰¾å‡ºageå¤§äº20çš„</p><pre><code>  List&lt;Person&gt; oldPeople = Lists.newArrayList(Collections2.filter(people, new Predicate&lt;Person&gt;() &#123;      public boolean apply(Person person) &#123;          return person.getAge() &gt;= 20;      &#125;  &#125;));</code></pre></li><li><p>æ‰¾å‡ºnameä¸­å«æœ‰å­—ç¬¦wçš„</p><pre><code>  List&lt;Person&gt; oldPeople = Lists.newArrayList(Collections2.filter(people, new Predicate&lt;Person&gt;() &#123;      public boolean apply(Person person) &#123;          return person.getName().contains(&quot;w&quot;);      &#125;  &#125;));</code></pre></li><li><p>æ‰¾å‡ºage&gt;20å¹¶ä¸”nameä¸­å«æœ‰å­—ç¬¦wçš„äºº</p><pre><code>  // ä¸€èˆ¬å¤§å®¶éƒ½ä¼šè¿™ä¹ˆå†™ï¼Œå½“ç„¶è¿™ç§å†™æ³•æ˜¯å¯ä»¥çš„  List&lt;Person&gt; oldPersons = Lists.newArrayList(Collections2.filter(persons, new Predicate&lt;Person&gt;() &#123;      public boolean apply(Person person) &#123;          return person.getAge() &gt;= 20 &amp;&amp; person.getName().contains(&quot;w&quot;);      &#125;  &#125;));</code></pre></li></ul></li></ul><p>è¿™æ ·å†™çš„è¯å°±æœ‰ä¸€å®šçš„ä»£ç é‡å¤ï¼Œå› ä¸ºä¹‹å‰æˆ‘ä»¬å·²ç»å†™äº†ä¸¤ä¸ªPredicateæ¥åˆ†åˆ«å®ç°è¿™ä¸¤ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œèƒ½ä¸èƒ½é‡ç”¨ä¹‹å‰çš„Predicateé‚£ï¼Ÿç­”æ¡ˆæ˜¯èƒ½ã€‚ æˆ‘ä»¬é¦–å…ˆå°†ä¹‹å‰ç”Ÿæˆå¹´é¾„åˆ¤æ–­å’Œåç§°åˆ¤æ–­çš„ä¸¤ä¸ªPredicateæŠ½æˆæ–¹æ³•ã€‚</p><pre><code>private Predicate&lt;Person&gt; ageBiggerThan(final int age) &#123;    return new Predicate&lt;Person&gt;() &#123;        public boolean apply(Person person) &#123;            return person.getAge() &gt;= age;        &#125;    &#125;;&#125;private Predicate&lt;Person&gt; nameContains(final String str) &#123;    return new Predicate&lt;Person&gt;() &#123;        public boolean apply(Person person) &#123;            return person.getName().contains(str);        &#125;    &#125;;&#125;//è€Œæˆ‘ä»¬çš„ç»“æœå…¶å®å°±æ˜¯è¿™ä¸¤ä¸ªPredicateç›¸ä¸ã€‚Guavaç»™æˆ‘ä»¬æä¾›äº†andæ–¹æ³•ï¼Œç”¨äºå¯¹ä¸€ç»„Predicateæ±‚ä¸ã€‚List&lt;Person&gt; filteredPeople = Lists.newArrayList(Collections2.filter(people, Predicates.and(ageBiggerThan(20), nameContains(&quot;w&quot;))));</code></pre><p>##JDK8ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹<br>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š</p><ul><li><p>åœ¨ä¸€ç¾¤Peopleå¯¹è±¡ä¸­ï¼Œæ‰¾åˆ°å¹´é¾„å¤§äº20çš„People</p><p>  List<Person> filteredPeople &#x3D; persons.stream().filter(p -&gt; p.getAge() &gt;&#x3D; 20).collect(Collectors.toList());</p></li><li><p>æ‰¾å‡ºnameä¸­å«æœ‰å­—ç¬¦wçš„</p><pre><code>  List&lt;Person&gt; filteredPeople = persons.stream().filter(p -&gt; p.getName().contains(&quot;w&quot;)).collect(Collectors.toList());</code></pre></li></ul><p>##æ€»ç»“</p><ol><li>æ— æ³•å‡çº§jdkç‰ˆæœ¬çš„é¡¹ç›®ï¼Œæ¨èä½¿ç”¨guava<blockquote><p>guavaä½œä¸ºjdk8æœ€å¥½çš„æ›¿ä»£å“ï¼Œæ˜¯å€¼å¾—ä½¿ç”¨çš„</p></blockquote></li><li>å¯ä»¥å¹³ç¨³å‡çº§jdkçš„é¡¹ç›®ï¼Œæ¨èä½¿ç”¨jdk8<blockquote><p>jdk8å¤©ç”Ÿçš„ä¼˜åŠ¿ï¼Œæ³¨å®šå®ƒä¼˜äºguavaï¼Œå†åŠ ä¸Šåæ¥å¼•å…¥çš„lambdaè¡¨è¾¾å¼ï¼Œä½¿jdk8çš„è¯­æ³•æ›´åŠ ä¼˜ç¾</p></blockquote></li><li>jdk8å‡ºç”Ÿäºguavaä¹‹åï¼Œæ‰€ä»¥è¯´ï¼Œjdk8å¾ˆå¤šåœ°æ–¹éƒ½æ˜¯å€Ÿé‰´äºguava</li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JDK8 </tag>
            
            <tag> å‡½æ•°å¼ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æœåŠ¡åˆ—è¡¨</title>
      <link href="/2014/10/26/qi-ta/wo-de-fu-wu-lie-biao/"/>
      <url>/2014/10/26/qi-ta/wo-de-fu-wu-lie-biao/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Git</p></blockquote><ul><li><a href="http://git.sunhao.com:82/" title="æˆ‘çš„gitlab">æˆ‘çš„gitlab</a></li></ul><span id="more"></span><hr><blockquote><p>SVN</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/svntool/" title="Subversion åœ¨çº¿è‡ªåŠ©å¯†ç ä¿®æ”¹">Subversion åœ¨çº¿è‡ªåŠ©å¯†ç ä¿®æ”¹</a></li><li><a href="http://sunhao-java.vicp.cc/message/" title="message - svn">message - svn</a></li><li><a href="http://sunhao-java.vicp.cc/messageboard/" title="messageboard - svn">messageboard - svn</a></li><li><a href="http://sunhao-java.vicp.cc/resources/" title="resources - svn">resources - svn</a></li><li><a href="http://sunhao-java.vicp.cc/blog/" title="blog - svn">blog - svn</a></li><li><a href="http://sunhao-java.vicp.cc/knowledge/" title="knowledge - svn">knowledge - svn</a></li></ul><hr><blockquote><p>Demo</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/message_test/" title="Message-Core Demo">Message-Core Demo</a></li></ul><hr><blockquote><p>å·¥å…·ç±»</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/myblog/" title="å­™æ˜Šçš„åšå®¢">å­™æ˜Šçš„åšå®¢</a></li><li><a href="http://sunhao-java.vicp.cc/nexus/" title="Nexus">Nexus</a></li><li><a href="http://sunhao-java.vicp.cc/sonar/" title="Sonarä»£ç è´¨é‡ç®¡ç†">Sonarä»£ç è´¨é‡ç®¡ç†</a></li><li><a href="http://sunhao-java.vicp.cc/jenkins/" title="Jenkins [Dashboard]">Jenkins [Dashboard]</a></li></ul><hr><blockquote><p>æ•°æ®åº“ç®¡ç†</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/mysql/" title="phpMyAdmin">phpMyAdmin</a></li><li><a href="http://sunhao-java.vicp.cc/rockmongo/index.php?action=login.index" title="RockMongo">RockMongo</a></li><li><a href="http://sunhao-java.vicp.cc/redis/" title="phpRedisAdmin">phpRedisAdmin</a></li><li><a href="http://sunhao-java.vicp.cc/memcached/" title="phpMemcachedAdmin">phpMemcachedAdmin</a></li></ul><hr><blockquote><p>ç›‘æ§</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/solr/" title="Solr">Solr</a></li><li><a href="http://sunhao-java.vicp.cc/dubbo/" title="Dubbo Admin">Dubbo Admin</a></li><li><a href="http://sunhao-java.vicp.cc:15672/" title="RabbitMQ">RabbitMQ</a></li></ul><hr><blockquote><p>å¸®åŠ©æ–‡æ¡£</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/jdk7/" title="Java Platform SE 7">Java Platform SE 7</a></li><li><a href="http://sunhao-java.vicp.cc/jdk8/" title="Java Platform SE 8">Java Platform SE 8</a></li><li><a href="http://sunhao-java.vicp.cc/jquery/" title="jQuery å¸®åŠ©æ–‡æ¡£">jQuery å¸®åŠ©æ–‡æ¡£</a></li><li><a href="http://sunhao-java.vicp.cc/python/" title="Python documentation">Python documentation</a></li><li><a href="http://sunhao-java.vicp.cc/bootstrap/" title="bootstrap">bootstrap</a></li><li><a href="http://sunhao-java.vicp.cc/adminLTE/" title="bootstrap adminLTE">bootstrap adminLTE</a></li><li><a href="http://sunhao-java.vicp.cc/php/" title="PHP æ‰‹å†Œ">PHP æ‰‹å†Œ</a></li><li><a href="http://sunhao-java.vicp.cc/redisdoc/" title="Redis å‘½ä»¤å‚è€ƒ">Redis å‘½ä»¤å‚è€ƒ</a></li><li><a href="http://sunhao-java.vicp.cc/redisbook/" title="Redis è®¾è®¡ä¸å®ç°">Redis è®¾è®¡ä¸å®ç°</a></li></ul><hr><blockquote><p>å…¶ä»–</p></blockquote><ul><li><a href="http://sunhao-java.vicp.cc/mail/" title="php mail">php mail</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­™æ˜Š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sonarä½¿ç”¨æ–¹æ³•</title>
      <link href="/2014/10/17/zhong-jian-jian/sonar-shi-yong-fang-fa/"/>
      <url>/2014/10/17/zhong-jian-jian/sonar-shi-yong-fang-fa/</url>
      
        <content type="html"><![CDATA[<p>###æ–¹æ³•1ï¼šç›´æ¥åœ¨æœåŠ¡å™¨åˆ†æ</p><ul><li><p>åœ¨é¡¹ç›®æºä»£ç ç›®å½•æ–°å»ºsonar-project.propertiesæ–‡ä»¶<code>touch sonar-project.properties</code></p></li><li><p>ç¼–è¾‘æ­¤æ–‡ä»¶<code>vim sonar-project.properties</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>  # Required metadata  sonar.projectKey=my:project#é¡¹ç›®çš„key  sonar.projectName=My project#é¡¹ç›®æ˜¾ç¤ºçš„åç§°  sonar.projectVersion=1.0#ç‰ˆæœ¬</code></pre></li></ul><span id="more"></span><pre><code>    # Path to the parent source code directory.    # Path is relative to the sonar-project.properties file. Replace &quot;\&quot; by &quot;/&quot; on Windows.    # Since SonarQube 4.2, this property is optional if sonar.modules is set.    # If not set, SonarQube starts looking for source code from the directory containing    # the sonar-project.properties file.    sonar.sources=src#é¡¹ç›®æºä»£ç ç›®å½•    # Encoding of the source code    sonar.sourceEncoding=UTF-8#ä½¿ç”¨çš„ç¼–ç æ ¼å¼    # Additional parameters    sonar.my.property=value</code></pre><ul><li>æ‰§è¡Œå€ºåŠ¡åˆ†æ<ul><li>åœ¨ä¸Šé¢æ–‡ä»¶æ‰€åœ¨è·¯å¾„æ‰§è¡Œ<code>sonar-runner</code></li></ul></li></ul><p>###æ–¹æ³•2ï¼šç»“åˆmavenä½¿ç”¨</p><ul><li><p>é…ç½®mavençš„setting.xmlæ–‡ä»¶ï¼Œä½ç½®ï¼š<code>%MAVEN_HOME%/conf/settings.xml</code></p><pre><code>  &lt;profile&gt;     &lt;id&gt;sonar&lt;/id&gt;     &lt;activation&gt;        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;     &lt;/activation&gt;     &lt;properties&gt;        &lt;!-- æ•°æ®åº“url --&gt;        &lt;sonar.jdbc.url&gt;jdbc:mysql://172.16.128.160:3306/sonar&lt;/sonar.jdbc.url&gt;        &lt;!-- æ•°æ®åº“driver --&gt;        &lt;sonar.jdbc.driver&gt;com.mysql.jdbc.Driver&lt;/sonar.jdbc.driver&gt;        &lt;!-- æ•°æ®åº“username --&gt;        &lt;sonar.jdbc.username&gt;sonar&lt;/sonar.jdbc.username&gt;        &lt;!-- æ•°æ®åº“password --&gt;        &lt;sonar.jdbc.password&gt;sonar&lt;/sonar.jdbc.password&gt;        &lt;!-- sonaråœ°å€ --&gt;        &lt;sonar.host.url&gt;http://172.16.128.160:19000&lt;/sonar.host.url&gt;     &lt;/properties&gt;  &lt;/profile&gt;</code></pre></li><li><p>æ‰§è¡Œmavenå‘½ä»¤</p><ul><li>mvn sonar:sonar</li></ul></li></ul><hr><p>#é—®é¢˜è§£å†³:</p><ul><li><p>æ‰§è¡Œå€ºåŠ¡åˆ†ææ—¶ï¼Œè‹¥æŠ¥é”™ï¼Œå¹¶ä¸”sonaråå°æ—¥å¿—ï¼ˆ%SONARQUBE_HOME%&#x2F;logs&#x2F;sonar.logï¼‰ä¸­æœ‰å¦‚ä¸‹é”™è¯¯<br>  <code>undefined method &#39;generate&#39; for #&lt;JSON::Ext::Generator::State:0x76afc32d&gt;</code></p><p>  <strong>é—®é¢˜åŸå› </strong>ï¼šSonaråå°æœ‰Ruby on Railså·¥ç¨‹ï¼Œä¼šç”¨åˆ°Rubyçš„APIï¼Œè¿™ä¸ªæ˜¯Rubyçš„å¼‚å¸¸ã€‚ç”±äºéƒ¨ç½²çš„æœåŠ¡å™¨åˆšå¥½ä¹Ÿè£…è¿‡Rubyç‰ˆæœ¬ï¼Œå¯¼è‡´äº†è°ƒç”¨è‡ªå·±å®‰è£…çš„Rubyï¼Œè€Œä¸æ˜¯Sonarå†…åµŒçš„Rubyï¼Œå¯¼è‡´å‡ºç°é”™è¯¯</p><p>  <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨sonarçš„å¯åŠ¨è„šæœ¬soanr.shçš„å¼€å¤´åŠ å…¥unset GEM_PATH ï¼Œåœ¨é‡æ–°å¯åŠ¨å³å¯ï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥ä¿è¯æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™ä½¿ç”¨sonarå†…ç½®çš„rubyç‰ˆæœ¬</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sonar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sonarå®‰è£…æ­¥éª¤</title>
      <link href="/2014/10/13/zhong-jian-jian/sonar-an-zhuang-bu-zou/"/>
      <url>/2014/10/13/zhong-jian-jian/sonar-an-zhuang-bu-zou/</url>
      
        <content type="html"><![CDATA[<ol><li>ä¸‹è½½<strong>sonarqube-4.5.zip</strong>å’Œ<strong>sonar-runner-dist-2.4.zip</strong><ul><li>ä¸‹è½½åœ°å€ï¼š<ul><li><a href="http://www.sonarqube.org/downloads/" title="sonarqube">http://www.sonarqube.org/downloads/</a></li></ul></li></ul></li></ol><span id="more"></span><ol start="2"><li><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè§£å‹</p><ul><li><code>unzip sonarqube-4.5.zip</code></li><li><code>unzip sonar-runner-dist-2.4.zip</code></li></ul></li><li><p>è®¾ç½®ç¯å¢ƒå˜é‡</p><pre><code> export SONAR_RUNNER_HOME=/opt/sonar/sonar-runner-2.4 export PATH=$SONAR_RUNNER_HOME/bin:$PATH</code></pre></li><li><p>ä¿®æ”¹é…ç½®</p><ul><li><p>ä¿®æ”¹sonarqubeçš„é…ç½®<code>%SONARQUBE_HOME%/conf/sonar.properties</code></p><pre><code>  # User credentials.  # Permissions to create tables, indices and triggers must be granted to JDBC user.  # The schema must be created first.  sonar.jdbc.username=sonar  sonar.jdbc.password=sonar  #----- MySQL 5.x  sonar.jdbc.url=jdbc:mysql://localhost:3306/sonar?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true&amp;useConfigs=maxPerformance</code></pre></li><li><p>ä¿®æ”¹sonar-runnerçš„é…ç½®<code>%SONAR_RUNNER_HOME%/conf/sonar-runner.properties</code><br>  #â€”â€“ Default SonarQube server<br>  sonar.host.url&#x3D;<a href="http://localhost:9000/">http://localhost:9000</a><br><br>  #â€”â€“ PostgreSQL<br>  #sonar.jdbc.url&#x3D;jdbc:postgresql:&#x2F;&#x2F;localhost&#x2F;sonar<br><br>  #â€”â€“ MySQL<br>  sonar.jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;sonar?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8<br>  #â€”â€“ Global database settings<br>  sonar.jdbc.username&#x3D;sonar<br>  sonar.jdbc.password&#x3D;sonar<br><br>  #â€”â€“ Default source code encoding<br>  sonar.sourceEncoding&#x3D;UTF-8<br><br>  #â€”â€“ Security (when â€˜sonar.forceAuthenticationâ€™ is set to â€˜trueâ€™)<br>  sonar.login&#x3D;admin<br>  sonar.password&#x3D;admin</p></li></ul></li><li><p>åˆ›å»ºæ•°æ®åº“ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p><pre><code> create database if not exists sonar character set utf8; CREATE USER &#39;sonar&#39;@&#39;%&#39; IDENTIFIED BY &#39;sonar&#39;; CREATE USER &#39;sonar&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;sonar&#39;; grant all privileges on sonar.* to &#39;sonar&#39;@&#39;%&#39; identified by &#39;sonar&#39;; grant all privileges on sonar.* to &#39;sonar&#39;@&#39;localhost&#39; identified by &#39;sonar&#39;; flush privileges;</code></pre></li><li><p>å¯åŠ¨sonar:</p><ul><li><code>%SONARQUBE_HOME%/bin/linux-x86-64/sonar.sh</code></li><li>è¯·å°†%SONARQUBE_HOME%æ›¿æ¢æˆsonarå®‰è£…ç›®å½•</li><li>linux-x86-64è§†å…·ä½“æ“ä½œç³»ç»Ÿè€Œå®š</li></ul></li><li><p>æ±‰åŒ–æ­¥éª¤</p><ul><li>ä¸‹è½½æ±‰åŒ–åŒ…<br>  <a href="http://repository.codehaus.org/org/codehaus/sonar-plugins/l10n/sonar-l10n-zh-plugin/" title="sonar-l10n-zh-plugin">http://repository.codehaus.org/org/codehaus/sonar-plugins/l10n/sonar-l10n-zh-plugin/</a></li><li>æ”¾å…¥%SONARQUBE_HOME%&#x2F;extensions&#x2F;plugins&#x2F;ä¸‹</li><li>é‡å¯serverå³å¯</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sonar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntuå®‰è£…Redis</title>
      <link href="/2014/10/12/zhong-jian-jian/linux-ubuntu-an-zhuang-redis/"/>
      <url>/2014/10/12/zhong-jian-jian/linux-ubuntu-an-zhuang-redis/</url>
      
        <content type="html"><![CDATA[<ol><li>ä¸‹è½½å®‰è£…<ul><li><p>å°†å®‰è£…åŒ…ä¸Šä¼ ï¼Œæ”¾å…¥<code>/opt/software/redis</code></p></li><li><p>æ‰§è¡Œå‘½ä»¤</p><pre><code>  tar -zxf redis-2.8.13.tar.gz  cd redis-2.8.13  make  sudo make install  make test</code></pre></li></ul></li></ol><span id="more"></span><ol start="2"><li><p>è¿™æ—¶Redis çš„å¯æ‰§è¡Œæ–‡ä»¶è¢«æ”¾åˆ°äº†<code>/usr/local/bin</code></p><ul><li><p>ä¸‹è½½é…ç½®æ–‡ä»¶å’Œinitå¯åŠ¨è„šæœ¬ï¼š</p><pre><code>  wget https://github.com/ijonas/dotfiles/raw/master/etc/init.d/redis-server  wget https://github.com/ijonas/dotfiles/raw/master/etc/redis.conf  sudo mv redis-server /etc/init.d/redis-server  sudo chmod +x /etc/init.d/redis-server  sudo mv redis.conf /etc/redis.conf  å¤‡æ³¨:  redis-server--&gt; [Linux_Ubuntuå®‰è£…Redis_redis-server]  Redis_redis.conf--&gt; [Linux_Ubuntuå®‰è£…Redis_redis.conf]</code></pre></li></ul></li><li><p>åˆå§‹åŒ–ç”¨æˆ·å’Œæ—¥å¿—è·¯å¾„[å¿…é¡»æ‰§è¡Œ]</p><ul><li><p>ç¬¬ä¸€æ¬¡å¯åŠ¨Rediså‰ï¼Œå»ºè®®ä¸ºRediså•ç‹¬å»ºç«‹ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶æ–°å»ºdataå’Œæ—¥å¿—æ–‡ä»¶å¤¹</p><pre><code>  sudo useradd redis  sudo mkdir -p /var/lib/redis  sudo mkdir -p /var/log/redis  sudo chown redis.redis /var/lib/redis  sudo chown redis.redis /var/log/redis</code></pre></li></ul></li><li><p>è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œå…³æœºè‡ªåŠ¨å…³é—­</p><pre><code> sudo update-rc.d redis-server defaults</code></pre></li><li><p>å¯åŠ¨Redisï¼š</p><pre><code> sudo /etc/init.d/redis-server start</code></pre></li><li><p>å¯åŠ¨clientå®¢æˆ·ç«¯è¿æ¥:</p><pre><code> root@sunhao-linux:~# redis-cli 127.0.0.1:6379&gt; set foo bar OK 127.0.0.1:6379&gt; get foo &quot;bar&quot;</code></pre></li></ol><hr><p>#####é—®é¢˜è§£å†³ï¼š</p><ol><li><p>å¦‚æœé‡åˆ°make testå‘ç”Ÿé”™è¯¯ï¼š</p><pre><code> ç°è±¡ï¼š     root@sunhao-linux:/opt/redis# make test     cd src &amp;&amp; make test     make[1]: æ­£åœ¨è¿›å…¥ç›®å½• `/opt/redis/src&#39;     You need tcl 8.5 or newer in order to run the Redis test     make[1]: *** [test] é”™è¯¯ 1     make[1]:æ­£åœ¨ç¦»å¼€ç›®å½• `/opt/redis/src&#39;     make: *** [test] é”™è¯¯ 2 è§£å†³æ–¹æ¡ˆï¼š     root@sunhao-linux:/opt/redis# apt-get install tcl</code></pre></li></ol><hr><p>#####PS:å®‰è£…ä¹‹åçš„ä¿¡æ¯<br>    &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>    jemalloc version   : 3.6.0-0-g46c0af68bd248b04df75e4f92d5fb804c3d75340<br>    library revision   : 1<br>    CC                 : gcc<br>    CPPFLAGS           :  -D_GNU_SOURCE -D_REENTRANT<br>    CFLAGS             : -std&#x3D;gnu99 -Wall -pipe -g3 -O3 -funroll-loops  -fvisibility&#x3D;hidden<br>    LDFLAGS            :<br>    EXTRA_LDFLAGS      :<br>    LIBS               :  -lpthread<br>    RPATH_EXTRA        :<br>    XSLTPROC           : false<br>    XSLROOT            :<br>    PREFIX             : &#x2F;usr&#x2F;local<br>    BINDIR             : &#x2F;usr&#x2F;local&#x2F;bin<br>    INCLUDEDIR         : &#x2F;usr&#x2F;local&#x2F;include<br>    LIBDIR             : &#x2F;usr&#x2F;local&#x2F;lib<br>    DATADIR            : &#x2F;usr&#x2F;local&#x2F;share<br>    MANDIR             : &#x2F;usr&#x2F;local&#x2F;share&#x2F;man<br>    srcroot            :<br>    abs_srcroot        : &#x2F;opt&#x2F;software&#x2F;redis&#x2F;redis-2.8.13&#x2F;deps&#x2F;jemalloc&#x2F;<br>    objroot            :<br>    abs_objroot        : &#x2F;opt&#x2F;software&#x2F;redis&#x2F;redis-2.8.13&#x2F;deps&#x2F;jemalloc&#x2F;<br>    JEMALLOC_PREFIX    : je_<br>    JEMALLOC_PRIVATE_NAMESPACE<br>                       : je_<br>    install_suffix     :<br>    autogen            : 0<br>    experimental       : 1<br>    cc-silence         : 1<br>    debug              : 0<br>    code-coverage      : 0<br>    stats              : 1<br>    prof               : 0<br>    prof-libunwind     : 0<br>    prof-libgcc        : 0<br>    prof-gcc           : 0<br>    tcache             : 1<br>    fill               : 1<br>    utrace             : 0<br>    valgrind           : 0<br>    xmalloc            : 0<br>    mremap             : 0<br>    munmap             : 0<br>    dss                : 0<br>    lazy_lock          : 0<br>    tls                : 1<br>    &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½œä¸ºä¸€ä¸ªè‹¦é€¼ç å†œï¼Œæˆ‘è¦æƒ³æƒ³æˆ‘ä»¥åçš„å‡ºè·¯</title>
      <link href="/2014/04/09/ge-ren-gan-wu/as-a-coder/"/>
      <url>/2014/04/09/ge-ren-gan-wu/as-a-coder/</url>
      
        <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;ç¨‹åºå‘˜ï¼Œåœ¨å¤–è¡Œçœ‹æ¥æ˜¯ä¸€ä¸ªå¾ˆé«˜ç«¯çš„è¡Œä¸šï¼ŒæITçš„ï¼Œé«˜ç«¯äººæ‰ï¼Œå¤©å¤©ååŠå…¬å®¤ï¼Œå¤šçˆ½ã€‚å¯æ˜¯åœ¨æˆ‘ä»¬è‡ªå·±çœ‹æ¥ï¼Œåªæœ‰è‡ªå·±çŸ¥é“è‡ªå·±çš„è‹¦ã€‚æ¯å¤©ä¸å›ºå®šçš„åŠ ç­ä¸è¯´ï¼Œè¿˜æœ‰å¿å—ç€å®¢æˆ·å„ç§æ— ç†è‹›åˆ»çš„éœ€æ±‚ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;æˆ–è®¸æ˜¯æˆ‘ä»¬è‡ªå·±å¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼Œå¯¹æ–°æŠ€æœ¯çš„ç‹‚çƒ­è¿½æ±‚ï¼Œä»–ç”šè‡³æ›¾ç»æœ‰æ®µæ—¶é—´è¶…è¶Šæˆ‘è¿½æ±‚å¦¹å­çš„æ¬²æœ›ã€‚æˆ‘å¯ä»¥ä¸ºä¸€ä¸ªbugç†¬ä¸ªé€šå®µï¼Œæˆ‘å¯ä»¥ä¸ºäº†ä¸€ä¸ªæ–°æŠ€æœ¯ç‹‚å•ƒ3å¤©é¦’å¤´ä¸å‡ºé—¨ï¼Œä½†æ˜¯æˆ‘å¿å—ä¸äº†åˆ«äººå¯¹æˆ‘çš„åŠªåŠ›ä¸èµåŒã€‚è¿™å¯èƒ½å°±æ˜¯æœ€çœŸå®çš„ç¨‹åºçŒ¿ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ç¨‹åºçŒ¿ä¸æ“…é•¿ä¸äººäº¤æµï¼Œå› ä¸ºç¨‹åºçŒ¿æœ€æ“…é•¿çš„æ˜¯å’Œç”µè„‘æ‰“äº¤é“ï¼Œä»–ä»¬è§†ç”µè„‘å¦‚åª³å¦‡ï¼Œè§†ä»£ç å¦‚å­©å­ï¼Œè§†æ–°æŠ€æœ¯å¦‚æ–°è¡£æœä¸€æ ·çš„ç‹‚çƒ­è¿½æ±‚ã€‚æœ‰äººè¯´ï¼Œç¨‹åºçŒ¿æ˜¯æœ€å¥½çš„è€å…¬äººé€‰ï¼Œä»–ä»¬æœ‰ç€å›ºå®šçš„å·¥ä½œï¼Œæ‹¿ç€é«˜è–ªï¼Œè€Œä¸”ä¸ä¼šä¹±èŠ±é’±ï¼Œæ¥è§¦é¢å¾ˆçª„ï¼Œå¾ˆéš¾å‡ºè½¨ï¼Œç»å¸¸ä¼šåŠ ç­ï¼Œä¸ä¼šçº¦æŸåˆ°å¦ä¸€æ–¹ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬ç¡®å®æ˜¯è¿™æ ·çš„çŠ¶æ€ï¼Œä½†æ˜¯è°èƒ½çŸ¥é“æˆ‘ä»¬å¿ƒä¸­çš„ç‹‚é‡å—ï¼Ÿæˆ‘ä»¬ä¼šéª‚ï¼Œè¿™å‚»é€¼ç³»ç»Ÿï¼ŒçœŸåƒåœ¾ï¼Œè¦æˆ‘åšï¼Œç»å¯¹æ¯”è¿™å¥½ä¸€ç™¾å€ã€‚è¿˜æœ‰è¿™å‚»é€¼å®¢æˆ·ï¼Œæ€ä¹ˆä¼šæå‡ºè¿™æ ·å‚»é€¼çš„éœ€æ±‚å‘¢ï¼Ÿ</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ä»Šå¤©ä¸€ä¸ªåŒäº‹è¯´è¦è¾èŒäº†ï¼Œé—®ä»–åŸå› ï¼Œä»–è¯´è¦å»è‡ªå·±åšç”Ÿæ„äº†ï¼Œè§‰å¾—åšç¨‹åºçŒ¿æ²¡æœ‰å‰é€”ï¼Œè¦å»å’Œæœ‹å‹åˆä¼™å–æ‰‹æœºã€‚å¾ˆå¥½çš„ä¸€ä¸ªæƒ³æ³•ï¼Œåè¿‡æ¥æˆ‘æƒ³æƒ³è‡ªå·±ï¼Œé™¤äº†èƒ½å†™çš„äº†ä¸€æ‰‹å¥½ä»£ç ï¼Œåˆèƒ½å¹²äº›ä»€ä¹ˆï¼Ÿåœ¨å…¬å¸ï¼Œæ¯å¤©å¸®ç€åŒäº‹è§£å†³å„ç§ä»–ä»¬è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œç„¶åå¬ç€ä»–ä»¬è¯´ä½ å¥½å‰å®³å•Šï¼Œæˆ‘è§‰å¾—å¿ƒé‡Œç‰¹åˆ«èˆ’æœï¼Œå¾ˆæœ‰æˆå°±æ„Ÿï¼Œæˆ–è€…å‘ç°æŸä¸€ä¸ªé—®é¢˜å¾ˆæ“è›‹ï¼Œç„¶åè‡ªå·±ç†¬äº†ä¸€ä¸ªé€šå®µå†™å‡ºä¸€ä¸ªå·¥å…·ï¼Œç„¶åå¿ƒæ»¡æ„è¶³çš„ç¾¤å‘ä¸€å°é‚®ä»¶ç»™å„ä¸ªåŒäº‹ï¼Œæœ€å¥½å¸¦ç€æ…¢æ…¢çš„æˆå°±æ„Ÿä¸ŠåºŠç¡è§‰å»äº†ã€‚å¯æ˜¯ï¼Œä¸€èµ°åˆ°å¤–é¢ï¼Œé‚£æƒ…å†µå°±æ­£å¥½åè¿‡æ¥äº†ï¼Œåˆ«äººéƒ½è¯´ï¼Œä½ æ€ä¹ˆè¿™ä¸ªéƒ½ä¸ä¼šã€‚ã€‚ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘çš„ç”Ÿæ´»å¾ˆå•è°ƒï¼Œé™¤äº†å…¬å¸ã€åƒé¥­çš„åœ°æ–¹ã€ç¡è§‰çš„åœ°æ–¹å°±æ²¡æœ‰äº†ï¼Œæ¯ä¸ªå‘¨æœ«ä¹‹å‰éƒ½åœ¨å¿ƒé‡Œè¯´ï¼Œæ˜å¤©æ˜¯ä¸ªå¥½å‘¨æœ«ï¼Œæˆ‘è¦å‡ºå»è½¬è½¬ï¼Œç»“æœå‘¨äº”æˆ–è€…å‘¨å…­æ™šä¸Šï¼Œé¢†å¯¼æˆ–è€…ç°åœºä¸€ä¸ªç”µè¯æ¥ï¼Œè¯´è¿™é‡Œæœ‰é—®é¢˜ï¼Œå¸®å¿™æ”¹æ”¹ï¼Œæ˜å¤©è¦ä¸Šçº¿å®¢æˆ·è¦çœ‹ï¼Œæˆ‘å°±å“¼å“§å“¼å“§çš„æåˆ°2-3ç‚¹é’Ÿï¼Œç¬¬äºŒå¤©ä¸€è§‰ç¡åˆ°ä¸‹åˆï¼Œä¹…è€Œä¹…ä¹‹ï¼Œä¹Ÿå°±ä¹ æƒ¯äº†è¿™æ ·çš„ä½œæ¯æ—¶é—´ã€‚ä»¥è‡³äºç°åœ¨æ²¡äº†å…­å—è…¹è‚Œï¼Œæ²¡äº†èƒ¸è‚Œï¼Œæ²¡äº†è‚±äºŒå¤´è‚Œã€‚å•¥ä¹Ÿæ²¡äº†ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœä¸åšç¨‹åºçŒ¿ï¼Œæˆ‘èƒ½åšä»€ä¹ˆï¼Ÿå»ç æ±Ÿè·¯å¼€ä¸ªä¿®ç”µè„‘çš„åº—ï¼Ÿåœ¨å°åŒºé™„è¿‘å¼€ä¸ªå¥¶èŒ¶åº—ï¼Ÿè¿˜æ˜¯å›è€å®¶å’Œæˆ‘çˆ¸ä¸€èµ·åšè£…æ½¢ï¼Ÿæˆ‘ä»–å¦ˆçš„åˆ°åº•èƒ½åšä»€ä¹ˆï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººæ„Ÿæ‚Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™ç»™äº²çˆ±çš„åª³å¦‡è¿˜æœ‰æœªæ¥çš„å¨ƒ</title>
      <link href="/2014/01/14/ge-ren-gan-wu/for-you/"/>
      <url>/2014/01/14/ge-ren-gan-wu/for-you/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨æ˜¯2014å¹´1æœˆ14å·æ™šä¸Š6ç‚¹39ã€‚</p><h1 id="è‡´æˆ‘æœªæ¥çš„åª³å¦‡ï¼ˆç°åœ¨å«äº²çˆ±çš„åª³å¦‡ï¼‰ï¼š"><a href="#è‡´æˆ‘æœªæ¥çš„åª³å¦‡ï¼ˆç°åœ¨å«äº²çˆ±çš„åª³å¦‡ï¼‰ï¼š" class="headerlink" title="è‡´æˆ‘æœªæ¥çš„åª³å¦‡ï¼ˆç°åœ¨å«äº²çˆ±çš„åª³å¦‡ï¼‰ï¼š"></a>è‡´æˆ‘æœªæ¥çš„åª³å¦‡ï¼ˆç°åœ¨å«äº²çˆ±çš„åª³å¦‡ï¼‰ï¼š</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;è™½ç„¶æˆ‘ç°åœ¨è¿˜ä¸çŸ¥é“ä½ åˆ°åº•æ˜¯è°ï¼Ÿåˆ°åº•æ˜¯å“ªé‡Œäººï¼Ÿä½†æ˜¯æœ‰äº›è¯æˆ‘è¿˜æ˜¯å¾ˆæƒ³è·Ÿä½ è¯´è¯´ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;é¦–å…ˆï¼Œä½ å¯ä»¥è¯´ä½ ä¸æ‡‚çˆ±æƒ…ï¼Œå› ä¸ºæˆ‘è‡ªå·±ä¹Ÿä¸å¤ªæ‡‚ï¼Œå’±å¯ä»¥ä¸€èµ·å»å­¦ä¹ ä»€ä¹ˆæ˜¯çˆ±æƒ…ï¼Œä»€ä¹ˆæ˜¯å®¶åº­ã€‚æˆ‘ä»¬ä¸€èµ·é•¿å¤§ï¼Œä¸€èµ·æ…¢æ…¢çš„å˜è€ï¼Œç›´åˆ°æ­»å»ã€‚è¿™ä¸æ˜¯å¾ˆæµªæ¼«å¾ˆå¹¸ç¦çš„äº‹æƒ…å—ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å…¶æ¬¡ï¼Œå’±ç»“å©šä»¥åï¼Œå®¶é‡Œçš„è´¢æ”¿å¤§è‡£ç”±ä½ æ¥å½“ï¼Œæˆ‘ä¸ä¼šç†è´¢ï¼Œä¹Ÿä¸å–œæ¬¢å»ç†è´¢ï¼Œæ‰€ä»¥è¿™é‡ä»»åªèƒ½äº¤ç»™ä½ æ¥åšäº†ã€‚æˆ‘è´Ÿè´£æŒ£é’±ï¼Œä½ è´Ÿè´£èŠ±é’±ã€‚åœ¨å®¶ï¼Œä½ å°±æ˜¯æˆ‘çš„å…¬ä¸»ã€æˆ‘çš„çš‡ä¸Šï¼Œæˆ‘æ˜¯ä½ çš„å–æš–å™¨ã€ä½ çš„æ³„æ°”åŒ…ï¼›åœ¨å¤–ï¼Œæˆ‘æ˜¯ä½ çš„é¿é£æ¸¯ã€ä½ çš„ç§»åŠ¨æŒ‡è·¯å°ã€ä½ çš„ä¿é•–ã€‚å¦‚æœä»¥åæˆ‘ä»¬æœ‰äº†å­©å­ï¼Œå¦‚æœæ˜¯å¥³å­©ï¼Œé‚£æˆ‘ä¼šæ°¸è¿œä¿æŠ¤ä½ ä»¬å¨˜ä¿©ï¼Œå¦‚æœæ˜¯ç”·å­©ï¼Œé‚£æˆ‘ä»¬çˆ·ä¿©æ°¸è¿œä¼šä¿æŠ¤ä½ ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;æœ€åï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œæˆ‘å–œæ¬¢ä½ èƒ½åƒå¯¹ä½ çˆ¶æ¯å…„å¼Ÿå§å¦¹ä¸€æ ·çš„å¯¹å¾…æˆ‘çš„çˆ¶æ¯å…„å¼Ÿå§å¦¹ï¼Œå› ä¸ºä»–ä»¬æ˜¯æˆ‘åœ¨è¿™ä¸ªä¸–ç•Œä¸Šé™¤äº†ä½ ä»¥å¤–æœ€äº²æœ€çˆ±çš„äººäº†ï¼ŒåŒæ ·ï¼Œæˆ‘ä¹Ÿä¼šåƒå¯¹å¾…æˆ‘è‡ªå·±çš„çˆ¶æ¯å…„å¼Ÿå§å¦¹ä¸€æ ·å¯¹å¾…ä½ çš„çˆ¶æ¯å…„å¼Ÿå§å¦¹ã€‚ä¹Ÿåªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬çš„å°å®¶åº­æ‰ä¼šæ°¸è¿œçš„å¹¸ç¦ç¾æ»¡ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨ï¼Œæˆ‘æƒ³è¯´ä¸€å¥ï¼šæˆ‘ä¼šåŠªåŠ›çš„å»åšä¸€ä¸ªåˆæ ¼çš„ä¸ˆå¤«ï¼Œä»¥åæˆ‘ä»¬æœ‰äº†å­©å­ä»¥åï¼Œæˆ‘è¿˜ä¼šå˜æˆä¸€ä¸ªåˆæ ¼çš„çˆ¶äº²ï¼</p><h1 id="è‡´æˆ‘æœªæ¥çš„å¨ƒï¼š"><a href="#è‡´æˆ‘æœªæ¥çš„å¨ƒï¼š" class="headerlink" title="è‡´æˆ‘æœªæ¥çš„å¨ƒï¼š"></a>è‡´æˆ‘æœªæ¥çš„å¨ƒï¼š</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨æˆ‘è¿˜ä¸çŸ¥é“ä½ è¿™ç†Šå­©å­æ˜¯ç”·å­©æ˜¯å¥³ï¼Œä¸è¿‡ä¸ç®¡ä½ æ˜¯ç”·è¿˜æ˜¯å¥³ï¼Œæˆ‘éƒ½ä¼šçˆ±ä½ çš„ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœä½ æ˜¯ç”·å­©ï¼Œåœ¨ä½ æ²¡æœ‰ä¸Šå­¦ä¹‹å‰ï¼Œæˆ‘ä¸ä¼šè¦æ±‚ä½ å»èƒŒä»€ä¹ˆå”è¯—å®‹è¯ï¼Œå­¦ä»€ä¹ˆä¹±ä¸ƒå…«ç³Ÿçš„æ•°å­¦è‹±è¯­ä»€ä¹ˆçš„ï¼Œæˆ‘ä¼šç»™ä½ ä¸€ä¸ªç¾å¥½çš„ç«¥å¹´ã€‚åœ¨ä½ ä¸Šå­¦ä¹‹åï¼Œæˆ‘ä¹Ÿä¸éœ€è¦ä½ è€ƒè¯•æ¯æ¬¡éƒ½èƒ½è€ƒåˆ°ç¬¬ä¸€ç¬¬äºŒåçš„ï¼Œå› ä¸ºè°ä¹Ÿä¸èƒ½ä¿è¯æ¯æ¬¡è€ƒè¯•éƒ½èƒ½è€ƒå¥½ã€‚åŸåˆ™ä¸Šçš„äº‹æƒ…æˆ‘ä¼šå¯¹ä½ å¾ˆä¸¥æ ¼çš„ï¼Œä½†æ˜¯æˆ‘ä¸ä¼šåŠ¨æ‰‹Kä½ çš„ï¼Œæ‰“ä½ åªèƒ½ä¼šè®©ä½ å˜å¾—æ›´åŠ å›é€†ã€‚è¿˜æœ‰ï¼Œåœ¨ä½ 18å²ä¹‹åï¼Œè¯·è‡ªå·±ä¸ºä½ è‡ªå·±çš„è·¯åšå†³å®šï¼Œä½ è€çˆ¹æˆ‘åªä¼šç»™ä½ å»ºè®®ã€‚åœ¨ä½ 18å²ä¹‹å‰ï¼Œè€çˆ¸æˆ‘éƒ½æ˜¯ä½ çš„é¿é£æ¸¯ï¼Œ18å²ä¹‹åï¼Œä½ è¦è´Ÿè´£å’Œæˆ‘ä¸€èµ·ä¿æŠ¤ä½ è€å¦ˆï¼Œä¸€ç›´åˆ°æˆ‘è€äº†ï¼Œä½ å°±è¦ä¿æŠ¤æˆ‘å’Œä½ è€å¦ˆäº†ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœä½ æ˜¯å¥³å­©ï¼Œæˆ‘ä¼šä¸€ç›´ä¸€ç›´æŠŠä½ å½“æˆæˆ‘çš„å°å…¬ä¸»ï¼Œæˆ‘ä¼šç»™ä½ ä¹°æœ€æ¼‚äº®çš„è¡£æœï¼Œåƒæœ€å¥½çš„ï¼Œç”¨æœ€å¥½çš„ã€‚è€ƒè¯•æˆç»©ç¥é©¬çš„ï¼Œè€çˆ¸éƒ½ä¸ä¼šè¦æ±‚ä½ çš„ï¼Œåªéœ€è¦ä½ ç»™æˆ‘å¹³å¹³å®‰å®‰çš„ã€‚è¿˜æœ‰18å²ä¹‹å‰ä¸è¦è°ˆæ‹çˆ±ï¼Œ18å²ä¹‹åè°ˆæ‹çˆ±äº†ï¼Œå¿…é¡»è¦æŠŠé‚£å®¶ä¼™ç»™æˆ‘å¸¦å›æ¥çœ‹çœ‹ï¼Œè€çˆ¸è¦æ˜¯ä¸åŒæ„çœ‹ä¸ä¸Šï¼Œä½ å°±èµ¶ç´§çš„è®©ä»–æ‹œæ‹œã€‚æˆ‘å¯¹ä½ çš„ä»–çš„è¦æ±‚å°±æ˜¯ï¼šèƒ½å¤Ÿä¿æŠ¤ä½ ï¼Œè¦å¯¹ä½ ç™¾åˆ†ä¹‹ä¸€ç™¾çš„å¥½ã€‚æˆ‘åœ¨æƒ³ï¼Œåœ¨ä½ å‡ºå«çš„é‚£å¤©ï¼Œæˆ‘ä¸€å®šä¼šå“­çš„ï¼Œå› ä¸ºæœ‰ä¸ªç”·äººæŠŠä½ ä»æˆ‘èº«è¾¹æŠ¢èµ°äº†ã€‚</p><h1 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;å¥½äº†ï¼Œå†™åˆ°è¿™é‡Œäº†ï¼Œè¿åª³å¦‡éƒ½æ²¡æœ‰çš„äººï¼Œåœ¨è¿™èƒ¡æ€ä¹±æƒ³ã€‚å”‰ï¼Œæ´—æ´—ç¡å§ã€‚</p><p>PSï¼š</p><ol><li>åª³å¦‡å·²ç»å‡ºç°äº†ï¼Œé©¬ä¸Šå°±è¦ä¸€èµ·æ­¥å…¥çˆ±æƒ…çš„åŸå¢“äº†ï¼</li><li>åŠªåŠ›é€ å¨ƒing</li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººæ„Ÿæ‚Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºmavençš„å‡ ä¸ªå¸¸ç”¨æ’ä»¶</title>
      <link href="/2013/11/18/hou-duan/maven-plugins/"/>
      <url>/2013/11/18/hou-duan/maven-plugins/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘æ•´ç†äº†è‡ªå·±å†™çš„ä¸€ä¸ªé¡¹ç›®,ä½¿ç”¨maven+svnç®¡ç†,ideaå¼€å‘,æ­å»ºäº†ä¸€ä¸ªmavençš„ç§æœ.åŸæ¥æ˜¯å‡Œä¹±ä¸å ª,æ‰€ä»¥è´¹äº†å¥½å¤§åŠ²æ‰æ•´ç†å¥½,è€Œä¸”å¹³æ—¶å…¬å¸é¡¹ç›®ä¸Šäº‹æƒ…å¤šçš„ä¸€ç±³â€¦</p></blockquote><p>ä¸‹é¢è¯´è¯´ä½¿ç”¨çš„å‡ ä¸ªæ’ä»¶(è‡³äºé‚£äº›dependencyå°±è®©å®ƒä»¬è§é¬¼å»å§)</p><p>ä¸è¯´åºŸè¯äº†,ä»£ç è´´ä¸Š</p><ol><li><p>cleanæ’ä»¶</p><pre><code> &lt;plugin&gt;     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;     &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;     &lt;version&gt;2.5&lt;/version&gt;     &lt;configuration&gt;         &lt;filesets&gt;             &lt;fileset&gt;                 &lt;directory&gt;F:/logs&lt;/directory&gt;             &lt;/fileset&gt;             &lt;fileset&gt;                 &lt;directory&gt;../message-test&lt;/directory&gt;                 &lt;includes&gt;                     &lt;include&gt;spy.log&lt;/include&gt;                 &lt;/includes&gt;             &lt;/fileset&gt;             &lt;fileset&gt;                 &lt;directory&gt;../message-test/target&lt;/directory&gt;             &lt;/fileset&gt;         &lt;/filesets&gt;     &lt;/configuration&gt; &lt;/plugin&gt;</code></pre><p> è¿™ä¸ªæ’ä»¶æ²¡å•¥å¥½è¯´çš„,è¦æ˜¯ä¸éœ€è¦åˆ é™¤åˆ«çš„åœ°æ–¹ä»£ç ,å°±ç”¨é»˜è®¤çš„,ä¸ç”¨ä»»ä½•é…ç½®</p></li><li><p>å•å…ƒæµ‹è¯•æ’ä»¶</p><pre><code> &lt;plugin&gt;     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;     &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;     &lt;version&gt;2.16&lt;/version&gt;     &lt;configuration&gt;         &lt;skip&gt;true&lt;/skip&gt;     &lt;/configuration&gt; &lt;/plugin&gt;</code></pre><p> å•å…ƒæµ‹è¯•æ²¡åšå¥½,ä¸€æµ‹å°±æŠ¥é”™,å¹²è„†ç»™skipäº†</p></li><li><p>resources</p><pre><code> &lt;plugin&gt;     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;     &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;     &lt;version&gt;2.6&lt;/version&gt;     &lt;executions&gt;         &lt;execution&gt;             &lt;id&gt;copy-resources&lt;/id&gt;             &lt;!-- here the phase you need --&gt;             &lt;phase&gt;validate&lt;/phase&gt;             &lt;goals&gt;                 &lt;goal&gt;copy-resources&lt;/goal&gt;             &lt;/goals&gt;             &lt;configuration&gt;                 &lt;outputDirectory&gt;$&#123;basedir&#125;/target/test-classes&lt;/outputDirectory&gt;                 &lt;resources&gt;                     &lt;resource&gt;                         &lt;directory&gt;$&#123;basedir&#125;/src/main/webapp/WEB-INF/config&lt;/directory&gt;                         &lt;filtering&gt;true&lt;/filtering&gt;                     &lt;/resource&gt;                 &lt;/resources&gt;             &lt;/configuration&gt;         &lt;/execution&gt;     &lt;/executions&gt; &lt;/plugin&gt;</code></pre><p> ç”¨æ¥å¤åˆ¶ä¸€äº›èµ„æºæ–‡ä»¶,é…ç½®éƒ½æ˜¯ç›´è¯‘çš„</p></li><li><p>war</p><pre><code> &lt;plugin&gt;     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;     &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;     &lt;version&gt;2.4&lt;/version&gt;     &lt;configuration&gt;         &lt;warName&gt;$&#123;message.war.name&#125;&lt;/warName&gt;         &lt;includeEmptyDirectories&gt;true&lt;/includeEmptyDirectories&gt;         &lt;webResources&gt;             &lt;resource&gt;                 &lt;directory&gt;../message-easyjs&lt;/directory&gt;                 &lt;targetPath&gt;js&lt;/targetPath&gt;                 &lt;excludes&gt;                     &lt;exclude&gt;**/.svn&lt;/exclude&gt;                     &lt;exclude&gt;**/*.iml&lt;/exclude&gt;                     &lt;exclude&gt;**/pom.xml&lt;/exclude&gt;                 &lt;/excludes&gt;             &lt;/resource&gt;         &lt;/webResources&gt;     &lt;/configuration&gt; &lt;/plugin&gt;</code></pre><p> æ‰“waråŒ…çš„æ’ä»¶</p></li><li><p>jetty</p><pre><code> &lt;plugin&gt;     &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;     &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;     &lt;version&gt;6.1.10&lt;/version&gt;     &lt;configuration&gt;         &lt;!-- é…ç½®æ‰«ææ—¶é—´ --&gt;         &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;         &lt;!-- é…ç½®é¡¹ç›®åœ¨å®¹å™¨ä¸­çš„æ ¹è·¯å¾„ --&gt;         &lt;contextPath&gt;$&#123;project.contextPath&#125;&lt;/contextPath&gt;         &lt;!-- é…ç½®jettyå®¹å™¨ä¸­çš„jndi --&gt;         &lt;jettyEnvXml&gt;src/main/resources/jetty.xml&lt;/jettyEnvXml&gt;         &lt;connectors&gt;             &lt;connector implementation=&quot;org.mortbay.jetty.nio.SelectChannelConnector&quot;&gt;                 &lt;!-- ç«¯å£ --&gt;                 &lt;port&gt;$&#123;project.port&#125;&lt;/port&gt;                 &lt;maxIdleTime&gt;60000&lt;/maxIdleTime&gt;             &lt;/connector&gt;         &lt;/connectors&gt;         &lt;!-- æŒ‰ç…§å®˜ç½‘ä¸Šè¯´çš„æ˜¯é…ç½®åœæ­¢å®¹å™¨çš„å¿«æ·é”®å’Œç«¯å£,è‡³ä»Šä¸çŸ¥æ€ä¹ˆåœ¨ideaä¸­å¦‚ä½•ä½¿ç”¨,æœ‰çŸ¥é“çš„éº»çƒ¦å‘ŠçŸ¥ä¸‹,3Q --&gt;         &lt;stopKey&gt;foo&lt;/stopKey&gt;         &lt;stopPort&gt;8888&lt;/stopPort&gt;     &lt;/configuration&gt;     &lt;executions&gt;         &lt;!-- é…ç½®åœ¨mavenå“ªä¸ªç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæ’ä»¶çš„å“ªä¸ªåŠ¨ä½œ --&gt;         &lt;execution&gt;             &lt;id&gt;jetty_run&lt;/id&gt;             &lt;!-- mavenç”Ÿå‘½å‘¨æœŸ --&gt;             &lt;phase&gt;compile&lt;/phase&gt;             &lt;!-- æ‰§è¡Œæ’ä»¶çš„å“ªä¸ªåŠ¨ä½œ --&gt;             &lt;goals&gt;&lt;goal&gt;run&lt;/goal&gt;&lt;/goals&gt;         &lt;/execution&gt;     &lt;/executions&gt;     &lt;dependencies&gt;         &lt;!-- è¿™ä¸ªæ’ä»¶ä¾èµ–çš„å‡ ä¸ªåŒ… --&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;             &lt;artifactId&gt;jetty-io&lt;/artifactId&gt;             &lt;version&gt;7.6.6.v20120903&lt;/version&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;             &lt;artifactId&gt;jetty-server&lt;/artifactId&gt;             &lt;version&gt;7.6.6.v20120903&lt;/version&gt;         &lt;/dependency&gt;     &lt;/dependencies&gt; &lt;/plugin&gt;</code></pre><p> jettyè¿™ä¸ªæ’ä»¶å½“æ—¶å¯æ˜¯æ•´çš„æˆ‘å¤´ç–¼,å„ç§æŠ¥é”™å„ç§ä¸Šç½‘æ‰¾èµ„æ–™,é™„ä¸Šjettyçš„é…ç½®æ–‡ä»¶:jetty.xml</p><pre><code> &lt;?xml version=&quot;1.0&quot;?&gt; &lt;!DOCTYPE Configure PUBLIC &quot;-//Mort Bay Consulting//DTD Configure//EN&quot; &quot;http://jetty.mortbay.org/configure.dtd&quot;&gt; &lt;Configure class=&quot;org.mortbay.jetty.webapp.WebAppContext&quot;&gt;     &lt;New id=&quot;mysql&quot; class=&quot;org.mortbay.jetty.plus.naming.Resource&quot;&gt;         &lt;Arg&gt;jdbc/core&lt;/Arg&gt;         &lt;Arg&gt;             &lt;New class=&quot;com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource&quot;&gt;                 &lt;Set name=&quot;Url&quot;&gt;jdbc:mysql://localhost:3306/message&lt;/Set&gt;                 &lt;Set name=&quot;User&quot;&gt;root&lt;/Set&gt;                 &lt;Set name=&quot;Password&quot;&gt;123456&lt;/Set&gt;             &lt;/New&gt;         &lt;/Arg&gt;     &lt;/New&gt; &lt;/Configure&gt;</code></pre></li><li><p>cargo(å¯ä»¥å¯åŠ¨tomcat,è¿œç¨‹éƒ¨ç½²,æœ¬åœ°éƒ¨ç½²,éƒ½æ”¯æŒçš„,è¿™é‡Œæˆ‘åªç”¨åˆ°æœ¬åœ°éƒ¨ç½²,è¿œç¨‹éƒ¨ç½²éœ€è¦é…ç½®tomcat-user.xmlå’Œtomcatçš„æ§åˆ¶å°)</p><pre><code> &lt;plugin&gt;     &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;     &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;     &lt;version&gt;1.4.3&lt;/version&gt;     &lt;configuration&gt;         &lt;container&gt;             &lt;!-- tomcatçš„ç‰ˆæœ¬,tomcat6ä½¿ç”¨tomcat6x --&gt;             &lt;containerId&gt;$&#123;cargo.tomcat.version&#125;&lt;/containerId&gt;             &lt;!-- tomcatåœ¨æœ¬åœ°çš„ç»å¯¹è·¯å¾„ --&gt;             &lt;home&gt;$&#123;tomcat.home&#125;&lt;/home&gt;             &lt;!-- æœ¬åœ°å®‰è£…å°±ç”¨installed,è¿œç¨‹ä½¿ç”¨remote --&gt;             &lt;type&gt;installed&lt;/type&gt;               &lt;!-- tomcatæ—¥å¿—æ–‡ä»¶è·¯å¾„ --&gt;             &lt;output&gt;$&#123;tomcat.home&#125;/logs/container.log&lt;/output&gt;             &lt;append&gt;false&lt;/append&gt;             &lt;log&gt;$&#123;tomcat.home&#125;/logs/cargo.log&lt;/log&gt;         &lt;/container&gt;         &lt;configuration&gt;             &lt;!-- æœ¬åœ°éƒ¨ç½²,å·²å­˜åœ¨ --&gt;             &lt;type&gt;existing&lt;/type&gt;             &lt;!-- å†é…ç½®ä¸€æ¬¡tomcatç»å¯¹è·¯å¾„ --&gt;             &lt;home&gt;$&#123;tomcat.home&#125;&lt;/home&gt;             &lt;properties&gt;                 &lt;!-- ç«¯å£ --&gt;                 &lt;cargo.servlet.port&gt;$&#123;project.port&#125;&lt;/cargo.servlet.port&gt;             &lt;/properties&gt;         &lt;/configuration&gt;         &lt;!-- è¿™é‡Œä¸€æ¬¡å¯ä»¥éƒ¨ç½²å¤šä¸ªé¡¹ç›® --&gt;         &lt;deployables&gt;             &lt;!-- æŒ‡å®šæˆ‘éƒ¨ç½²çš„é¡¹ç›®GAV --&gt;             &lt;deployable&gt;                 &lt;groupId&gt;com.message&lt;/groupId&gt;                 &lt;artifactId&gt;message-test&lt;/artifactId&gt;                 &lt;!-- waråŒ…å½¢å¼éƒ¨ç½² --&gt;                 &lt;type&gt;war&lt;/type&gt;                 &lt;properties&gt;                     &lt;!-- å®¹å™¨ä¸­çš„ä¸Šä¸‹æ–‡æ ¹ --&gt;                     &lt;context&gt;$&#123;project.contextPath&#125;&lt;/context&gt;                 &lt;/properties&gt;             &lt;/deployable&gt;         &lt;/deployables&gt;     &lt;/configuration&gt;     &lt;!-- åŒjetty --&gt;     &lt;executions&gt;         &lt;execution&gt;             &lt;id&gt;tomcat-run&lt;/id&gt;             &lt;phase&gt;package&lt;/phase&gt;             &lt;goals&gt;&lt;goal&gt;run&lt;/goal&gt;&lt;/goals&gt;         &lt;/execution&gt;     &lt;/executions&gt; &lt;/plugin&gt;</code></pre><ul><li>tomcatä½¿ç”¨cargoè¿™ä¸ªæ’ä»¶æœ‰ä¸ªç¼ºç‚¹,ä¸èƒ½debugäº†,è€Œä¸”ä¸æ˜¯çƒ­éƒ¨ç½²,ä¸çŸ¥é“cargoæœ‰æ²¡æœ‰çƒ­éƒ¨ç½²çš„åŠŸèƒ½,æš‚æ—¶æˆ‘è¿˜æ²¡æ‰¾åˆ°,å¾…ç ”ç©¶ </li><li>jettyé‚£ä¸ªæ˜¯å¯ä»¥çƒ­éƒ¨ç½²çš„,ä¸ç®¡æ”¹Javaç±»è¿˜æ˜¯jspæˆ–è€…css,jséƒ½å¯ä»¥(åŠ å‡æ–¹æ³•,æ”¹å‚æ•°ä¸è¡Œ)</li></ul></li><li><p>é™„ä¸Šmavençš„properties</p><pre><code> &lt;properties&gt;     &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;     &lt;junit.version&gt;4.10&lt;/junit.version&gt;     &lt;spring.version&gt;3.0.5.RELEASE&lt;/spring.version&gt;     &lt;jdk.version&gt;jdk15&lt;/jdk.version&gt;     &lt;tomcat.version&gt;6.0.32&lt;/tomcat.version&gt;     &lt;message.war.name&gt;message&lt;/message.war.name&gt;     &lt;project.port&gt;8099&lt;/project.port&gt;     &lt;project.contextPath&gt;/core&lt;/project.contextPath&gt;     &lt;tomcat.home&gt;F:\study\apache-tomcat-6.0.32&lt;/tomcat.home&gt;     &lt;cargo.tomcat.version&gt;tomcat6x&lt;/cargo.tomcat.version&gt; &lt;/properties&gt;</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºp6spyçš„ä»‹ç»</title>
      <link href="/2013/07/11/hou-duan/p6spy/"/>
      <url>/2013/07/11/hou-duan/p6spy/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å…¬å¸é¡¹ç›®é‡Œéœ€è¦ä½¿ç”¨åˆ°å°†æ‰€æœ‰æ‰§è¡Œçš„sqlæ‰“å‡ºæ—¥å¿—ï¼Œæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸‹ã€‚å…¬å¸ä¸€å¤§ç¥çº§äººç‰©ç»™è§£å†³äº†ï¼ŒåˆšåˆšèŠ±äº†ç‚¹æ—¶é—´ç»™ç ”ç©¶äº†ä¸€ä¸‹ã€‚</p><p>ä»–ç”¨çš„å°±æ˜¯p6spyï¼Œå…¶å®ä¹Ÿæ²¡åšå¤šå°‘å·¥ä½œã€‚ä¸»è¦çš„å·¥ä½œp6spyéƒ½å·²ç»åšè¿‡äº†ã€‚</p><p>p6spyæˆ‘çš„ç†è§£å°±æ˜¯ï¼šp6spyå°†åº”ç”¨çš„æ•°æ®æºç»™åŠ«æŒäº†ï¼Œåº”ç”¨æ“ä½œæ•°æ®åº“å…¶å®åœ¨è°ƒç”¨p6spyçš„æ•°æ®æºï¼Œp6spyåŠ«æŒåˆ°éœ€è¦æ‰§è¡Œçš„sqlæˆ–è€…hqlä¹‹ç±»çš„è¯­å¥ä¹‹åï¼Œä»–è‡ªå·±å»è°ƒç”¨ä¸€ä¸ªrealDatasourceï¼Œå†å»æ“ä½œæ•°æ®åº“ï¼Œåªè¦åŠ«æŒåˆ°é‚£äº›sqlä¹‹åï¼Œèƒ½å¹²çš„äº‹æƒ…å°±å¾ˆå¤šäº†ã€‚</p><p>p6spy å¯ä»¥è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶ä¸­ã€æ§åˆ¶å°ã€æˆ–è€…ä¼ é€’ç»™ Log4jï¼Œè€Œä¸”è¿˜èƒ½é…æ­ SQL Profiler æˆ– IronTrackSQL å›¾å½¢åŒ–ç›‘æ§ SQL è¯­å¥ï¼Œç›‘æµ‹åˆ°å“ªäº›è¯­å¥çš„æ‰§è¡Œæ˜¯è€—æ—¶çš„ï¼Œé€ä¸ªä¼˜åŒ–ã€‚å…³äºä¸ SQL Profiler æˆ– IronTrackSQL çš„é…åˆä½¿ç”¨å¯å‚æ•°æ–‡ä»¶çš„é“¾æ¥ã€‚ </p><p>p6spyåœ¨sourceforgeä¸Šä¸‹è½½ï¼š[p6spy][]<br>[p6spy]: <a href="http://sourceforge.net/projects/p6spy/?source=dlp">http://sourceforge.net/projects/p6spy/?source=dlp</a></p><p>p6spyçš„é…ç½®ï¼š</p><ol><li><p>p6spy.jaræ”¾å…¥åº”ç”¨çš„classpathä¸‹</p></li><li><p>ä¿®æ”¹è¿æ¥æ± æˆ–è€…è¿æ¥é…ç½®çš„jdbcçš„é©±åŠ¨ä¸ºp6spyæ‰€æä¾›çš„é©±åŠ¨ï¼Œ<code>com.p6spy.engine.spy.P6SpyDriver</code></p><p> åœ¨å•ç‹¬çš„Hibernateçš„åº”ç”¨ä¸­ï¼Œæ•°æ®åº“é©±åŠ¨é…ç½®åœ¨hibernate.cfg.xmlé‡Œé¢,æ‰€ä»¥æˆ‘éœ€è¦é…ç½®æ–‡ä»¶ä¸­çš„connection.driver_classå±æ€§ä»oracle.jdbc.driver.OracleDriveræ”¹ä¸ºcom.p6spy.engine.spy.P6SpyDriverå…¶ä»–çš„ç”¨æˆ·åå¯†ç ç­‰ç­‰é…ç½®ä¿¡æ¯å…¨éƒ¨ä¸ç”¨ä¿®æ”¹.åœ¨webç¨‹åºä¸­ï¼Œé…ç½®çš„è¿æ¥æ± éƒ¨åˆ†ï¼Œä¹Ÿåªéœ€è¦ä¿®æ”¹jdbc-driverçš„é…ç½®å³å¯ã€‚</p><p> Hibernate.cfg.xml:</p><pre><code> &lt;session-factory&gt;     &lt;!-- åœ¨è¿™é‡Œæ”¹æˆp6spyæä¾›çš„æ•°æ®æº --&gt;     &lt;property name=&quot;connection.driver_class&quot;&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/property&gt;            &lt;property name=&quot;connection.url&quot;&gt;jdbc:oracle:thin:@localhost:1521:orcl&lt;/property&gt;     &lt;property name=&quot;connection.username&quot;&gt;scott&lt;/property&gt;     &lt;property name=&quot;connection.password&quot;&gt;tiger&lt;/property&gt;     &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;     &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.Oracle9Dialect&lt;/property&gt;     &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;     &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;     &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;     &lt;property name=&quot;hbm2ddl.auto&quot;&gt;false&lt;/property&gt;     &lt;property name=&quot;hibernate.jdbc.batch_size&quot;&gt;0&lt;/property&gt; &lt;/session-factory&gt;</code></pre></li><li><p>ä¿®æ”¹ <code>spy.properties</code> å¹¶å°†å…¶æ”¾åˆ°classpathä¸‹ï¼š</p><pre><code> ################################################################# # MODULES                                                       # #                                                               # # Modules provide the P6Spy functionality.  If a module, such   # # as module_log is commented out, that functionality will not   # # be available.  If it is not commented out (if it is active),  # # the functionality will be active.                             # #                                                               # # Values set in Modules cannot be reloaded using the            # # reloadproperties variable.  Once they are loaded, they remain # # in memory until the application is restarted.                 # #                                                               # ################################################################# #ç¬¬ä¸€ï¼šmodule.logçš„å±æ€§å¿…é¡»é…ç½®ï¼Œå¦‚æœä¸é…ç½®ï¼ŒP6SPYå°†ä¸èµ·ä»»ä½•ä½œç”¨ï¼Œå…¸å‹é…ç½®ï¼š module.log=com.p6spy.engine.logging.P6LogFactory #module.outage=com.p6spy.engine.outage.P6OutageFactory   ################################################################# # REALDRIVER(s)                                                 # #                                                               # # In your application server configuration file you replace the # # &quot;real driver&quot; name with com.p6spy.engine.P6SpyDriver. This is # # where you put the name of your real driver P6Spy can find and # # register your real driver to do the database work.            # #                                                               # # If your application uses several drivers specify them in      # # realdriver2, realdriver3.  See the documentation for more     # # details.                                                      # #                                                               # # Values set in REALDRIVER(s) cannot be reloaded using the      # # reloadproperties variable.  Once they are loaded, they remain # # in memory until the application is restarted.                 # #                                                               # #################################################################   #ç¬¬äºŒï¼šæ•°æ®åº“é©±åŠ¨é…ç½®ï¼Œä½ æ‡‚çš„ï¼Œä¸å¤šè¯´äº† # oracle driver # realdriver=oracle.jdbc.driver.OracleDriver   # mysql Connector/J driver # realdriver=com.mysql.jdbc.Driver   # informix driver # realdriver=com.informix.jdbc.IfxDriver   # ibm db2 driver # realdriver=COM.ibm.db2.jdbc.net.DB2Driver   # the mysql open source driver realdriver=org.gjt.mm.mysql.Driver   #specifies another driver to use realdriver2= #specifies a third driver to use realdriver3=   #ç¬¬ä¸‰ï¼šappenderé…ç½®ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸‰ç§ #specifies the appender to use for logging #appender=com.p6spy.engine.logging.appender.Log4jLogger #æ§åˆ¶å° #appender=com.p6spy.engine.logging.appender.StdoutLogger appender=com.p6spy.engine.logging.appender.FileLogger   # name of logfile to use, note Windows users should make sure to use forward slashes in their pathname (e:/test/spy.log) (used for file logger only) #æ—¥å¿—æ–‡ä»¶å­˜æ”¾è·¯å¾„åŠæ–‡ä»¶å logfile     = spy.log   # append to  the p6spy log file.  if this is set to false the # log file is truncated every time.  (file logger only) append=true   #The following are for log4j logging only log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout log4j.appender.STDOUT.layout.ConversionPattern=p6spy - %m%n   log4j.logger.p6spy=INFO,STDOUT</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> p6spy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨history.back(-1)çš„é—®é¢˜</title>
      <link href="/2013/06/05/qian-duan/history/"/>
      <url>/2013/06/05/qian-duan/history/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©åœ¨è°ƒä¸€ä¸ªé¡¹ç›®ç°åœºçš„é—®é¢˜ï¼Œè§‰å¾—æœ‰ç‚¹è®°å½•ä¸‹æ¥çš„æ„ä¹‰ã€‚</p></blockquote><p>é¦–å…ˆçœ‹çœ‹é‡ç°é—®é¢˜çš„æ­¥éª¤ï¼š</p><ol><li><p>é€‰æ‹©ä¸€ä¸ªäº‹ç‰©åˆ†ç±»è¿›è¡ŒæŸ¥è¯¢ï¼Œæœåˆ°ä¸€æ¡è®°å½•ï¼Œç„¶åè¿›å…¥ç”³è¯·é¡µé¢ã€‚</p><p> <img src="/imgs/history/1.png"></p></li><li><p>è¿›å…¥ç”³è¯·é¡µé¢ä¹‹åç‚¹è¿”å›ï¼Œé¡µé¢ç«‹å³æ²¡æœ‰äº†ï¼ˆåªåœ¨IEä¸‹ä¼šå‡ºç°é—®é¢˜ï¼‰è€Œä¸”é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ˜¯webpage has expired!é¡µé¢å·²ç»è¿‡æœŸã€‚</p><p> ps:è¿”å›æŒ‰é’®è§¦å‘çš„äº‹ä»¶æ˜¯ï¼š<code>window.history.back(-1);</code></p><p> <img src="/imgs/history/2.jpg"></p></li><li><p>è§£å†³åŠæ³•ï¼š</p><p> é¡µé¢è¿‡æœŸï¼Œæˆ‘åœ¨æƒ³äº†æ˜¯ä¸æ˜¯é¡µé¢ä¸Šçš„metaè®¾ç½®no-cacheäº†ï¼Œå³ï¼š</p><pre><code> &lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;/&gt;</code></pre><p> ç„¶åæˆ‘ç«‹å³æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œå‘ç°æœ¨æœ‰è¿™ä¸ªä¸œè¥¿ã€‚æˆ‘å°±çº³é—·äº†ï¼Œé‚£æ˜¯æ€ä¹ˆäº†å‘¢ã€‚</p><p> åæ¥ä¸€æƒ³æ˜¯ä¸æ˜¯æˆ‘æŸ¥è¯¢çš„æ—¶å€™æäº¤äº†ä¸€ä¸ªè¡¨å•ï¼Œè¿™æ—¶å€™å·²ç»è·³åˆ°æˆ‘æŸ¥è¯¢çš„ç›®æ ‡é¡µé¢(è™½ç„¶è¿˜æ˜¯åŒä¸€ä¸ªjspé¡µé¢)ï¼Œè¿™æ—¶å€™ç”¨history.back(-1)å·²ç»æ‰¾ä¸åˆ°å‚æ•°äº†ï¼Œæ‰€ä»¥ä¼šæŠ¥é¡µé¢æ‰¾ä¸åˆ°çš„é—®é¢˜ã€‚</p><p> ç„¶åæƒ³åˆ°formè¡¨å•é‡Œé¢çš„method&#x3D;â€postâ€å’Œmethod&#x3D;â€getâ€çš„åŒºåˆ«ï¼ˆå…·ä½“çš„ç½‘ä¸Šæœç´¢å»å§ï¼‰ã€‚</p><p> so, æˆ‘æŠŠæœç´¢çš„formä¸­methodæ”¹æˆgetã€‚</p></li></ol><p>ç„¶åå°±OKäº†ï¼Œé—®é¢˜è§£å†³äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frontend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººç®€å†</title>
      <link href="/1900/01/01/ge-ren-jian-li/"/>
      <url>/1900/01/01/ge-ren-jian-li/</url>
      
        <content type="html"><![CDATA[<style>    div.img-item {        display: inherit;    }        br {        display: none;    }</style><h1 id="1-è”ç³»æ–¹å¼"><a href="#1-è”ç³»æ–¹å¼" class="headerlink" title="1. è”ç³»æ–¹å¼"></a>1. è”ç³»æ–¹å¼</h1><ul><li>æ‰‹æœºï¼š180****0006</li><li>Emailï¼š<a href="mailto:&#x73;&#x75;&#110;&#x68;&#97;&#111;&#48;&#53;&#53;&#48;&#x40;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;">&#x73;&#x75;&#110;&#x68;&#97;&#111;&#48;&#53;&#53;&#48;&#x40;&#49;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;</a> &#x2F; <a href="mailto:&#x73;&#117;&#110;&#104;&#x61;&#111;&#46;&#106;&#97;&#x76;&#97;&#64;&#103;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;">&#x73;&#117;&#110;&#104;&#x61;&#111;&#46;&#106;&#97;&#x76;&#97;&#64;&#103;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;</a></li><li>å¾®ä¿¡ï¼šåŒæ‰‹æœºå·</li><li>GitHubï¼š<a href="https://github.com/sunhao-java">https://github.com/sunhao-java</a></li><li>æŠ€æœ¯åšå®¢ï¼š<a href="https://www.crazy-coder.cn/">https://www.crazy-coder.cn</a> ï¼ˆGitHub Pages éƒ¨ç½²ï¼Œå›½å†…è®¿é—®è¾ƒæ…¢ï¼‰</li></ul><h1 id="2-ä¸ªäººä¿¡æ¯"><a href="#2-ä¸ªäººä¿¡æ¯" class="headerlink" title="2. ä¸ªäººä¿¡æ¯"></a>2. ä¸ªäººä¿¡æ¯</h1><ul><li>å§“å&#x2F;æ€§åˆ«&#x2F;ç”Ÿæ—¥ï¼šå­™æ˜Š &#x2F; ç”· &#x2F; 1990-03-18 </li><li>å·¥ä½œå¹´é™ï¼š14 å¹´+</li><li>å­¦å†ï¼šæœ¬ç§‘ï¼ˆå®‰å¾½ç†å·¥å¤§å­¦ ä¿¡æ¯ä¸è®¡ç®—ç§‘å­¦ï¼‰</li><li>è£èª‰å¥–åŠ±ï¼š2011 å¹´å®ä¹ æœŸé—´è·å¾—â€œä¼˜ç§€å®ä¹ ç”Ÿâ€</li><li>æ±‚èŒæ„å‘ï¼šJava èµ„æ·±å¼€å‘å·¥ç¨‹å¸ˆ &#x2F; æ¶æ„å¸ˆï¼ˆæ¥å—è¿œç¨‹ &#x2F; Hybridï¼‰</li><li>å·¥ä½œåœ°ç‚¹ï¼šå—äº¬ä¼˜å…ˆï¼Œæ”¯æŒè¿œç¨‹æˆ–å¼‚åœ° Hybrid</li></ul><h1 id="3-å·¥ä½œç»å†"><a href="#3-å·¥ä½œç»å†" class="headerlink" title="3. å·¥ä½œç»å†"></a>3. å·¥ä½œç»å†</h1><h2 id="3-1-å—äº¬é­”æ•°å›¢ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆTeamhelperï¼‰"><a href="#3-1-å—äº¬é­”æ•°å›¢ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆTeamhelperï¼‰" class="headerlink" title="3.1 å—äº¬é­”æ•°å›¢ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆTeamhelperï¼‰"></a>3.1 å—äº¬é­”æ•°å›¢ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆTeamhelperï¼‰</h2><h3 id="3-1-1-èŒä½ä¸æ—¶é—´"><a href="#3-1-1-èŒä½ä¸æ—¶é—´" class="headerlink" title="3.1.1 èŒä½ä¸æ—¶é—´"></a>3.1.1 èŒä½ä¸æ—¶é—´</h3><p>æ¶æ„å¸ˆ Â· 2025-06 ~ è‡³ä»Š</p><h3 id="3-1-2-å·¥ä½œå†…å®¹"><a href="#3-1-2-å·¥ä½œå†…å®¹" class="headerlink" title="3.1.2 å·¥ä½œå†…å®¹"></a>3.1.2 å·¥ä½œå†…å®¹</h3><ol><li>ä½œä¸ºæŠ€æœ¯è´Ÿè´£äººä¸æ¶æ„å¸ˆï¼Œç»Ÿç­¹ç ”å‘å›¢é˜Ÿçš„æŠ€æœ¯è§„åˆ’ä¸æ¶æ„æŠŠæ§ï¼Œè´Ÿè´£æŠ€æœ¯æ–¹æ¡ˆçš„è®¾è®¡ä¸æ‰§è¡Œã€‚</li><li>æ¢³ç†å­˜é‡äº§å“ä¸æœåŠ¡çš„æ¶æ„ç°çŠ¶ï¼Œæ²‰æ·€æŠ€æœ¯&#x2F;ä¸šåŠ¡&#x2F;éƒ¨ç½²æ¶æ„å›¾åŠç»„ä»¶å…³ç³»å›¾ï¼Œå¹¶åˆ¶å®šé˜¶æ®µæ€§æ¼”è¿›è·¯çº¿ã€‚</li><li>ç‰µå¤´å…³é”®æŠ€æœ¯æ–¹æ¡ˆï¼šç»Ÿä¸€äº‘å­˜å‚¨å¯¹æ¥ï¼ˆå¤šå‚å•†é€‚é…ã€é‰´æƒä¸ç”Ÿå‘½å‘¨æœŸç­–ç•¥ï¼‰ã€è¿œç¨‹ä¼šè®®å®æ—¶ç¿»è¯‘é“¾è·¯ã€‚</li><li>å»ºç«‹å¹¶æ¨åŠ¨å·¥ç¨‹è§„èŒƒä¸æµç¨‹ï¼šåˆ†æ”¯æ¨¡å‹ã€ä»£ç è§„èŒƒä¸ Code Reviewï¼›æ­å»º DevOps&#x2F;CI&#x2F;CD æµæ°´çº¿ï¼Œå®Œå–„å‘å¸ƒä¸å›æ»šæµç¨‹ã€‚</li></ol><h2 id="3-2-å—äº¬è”šè“æ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸"><a href="#3-2-å—äº¬è”šè“æ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸" class="headerlink" title="3.2 å—äº¬è”šè“æ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸"></a>3.2 å—äº¬è”šè“æ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸</h2><h3 id="3-2-1-èŒä½ä¸æ—¶é—´"><a href="#3-2-1-èŒä½ä¸æ—¶é—´" class="headerlink" title="3.2.1 èŒä½ä¸æ—¶é—´"></a>3.2.1 èŒä½ä¸æ—¶é—´</h3><p>æ¶æ„å¸ˆï¼ˆæŠ€æœ¯è´Ÿè´£äººï¼‰ Â· 2024-04 ~ 2025-06ï¼ˆåœ¨å²—ï¼š1å¹´2ä¸ªæœˆï¼‰</p><h3 id="3-2-2-å·¥ä½œå†…å®¹"><a href="#3-2-2-å·¥ä½œå†…å®¹" class="headerlink" title="3.2.2 å·¥ä½œå†…å®¹"></a>3.2.2 å·¥ä½œå†…å®¹</h3><ol><li>æ•°å­—åŒ–å›¢é˜ŸæŠ€æœ¯è´Ÿè´£äººï¼Œç®¡ç†å…¬å¸æ‰€æœ‰ODäººå‘˜ï¼ˆ10+äººï¼‰</li><li>è´Ÿè´£æ•°å­—åŒ–å›¢é˜ŸæŠ€æœ¯æ¶æ„</li><li>è´Ÿè´£æ•°å­—åŒ–å›¢é˜ŸæŠ€æœ¯æ°›å›´å»ºè®¾</li><li>ä¸»å¯¼å…¬å¸å‡ºæµ·é¡¹ç›®ä¸­å…³äºéšç§åˆè§„äº‹å®œï¼ˆéšç§æ•°æ®åˆè§„ã€è·¨å¢ƒä¼ è¾“ã€å„ç§åè®®ï¼‰</li><li>ä½œä¸ºæˆ‘å¸é¡¹ç›®è´Ÿè´£äººã€æ¥å£äººä¸å»ºè¡Œç”Ÿæ´»ã€å»ºè¡Œå–„èè¿›è¡Œå¯¹æ¥</li></ol><h2 id="3-3-å—äº¬å¶å­ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆOPPO-å…¨èµ„å­å…¬å¸ï¼‰"><a href="#3-3-å—äº¬å¶å­ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆOPPO-å…¨èµ„å­å…¬å¸ï¼‰" class="headerlink" title="3.3 å—äº¬å¶å­ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆOPPO å…¨èµ„å­å…¬å¸ï¼‰"></a>3.3 å—äº¬å¶å­ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆOPPO å…¨èµ„å­å…¬å¸ï¼‰</h2><h3 id="3-3-1-èŒä½ä¸æ—¶é—´"><a href="#3-3-1-èŒä½ä¸æ—¶é—´" class="headerlink" title="3.3.1 èŒä½ä¸æ—¶é—´"></a>3.3.1 èŒä½ä¸æ—¶é—´</h3><p>æ¶æ„å¸ˆ Â· 2018-08 ~ 2024-04ï¼ˆåœ¨å²—ï¼š5å¹´8ä¸ªæœˆï¼‰</p><h3 id="3-3-2-å›¢é˜Ÿä¸èŒè´£"><a href="#3-3-2-å›¢é˜Ÿä¸èŒè´£" class="headerlink" title="3.3.2 å›¢é˜Ÿä¸èŒè´£"></a>3.3.2 å›¢é˜Ÿä¸èŒè´£</h3><ul><li>è´Ÿè´£ OPPO é”€å”®é¢†åŸŸçš„æ•°å­—åŒ–å¹³å°å»ºè®¾ï¼Œå¸¦é¢†å›¢é˜Ÿå®Œæˆå…¬å¸ PaaS å±‚èƒ½åŠ›å»ºè®¾ï¼ˆæ§åˆ¶å°ã€æµç¨‹ä¸­å¿ƒã€ç½‘å…³ä¸­å¿ƒã€ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒã€é›†æˆä¸­å¿ƒï¼‰ã€‚</li><li>ååŒè¿ç»´æ­å»º DevOps æµç¨‹ï¼Œæ²‰æ·€åº•å±‚å·¥å…·ç±»ç»„ä»¶å¹¶åœ¨å…¬å¸å†…éƒ¨å¹¿æ³›å¤ç”¨ã€‚</li><li>å‚ä¸æŠ€æœ¯é€‰å‹ä¸æ ‡å‡†åˆ¶å®šï¼Œæä¾›ç–‘éš¾é—®é¢˜æ”¯æ´ä¸æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡ã€‚</li><li>å‚ä¸å¤§æ•°æ®ç›¸å…³èƒ½åŠ›çš„å¼•å…¥ä¸è½åœ°ï¼ˆåˆæ­¥æ¥å…¥ä¸åº”ç”¨ï¼‰ã€‚</li><li>æ·±åº¦å‚ä¸ OPPO æ•°å­—åŒ–è½¬å‹ã€Œå‡¤å‡°ï¼ˆPhoenixï¼‰è®¡åˆ’ã€ã€‚</li></ul><h3 id="3-3-3-ä»£è¡¨é¡¹ç›®"><a href="#3-3-3-ä»£è¡¨é¡¹ç›®" class="headerlink" title="3.3.3 ä»£è¡¨é¡¹ç›®"></a>3.3.3 ä»£è¡¨é¡¹ç›®</h3><ul><li><p>é¡¹ç›®ä¸€ï¼šAPI é›†å¸‚ï¼ˆAçº§+ï¼‰</p><ul><li>è§’è‰²ï¼šç³»ç»Ÿæ¶æ„å¸ˆ</li><li>èƒŒæ™¯ï¼šæ•´åˆ OPPO å†…éƒ¨ä¸Šåƒç³»ç»Ÿï¼Œé€šè¿‡ API é›†å¸‚ç»Ÿä¸€ç®¡ç†è°ƒç”¨å…³ç³»ã€è´¨é‡ä¸æ²»ç†èƒ½åŠ›ã€‚</li><li>æˆæœï¼š<ul><li>å…¥é©» 1400+ ç³»ç»Ÿã€è¿‘ä¸‡æ¥å£ï¼›å…¨çƒåŒ–éƒ¨ç½²ï¼ˆä¸­å›½&#x2F;å·´é»&#x2F;æ–°åŠ å¡&#x2F;å°åº¦ï¼‰ã€‚</li><li>ä¸­å›½åŒºå®ç°å¼‚åœ°åŒæœºæˆ¿éƒ¨ç½²ï¼Œåˆ†é’Ÿçº§å®¹ç¾åˆ‡æ¢ï¼›æ”¯æŒè“ç»¿å‘å¸ƒã€‚</li><li>å…¨å¹´å¯ç”¨æ€§ 99.99%ï¼Œæ— é‡å¤§äº‹æ•…ï¼›å•æ—¥æµé‡å³°å€¼ 2 äº¿+ æ¬¡ï¼ŒTPS å³°å€¼ 5000+ã€‚</li><li>ä¸»å¯¼ç³»ç»Ÿé™æœ¬è®¡åˆ’ï¼Œå¹´åº¦èŠ‚çœæˆæœ¬ 80 ä¸‡+ã€‚</li></ul></li><li>æŠ€æœ¯æ ˆï¼šJavaã€Spring å…¨å®¶æ¡¶ã€Luaã€APISIXã€Dockerã€K8Sã€‚</li></ul></li><li><p>é¡¹ç›®äºŒï¼šä»»åŠ¡è°ƒåº¦ä¸­å¿ƒï¼ˆAçº§ï¼‰</p><ul><li>è§’è‰²ï¼šäº§å“ &#x2F; æ¶æ„å¸ˆ &#x2F; ä¸»ç¨‹</li><li>èƒŒæ™¯ï¼šæ„å»ºç»Ÿä¸€è°ƒåº¦å¹³å°ï¼Œé›†ä¸­ç®¡æ§å…¬å¸å†…éƒ¨ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ï¼ŒåŸºäº Quartz å®Œå…¨è‡ªç ”ã€‚</li><li>æˆæœï¼š<ul><li>è¦†ç›– 800+ ç³»ç»Ÿã€6000+ ä»»åŠ¡ï¼›ç´¯è®¡è°ƒåº¦ 3.5 äº¿+ æ¬¡ã€‚</li><li>ä»»åŠ¡ç±»å‹ï¼šHTTP ä»»åŠ¡ã€è‡ªç ”åè®®ä»»åŠ¡ã€Dubbo ä»»åŠ¡ã€‚</li><li>æ”¯æŒä»»åŠ¡åˆ†ç‰‡ã€å¹¿æ’­ï¼›æ”¯æŒå¤š Quartz é›†ç¾¤ä»¥é™ä½ä»»åŠ¡é—´å½±å“ã€‚</li></ul></li></ul></li></ul><h3 id="3-3-4-ç¦»èŒåŸå› "><a href="#3-3-4-ç¦»èŒåŸå› " class="headerlink" title="3.3.4 ç¦»èŒåŸå› "></a>3.3.4 ç¦»èŒåŸå› </h3><p>å…¬å¸ç»„ç»‡è°ƒæ•´ï¼ŒBase å˜æ›´ä¸ºæ·±åœ³</p><h2 id="3-4-ä¸­å…´è½¯åˆ›ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼ˆæµ©é²¸äº‘ï¼‰"><a href="#3-4-ä¸­å…´è½¯åˆ›ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼ˆæµ©é²¸äº‘ï¼‰" class="headerlink" title="3.4 ä¸­å…´è½¯åˆ›ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼ˆæµ©é²¸äº‘ï¼‰"></a>3.4 ä¸­å…´è½¯åˆ›ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼ˆæµ©é²¸äº‘ï¼‰</h2><h3 id="3-4-1-èŒä½ä¸æ—¶é—´"><a href="#3-4-1-èŒä½ä¸æ—¶é—´" class="headerlink" title="3.4.1 èŒä½ä¸æ—¶é—´"></a>3.4.1 èŒä½ä¸æ—¶é—´</h3><p>æ¶æ„å¸ˆ Â· 2015-04 ~ 2018-08ï¼ˆåœ¨å²—ï¼š3å¹´4ä¸ªæœˆï¼‰</p><h3 id="3-4-2-èŒè´£"><a href="#3-4-2-èŒè´£" class="headerlink" title="3.4.2 èŒè´£"></a>3.4.2 èŒè´£</h3><ul><li>æ”¿ä¼äº‹ä¸šéƒ¨æ™ºæ…§åŸå¸‚æ–¹å‘çš„åº•å±‚æ¶æ„å¼€å‘ä¸å¹³å°åŒ–èƒ½åŠ›å»ºè®¾ã€‚</li><li>è´Ÿè´£æ ¸å¿ƒæ¨¡å—çš„è®¾è®¡ä¸å®ç°ï¼Œä¿éšœç³»ç»Ÿå¯æ‰©å±•ä¸ç¨³å®šæ€§ã€‚</li></ul><h3 id="3-4-3-ç¦»èŒåŸå› "><a href="#3-4-3-ç¦»èŒåŸå› " class="headerlink" title="3.4.3 ç¦»èŒåŸå› "></a>3.4.3 ç¦»èŒåŸå› </h3><p>ä¸ºäº†æ›´å¥½çš„èŒä¸šå‘å±•</p><h2 id="3-5-è”åˆ›è½¦ç›Ÿæ±½è½¦æœåŠ¡æœ‰é™å…¬å¸ï¼ˆAA-Chinaï¼‰"><a href="#3-5-è”åˆ›è½¦ç›Ÿæ±½è½¦æœåŠ¡æœ‰é™å…¬å¸ï¼ˆAA-Chinaï¼‰" class="headerlink" title="3.5 è”åˆ›è½¦ç›Ÿæ±½è½¦æœåŠ¡æœ‰é™å…¬å¸ï¼ˆAA Chinaï¼‰"></a>3.5 è”åˆ›è½¦ç›Ÿæ±½è½¦æœåŠ¡æœ‰é™å…¬å¸ï¼ˆAA Chinaï¼‰</h2><h3 id="3-5-1-èŒä½ä¸æ—¶é—´"><a href="#3-5-1-èŒä½ä¸æ—¶é—´" class="headerlink" title="3.5.1 èŒä½ä¸æ—¶é—´"></a>3.5.1 èŒä½ä¸æ—¶é—´</h3><p>é«˜çº§ Java å¼€å‘å·¥ç¨‹å¸ˆ Â· 2014-07 ~ 2015-04ï¼ˆåœ¨å²—ï¼š0å¹´9ä¸ªæœˆï¼‰</p><h3 id="3-5-2-èŒè´£"><a href="#3-5-2-èŒè´£" class="headerlink" title="3.5.2 èŒè´£"></a>3.5.2 èŒè´£</h3><ul><li>å‚ä¸æ…§é©¾å¹³å°ç»“ç®—ç³»ç»Ÿçš„è®¾è®¡ä¸å¼€å‘ï¼Œæ‰¿æ‹…äº§å“æŠ€æœ¯æ”¯æ’‘å·¥ä½œã€‚</li><li>ä¸å›¢é˜Ÿåä½œå®Œæˆç³»ç»Ÿæ¶æ„ä¸æ–°æŠ€æœ¯è°ƒç ”ä¸è½åœ°ã€‚</li></ul><h3 id="3-5-3-ç¦»èŒåŸå› "><a href="#3-5-3-ç¦»èŒåŸå› " class="headerlink" title="3.5.3 ç¦»èŒåŸå› "></a>3.5.3 ç¦»èŒåŸå› </h3><p>å…¬å¸æ¬ è–ªï¼Œé¢†å¯¼é¼“åŠ±ç¦»èŒ</p><h2 id="3-6-æ±Ÿè‹é‡‘æ™ºæ•™è‚²ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸"><a href="#3-6-æ±Ÿè‹é‡‘æ™ºæ•™è‚²ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸" class="headerlink" title="3.6 æ±Ÿè‹é‡‘æ™ºæ•™è‚²ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸"></a>3.6 æ±Ÿè‹é‡‘æ™ºæ•™è‚²ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸</h2><h3 id="3-6-1-èŒä½ä¸æ—¶é—´"><a href="#3-6-1-èŒä½ä¸æ—¶é—´" class="headerlink" title="3.6.1 èŒä½ä¸æ—¶é—´"></a>3.6.1 èŒä½ä¸æ—¶é—´</h3><p>é«˜çº§ Java å¼€å‘å·¥ç¨‹å¸ˆ Â· 2011-07 ~ 2014-07ï¼ˆå« 1 å¹´å®ä¹ ï¼Œåœ¨å²—ï¼š3å¹´0ä¸ªæœˆï¼‰</p><h3 id="3-6-2-èŒè´£"><a href="#3-6-2-èŒè´£" class="headerlink" title="3.6.2 èŒè´£"></a>3.6.2 èŒè´£</h3><ul><li>å‚ä¸ç»Ÿä¸€é€šä¿¡å¹³å°ä¸å·¥ä½œæµç›¸å…³é¡¹ç›®çš„ç ”å‘ï¼ŒæœåŠ¡å…¨å›½æœ¬ä¸“ç§‘å­¦æ ¡ã€‚</li><li>ååŠ©å®ç°è‡ªå®šä¹‰è¡¨å•ä¸å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰å†…å®¹æ¨¡å‹ç­‰æ¨¡å—ã€‚</li><li>2011.07 ~ 2012.07 å®ä¹ å¹¶è·å¾—â€œä¼˜ç§€å®ä¹ ç”Ÿâ€ã€‚</li></ul><h3 id="3-6-3-ç¦»èŒåŸå› "><a href="#3-6-3-ç¦»èŒåŸå› " class="headerlink" title="3.6.3 ç¦»èŒåŸå› "></a>3.6.3 ç¦»èŒåŸå› </h3><p>å¯»æ±‚æ–°çš„å‘å±•ã€çªç ´è‡ªæˆ‘</p><h1 id="4-å¼€æºé¡¹ç›®"><a href="#4-å¼€æºé¡¹ç›®" class="headerlink" title="4. å¼€æºé¡¹ç›®"></a>4. å¼€æºé¡¹ç›®</h1><ul><li><p><a href="https://github.com/lodsve/lodsve-boot">lodsve-boot</a> ï¼šLodsve develop kits base on Spring-Boot and some opensource components!</p>  <div class="github-widget" data-repo="lodsve/lodsve-boot"></div></li><li><p><a href="https://github.com/lodsve/lodsve-framework">lodsve-framework</a> ï¼šLet our development of Spring very easy!</p>  <div class="github-widget" data-repo="lodsve/lodsve-framework"></div></li><li><p><a href="https://github.com/lodsve/lodsve-maven-archetype">lodsve-maven-archetype</a> ï¼šMaven archetypes to create a project with lodsve-framework!</p>  <div class="github-widget" data-repo="lodsve/lodsve-maven-archetype"></div></li><li><p><a href="https://github.com/lodsve/lodsve-maven-plugins">lodsve-maven-plugins</a> ï¼šmaven plugins for lodsve</p>  <div class="github-widget" data-repo="lodsve/lodsve-maven-plugins"></div></li></ul><h1 id="5-æŠ€èƒ½æ ˆ"><a href="#5-æŠ€èƒ½æ ˆ" class="headerlink" title="5. æŠ€èƒ½æ ˆ"></a>5. æŠ€èƒ½æ ˆ</h1><ul><li>åç«¯ä¸å¾®æœåŠ¡ï¼šç²¾é€š Javaã€Spring&#x2F;Spring Boot&#x2F;Spring Cloudï¼Œå…·å¤‡å¾®æœåŠ¡æ‹†åˆ†ã€æ²»ç†ä¸æ€§èƒ½ä¼˜åŒ–ç»éªŒï¼›ç†Ÿæ‚‰ Dubboã€REST è®¾è®¡ä¸æœåŠ¡æ²»ç†å®è·µã€‚</li><li>API ç½‘å…³ä¸å¹³å°åŒ–ï¼šç†Ÿæ‚‰ APISIX &#x2F; Nginx &#x2F; Luaï¼Œå…·å¤‡ç½‘å…³æ²»ç†ï¼ˆé‰´æƒã€é™æµã€ç†”æ–­ã€ç°åº¦&#x2F;è“ç»¿ï¼‰ä¸å¹³å°åŒ–èƒ½åŠ›å»ºè®¾ç»éªŒã€‚</li><li>å®¹å™¨åŒ–ä¸ DevOpsï¼šç†Ÿæ‚‰ Dockerã€K8Sï¼Œæ­å»ºè¿‡ CI&#x2F;CD æµç¨‹ä¸å·¥ç¨‹è§„èŒƒï¼Œå®è·µ Jenkins + Maven + GitLab ç­‰å·¥å…·é“¾ã€‚</li><li>æ•°æ®åº“ä¸ç¼“å­˜ï¼šç†Ÿç»ƒä½¿ç”¨ MySQLï¼Œå…·å¤‡ SQL ä¼˜åŒ–ä¸æ•…éšœæ’æŸ¥èƒ½åŠ›ï¼›ç†Ÿæ‚‰ Redisã€MongoDBã€Memcachedã€‚</li><li>ä¸­é—´ä»¶ä¸æ¶ˆæ¯ï¼šäº†è§£å¹¶å®è·µè¿‡ RabbitMQ ç­‰æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</li><li>æ„å»ºä¸å·¥ç¨‹ï¼šç†Ÿç»ƒä½¿ç”¨ Mavenã€Gradleï¼›å…³æ³¨å¯è§‚æµ‹æ€§ä¸ç¨³å®šæ€§å»ºè®¾ã€‚</li><li>ç¼–ç¨‹è¯­è¨€ï¼šå…·å¤‡ JavaScriptã€Pythonã€Groovyã€PHPã€Node.jsã€Scala çš„ä¸€å®šå®è·µèƒ½åŠ›ï¼Œç”¨äºè„šæœ¬ä¸å·¥å…·å¼€å‘ã€‚</li><li>é€šç”¨èƒ½åŠ›ï¼šå›¢é˜Ÿåä½œä¸åŸ¹å…»ã€å¿«é€Ÿå­¦ä¹ ä¸é—®é¢˜æ”»åšã€è‰¯å¥½çš„æ–‡æ¡£èƒ½åŠ›ä¸è·¨å›¢é˜Ÿæ²Ÿé€šã€‚</li></ul><h1 id="6-END"><a href="#6-END" class="headerlink" title="6. END"></a>6. END</h1><p>æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»æˆ‘çš„ç®€å†ï¼ŒæœŸå¾…èƒ½æœ‰æœºä¼šä¸æ‚¨å…±äº‹ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
